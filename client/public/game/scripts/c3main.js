// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let It=function(t){i=t},Ct=function(t){return t*r},Pt=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},Rt=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},At=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Et=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ot=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Dt=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},kt=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},Lt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},Nt=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},Bt=function(t){return t[0]*t[3]-t[2]*t[1]},Wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},jt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},Vt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},Ut=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},zt=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Jt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},qt=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},$t=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Xt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Yt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Kt=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Qt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ts=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},ss=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},is=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},es=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ns=function(t,s,e,n,r,h){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=n,o[4]=r,o[5]=h,o},rs=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},hs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},os=function(t){return t[0]*t[3]-t[1]*t[2]},as=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},us=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},cs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},fs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ds=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},ms=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},gs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},ys=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},ws=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Ss=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},vs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Ms=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-l)<=s*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=s*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=s*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},Gs=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},xs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Ts=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},_s=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Is=function(t,s,e,n,r,h,o,a,l){var u=new i(9);return u[0]=t,u[1]=s,u[2]=e,u[3]=n,u[4]=r,u[5]=h,u[6]=o,u[7]=a,u[8]=l,u},Cs=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},Ps=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Rs=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},As=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},Es=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},Fs=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},Os=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+v*l,t[7]=w*n+S*o+v*u,t[8]=w*r+S*a+v*c,t},Ds=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},ks=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},Ls=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Ns=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Bs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ws=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},js=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Vs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},Us=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,G=n*l-r*a,x=u*m-c*p,T=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,P=f*y-d*g,R=w*P-S*C+v*I+b*_-M*T+G*x;return R?(R=1/R,t[0]=(o*P-a*C+l*I)*R,t[1]=(a*_-h*P-l*T)*R,t[2]=(h*C-o*_+l*x)*R,t[3]=(n*C-e*P-r*I)*R,t[4]=(i*P-n*_+r*T)*R,t[5]=(e*_-i*C-r*x)*R,t[6]=(m*G-g*M+y*b)*R,t[7]=(g*v-p*G-y*S)*R,t[8]=(p*M-m*v+y*w)*R,t):null},Hs=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},zs=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Js=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},qs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},$s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ys=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ks=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Zs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=s*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=s*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-v)<=s*Math.max(1,Math.abs(c),Math.abs(v))},Qs=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},ti=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},si=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ii=function(t,s,e,n,r,h,o,a,l,u,c,f,d,p,m,g){var y=new i(16);return y[0]=t,y[1]=s,y[2]=e,y[3]=n,y[4]=r,y[5]=h,y[6]=o,y[7]=a,y[8]=l,y[9]=u,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=g,y},ei=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},ni=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ri=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},hi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,G=n*l-r*a,x=u*m-c*p,T=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,P=f*y-d*g,R=w*P-S*C+v*I+b*_-M*T+G*x;return R?(R=1/R,t[0]=(o*P-a*C+l*I)*R,t[1]=(n*C-e*P-r*I)*R,t[2]=(m*G-g*M+y*b)*R,t[3]=(f*M-c*G-d*b)*R,t[4]=(a*_-h*P-l*T)*R,t[5]=(i*P-n*_+r*T)*R,t[6]=(g*v-p*G-y*S)*R,t[7]=(u*G-f*v+d*S)*R,t[8]=(h*C-o*_+l*x)*R,t[9]=(e*_-i*C-r*x)*R,t[10]=(p*M-m*v+y*w)*R,t[11]=(c*v-u*M-d*w)*R,t[12]=(o*T-h*I-a*x)*R,t[13]=(i*I-e*T+n*x)*R,t[14]=(m*S-p*b-g*w)*R,t[15]=(u*b-c*S+f*w)*R,t):null},oi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,G=n*l-r*a,x=u*m-c*p,T=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*C+l*I,t[1]=n*C-e*P-r*I,t[2]=m*G-g*M+y*b,t[3]=f*M-c*G-d*b,t[4]=a*_-h*P-l*T,t[5]=i*P-n*_+r*T,t[6]=g*v-p*G-y*S,t[7]=u*G-f*v+d*S,t[8]=h*C-o*_+l*x,t[9]=e*_-i*C-r*x,t[10]=p*M-m*v+y*w,t[11]=c*v-u*M-d*w,t[12]=o*T-h*I-a*x,t[13]=i*I-e*T+n*x,t[14]=m*S-p*b-g*w,t[15]=u*b-c*S+f*w,t},ai=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-i*v+e*S)-n*(r*b-h*v+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},li=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],v=i[1],b=i[2],M=i[3];return t[0]=S*e+v*o+b*c+M*m,t[1]=S*n+v*a+b*f+M*g,t[2]=S*r+v*l+b*d+M*y,t[3]=S*h+v*u+b*p+M*w,S=i[4],v=i[5],b=i[6],M=i[7],t[4]=S*e+v*o+b*c+M*m,t[5]=S*n+v*a+b*f+M*g,t[6]=S*r+v*l+b*d+M*y,t[7]=S*h+v*u+b*p+M*w,S=i[8],v=i[9],b=i[10],M=i[11],t[8]=S*e+v*o+b*c+M*m,t[9]=S*n+v*a+b*f+M*g,t[10]=S*r+v*l+b*d+M*y,t[11]=S*h+v*u+b*p+M*w,S=i[12],v=i[13],b=i[14],M=i[15],t[12]=S*e+v*o+b*c+M*m,t[13]=S*n+v*a+b*f+M*g,t[14]=S*r+v*l+b*d+M*y,t[15]=S*h+v*u+b*p+M*w,t},ui=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},ci=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fi=function(t,i,e,n){var r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,G,x,T,_,I,C,P=n[0],R=n[1],A=n[2],E=Math.hypot(P,R,A);return E<s?null:(P*=E=1/E,R*=E,A*=E,r=Math.sin(e),o=1-(h=Math.cos(e)),a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],g=i[8],y=i[9],w=i[10],S=i[11],v=P*P*o+h,b=R*P*o+A*r,M=A*P*o-R*r,G=P*R*o-A*r,x=R*R*o+h,T=A*R*o+P*r,_=P*A*o+R*r,I=R*A*o-P*r,C=A*A*o+h,t[0]=a*v+f*b+g*M,t[1]=l*v+d*b+y*M,t[2]=u*v+p*b+w*M,t[3]=c*v+m*b+S*M,t[4]=a*G+f*x+g*T,t[5]=l*G+d*x+y*T,t[6]=u*G+p*x+w*T,t[7]=c*G+m*x+S*T,t[8]=a*_+f*I+g*C,t[9]=l*_+d*I+y*C,t[10]=u*_+p*I+w*C,t[11]=c*_+m*I+S*C,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},di=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},pi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},mi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},gi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},yi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},wi=function(t,i,e){var n,r,h,o=e[0],a=e[1],l=e[2],u=Math.hypot(o,a,l);return u<s?null:(o*=u=1/u,a*=u,l*=u,n=Math.sin(i),h=1-(r=Math.cos(i)),t[0]=o*o*h+r,t[1]=a*o*h+l*n,t[2]=l*o*h-a*n,t[3]=0,t[4]=o*a*h-l*n,t[5]=a*a*h+r,t[6]=l*a*h+o*n,t[7]=0,t[8]=o*l*h+a*n,t[9]=a*l*h-o*n,t[10]=l*l*h+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Si=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Mi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gi=function(t,s){var e=new i(3),n=-s[0],r=-s[1],h=-s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7],f=n*n+r*r+h*h+o*o;return f>0?(e[0]=2*(a*o+c*n+l*h-u*r)/f,e[1]=2*(l*o+c*r+u*n-a*h)/f,e[2]=2*(u*o+c*h+a*r-l*n)/f):(e[0]=2*(a*o+c*n+l*h-u*r),e[1]=2*(l*o+c*r+u*n-a*h),e[2]=2*(u*o+c*h+a*r-l*n)),Mi(t,s,e),t},xi=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Ti=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},_i=function(t,s){var e=new i(3);Ti(e,s);var n=1/e[0],r=1/e[1],h=1/e[2],o=s[0]*n,a=s[1]*r,l=s[2]*h,u=s[4]*n,c=s[5]*r,f=s[6]*h,d=s[8]*n,p=s[9]*r,m=s[10]*h,g=o+c+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(a-u)/y):o>c&&o>m?(y=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(d+l)/y):c>m?(y=2*Math.sqrt(1+c-o-m),t[3]=(d-l)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t},Ii=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,v=a*p,b=l*m,M=u*d,G=c*p,x=f*m,T=g+v+x,_=0;return T>0?(_=2*Math.sqrt(T+1),t[3]=.25*_,t[0]=(b-G)/_,t[1]=(M-w)/_,t[2]=(y-S)/_):g>v&&g>x?(_=2*Math.sqrt(1+g-v-x),t[3]=(b-G)/_,t[0]=.25*_,t[1]=(y+S)/_,t[2]=(M+w)/_):v>x?(_=2*Math.sqrt(1+v-g-x),t[3]=(M-w)/_,t[0]=(y+S)/_,t[1]=.25*_,t[2]=(b+G)/_):(_=2*Math.sqrt(1+x-g-v),t[3]=(y-S)/_,t[0]=(M+w)/_,t[1]=(b+G)/_,t[2]=.25*_),t},Ci=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,v=e[0],b=e[1],M=e[2];return t[0]=(1-(p+g))*v,t[1]=(f+S)*v,t[2]=(d-w)*v,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Pi=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,v=a*c,b=e[0],M=e[1],G=e[2],x=n[0],T=n[1],_=n[2],I=(1-(m+y))*b,C=(d+v)*b,P=(p-S)*b,R=(d-v)*M,A=(1-(f+y))*M,E=(g+w)*M,F=(p+S)*G,O=(g-w)*G,D=(1-(f+m))*G;return t[0]=I,t[1]=C,t[2]=P,t[3]=0,t[4]=R,t[5]=A,t[6]=E,t[7]=0,t[8]=F,t[9]=O,t[10]=D,t[11]=0,t[12]=i[0]+x-(I*x+R*T+F*_),t[13]=i[1]+T-(C*x+A*T+O*_),t[14]=i[2]+_-(P*x+E*T+D*_),t[15]=1,t},Ri=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ai=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},Ei=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},Fi=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},Oi=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Di=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},ki=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},Li=function(t,i,e,n){var r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2],w=n[0],S=n[1],v=n[2],b=e[0],M=e[1],G=e[2];return Math.abs(m-b)<s&&Math.abs(g-M)<s&&Math.abs(y-G)<s?ni(t):(c=m-b,f=g-M,d=y-G,r=S*(d*=p=1/Math.hypot(c,f,d))-v*(f*=p),h=v*(c*=p)-w*d,o=w*f-S*c,(p=Math.hypot(r,h,o))?(r*=p=1/p,h*=p,o*=p):(r=0,h=0,o=0),a=f*o-d*h,l=d*r-c*o,u=c*h-f*r,(p=Math.hypot(a,l,u))?(a*=p=1/p,l*=p,u*=p):(a=0,l=0,u=0),t[0]=r,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(r*m+h*g+o*y),t[13]=-(a*m+l*g+u*y),t[14]=-(c*m+f*g+d*y),t[15]=1,t)},Ni=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Bi=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Wi=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},ji=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Vi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ui=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Hi=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ji=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],y=t[14],w=t[15],S=i[0],v=i[1],b=i[2],M=i[3],G=i[4],x=i[5],T=i[6],_=i[7],I=i[8],C=i[9],P=i[10],R=i[11],A=i[12],E=i[13],F=i[14],O=i[15];return Math.abs(e-S)<=s*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-v)<=s*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=s*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-M)<=s*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-G)<=s*Math.max(1,Math.abs(o),Math.abs(G))&&Math.abs(a-x)<=s*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=s*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-_)<=s*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-I)<=s*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-C)<=s*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-P)<=s*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-R)<=s*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-A)<=s*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-E)<=s*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-F)<=s*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(w-O)<=s*Math.max(1,Math.abs(w),Math.abs(O))},qi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},$i=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Xi=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Yi=function(t,s,e){var n=new i(3);return n[0]=t,n[1]=s,n[2]=e,n},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Zi=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Qi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},te=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},se=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ie=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},ee=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},ne=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},re=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},he=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},oe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},le=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ue=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},ce=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},fe=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},de=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},pe=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},me=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},ge=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ye=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},we=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},Se=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(ge(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ve=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},be=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},Me=function(t,s){s=s||1;var i=2*e()*Math.PI,n=2*e()-1,r=Math.sqrt(1-n*n)*s;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*s,t},Ge=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},xe=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},Te=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},_e=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ie=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ce=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Pe=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&ge(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},Re=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Ae=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ee=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Fe=function(t,i){var e=t[0],n=t[1],r=t[2],h=i[0],o=i[1],a=i[2];return Math.abs(e-h)<=s*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))},Oe=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},De=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},ke=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Le=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ne=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Be=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},We=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ve=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ue=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},ze=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Je=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},qe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},$e=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Xe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ye=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Ke=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Ze=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Qe=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},tn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},sn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},en=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},nn=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},rn=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},hn=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},on=function(t,s){var i,n,r,h,o,a;s=s||1;do{o=(i=2*e()-1)*i+(n=2*e()-1)*n}while(o>=1);do{a=(r=2*e()-1)*r+(h=2*e()-1)*h}while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*n,t[2]=s*r*l,t[3]=s*h*l,t},an=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},ln=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},un=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},cn=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},fn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},dn=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},pn=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},mn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},gn=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},yn=function(t,i){var e=2*Math.acos(i[3]),n=Math.sin(e/2);return n>s?(t[0]=i[0]/n,t[1]=i[1]/n,t[2]=i[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},wn=function(t,s){var i=J(t,s);return Math.acos(2*i*i-1)},Sn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},vn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},bn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},Mn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},Gn=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},xn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},Tn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},_n=function(t,s,i){return Tn(t,s),z(t,t,i),xn(t,t),t},In=function(t,i,e,n){var r,h,o,a,l,u=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],g=e[2],y=e[3];return(h=u*p+c*m+f*g+d*y)<0&&(h=-h,p=-p,m=-m,g=-g,y=-y),1-h>s?(r=Math.acos(h),o=Math.sin(r),a=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(a=1-n,l=n),t[0]=a*u+l*p,t[1]=a*c+l*m,t[2]=a*f+l*g,t[3]=a*d+l*y,t},Cn=function(t){var s=e(),i=e(),n=e(),r=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=h*Math.sin(2*Math.PI*n),t[3]=h*Math.cos(2*Math.PI*n),t},Pn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},Rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},An=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},En=function(t,s,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,h=Math.PI/360;s*=h,e*=h,i*=h;var o=Math.sin(s),a=Math.cos(s),l=Math.sin(i),u=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(r){case"xyz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"xzy":t[0]=o*u*f-a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f+o*l*c;break;case"yxz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;case"yzx":t[0]=o*u*f+a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f-o*l*c;break;case"zxy":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"zyx":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;default:throw new Error("Unknown angle order "+r)}return t},Fn=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},On=function(t,i){return Math.abs(nn(t,i))>=1-s},Dn=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},kn=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Ln=function(t,s,e,n,r,h,o,a){var l=new i(8);return l[0]=t,l[1]=s,l[2]=e,l[3]=n,l[4]=r,l[5]=h,l[6]=o,l[7]=a,l},Nn=function(t,s,e,n,r,h,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=n;var l=.5*r,u=.5*h,c=.5*o;return a[4]=l*n+u*e-c*s,a[5]=u*n+c*t-l*e,a[6]=c*n+l*s-u*t,a[7]=-l*t-u*s-c*e,a},Bn=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Wn=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},jn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Vn=function(t,s){var e=pn();_i(e,s);var n=new i(3);return xi(n,s),Bn(t,e,n),t},Un=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Hn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},zn=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Jn=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},qn=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},$n=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Xn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Yn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return vn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Kn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return bn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Zn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return Mn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Qn=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},tr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},sr=function(t,i,e,n){if(Math.abs(n)<s)return Un(t,i);var r=Math.hypot(e[0],e[1],e[2]);n*=.5;var h=Math.sin(n),o=h*e[0]/r,a=h*e[1]/r,l=h*e[2]/r,u=Math.cos(n),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*u+p*o+f*l-d*a,t[1]=f*u+p*a+d*o-c*l,t[2]=d*u+p*l+c*a-f*o,t[3]=p*u-c*o-f*a-d*l;var m=i[4],g=i[5],y=i[6],w=i[7];return t[4]=m*u+w*o+g*l-y*a,t[5]=g*u+w*a+y*o-m*l,t[6]=y*u+w*l+m*a-g*o,t[7]=w*u-m*o-g*a-y*l,t},ir=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},er=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},nr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},rr=function(t,s,i,e){var n=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},hr=function(t,s){var i=ut(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},or=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ar=function(t,s){var i=ut(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},lr=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ur=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},cr=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=s*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=s*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-w)<=s*Math.max(1,Math.abs(u),Math.abs(w))},fr=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},dr=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},pr=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},mr=function(t,s){return t[0]=s[0],t[1]=s[1],t},gr=function(t,s,i){return t[0]=s,t[1]=i,t},yr=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},wr=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Sr=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},vr=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},br=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Mr=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Gr=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},xr=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Tr=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},_r=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Ir=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Cr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},Pr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Rr=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},Ar=function(t){var s=t[0],i=t[1];return s*s+i*i},Er=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Fr=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Or=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Dr=function(t,s){return t[0]*s[0]+t[1]*s[1]},kr=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},Lr=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Nr=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Br=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Wr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},jr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Vr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Ur=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},Hr=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},zr=function(t){return t[0]=0,t[1]=0,t},Jr=function(t){return"vec2("+t[0]+", "+t[1]+")"},qr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},$r=function(t,i){var e=t[0],n=t[1],r=i[0],h=i[1];return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(n-h)<=s*Math.max(1,Math.abs(n),Math.abs(h))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,n="zyx",r=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return i},h:e,o:n,l:It,u:Ct,equals:Pt},o=Wt,a=Xt,l=Object.freeze({__proto__:null,create:Rt,clone:At,m:Et,identity:Ft,S:Ot,set:Dt,v:kt,M:Lt,G:Nt,T:Bt,multiply:Wt,rotate:jt,scale:Vt,_:Ut,I:Ht,C:zt,P:Jt,R:qt,add:$t,A:Xt,F:Yt,equals:Kt,O:Zt,D:Qt,mul:o,sub:a}),u=as,c=ws,f=Object.freeze({__proto__:null,create:ts,clone:ss,m:is,identity:es,S:ns,set:rs,M:hs,T:os,multiply:as,rotate:ls,scale:us,translate:cs,_:fs,I:ds,L:ps,C:ms,P:gs,add:ys,A:ws,O:Ss,D:vs,F:bs,equals:Ms,mul:u,sub:c}),d=Os,p=$s,m=Object.freeze({__proto__:null,create:Gs,N:xs,clone:Ts,m:_s,S:Is,set:Cs,identity:Ps,v:Rs,M:As,G:Es,T:Fs,multiply:Os,translate:Ds,rotate:ks,scale:Ls,L:Ns,_:Bs,I:Ws,B:js,W:Vs,j:Us,V:Hs,C:zs,P:Js,add:qs,A:$s,O:Xs,D:Ys,F:Ks,equals:Zs,mul:d,sub:p}),g=Ei,y=Di,w=li,S=Vi,v=Object.freeze({__proto__:null,create:Qs,clone:ti,m:si,S:ii,set:ei,identity:ni,v:ri,M:hi,G:oi,T:ai,multiply:li,translate:ui,scale:ci,rotate:fi,U:di,H:pi,J:mi,L:gi,I:yi,_:wi,$:Si,X:vi,Y:bi,K:Mi,Z:Gi,tt:xi,st:Ti,it:_i,et:Ii,nt:Ci,rt:Pi,W:Ri,ht:Ai,ot:Ei,perspective:g,lt:Fi,ut:Oi,ct:Di,ft:y,dt:ki,gt:Li,yt:Ni,C:Bi,P:Wi,add:ji,A:Vi,O:Ui,D:Hi,F:zi,equals:Ji,mul:w,sub:S}),b=te,M=se,G=ie,x=ue,T=ce,_=Xi,I=fe,t=qi(),C=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},P=Object.freeze({__proto__:null,create:qi,clone:$i,length:Xi,S:Yi,m:Ki,set:Zi,add:Qi,A:te,multiply:se,wt:ie,ceil:ee,floor:ne,min:re,max:he,round:oe,scale:ae,St:le,vt:ue,bt:ce,Mt:fe,Gt:de,inverse:pe,normalize:me,xt:ge,Tt:ye,_t:we,It:Se,Ct:ve,Pt:be,random:Me,Rt:Ge,At:xe,Et:Te,U:_e,H:Ie,J:Ce,angle:Pe,Ft:Re,C:Ae,F:Ee,equals:Fe,sub:b,mul:M,div:G,Ot:x,Dt:T,kt:_,Lt:I,forEach:C}),R=We,A=je,E=Ve,F=Ye,O=Ke,D=Ze,k=Qe,L=function(){var t=Oe();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),N=Object.freeze({__proto__:null,create:Oe,clone:De,S:ke,m:Le,set:Ne,add:Be,A:We,multiply:je,wt:Ve,ceil:Ue,floor:He,min:ze,max:Je,round:qe,scale:$e,St:Xe,vt:Ye,bt:Ke,length:Ze,Mt:Qe,Gt:tn,inverse:sn,normalize:en,xt:nn,Tt:rn,_t:hn,random:on,Rt:an,Et:ln,Ft:un,C:cn,F:fn,equals:dn,sub:R,mul:A,div:E,Ot:F,Dt:O,kt:D,Lt:k,forEach:L}),B=De,W=ke,j=Le,V=Ne,U=Be,H=Sn,z=$e,J=nn,q=hn,X=$=Ze,K=Y=Qe,Z=en,Q=fn,tt=function(){var t=qi(),s=Yi(1,0,0),i=Yi(0,1,0);return function(e,n,r){var h=ge(n,r);return h<-.999999?(ye(t,s,n),_(t)<1e-6&&ye(t,i,n),me(t,t),gn(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ye(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,Z(e,e))}}(),st=function(){var t=pn(),s=pn();return function(i,e,n,r,h,o){return In(t,e,h,o),In(s,n,r,o),In(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=Gs();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],Z(s,An(s,t))}}(),et=Object.freeze({__proto__:null,create:pn,identity:mn,Nt:gn,Bt:yn,Wt:wn,multiply:Sn,U:vn,H:bn,J:Mn,jt:Gn,exp:xn,Vt:Tn,pow:_n,It:In,random:Cn,M:Pn,Ut:Rn,Ht:An,zt:En,C:Fn,clone:B,S:W,m:j,set:V,add:U,mul:H,scale:z,xt:J,_t:q,length:$,kt:X,Mt:Y,Lt:K,normalize:Z,F:Q,equals:On,Jt:tt,qt:st,$t:it}),nt=j,rt=j,ht=er,ot=J,lt=at=$,ct=ut=Y,ft=Object.freeze({__proto__:null,create:Dn,clone:kn,S:Ln,Xt:Nn,K:Bn,L:Wn,_:jn,N:Vn,m:Un,identity:Hn,set:zn,Yt:nt,Kt:Jn,Zt:rt,Qt:qn,tt:$n,translate:Xn,U:Yn,H:Kn,J:Zn,ts:Qn,ss:tr,es:sr,add:ir,multiply:er,mul:ht,scale:nr,xt:ot,_t:rr,M:hr,Ut:or,length:at,kt:lt,Mt:ut,Lt:ct,normalize:ar,C:lr,F:ur,equals:cr}),dt=Rr,pt=wr,mt=Sr,gt=vr,yt=Cr,wt=Pr,St=Ar,vt=function(){var t=fr();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),bt=Object.freeze({__proto__:null,create:fr,clone:dr,S:pr,m:mr,set:gr,add:yr,A:wr,multiply:Sr,wt:vr,ceil:br,floor:Mr,min:Gr,max:xr,round:Tr,scale:_r,St:Ir,vt:Cr,bt:Pr,length:Rr,Mt:Ar,Gt:Er,inverse:Fr,normalize:Or,xt:Dr,Tt:kr,_t:Lr,random:Nr,ns:Br,rs:Wr,At:jr,Rt:Vr,rotate:Ur,angle:Hr,Ft:zr,C:Jr,F:qr,equals:$r,kt:dt,sub:pt,mul:mt,div:gt,Ot:yt,Dt:wt,Lt:St,forEach:vt}),globalThis.hs=h,globalThis.hs.ls=l,globalThis.hs.us=f,globalThis.hs.cs=m,globalThis.hs.fs=v,globalThis.hs.ds=et,globalThis.hs.ps=ft,globalThis.hs.gs=bt,globalThis.hs.ys=P,globalThis.hs.ws=N}var t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,G,x,T,_,I,C,P,R,A,E,F,O,D,k,L,N,B,W,j,V,U,H,z,J,q,$,X,Y,K,Z,Q,tt,st,it,et,nt,rt,ht,ot,at,lt,ut,ct,ft,dt,pt,mt,gt,yt,wt,St,vt,bt,Mt,Gt,xt,Tt;{let Xr=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],bh(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Yr=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Kr=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Zr=function(t,s,i){return Kr(t,s,i)>0},Qr=function(t,s,i){return Kr(t,s,i)>=0},th=function(t,s,i){return Kr(t,s,i)<0},sh=function(t,s,i){return Kr(t,s,i)<=0},ih=function(t,s,i,e){if(e){var n=Mt,r=Gt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Kr(t,s,i)},eh=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},nh=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},rh=function(t){t.length=0},hh=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},oh=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Zr(nh(t,s-1),nh(t,s),nh(t,s+1))&&(ah(t),!0)},ah=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},lh=function(t,s){return th(nh(t,s-1),nh(t,s),nh(t,s+1))},uh=function(t,s,i){var e,n,r=xt,h=Tt;if(Qr(nh(t,s+1),nh(t,s),nh(t,i))&&sh(nh(t,s-1),nh(t,s),nh(t,i)))return!1;n=eh(nh(t,s),nh(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Qr(nh(t,s),nh(t,i),nh(t,o+1))&&sh(nh(t,s),nh(t,i),nh(t,o))&&(r[0]=nh(t,s),r[1]=nh(t,i),h[0]=nh(t,o),h[1]=nh(t,o+1),e=Xr(r,h),eh(nh(t,s),e)<n))return!1;return!0},ch=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Yr(nh(t,s),nh(t,i),nh(t,e),nh(t,e+1)))return!1;return!0},fh=function(t,s,i,e){var n=e||[];if(rh(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},dh=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(lh(t,h))for(var o=0;o<t.length;++o)if(uh(t,h,o)){i=dh(fh(t,h,o,n)),e=dh(fh(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([nh(t,h),nh(t,o)]))}return s},ph=function(t){var s=dh(t);return s.length>0?mh(t,s):[t]},mh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=mh(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[fh(t,e,r),fh(t,r,e)]},gh=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Yr(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Yr(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},yh=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return bh(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},wh=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(lh(S,b)){i.push(S[b]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Zr(nh(S,b-1),nh(S,b),nh(S,M))&&sh(nh(S,b-1),nh(S,b),nh(S,M-1))&&(l=yh(nh(S,b-1),nh(S,b),nh(S,M),nh(S,M-1)),th(nh(S,b+1),nh(S,b),l)&&(f=eh(S[b],l))<c&&(c=f,a=l,m=M)),Zr(nh(S,b+1),nh(S,b),nh(S,M+1))&&sh(nh(S,b+1),nh(S,b),nh(S,M))&&(l=yh(nh(S,b+1),nh(S,b),nh(S,M),nh(S,M+1)),Zr(nh(S,b-1),nh(S,b),l)&&(f=eh(S[b],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(hh(y,S,b,p+1),y.push(l),w.push(l),0!==m&&hh(w,S,m,S.length),hh(w,S,0,b+1)):(0!==b&&hh(y,S,b,S.length),hh(y,S,0,p+1),y.push(l),w.push(l),hh(w,S,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)Qr(nh(S,b-1),nh(S,b),nh(S,M))&&sh(nh(S,b+1),nh(S,b),nh(S,M))&&(f=eh(nh(S,b),nh(S,M)))<d&&ch(S,b,M)&&(d=f,g=M%t.length);b<g?(hh(y,S,b,g+1),0!==g&&hh(w,S,g,v.length),hh(w,S,0,b+1)):(0!==b&&hh(y,S,b,v.length),hh(y,S,0,g+1),hh(w,S,g,b+1))}return y.length<w.length?(wh(y,s,i,e,n,r,h),wh(w,s,i,e,n,r,h)):(wh(w,s,i,e,n,r,h),wh(y,s,i,e,n,r,h)),s}return s.push(t),s},Sh=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)ih(nh(t,e-1),nh(t,e),nh(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},vh=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)Mh(e,t[n],s)&&t.splice(i,1)},bh=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},Mh=function(t,s,i){return bh(t[0],s[0],i)&&bh(t[1],s[1],i)};Mt=[],Gt=[],xt=[],Tt=[],self.Ss={vs:ph,bs:wh,Ms:gh,Gs:Sh,xs:vh,Ts:oh}}{let Gh=!1,xh=!1,Th="dev";const _h=Symbol("Construct internal API token");let Ih=16;const Ch=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(Ih<=0)throw new Error("cannot obtain internal API token");return--Ih,_h}static Cs(){Gh=!0}static Ps(){return Gh}static Rs(){xh=!0}static As(){return xh}static Es(t){Th=t}static Fs(){return Th}static Os(){return"final"===Th}};Ch.Ds=!1,Ch.ks=!1,Ch.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ls={}}{const Ph=self._s;Ph.Ns=class{constructor(t){this.Bs=t,this.Ws=new Map,this.js()}js(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Us(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Hs(t){return this.Ws.has(t)}zs(t){const s=this.Ws.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}qs(t){this.Bs=t,this.Ws.clear(),this.js()}},Ph.$s=new Ph.Ns(location.search),Ph.Xs=new Ph.Ns(location.hash),Ph.$s.Hs("perf")&&(Ph.Ys=!0),"dev"!==Ph.$s.zs("mode")&&Ph.Es("final")}{let Rh=function(t){const s=parseFloat(t);return Fh.get(s)||(s>=13?"11":"NT "+t)};0;const Ah=self._s,Eh="(unknown)";Ah.Ks={Zs:Eh,Qs:Eh,ti:Eh,si:Eh,ii:NaN,ei:Eh,ni:"browser",ri:!0,hi:!1,oi:!1,ai:!1,li:async()=>{}};const Fh=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Oh=navigator.userAgent,Dh=navigator.userAgentData;if(Dh&&Dh.brands.length>0){let kh=function(t){let s="",i="",e="",n="";for(const r of t){const t=Lh.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Nh.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(Ah.Ks.ti="Chromium",Ah.Ks.si=n),Ah.Ks.ti=s||Eh,Ah.Ks.si=i||Eh,Ah.Ks.ei=e||Eh};Ah.Ks.Zs=Dh.platform,Ah.Ks.hi=Dh.mobile,Ah.Ks.ri=!Ah.Ks.hi;const Lh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Nh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);kh(Dh.brands);let Bh=!1;Ah.Ks.li=async()=>{if(!Bh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);kh(t.fullVersionList),"Windows"===Ah.Ks.Zs?Ah.Ks.Qs=Rh(t.platformVersion):Ah.Ks.Qs=t.platformVersion,Bh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Wh=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Oh);if(i){s(i);break}}};Wh(/windows\s+nt\s+([\d\.]+)/i,t=>{Ah.Ks.Zs="Windows";const s=t[1];Ah.Ks.Qs=Rh(s)}),Wh(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{Ah.Ks.Zs="macOS",Ah.Ks.Qs=t[1].replace(/_/g,".")}),Wh(/CrOS/,()=>{Ah.Ks.Zs="Chrome OS"}),Wh(/linux|openbsd|freebsd|netbsd/i,()=>{Ah.Ks.Zs="Linux"}),Wh(/android/i,()=>{Ah.Ks.Zs="Android"}),Wh(/android\s+([\d\.]+)/i,t=>{Ah.Ks.Zs="Android",Ah.Ks.Qs=t[1]}),Ah.Ks.Zs===Eh&&(Wh(/(iphone|ipod|ipad)/i,t=>{Ah.Ks.Zs="iOS"}),Wh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{Ah.Ks.Zs="iOS",Ah.Ks.Qs=t[1].replace(/_/g,".")}));const jh=/chrome\//i.test(Oh),Vh=/chromium\//i.test(Oh),Uh=/edg\//i.test(Oh),Hh=/OPR\//.test(Oh),zh=/nwjs/i.test(Oh),Jh=/safari\//i.test(Oh),qh=/webkit/i.test(Oh);Uh||Hh||Wh(/chrome\/([\d\.]+)/i,t=>{Ah.Ks.ti="Chrome",Ah.Ks.si=t[1],Ah.Ks.ei="Chromium"}),Wh(/edg\/([\d\.]+)/i,t=>{Ah.Ks.ti="Edge",Ah.Ks.si=t[1],Ah.Ks.ei="Chromium"}),Wh(/OPR\/([\d\.]+)/,t=>{Ah.Ks.ti="Opera",Ah.Ks.si=t[1],Ah.Ks.ei="Chromium"}),Wh(/chromium\/([\d\.]+)/i,t=>{Ah.Ks.ti="Chromium",Ah.Ks.si=t[1],Ah.Ks.ei="Chromium"}),Wh(/nwjs\/[0-9.]+/i,t=>{Ah.Ks.ti="NW.js",Ah.Ks.si=t[1],Ah.Ks.ei="Chromium",Ah.Ks.ni="nwjs"}),Wh(/firefox\/([\d\.]+)/i,t=>{Ah.Ks.ti="Firefox",Ah.Ks.si=t[1],Ah.Ks.ei="Gecko"}),!Jh||jh||Vh||Uh||Hh||zh||(Ah.Ks.ti="Safari",Ah.Ks.ei="WebKit",Wh(/version\/([\d\.]+)/i,t=>{Ah.Ks.si=t[1]}),Wh(/crios\/([\d\.]+)/i,t=>{Ah.Ks.ti="Chrome for iOS",Ah.Ks.si=t[1]}),Wh(/fxios\/([\d\.]+)/i,t=>{Ah.Ks.ti="Firefox for iOS",Ah.Ks.si=t[1]}),Wh(/edgios\/([\d\.]+)/i,t=>{Ah.Ks.ti="Edge for iOS",Ah.Ks.si=t[1]})),Ah.Ks.ei===Eh&&qh&&(Ah.Ks.ei="WebKit"),"Android"===Ah.Ks.Zs&&"Safari"===Ah.Ks.ti&&(Ah.Ks.ti="Stock");const $h=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Ah.Ks.Zs)||"nwjs"===Ah.Ks.ni;Ah.Ks.ri=$h,Ah.Ks.hi=!$h}"Chrome"===Ah.Ks.ti&&"browser"===Ah.Ks.ni&&/wv\)/.test(Oh)&&(Ah.Ks.ni="webview"),"nwjs"!==Ah.Ks.ni&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Ah.Ks.ni="webapp"),Ah.Ks.ii=parseFloat(Ah.Ks.si);"macOS"===Ah.Ks.Zs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Ah.Ks.Zs="iOS",Ah.Ks.Qs=Ah.Ks.si,Ah.Ks.ri=!1,Ah.Ks.hi=!0,Ah.Ks.ai=!0),Ah.Ks.oi="macOS"===Ah.Ks.Zs||"iOS"===Ah.Ks.Zs}{let Xh=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},Yh=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Kh=function(t,s){return oo(t,s)},Zh=function(t,s){return oo(t,s,!0)},Qh=function(t){to(t);let s=no.get(t);return s instanceof Promise||(s=ao(t),no.set(t,s),s.catch(s=>no.delete(t))),s},to=function(t){if("string"!=typeof t)throw new TypeError("expected string")},so=function(t,s){const i=t.objectStore(eo).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};0;const io=2,eo="keyvaluepairs",no=new Map,ro="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ho="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function oo(t,s,i=!1,e=!0){const n=await Qh(t);try{return s(n.transaction([eo],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return no.delete(t),oo(t,s,i,!1);throw n}}async function ao(t){to(t);const s=indexedDB.open(t,io);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(eo)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Xh(s)}class lo{constructor(t){to(t),this.name=t}async ready(){await Qh(this.name)}set(t,s){return to(t),Zh(this.name,async i=>{const e=Xh(i.objectStore(eo).put(s,t)),n=Yh(i);await Promise.all([n,e])})}get(t){return to(t),Kh(this.name,async s=>{const i=Xh(s.objectStore(eo).get(t)),e=Yh(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return to(t),Zh(this.name,async s=>{const i=Xh(s.objectStore(eo).delete(t)),e=Yh(s);await Promise.all([e,i])})}clear(){return Zh(this.name,async t=>{const s=Xh(t.objectStore(eo).clear()),i=Yh(t);await Promise.all([i,s])})}keys(){return Kh(this.name,async t=>{let s;s=ho?Xh(t.objectStore(eo).getAllKeys()):so(t,"keys");const i=Yh(t),[e,n]=await Promise.all([i,s]);return n})}values(){return Kh(this.name,async t=>{let s;s=ro?Xh(t.objectStore(eo).getAll()):so(t,"values");const i=Yh(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return Kh(this.name,async t=>{const s=so(t,"entries"),i=Yh(t),[e,n]=await Promise.all([i,s]);return n})}}self.ci=lo}{let uo=function(t){throw new Error(`"${t}" is not implemented`)},co=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},fo=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};0;const po=self.ci,mo=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class go{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of mo)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async gi(t){const s=this.pi.get(t),i=await fo(s);return void 0===i?null:i}async yi(t,s){s=await fo(s),this.pi.set(t,s)}wi(t){this.pi.delete(t)}Si(){this.pi.clear()}bi(){return Array.from(this.pi.keys())}Mi(){return this.di}Gi(){return this.pi}xi(t){this.pi=t}async getItem(t,s){if(co(s),this.di)return await this.gi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.gi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(co(i),void 0===s&&(s=null),this.di)await this.yi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.yi(t,s)}}async removeItem(t,s){if(co(s),this.di)this.wi(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.wi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(co(t),this.di)this.Si();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.Si():console.error("Error clearing storage: ",t)}}async keys(t){if(co(t),this.di)return this.bi();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.bi();console.error("Error getting storage keys: ",t)}return s}ready(t){return co(t),this.di?Promise.resolve(!0):this.fi.ready()}Ti(t){if(t._i)return new go(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new po(s);return new go(i)}}length(t){uo("localforage.length()")}key(t,s){uo("localforage.key()")}iterate(t,s){uo("localforage.iterate()")}Ii(t){uo("localforage.setDriver()")}config(t){uo("localforage.config()")}Ci(t){uo("localforage.defineDriver()")}Pi(){uo("localforage.driver()")}supports(t){uo("localforage.supports()")}dropInstance(){uo("localforage.dropInstance()")}}self.localforage=new go(new po("localforage"))}{const yo=self._s;if(yo.Ri={},yo.Ri.Ai=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),yo.Ri.Ei="undefined"!=typeof HTMLDialogElement,yo.Ri.Fi=!!self.requestIdleCallback,yo.Ri.ImageBitmap=!!self.createImageBitmap,yo.Ri.ImageBitmapOptions=!1,yo.Ri.Oi=!1,yo.Ri.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{yo.Ri.ImageBitmapOptions=!0}).catch(()=>{yo.Ri.ImageBitmapOptions=!1})}catch(wo){yo.Ri.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{yo.Ri.Oi=10===t.width&&10===t.height}).catch(()=>{yo.Ri.Oi=!1})}catch(So){yo.Ri.Oi=!1}}if(yo.Ri.Di=!(!navigator.clipboard||!navigator.clipboard.readText),yo.Ri.ki=!(!navigator.permissions||!navigator.permissions.query),yo.Ri.Li=!1,yo.Ri.ki){const vo={name:"clipboard-read"};navigator.permissions.query(vo).then(()=>{yo.Ri.Li=!0}).catch(()=>{yo.Ri.Li=!1})}yo.Ri.Ni=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),yo.Ri.Bi="undefined"!=typeof Proxy,yo.Ri.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,yo.Ri.ji="function"==typeof fetch,yo.Ri.Vi=!!(self.isSecureContext&&"Opera"!==yo.Ks.ti&&navigator.storage&&navigator.storage.persist),yo.Ri.Ui=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),yo.Ri.Hi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===yo.Ks.Zs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),yo.Ri.ImageDecoder=void 0!==self.ImageDecoder,yo.Ri.zi=!!self.VideoEncoder,yo.Ri.Ji=!!self.showOpenFilePicker,yo.Ri.$i=!!self.queryLocalFonts,yo.Ri.UserActivation=!!navigator.userActivation,yo.Ri.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),yo.Ri.Xi=i&&"image/webp"===i.type}catch(t){yo.Ri.Xi=!1}})()}{const bo=self._s;if(!String.prototype.trimStart){const Mo=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(Mo,"")}}if(!String.prototype.trimEnd){const Go=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(Go,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(bo.Yi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let xo=function(t,s){return t.reduce((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,xo(i,s-1)),t):(t.push(i),t),[])};Array.prototype.flat=function(t=1){return xo(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let To=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+_o.Ki();console.error(s)};0;const _o=self._s;self.assert=function(t,s){t||To(s)}}{const Io=self._s,Co=self.Ls;Io.Zi=function(t){return"number"==typeof t},Io.Qi=function(t){return Io.Zi(t)&&isFinite(t)},Io.te=function(t){if(!Io.Zi(t))throw new TypeError("expected number")},Io.se=function(t){Io.ie(t)},Io.ee=function(t,s,i){if(!Io.Zi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},Io.ne=function(...t){for(let s of t);},Io.re=function(t){if(!Io.Qi(t))throw new TypeError("expected finite number")},Io.he=function(t){Io.ie(t)},Io.oe=function(...t){for(let s of t);},Io.ae=function(t){return"string"==typeof t},Io.le=function(t){if(!Io.ae(t))throw new TypeError("expected string")},Io.ue=function(t){Io.ie(t)},Io.ce=function(...t){for(let s of t);},Io.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},Io.de=function(t){if(!Io.fe(t))throw new TypeError("expected simple object")},Io.pe=function(t){if(!Io.ie(t)&&!Io.fe(t))throw new TypeError("expected simple object")},Io.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},Io.ge=function(t){if(!Io.me(t))throw new TypeError("expected object")},Io.ye=function(t){Io.ie(t)},Io.we=function(...t){for(let s of t);},Io.Se=function(t){return Io.ve(t,Blob)&&"string"==typeof t.name},Io.be=function(t){if(!Io.Se(t))throw new TypeError("expected file")},Io.Me=function(t){Io.ie(t)},Io.Ge=function(t){return Array.isArray(t)},Io.xe=function(t){if(!Io.Ge(t))throw new TypeError("expected array")},Io.Te=function(t){Io.ie(t)},Io._e=function(...t){for(let s of t);},Io.Ie=function(t){return!(!Io.Ge(t)||t.length&&!Io.Ge(t[0]))},Io.Ce=function(t){if(!Io.Ie(t))throw new TypeError("expected 2d array");for(let s of t)if(!Io.Ge(s))throw new TypeError("expected 2d array")},Io.Pe=function(t){Io.ie(t)},Io.Re=function(t){return"function"==typeof t},Io.Ae=function(t,s){if(!Io.Re(t))throw new TypeError("expected function");if(!Io.ie(s)&&t!==s)throw new TypeError("expected same function reference")},Io.Ee=function(t){Io.ie(t)},Io.Fe=function(...t){for(let s of t);},Io.Oe=function(t,...s){if(!Io.Re(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!Io.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},Io.De=function(...t){if(!Io.ie(t))for(let s of t);},Io.ke=function(t,s){return t instanceof s},Io.Le=function(t,...s){for(let i of s)if(Io.ke(t,i))return!0;return!1},Io.Ne=function(t,s){if(!Io.ke(t,s))throw new TypeError("unexpected type")},Io.Be=function(t,s){Io.ie(t)},Io.We=function(t,...s){for(let t of s);},Io.je=function(t,...s){if(!Io.Le(t,...s))throw new TypeError("unexpected type")},Io.Ve=function(t,...s){if(!Io.ie(t)&&!Io.Le(t,...s))throw new TypeError("unexpected type")},Io.Ue=function(t,s){for(let i of t)if(!Io.ke(i,s))return!1;return!0},Io.He=function(t){for(let s of t)if(!Io.Qi(s))return!1;return!0},Io.ze=function(t,s){for(let s of t);},Io.Je=function(t,s){if(!Io.ie(t))for(let s of t);},Io.qe=function(t,s){if(!Io.ie(t))for(let s of t);},Io.$e=function(t,...s){for(let s of t);},Io.Xe=function(t,...s){if(!Io.ie(t))for(let s of t);},Io.Ye=function(t,s){return!(Io.ie(t)||!Io.ae(t.nodeName))&&(!s||Io.Ke(t.nodeName,s))},Io.Ze=function(t,s){if(Io.ie(t)||!Io.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!Io.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},Io.Qe=function(t,s){Io.ie(t)},Io.tn=function(t,s){return!(Io.ie(t)||!Io.ae(t.tagName))&&(!s||Io.Ke(t.tagName,s))},Io.sn=function(t,s){if(Io.ie(t)||!Io.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!Io.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},Io.en=function(t,s){Io.ie(t)},Io.nn=function(t){return Io.tn(t,"img")||Io.tn(t,"canvas")||Io.tn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},Io.rn=function(t){if(!Io.nn(t))throw new TypeError("expected drawable")},Io.hn=function(t){Io.ie(t)},Io.an=function(t){return t instanceof ImageData||Io.nn(t)},Io.ln=function(t){if(!Io.an(t))throw new TypeError("expected drawable or image data")},Io.un=function(t){if(!Io.ie(t)&&!Io.an(t))throw new TypeError("expected drawable or image data")},Io.cn=function(t){return"string"==typeof t||Io.fn&&t instanceof Io.fn||t instanceof Io.dn},Io.pn=function(t){if(!Io.cn(t))throw new TypeError("expected string-like")},Io.mn=function(t){Io.ie(t)},Io.gn=function(...t){for(let s of t);},Io.yn=function(){throw new Error("must be overridden")},Io.wn=function(){throw new Error("not yet implemented")},Io.Sn=function(t){return t.constructor===function*(){}.constructor},Io.vn=function(t){if(!Io.Sn(t))throw new Error("expected generator function")},Io.bn=function(t){return"function"===t[Symbol.iterator]},Io.Mn=function(t){if(!Io.bn(t))throw new Error("expected iterable")},Io.Gn=function(t){return!Io.ie(t)},Io.ie=function(t){return null==t},Io.xn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},Io.Tn=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const Po=Object.getPrototypeOf(Uint8Array);Io._n=function(t){return Io.ke(t,Po)},Io.In=function(t){},Io.Cn=function(t){Io.Pn(t,Po)},Io.Rn=function(t,...s){if(!Io.An(t,...s))throw new TypeError("unexpected type")},Io.An=function(t,...s){for(const i of s)if(Io.ve(t,i))return!0;return!1},Io.Pn=function(t,s){if(!Io.ve(t,s))throw new TypeError("unexpected type")},Io.ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},Co.te=Io.te,Co.se=Io.se,Co.re=Io.re,Co.he=Io.he,Co.le=Io.le,Co.ue=Io.ue,Co.ge=Io.ge,Co.ye=Io.ye,Co.xe=Io.xe,Co.Te=Io.Te,Co.Ae=Io.Ae,Co.Ee=Io.Ee,Co.Ne=Io.Ne,Co.Be=Io.Be,Co.ie=Io.ie}{let Ro=function(t,s){let i=Do.getType(t),e=Do.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},Ao=function(t){console.warn("[Defence] "+t+" @",Do.Ki())},Eo=function(){if(Uo=-1,No.size>0||Bo.size>0){let t=[...new Set([...No.keys()].map(t=>Do.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),No.clear(),Bo.clear()}},Fo=function(t){let s=new Set;for(let i in t)s.add(i);return s},Oo=function(t,s){let i=Fo(s),e=Ho.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);Do.En(s,[...i]),s.length&&console.warn(`[Defence] '${Do.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ho.set(t,i)};0;const Do=self._s,ko=new Map;let Lo;Do.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Do.On=function(t,...s){ko.has(t)||ko.set(t,-1),-1===ko.get(t)&&ko.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),ko.set(t,-1)}))},Do.Dn=function(t){performance.mark(t),Lo||(Lo=new Map),Lo.has(t)||Lo.set(t,{kn:0,total:0,Ln:0,Nn:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Ln.toPrecision(3)} :: calls => ${this.Nn}`}})},Do.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Lo.get(t);i.kn=s.duration,i.total+=i.kn,i.Ln=i.total/i.Nn,console.log(i.toString()),i.Nn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Do.Ki=function(){return(new Error).stack},Do.Wn=function(){},Do.cast=function(t,s){return t&&t instanceof s?t:null},Do.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Do.Zi(t)?"<number>":Do.ae(t)?"<string>":Do.Ge(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Do.Re(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Do.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Do.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let No=new Map,Bo=new Map,Wo=new WeakMap,jo=new WeakMap;Do.jn={};const Vo=new Set(["then","splice"]);Do.jn.get=function(t,s){return s in t||"symbol"==typeof s||Vo.has(s)||Ao(`Accessed missing property '${s}' from defended object '${Do.getName(t)}', returning undefined`),jo.has(t)&&"symbol"!=typeof s&&!Vo.has(s)&&Ao(`Accessed property '${s}' on a released object '${Do.getName(t)}'\nObject was originally released at: ${jo.get(t)})\nCall stack at access: `),t[s]},Do.jn.set=function(t,s,i){return s in t||No.has(t)||Ao(`Set non-existent property '${s}' to '${i}' on defended object '${Do.getName(t)}'`),Ro(t[s],i)||No.has(t)||Ao(`Set '${Do.getType(t[s])}' property '${s}' to type '${Do.getType(i)}' on defended object '${Do.getName(t)}'`),jo.has(t)&&Ao(`Set property '${s}' on a released object '${Do.getName(t)}'\nObject was originally released at: ${jo.get(t)})\nCall stack at access: `),t[s]=i,!0},Do.jn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Do.getName(t)}'`)},Do.jn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Do.getName(t)}'`)},Do.jn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Do.getName(t)}'`)};let Uo=-1;Do.Vn=class{constructor(){if(!Do.ks||!Do.Ri.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,Do.jn);return No.set(s,i),Bo.set(i,s),Wo.set(i,s),-1===Uo&&(Uo=requestAnimationFrame(Eo)),i}},Do.Un=function(t){if(Do.ks&&Do.Ri.Bi&&t instanceof Do.Vn){if(!Bo.has(t))return t;let s=Bo.get(t);return Bo.delete(t),No.delete(s),t}return Do.Ds?Object.seal(t):t},Do.Hn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Bo.clear(),No.clear(),t}return Do.ks&&Oo(t,i),Do.Un(i)},Do.zn=function(t){let s=Wo.get(t);s&&jo.set(s,Do.Ki())},Do.Jn=function(t){let s=Wo.get(t);return!!s&&!!jo.get(s)};let Ho=new Map;Do.qn=class{constructor(t){this.$n="",t&&this.start(t)}start(t){Do.Ys&&(this.$n=t,performance.mark(this.$n+"-Start"))}end(){Do.Ys&&(performance.mark(this.$n+"-End"),performance.measure(this.$n,this.$n+"-Start",this.$n+"-End"))}next(t){Do.Ys&&(this.end(),this.$n=t,performance.mark(this.$n+"-Start"))}}}{let zo=function(t){return 0===t&&1/t<0};0;const Jo=self._s,qo=2*Math.PI,$o=Math.PI/180,Xo=180/Math.PI;Jo.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Jo.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Jo.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},Jo.Yn=function(t,s,i){return t<s?s:t>i?i:t},Jo.Kn=function(t){return(t%=qo)<0&&(t+=qo),t},Jo.Zn=function(t){return t*$o},Jo.Qn=function(t){return t*Xo},Jo.tr=function(t,s){return Math.sqrt(t*t+s*s)},Jo.sr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Jo.ir=function(t,s,i,e){return Jo.tr(i-t,e-s)},Jo.er=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Jo.nr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Jo.rr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Jo.hr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Jo.Kn(t+i):Jo.Kn(t-i):Jo.Kn(s)},Jo.ar=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Jo.lr=function(t,s,i,e=0){let n=Jo.rr(t,s);const r=qo*e;return Jo.ar(s,t)?Jo.Kn(t+(n+r)*i):Jo.Kn(t-(n+r)*i)},Jo.ur=function(t,s,i,e=0){const n=Jo.rr(t,s),r=qo*e;return Jo.ar(s,t)?Jo.Kn(t+(n+r)*i):Jo.Kn(t+(qo-n+r)*i)},Jo.cr=function(t,s,i,e=0){const n=Jo.rr(t,s),r=qo*e;return Jo.ar(s,t)?Jo.Kn(t-(-qo+n-r)*i):Jo.Kn(t-(n+r)*i)},Jo.dr=function(t,s){const i=Jo.rr(t,s);return Jo.ar(t,s)?Jo.Kn(s-i):Jo.Kn(s+i)},Jo._t=function(t,s,i){return t+i*(s-t)},Jo.pr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Jo.mr=function(t,s,i,e,n){return Jo._t(e,n,Jo.pr(t,s,i))},Jo.gr=function(t,s,i,e){return Jo._t(Jo._t(t,s,e),Jo._t(s,i,e),e)},Jo.yr=function(t,s,i,e,n){return Jo._t(Jo.gr(t,s,i,n),Jo.gr(s,i,e,n),n)},Jo.wr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Jo.Sr=function(t){return t>0&&!(t-1&t)},Jo.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Jo.br=function(t,s){return Math.round(t*s)/s},Jo.Mr=function(t,s){return Math.floor(t*s)/s},Jo.Gr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Jo.Tr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Jo.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Jo._r=function(t,s,i){return Jo.Yn(t,0,255)|Jo.Yn(s,0,255)<<8|Jo.Yn(i,0,255)<<16};Jo.Ir=function(t,s,i,e){return(t=Jo.Yn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Jo.Yn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Jo.Yn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Jo.Yn(Math.floor(1023*e),0,1023)))},Jo.Cr=function(t,s,i){return Jo.Ir(t,s,i,1)},Jo.Pr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Jo.Rr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Jo.Ar=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Jo.Er=function(t){return zo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Jo.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Yo=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Jo.Or=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Yo){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Jo.Fr(t,s);return[t/i,s/i]},Jo.Dr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,M=Math.abs(S*v-b*w),G=v*y-b*g;if(Math.abs(G)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},Jo.kr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,M=Math.abs(S*v-b*w),G=v*y-b*g;if(Math.abs(G)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},Jo.Lr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Nr(),u=n.Br(),c=n.Wr(),f=n.jr(),d=n.Vr(),p=n.Ur(),m=n.Hr(),g=n.zr();return Jo.kr(t,s,i,e,r,h,o,a,l,u,c,f)||Jo.kr(t,s,i,e,r,h,o,a,c,f,d,p)||Jo.kr(t,s,i,e,r,h,o,a,d,p,m,g)||Jo.kr(t,s,i,e,r,h,o,a,m,g,l,u)},Jo.Jr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Jo.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Jo.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};Jo.qr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Jo.$r=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Jo.qr(t,s,i,e,n-l,r-u,h+l,o+u)},Jo.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return v>=0&&b>=0&&v+b<=1},Jo.Yr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S;return[1-v-b,v,b]},Jo.Kr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const Ko=self._s;let Zo=null,Qo="";if("undefined"!=typeof document){Zo=document;const ra=document.querySelector("base");Qo=ra&&ra.hasAttribute("href")?ra.getAttribute("href"):"",Qo&&(Qo.startsWith("/")&&(Qo=Qo.substr(1)),Qo.endsWith("/")||(Qo+="/"))}Ko.Zr=function(){return Qo},Ko.Qr=function(){if(!Zo)return"";const t=Zo.location;return Ko.th(t.origin+t.pathname)+Qo},Ko.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Ko.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Ko.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Ko.eh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Ko.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Ko.rh=function(t){return t.replace(/\\/g,"/")},Ko.hh=function(t,s){return s===(t?Ko.ih(t).slice(1):"")},Ko.oh=function(t,s){let i,e;return Ko.Se(t)&&(i=Ko.nh(t.name)),Ko.ae(t)&&(i=Ko.nh(t)),Ko.Se(s)&&(e=Ko.nh(s.name)),Ko.ae(s)&&(e=Ko.nh(s)),i===e},Ko.ah=function(t){t=Ko.rh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,uh:r,name:e,root:s,ext:h,fh:s+n+r}},Ko.dh=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},Ko.ph=function(t){try{t()}catch(t){Ko.Ds&&console.warn("Swallowed exception: ",t)}},Ko.mh=function(){},Ko.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Ko.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Ko.yh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Ko.wh=function(t,s){t.length=s},Ko.Sh=function(t){t&&0!==t.length&&Ko.wh(t,0)},Ko.bh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Ko.wh(i,0)}Ko.wh(t,0)}},Ko.Mh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Ko.Gh=function(t,s,i){s|=0;const e=t.length;s<e?Ko.wh(t,s):s>e&&Ko.Mh(t,s,i)},Ko.xh=function(t,s){Ko.Sh(t),Ko.En(t,s)},Ko.En=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Ko.Th=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Ko.wh(t,i)},Ko._h=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Ko.Ih=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Ko.Ch=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Ko.wh(t,e),i},Ko.Ph=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Ko.wh(t,e),i-e},Ko.Rh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Ko.Ah=function(t,s){if(!Ko.Rh(t,s))throw new RangeError("array index out of bounds")},Ko.Eh=function(t){return t.slice()},Ko.Fh=function(t,s){let i=[];for(let e of t)if(Ko.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Ko.Ge(e)?i.push(Ko.Fh(e,s)):i.push(e);return i},Ko.Oh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Ko.Dh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},Ko.kh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Ko.Lh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Ko.Nh=function(t,s){for(const i of s)t.add(i);return t},Ko.Bh=function(t){for(let s of t)return s;return null},Ko.xor=function(t,s){return!t!=!s},Ko.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Ko.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Ko.jh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let ta=[];Ko.Vh=function(t){ta.push(t)},Ko.Uh=function(){let t=0;for(let s of ta)t+=s();return Math.floor(t)};let sa=1;const ia=new Map,ea=new MessageChannel;ea.port2.onmessage=function(t){const s=t.data,i=ia.get(s);ia.delete(s),i&&i(performance.now())},Ko.Hh=function(t){const s=sa++;return ia.set(s,t),ea.port1.postMessage(s),s},Ko.zh=function(t){ia.delete(t)},Ko.Jh=Ko.Hh,Ko.qh=function(){return new Promise(t=>Ko.Jh(t))};const na=new Set;Ko.$h=function(t){const s=self.requestAnimationFrame(async i=>{await Ko.qh(),na.has(s)&&(na.delete(s),t(i))});return na.add(s),s},Ko.Xh=function(t){na.has(t)&&(self.cancelAnimationFrame(t),na.delete(t))}}{const ha=self._s;ha.Yh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},ha.Kh=function(t){return!ha.Yh(t)},ha.Zh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},ha.Qh=function(t,s){return fetch(t,s).then(t=>(ha.Zh(t),t))},ha.so=function(t){return ha.Qh(t).then(t=>t.text())},ha.io=function(t){return ha.Qh(t).then(t=>t.json())},ha.eo=function(t){return ha.Qh(t).then(t=>t.blob())},ha.no=function(t){return ha.Qh(t).then(t=>t.arrayBuffer())},ha.ro=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},ha.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},ha.oo=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},ha.ao=function(t){return ha.oo(t).then(t=>JSON.parse(t))},ha.lo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await ha.ro(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},ha.uo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},ha.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=ha.Yn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},ha.fo=function(t,s,i){const e=ha.uo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),ha.co(e,s,i)},ha.do=function(t,s,i){if(ha.Ri.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>ha.fo(t,s,i));if(ha.Ri.ImageBitmap)return createImageBitmap(t).then(t=>ha.fo(t,s,i));{const e=ha.uo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),ha.co(e,s,i)}},ha.po=function(t,s){t.clear();for(const i of s)t.add(i)},ha.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},ha.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},ha.wo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},ha.So=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},ha.vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},ha.bo=function(t){return"object"==typeof t&&"function"==typeof t.next},ha.Mo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let oa=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},aa=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const la=self._s,ua=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,ca=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;la.Go=class{constructor(t,s,i,e){this.xo=NaN,this.To=NaN,this._o=NaN,this.Io=NaN,this.xo=0,this.To=0,this._o=0,this.Io=0,t instanceof la.Go?this.set(t):this.Co(t||0,s||0,i||0,e||0)}Po(t,s,i){return this.xo=+t,this.To=+s,this._o=+i,this.Yn(),this}Co(t,s,i,e){return this.xo=+t,this.To=+s,this._o=+i,this.Io=+e,this.Yn(),this}set(t){return this.xo=t.xo,this.To=t.To,this._o=t._o,this.Io=t.Io,this}m(t){return this.set(t)}add(t){this.xo+=t.xo,this.To+=t.To,this._o+=t._o,this.Io+=t.Io,this.Yn()}Ro(t,s,i,e=0){this.xo+=+t,this.To+=+s,this._o+=+i,this.Io+=+e,this.Yn()}Ao(t){this.Eo(Math.max(this.xo,t.xo)-Math.min(this.xo,t.xo)),this.Fo(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Oo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Do(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Yn()}ko(t){this.xo=t.xo,this.To=t.To,this._o=t._o}Eo(t){this.xo=la.Yn(+t,0,1)}Lo(){return this.xo}Fo(t){this.To=la.Yn(+t,0,1)}No(){return this.To}Oo(t){this._o=la.Yn(+t,0,1)}Bo(){return this._o}Do(t){this.Io=la.Yn(+t,0,1)}Wo(){return this.Io}clone(){return la.Hn(la.Go,this.xo,this.To,this._o,this.Io)}toArray(){return[this.xo,this.To,this._o,this.Io]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.xo,t[s++]=this.To,t[s++]=this._o,t[s]=this.Io}Uo(t,s){const i=this.xo,e=this.To,n=this._o,r=this.Io;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}Ho(t,s){t[s++]=this.xo,t[s++]=this.To,t[s]=this._o}equals(t){return this.xo===t.xo&&this.To===t.To&&this._o===t._o&&this.Io===t.Io}zo(t){return this.xo===t.xo&&this.To===t.To&&this._o===t._o}Jo(t,s,i){return this.xo===t&&this.To===s&&this._o===i}qo(t,s,i,e){return this.xo===t&&this.To===s&&this._o===i&&this.Io===e}$o(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.To)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Io)}Xo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.To)&&t[s+2]===Math.fround(this._o)}multiply(t){this.xo*=t.xo,this.To*=t.To,this._o*=t._o,this.Io*=t.Io}Yo(t){this.xo*=t,this.To*=t,this._o*=t,this.Io*=t}Ko(){return this.xo*=this.Io,this.To*=this.Io,this._o*=this.Io,this}Zo(){return this.xo/=this.Io,this.To/=this.Io,this._o/=this.Io,this}Yn(){return this.xo=la.Yn(this.xo,0,1),this.To=la.Yn(this.To,0,1),this._o=la.Yn(this._o,0,1),this.Io=la.Yn(this.Io,0,1),this}Qo(t){this.xo=la.Pr(t),this.To=la.Rr(t),this._o=la.Ar(t),this.Io=la.Er(t)}ta(t,s,i){return`rgb(${100*(la.Qi(t)?t:this.Lo())}%, ${100*(la.Qi(s)?s:this.No())}%, ${100*(la.Qi(i)?i:this.Bo())}%)`}sa(t,s,i,e){return`rgba(${100*(la.Qi(t)?t:this.Lo())}%, ${100*(la.Qi(s)?s:this.No())}%, ${100*(la.Qi(i)?i:this.Bo())}%, ${la.Qi(e)?e:this.Wo()})`}ia(){const t=Math.round(255*this.Lo()),s=Math.round(255*this.No()),i=Math.round(255*this.Bo());return"#"+oa(t.toString(16))+oa(s.toString(16))+oa(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Eo(s),isFinite(i)&&this.Fo(i),isFinite(e)&&this.Oo(e),this.Do(1),!0}na(){return`${Math.round(255*this.Lo())}, ${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}`}ra(){return[Math.round(255*this.Lo()),Math.round(255*this.No()),Math.round(255*this.Bo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),this.Do(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),this.Do(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.xo,this.To,this._o,this.Io]}fa(t,s,i,e){let n,r,h;if(t%=360,s=la.Yn(s,0,100),i=la.Yn(i,0,100),e=la.Yn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=aa(o,e,t+1/3),r=aa(o,e,t),h=aa(o,e,t-1/3)}return this.Eo(n),this.Fo(r),this.Oo(h),this.Do(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=ua.exec(s),e=ca.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.xo,s=this.To,i=this._o,e=this.Io;return`hsla(${la.Go.pa(t,s,i)}, ${la.Go.ma(t,s,i)}%, ${la.Go.ga(t,s,i)}%, ${e})`}ya(){const t=this.xo,s=this.To,i=this._o;return[la.Go.pa(t,s,i),la.Go.ma(t,s,i),la.Go.ga(t,s,i),this.Io]}wa(t){Array.isArray(t)&&(t.length<3||(this.xo=t[0],this.To=t[1],this._o=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Eo(t)}get r(){return this.Lo()}set g(t){this.Fo(t)}get g(){return this.No()}set b(t){this.Oo(t)}get b(){return this.Bo()}set a(t){this.Do(t)}get a(){return this.Wo()}Sa(t,s){switch(t){case 0:this.Eo(s);break;case 1:this.Fo(s);break;case 2:this.Oo(s);break;case 3:this.Do(s);break;default:throw new RangeError("invalid color index")}}va(t){switch(t){case 0:return this.Lo();case 1:return this.No();case 2:return this.Bo();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static ba(t,s){let i,e;if(Array.isArray(t))i=new la.Go,i.wa(t);else{if(!(t instanceof la.Go))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new la.Go,e.wa(s);else{if(!(s instanceof la.Go))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return la.Yn(Math.max(t,s)-Math.min(t,s),0,1)}static Ga(t,s){const i=new la.Go;return i.Eo(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Fo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Do(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static xa(t,s){const i=new la.Go(0,0,0,1);return i.Eo(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Fo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ga(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},la.Go.Ta=Object.freeze(la.Hn(la.Go,1,1,1,1)),la.Go._a=Object.freeze(la.Hn(la.Go,0,0,0,1)),la.Go.Ia=Object.freeze(la.Hn(la.Go,0,0,0,0))}{const fa=self._s;fa.Ca=class{constructor(t,s){this.Pa=0,this.Ra=0,t instanceof fa.Ca?this.m(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Ra=+s}m(t){this.Pa=t.Pa,this.Ra=t.Ra}equals(t){return this.Pa===t.Pa&&this.Ra===t.Ra}Aa(t,s){return this.Pa===t&&this.Ra===s}$o(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Ra)}Ea(t){this.Pa=+t}Fa(){return this.Pa}Oa(t){this.Ra=+t}Da(){return this.Ra}toArray(){return[this.Pa,this.Ra]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pa,t[s]=this.Ra}offset(t,s){this.Pa+=+t,this.Ra+=+s}scale(t,s){this.Pa*=t,this.Ra*=s}wt(t,s){this.Pa/=t,this.Ra/=s}round(){this.Pa=Math.round(this.Pa),this.Ra=Math.round(this.Ra)}floor(){this.Pa=Math.floor(this.Pa),this.Ra=Math.floor(this.Ra)}ceil(){this.Pa=Math.ceil(this.Pa),this.Ra=Math.ceil(this.Ra)}angle(){return fa.nr(0,0,this.Pa,this.Ra)}ka(){return this.Pa*this.Pa+this.Ra*this.Ra}length(){return fa.tr(this.Pa,this.Ra)}La(t,s){const i=this.Pa*s-this.Ra*t;this.Ra=this.Ra*s+this.Pa*t,this.Pa=i}rotate(t){0!==t&&this.La(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Pa&&i===this.Ra||(this.Pa-=s,this.Ra-=i,this.La(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Ra+=+i)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Ra+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Ra/=t)}Yn(t,s){this.Pa=fa.Yn(this.Pa,t,s),this.Ra=fa.Yn(this.Ra,t,s)}xt(t){return this.Pa*t.Pa+this.Ra*t.Ra}reverse(){this.Pa=-this.Pa,this.Ra=-this.Ra}Ba(){let t=this.Pa;return this.Pa=this.Ra,this.Ra=-t,this}}}{const da=self._s;da.Rect=class{constructor(t,s,i,e){this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ua=NaN,this.Wa=0,this.ja=0,this.Va=0,this.Ua=0,t instanceof da.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Wa=+t,this.ja=+s,this.Va=+i,this.Ua=+e}Ha(t,s,i,e){t=+t,s=+s,this.Wa=t,this.ja=s,this.Va=t+ +i,this.Ua=s+ +e}m(t){this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va,this.Ua=+t.Ua}clone(){return new da.Rect(this.Wa,this.ja,this.Va,this.Ua)}static za(t,s){const i=new da.Rect;return i.Ja(Math.min(t.Wa,s.Wa)),i.qa(Math.min(t.ja,s.ja)),i.$a(Math.max(t.Va,s.Va)),i.Xa(Math.max(t.Ua,s.Ua)),i}static Ya(t){return new da.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va&&this.Ua===t.Ua}Ka(t,s,i,e){return this.Wa===t&&this.ja===s&&this.width()===i&&this.height()===e}$o(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.ja)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.Ua)}Ja(t){this.Wa=+t}Za(){return this.Wa}qa(t){this.ja=+t}Qa(){return this.ja}$a(t){this.Va=+t}tl(){return this.Va}Xa(t){this.Ua=+t}sl(){return this.Ua}toArray(){return[this.Wa,this.ja,this.Va,this.Ua]}jo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Wa,this.ja,this.width(),this.height())}static el(t){return da.Hn(da.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s]=this.Ua}nl(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=this.Wa,t[s]=this.Ua}rl(t,s,i){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=i,t[s++]=this.Wa,t[s++]=this.Ua,t[s]=i}width(){return this.Va-this.Wa}height(){return this.Ua-this.ja}hl(){return(this.Wa+this.Va)/2}ol(){return(this.ja+this.Ua)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va+=t,this.Ua+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.ja+=+t}al(t){this.Va+=+t}ll(t){this.Ua+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ja<this.Ua?this.Wa<this.Va?this.Ua=this.ja+this.width():this.Ua=this.ja-this.width():this.Wa<this.Va?this.Ua=this.ja-this.width():this.Ua=this.ja+this.width()}cl(t,s){t=+t,s=+s,this.Wa-=t,this.ja-=s,this.Va+=t,this.Ua+=s}fl(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va-=t,this.Ua-=s}multiply(t,s){this.Wa*=t,this.ja*=s,this.Va*=t,this.Ua*=s}wt(t,s){this.Wa/=t,this.ja/=s,this.Va/=t,this.Ua/=s}dl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}pl(t){this.ja=+t-this.ja,this.Ua=+t-this.Ua}ml(t,s){const i=this.width(),e=this.height(),n=this.Za()+i*t,r=this.Qa()+e*s;this.Ha(n-e*s,r-i*t,e,i)}gl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}yl(){const t=this.ja;this.ja=this.Ua,this.Ua=t}wl(t){const s=this.ja;this.ja=+t-this.Ua,this.Ua=+t-s}round(){this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va),this.Ua=Math.round(this.Ua)}Sl(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}vl(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}floor(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}ceil(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}Yn(t,s,i,e){this.Wa=Math.max(this.Wa,+t),this.ja=Math.max(this.ja,+s),this.Va=Math.min(this.Va,+i),this.Ua=Math.min(this.Ua,+e)}bl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Wa=da.Yn(this.Wa,t,i),this.ja=da.Yn(this.ja,s,e),this.Va=da.Yn(this.Va,t,i),this.Ua=da.Yn(this.Ua,s,e)}normalize(){this.Wa>this.Va&&this.gl(),this.ja>this.Ua&&this.yl()}Ml(t){return!(t.Va<this.Wa||t.Ua<this.ja||t.Wa>this.Va||t.ja>this.Ua)}Gl(t,s,i){return!(t.Va+s<this.Wa||t.Ua+i<this.ja||t.Wa+s>this.Va||t.ja+i>this.Ua)}xl(t,s){return t>=this.Wa&&t<=this.Va&&s>=this.ja&&s<=this.Ua}Tl(t){return t.Wa>=this.Wa&&t.ja>=this.ja&&t.Va<=this.Va&&t.Ua<=this.Ua}_l(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja<this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va),t.Ua>this.Ua&&(this.Ua=+t.Ua)}Il(t){this.Wa=da._t(t.Wa,t.Va,this.Wa),this.ja=da._t(t.ja,t.Ua,this.ja),this.Va=da._t(t.Wa,t.Va,this.Va),this.Ua=da._t(t.ja,t.Ua,this.Ua)}}}{const pa=self._s;pa.Cl=class{constructor(t,s,i,e,n,r,h,o){this.Pl=NaN,this.Rl=NaN,this.Al=NaN,this.El=NaN,this.Fl=NaN,this.Ol=NaN,this.Dl=NaN,this.kl=NaN,this.Pl=0,this.Rl=0,this.Al=0,this.El=0,this.Fl=0,this.Ol=0,this.Dl=0,this.kl=0,t instanceof pa.Cl?this.m(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Pl=+t,this.Rl=+s,this.Al=+i,this.El=+e,this.Fl=+n,this.Ol=+r,this.Dl=+h,this.kl=+o}Ll(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this.Pl=t.Pl,this.Rl=t.Rl,this.Al=t.Al,this.El=t.El,this.Fl=t.Fl,this.Ol=t.Ol,this.Dl=t.Dl,this.kl=t.kl}equals(t){return this.Pl===t.Pl&&this.Rl===t.Rl&&this.Al===t.Al&&this.El===t.El&&this.Fl===t.Fl&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.kl===t.kl}Nl(t){this.Pl=+t}Nr(){return this.Pl}Bl(t){this.Rl=+t}Br(){return this.Rl}Wl(t){this.Al=+t}Wr(){return this.Al}jl(t){this.El=+t}jr(){return this.El}Vl(t){this.Fl=+t}Vr(){return this.Fl}Ul(t){this.Ol=+t}Ur(){return this.Ol}Hl(t){this.Dl=+t}Hr(){return this.Dl}zl(t){this.kl=+t}zr(){return this.kl}Jl(){return new DOMQuad(new DOMPoint(this.Pl,this.Rl),new DOMPoint(this.Al,this.El),new DOMPoint(this.Fl,this.Ol),new DOMPoint(this.Dl,this.kl))}static ql(t){return pa.Hn(pa.Cl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Rl,this.Al,this.El,this.Fl,this.Ol,this.Dl,this.kl]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=this.Al,t[s++]=this.El,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=this.Dl,t[s]=this.kl}$l(t,s,i){t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=i,t[s++]=this.Al,t[s++]=this.El,t[s++]=i,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Dl,t[s++]=this.kl,t[s]=i}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Rl+=s,this.Al+=t,this.El+=s,this.Fl+=t,this.Ol+=s,this.Dl+=t,this.kl+=s}round(){this.Pl=Math.round(this.Pl),this.Rl=Math.round(this.Rl),this.Al=Math.round(this.Al),this.El=Math.round(this.El),this.Fl=Math.round(this.Fl),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.kl=Math.round(this.kl)}floor(){this.Pl=Math.floor(this.Pl),this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al),this.El=Math.floor(this.El),this.Fl=Math.floor(this.Fl),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.kl=Math.floor(this.kl)}ceil(){this.Pl=Math.ceil(this.Pl),this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al),this.El=Math.ceil(this.El),this.Fl=Math.ceil(this.Fl),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.kl=Math.ceil(this.kl)}Xl(t){this.Pl=t.Wa,this.Rl=t.ja,this.Al=t.Va,this.El=t.ja,this.Fl=t.Va,this.Ol=t.Ua,this.Dl=t.Wa,this.kl=t.Ua}Yl(t,s){0===s?this.Xl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,i){const e=t.Wa*s,n=t.ja*s,r=t.Va*s,h=t.Ua*s,o=t.Wa*i,a=t.ja*i,l=t.Va*i,u=t.Ua*i;this.Pl=o-n,this.Rl=a+e,this.Al=l-n,this.El=a+r,this.Fl=l-h,this.Ol=u+r,this.Dl=o-h,this.kl=u+e}Zl(t){t.set(Math.min(this.Pl,this.Al,this.Fl,this.Dl),Math.min(this.Rl,this.El,this.Ol,this.kl),Math.max(this.Pl,this.Al,this.Fl,this.Dl),Math.max(this.Rl,this.El,this.Ol,this.kl))}xl(t,s){let i=this.Al-this.Pl,e=this.El-this.Rl;const n=this.Fl-this.Pl,r=this.Ol-this.Rl,h=t-this.Pl,o=s-this.Rl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Dl-this.Pl,e=this.kl-this.Rl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.Pl+this.Al+this.Fl+this.Dl)/4}ol(){return(this.Rl+this.El+this.Ol+this.kl)/4}Ql(t,s,i,e){return!(!this.xl(t,s)&&!this.xl(i,e))||pa.Lr(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this.xl(s,i))return!0;if(s=this.hl(),i=this.ol(),t.xl(s,i))return!0;const e=this.Pl,n=this.Rl,r=this.Al,h=this.El,o=this.Fl,a=this.Ol,l=this.Dl,u=this.kl;return pa.Lr(e,n,r,h,t)||pa.Lr(r,h,o,a,t)||pa.Lr(o,a,l,u,t)||pa.Lr(l,u,e,n,t)}su(){const t=this.Pl,s=this.Rl;this.Pl=this.Al,this.Rl=this.El,this.Al=this.Fl,this.El=this.Ol,this.Fl=this.Dl,this.Ol=this.kl,this.Dl=t,this.kl=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}nu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}ru(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this.Pl;case 1:return this.Rl;case 2:return this.Al;case 3:return this.El;case 4:return this.Fl;case 5:return this.Ol;case 6:return this.Dl;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Rl=s;break;case 2:this.Al=s;break;case 3:this.El=s;break;case 4:this.Fl=s;break;case 5:this.Ol=s;break;case 6:this.Dl=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}wt(t,s){this.Pl/=t,this.Rl/=s,this.Al/=t,this.El/=s,this.Fl/=t,this.Ol/=s,this.Dl/=t,this.kl/=s}}}{const ma=self._s,ga=(self.assert,[0,0,1,0,1,1,0,1]),ya=ma.Hn(ma.Cl);ma.au=class extends ma.Vn{constructor(t,s=!0){super(),t||(t=ga),this.lu=Float64Array.from(t),this.uu=new ma.Rect,this.cu=!0,this.fu=s}zn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(ga)}m(t){this.mu(t.lu)}yu(){this.cu=!0}wu(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.uu.set(s,i,e,n),this.cu=!1}Xl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Za()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Za()-s,e[7]=t.sl()-i,this.uu.m(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}Su(t,s,i){ya.m(t),ya.offset(s,i),this.mu(ya.toArray()),this.cu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.vu(t,s,e,n)}vu(t,s,i,e){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}xl(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.wu();const e=this.uu,n=e.Za()-110,r=e.Qa()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,v=i[e],b=i[e+1],M=i[S],G=i[S+1];ma.kr(n,r,t,s,a,u,l,c,v,b,M,G)&&++g,ma.kr(h,o,t,s,f,p,d,m,v,b,M,G)&&++y}return g%2==1||y%2==1}bu(t,s,i){const e=t.lu,n=this.lu;if(this.xl(e[0]+s,e[1]+i))return!0;if(t.xl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(ma.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,i,e,n,r){if(this.xl(i-t,e-s))return!0;if(this.xl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(ma.kr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}nu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}ru(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}Gu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}xu(){return this.lu}Tu(){return this.pu()}_u(){return this.fu}}}{const wa=self._s;wa.Iu=class extends wa.Vn{constructor(t){if(super(),this.Cu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}zn(){this.Pu(),this.Cu=null}Ru(){return 0===this.Cu.size}Pu(){const t=this.Cu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Cu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}zs(t,s){const i=this.Cu.get(t);return i?i.get(s):i}Hs(t,s){const i=this.Cu.get(t);return!!i&&i.has(s)}Au(t,s){const i=this.Cu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Eu(t){const s=this.Cu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Fu(){let t=0;for(const s of this.Cu.values())t+=s.size;return t}*values(){for(const t of this.Cu.values())yield*t.values()}*Ou(){for(const[t,s]of this.Cu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Cu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Sa=self._s;Sa.Du=class extends Sa.Vn{constructor(){super(),this.ku=new Set,this.Lu=[],this.Nu=!1}zn(){this.Pu()}Pu(){this.ku.clear(),Sa.Sh(this.Lu),this.Nu=!1}Bu(t){this.ku.has(t)||(this.ku.add(t),this.Nu||this.Lu.push(t))}Hs(t){return this.ku.has(t)}Au(t){this.ku.delete(t)&&(this.Nu=!0)}Fu(){return this.ku.size}Ru(){return 0===this.ku.size}Wu(){return this.Nu&&(this.ju(),this.Nu=!1),this.Lu}ju(){const t=this.Lu;Sa.Sh(t);for(const s of this.ku)t.push(s)}}}{const va=self._s,ba=new Map,Ma=new Map,Ga=new Map,xa=new Map,Ta=new Map,_a=new Map,Ia=new Map,Ca=new Map,Pa=new Map;Pa.set("linear","noease"),Pa.set("default","noease");const Ra=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Aa=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Ea=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static Uu(){return"default"}static Hu(){return"noease"}static zu(t){return Ea.get(t)}static Ju(s,...i){let e,n;this.qu(),s?(Ga.has(s)||Ga.set(s,new Map),e=Ga.get(s),n=[...e.keys()].filter(i=>!t.$u(i,s)||t.$u(i,s).transition.Xu())):(e=Ta,n=[...e.keys()]);const r=n.sort();return[...Ma.keys()].concat(r).filter(t=>!i.includes(t))}static Yu(){this.qu();const t=[...Ta.keys()];return t.sort(),[...Ma.keys()].concat(t)}static Ku(){this.qu();const t=[...Ta.keys()];return t.sort(),t}static Zu(t){for(const s of Ra)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Aa)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.qu(),[...Ma.keys()].includes(t)}static tc(s){const i=Pa.get(s);return i?ba.get(i):t.Qu(s)?ba.get(s):Ia.has(s)?Ia.get(s):void 0}static sc(t){return this.qu(),Ca.get(t)}static ec(s,i){this.qu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return Ga.get(i).get(s)}static $u(t,s){this.qu();const i=xa.get(s);if(i)return i.get(t)}static nc(s,i){return this.qu(),!!t.tc(s)||!!Ga.get(i).get(s)}static rc(s){this.qu();return t.tc(s)||Ta.get(s)}static hc(t){return this.qu(),_a.get(t)}static oc(t){return this.qu(),this.Yu()[t]}static ac(t,s){return this.qu(),this.Ju(s).indexOf(t)}static lc(t){return this.ac(t)}static qu(){0===ba.size&&(this.uc("default",()=>{}),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!va.Ge(i))throw new Error("unexpected arguments");if(self.yc){const n=va.Hn(self.yc,s,e);n.wc(i),t.mc(s,(t,s,i,e)=>n.Sc(t,s,i,e),"predefined"),Ca.set(s,n)}else{const n=va.Hn(va.vc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.bc(e),t.mc(s,(t,s,i,e)=>n.Sc(t,s,i,e),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Mc(s,i,e,n){this.qu(),t.mc(s,i,"custom",e,n)}static Gc(t,s){if(this.Qu(t))return;if([...Ia.keys()].includes(t))return;const i=Ga.get(s);i&&i.delete(t);const e=xa.get(s);e&&e.delete(t)}static mc(t,s,i,e,n){switch(i){case"predefined":ba.set(t,s),Ma.set(t,s);break;case"custom":e?(Ga.has(e)||Ga.set(e,new Map),xa.has(e)||xa.set(e,new Map),Ga.get(e).set(t,s),xa.get(e).set(t,n)):(Ta.set(t,s),_a.set(t,n));break;case"private":ba.set(t,s),Ia.set(t,s);break;default:throw new Error("unexpected ease mode")}}static xc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static dc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=Wa(t,s,e,r,o,l),c=Da(i,n,h,a),f=ka(i,n,h,a),d=La(i,n,h,a);return Na(u,c,f,d)}static Tc(t,s,i,e){const n=[],r=Da(t,s,i,e),h=ka(t,s,i,e),o=La(t,s,i,e);for(let t=0;t<Fa;++t){const s=Na(t*Oa,r,h,o);n.push(s)}return n}};const Fa=11,Oa=1/(Fa-1),Da=(t,s,i,e)=>e-3*i+3*s-t,ka=(t,s,i,e)=>3*i-6*s+3*t,La=(t,s,i,e)=>3*(s-t),Na=(t,s,i,e)=>((s*t+i)*t+e)*t,Ba=(t,s,i,e)=>3*s*t*t+2*i*t+e,Wa=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Fa-1;for(r[Fa-1];o!=l&&a<=t;)o++,a=r[o],h+=Oa;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Oa;const c=Da(s,i,e,n),f=ka(s,i,e,n),d=La(s,i,e,n),p=Ba(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Na(u,c,f,d)-t)/Ba(u,c,f,d);return u}{let s,i,e=h,n=h+Oa,r=0;do{u=e+(n-e)/2;let h=Na(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let ja=function(t){Va.ae(t)};0;const Va=self._s;Va._c=class{constructor(t){this.Ic=[],this.$n=t||"",this.Cc=0}zn(){this.Pu(),this.Ic=null}Pc(){return this.$n}Pu(){Va.bh(this.Ic),this.Cc=0}Rc(){return this.Cc}Ac(t=Math.random()*this.Rc()){let s=0;for(const[i,e]of this.Ic)if(s+=i,t<s)return e;return 0}Ec(){return!!this.Ic.length}Fc(t,s){ja(s),this.Cc+=t,this.Ic.push([t,s])}Oc(t,s){ja(s);const i=0===t;for(let e=0;e<this.Ic.length;e++){const n=this.Ic[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Ic.splice(e,1),this.Cc-=n[0];break}}}Dc(){return JSON.stringify(this.Ic)}static kc(t,s){const i=new Va._c(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Fc(s,e)}return i}}}{const Ua=self._s;let Ha=0;Ua.Lc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.Wc=Ha++,this.Nc.jc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.Bc})}zn(){this.Nc.jc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.Nc=null,this.Bc="",this.Wc=-1}Vc(t){this.Bc!==t&&(this.Bc=t,this.Nc.jc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.Bc}))}}}self._s.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Uc=!1,this.Hc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Hc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Uc=!0}};{const za=self._s;self.assert;za.Event.zc=class extends za.Vn{constructor(t){super(),this.Jc=t,this.qc=[],this.$c=new Set,this.Xc=[],this.Yc=new Set,this.Kc=0,this.Zc=[]}zn(){this.Kc>0||(za.Sh(this.qc),this.$c.clear(),za.Sh(this.Xc),this.Yc.clear(),za.Sh(this.Zc),za.zn(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",if:t,capture:s});else if(s){if(this.$c.has(t))return;this.qc.push(t),this.$c.add(t)}else{if(this.Yc.has(t))return;this.Xc.push(t),this.Yc.add(t)}}ef(t,s){this.tf()?this.Zc.push({sf:"remove",if:t,capture:s}):s?this.$c.has(t)&&(this.$c.delete(t),za._h(this.qc,t)):this.Yc.has(t)&&(this.Yc.delete(t),za._h(this.Xc,t))}nf(){return!this.qc.length&&!this.Xc.length}tf(){return this.Kc>0}rf(){const t=new Set,s=new Set;for(const i of this.Zc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.$c.delete(i.if),s.add(i.if)):(this.Yc.delete(i.if),t.add(i.if))}za.Ph(this.Xc,t),za.Ph(this.qc,s),za.Sh(this.Zc)}hf(t){this.af();let s=!1;for(let i=0,e=this.qc.length;i<e;++i)if(this.qc[i](t),t.Uc){s=!0;break}if(!s)for(let s=0,i=this.Xc.length;s<i&&(this.Xc[s](t),!t.Uc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.qc.length;s<i;++s)this.qc[s](t);for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.qc.length;i<e;++i){let e=this.qc[i];s.push(za.df(()=>e(t)))}for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(za.df(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}pf(t){const s=[];this.af();for(let i=0,e=this.qc.length;i<e;++i){const e=this.qc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);za.bo(i)&&(yield*i)}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);za.bo(i)&&(yield*i)}this.lf()}}}{const Ja=self._s;Ja.Event.wf=class extends Ja.Vn{constructor(){super(),this.Sf=new Map,this.vf=!1}zn(){if(this.vf)throw new Error("already released");this.bf(),this.vf=!0,Ja.zn(this)}Jn(){return this.vf}bf(){if(this.Sf){for(let t of this.Sf.values())t.zn();this.Sf.clear()}}Mf(t,s){let i=this.Sf.get(t);return i||(s?(i=Ja.Hn(Ja.Event.zc,t),this.Sf.set(t,i),i):null)}Gf(t){return this.Sf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.ef(s,!!i),e.nf()&&this.Sf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}xf(t){const s=this.Mf(t.type,!1);return s?(t.Hc=!0,s.ff(t)):Promise.resolve(!0)}async Tf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.Sf.delete(t.type),t.Hc=!0;const i=await s.ff(t);return s.zn(),i}async _f(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}If(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async Cf(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Pf(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.Sf.values())s.cf(t)}}}{let qa=function(t){Qa=Ka&&0===tl?requestIdleCallback($a,{timeout:35}):setTimeout($a,tl>0?1:t)},$a=function(t){if(Qa=-1,!Za.length)return;let s=performance.now(),i=s,e=0,n=0;do{Xa(Za.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(Za.length&&(Ka&&0===tl&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===Qa&&Za.length){let t=i-s;qa(Math.max(16-t,4))}},Xa=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};0;const Ya=self._s,Ka="undefined"!=typeof requestIdleCallback;let Za=[],Qa=-1,tl=0,sl=Ya.$s.Hs("disable-asyncify");sl&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Ya.df=function(t){let s=null;return Ya.Ds&&(s=Ya.Ki()),new Promise((i,e)=>{Za.push({if:t,resolve:i,reject:e,stack:s}),sl?Xa(Za.pop()):-1===Qa&&qa(16)})},Ya.df.Rf=function(t){if(t)++tl;else if(--tl,tl<0)throw new Error("already turned off high throughput mode")}}{let il=function(){rl=-1},el=function(){hl=-1,ol=-1;let t=Date.now();for(let s of al)if(s.Af(t)){let t=s.Ef();(-1===ol||t<ol)&&(ol=t)}else al.delete(s);if(-1!==ol){let s=Math.max(ol-t+100,1e3);hl=self.setTimeout(el,s)}};0;const nl=self._s;let rl=-1;nl.Ff=function(){return-1===rl&&(rl=Date.now(),self.setTimeout(il,16)),rl};let hl=-1,ol=-1,al=new Set;nl.Of=class{constructor(t,s){this.Df=t,this.kf=1e3*s,this.Lf=0,this.Nf=!1}Bf(){let t=nl.Ff();this.Lf=t+this.kf,this.Nf||(al.add(this),this.Nf=!0),-1===hl?(ol=this.Lf,hl=self.setTimeout(el,this.kf+100)):this.Lf<ol&&ol>t+1e3&&(self.clearTimeout(hl),ol=this.Lf,hl=self.setTimeout(el,this.kf+100))}Af(t){return!(t>=this.Lf&&(this.Df()?(this.Lf=t+this.kf,0):(this.Nf=!1,1)))}Ef(){return this.Lf}Wf(){this.Nf&&(al.delete(this),this.Nf=!1,0===al.size&&-1!==hl&&(self.clearTimeout(hl),hl=-1,ol=-1))}zn(){this.Wf(),this.Df=null}}}{const ll=self._s;ll.jf=class t{constructor(t){this.Vf=!1,this.Uf=t}Hf(){this.Vf||(this.Vf=!0,this.Uf&&(this.Uf(),this.Uf=null))}zf(){return this.Vf}zn(){this.Hf()}static zn(s){return new t(()=>s.zn())}static Jf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new ll.qf;for(const r of s)t.addEventListener(r,i,e),n.Bu(ll.Hn(ll.jf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),ll.Hn(ll.jf,()=>t.removeEventListener(s,i,e))}},ll.$f=class extends ll.jf{Xf(t){this.Uf=t}},ll.qf=class extends ll.jf{constructor(...t){super(),this.Yf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Yf.add(s)}Kf(t){if(this.Vf)throw new Error("already disposed");this.Yf.delete(t)}Zf(){if(this.Vf)throw new Error("already disposed");if(this.Yf){for(let t of this.Yf)t.Hf();this.Yf.clear()}}zf(){return this.Vf}Hf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Yf)t.Hf();this.Yf.clear(),this.Yf=null}zn(){this.Hf()}}}{const ul=self._s;ul.Qf=class extends ul.Vn{constructor(){super(),this.td=0,this.Ra=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Ra=t-this.td,this.sd=this.ed+this.Ra,this.td=this.sd-this.ed-this.Ra,this.ed=this.sd}nd(t){this.ed-=+t}zs(){return this.ed}Bf(){this.td=0,this.Ra=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Ra=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Ra=t.Ra,this.sd=t.sd,this.ed=t.ed}zn(){}}}{const cl=self._s,fl={},dl=!0;fl.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},fl.ld=function(t){this.size=0,this.ad=new fl.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},fl.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},fl.ld.prototype.clone=function(){var t=new fl.ld(this.compare);return t.fd(this),t},fl.ld.prototype.clear=function(){this.size=0,this.ad=new fl.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},fl.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},fl.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},fl.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new fl.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=dl,this.yd(s),this.size++}},fl.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==dl;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==dl?(t.parent.color=!1,s.color=!1,t.parent.parent.color=dl,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=dl,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==dl?(t.parent.color=!1,s.color=!1,t.parent.parent.color=dl,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=dl,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},fl.ld.prototype.wd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.Sd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.vd(i),this.size--},fl.ld.prototype.vd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==dl&&(s.color=!1,t.parent.color=dl,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=dl,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=dl,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==dl&&(s.color=!1,t.parent.color=dl,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=dl,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=dl,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},fl.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.wd(s),i}return null},fl.ld.prototype.bd=function(t,s){this.remove(s)},fl.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},fl.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},fl.ld.prototype.Sd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},fl.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},fl.ld.prototype.Gd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},fl.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},fl.ld.prototype.Td=function(){return this.min(this.root).key},fl.ld.prototype._d=function(){return this.max(this.root).key},fl.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},fl.ld.prototype.contains=function(t){return null!=this.gd(t).key},fl.ld.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},fl.ld.prototype.fd=function(t){if("array"==fl.Id(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==fl.Id(t.forEach))t.forEach(this.md,this);else if("function"==fl.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==fl.Id(t))for(var e in t)this.md(t[e])},fl.ld.prototype.Cd=function(t){if("array"==fl.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==fl.Id(t.forEach))t.forEach(this.bd,this);else if("function"==fl.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==fl.Id(t))for(var e in t)this.remove(t[e])},fl.ld.prototype.Pd=function(t){if("array"==fl.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==fl.Id(t.forEach))return t.every(this.contains,this);if("function"==fl.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==fl.Id(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},fl.ld.prototype.range=function(t,s){var i=[];return this.Rd(function(t){i.push(t)},t,s),i},fl.ld.prototype.Ad=function(t,s){if(!this.Ed())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Sd(i)}},fl.ld.prototype.Fd=function(t,s,i){if(!this.Ed())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},fl.ld.prototype.traverseTo=function(t,s,i){if(!this.Ed())for(var e=this.min(this.root),n=this.gd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},fl.ld.prototype.Rd=function(t,s,i,e){if(!this.Ed())for(var n=this.gd(s),r=this.gd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Sd(n)}},fl.ld.prototype.Od=function(t,s){if(!this.Ed())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Md(i)}},fl.ld.prototype.forEach=function(t,s){if(!this.Ed())for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.call(s,i.key,i.key,this)},fl.ld.prototype.some=function(t,s){if(this.Ed())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},fl.ld.prototype.every=function(t,s){if(this.Ed())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},fl.ld.prototype.map=function(t,s){var i=[];if(this.Ed())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))i.push(t.call(s,e.key,e.key,this));return i},fl.ld.prototype.filter=function(t,s){var i=[];if(this.Ed())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},fl.ld.prototype.Dd=function(){return this.size},fl.ld.prototype.Ed=function(){return 0==this.size},fl.ld.prototype.isSubsetOf=function(t){var s=fl.Dd(t);if(this.Dd()>s)return!1;var i=0;if(this.Ed())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))fl.contains.call(t,t,e.key)&&i++;return i==this.Dd()},fl.ld.prototype.intersection=function(t){var s=new fl.ld(this.compare);if(this.Ed())return s;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},cl.ld=class extends cl.Vn{constructor(t){super(),this.kd=new fl.ld(t),this.Ld=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.Ld?this.kd.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.kd.md(t)}Kf(t){this.Ld?this.kd.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.kd.remove(t)}Hs(t){return this.Ld?!!this.Nd.has(t)||!this.Bd.has(t)&&this.kd.contains(t):this.kd.contains(t)}Pu(){this.kd.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.Ld)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Fu(){return this.kd.Dd()+this.Nd.size-this.Bd.size}Ru(){return 0===this.Fu()}Wd(){if(this.Ru())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}jd(){if(this.Ru())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Kf(t),t}Vd(t){if(t=!!t,this.Ld!==t&&(this.Ld=t,!t)){for(const t of this.Bd)this.kd.remove(t);this.Bd.clear();for(const t of this.Nd)this.kd.md(t);this.Nd.clear()}}Ud(t){this.kd.forEach(t)}*values(){if(this.Ru())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ad;s=t.Sd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const pl=self._s;pl.Hd=class{constructor(t=pl.hardwareConcurrency){this.zd=t,this.Jd=[],this.qd=0}Bu(t,s){return new Promise((i,e)=>{const n={if:t,resolve:i,reject:e,$d:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Jd.indexOf(n);-1!==t&&(this.Jd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Jd.push(n),this.Xd())})}Yd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].if===t)return s;return-1}Kd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Zd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Xd(){if(!this.Jd.length)return;if(this.qd>=this.zd)return;this.qd++;const t=this.Jd.shift();t.$d?.signal&&t.onabort&&t.$d.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.qd--,this.Xd()}}}{const ml=self._s;ml.Qd=class{constructor(t,s,i){this.Df=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==ml.cp&&ml.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=ml.Ff(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.np,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}Bf(){this.hp||(this.gp(),this.ap=null,this.ep=ml.Ff())}rp(){this.ip=-1,this.ep=ml.Ff(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}zn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const gl=self._s;gl.yp=class{constructor(){this.wp=new Map,this.Sp=!1,this.vp=null,this.bp=null,this.Mp=null,this.Gp=null}xp(t){this.Sp=!!t}Tp(){return this.Sp}_p(t){this.vp=t}Ip(t){if(!this.vp)throw new Error("no get base size callback set");return this.vp(t)}Cp(t){this.bp=t}Pp(t,s,i,e,n,r){if(!this.bp)throw new Error("no raster at size callback set");return this.bp(t,s,i,e,n,r)}Rp(t){this.Mp=t}Ap(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Ep(t){this.Gp=t}Fp(){if(!this.Gp)throw new Error("no redraw callback set");this.Gp()}Op(t){let s=this.wp.get(t);return s||(s=gl.Hn(gl.Dp,this,t),this.wp.set(t,s)),s.kp(),s}Lp(t){this.wp.delete(t.Np())}Bp(){for(const t of this.wp.values())t.Wp(),t.jp()}}}{const yl=self._s;yl.Dp=class{constructor(t,s){this.Vp=t,this.Up=s,this.Hp=0,this.zp=0,this.Jp=0,this.qp=this.Vp.Ip(s).then(t=>{this.Vp&&(this.zp=t[0],this.Jp=t[1],this.Vp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.$p=!0,this.Vp&&this.Vp.Fp()}),this.Xp=0,this.Yp=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.$p=!1}zn(){if(this.Hp<=0)throw new Error("already released");this.Hp--,0===this.Hp&&this.im()}Wp(){this.tm&&(this.Vp.Ap(this.tm),this.tm=null)}im(){this.Wp(),this.Vp.Lp(this),this.Vp=null}Np(){return this.Up}kp(){this.Hp++}nm(){return this.Hp>0}rm(){return this.tm}jp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.$p)return;if(this.Qp)return;let e=yl.vr(Math.ceil(s)),n=yl.vr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Vp.Tp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Xp&&n<=this.Yp&&!this.sm)return;this.Qp=!0,this.Xp=e,this.Yp=n;const h=await this.Vp.Pp(this.Up,t,this.Xp,this.Yp,s,i);this.Vp&&(this.Wp(),this.tm=h,this.Kp=s,this.Zp=i,this.Qp=!1,this.sm=!1,this.Vp.Fp())}om(){return this.qp}am(){return this.zp}lm(){return this.Jp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.$p}}}{let wl=function(t){return xl.get(t)};0;const Sl=self._s;Sl.pm="\ufeff";const vl=new Set("0123456789");Sl.gm=function(t){return vl.has(t)};const bl=new Set(" \t\n\r\u2028\u2029");Sl.ym=function(t){return bl.has(t)},Sl.wm=function(t){return[...t].filter(t=>!Sl.ym(t)).join("")},Sl.Sm=function(t){for(const s of t)if(!Sl.ym(s))return!1;return!0},Sl.vm=function(t){for(const s of t)if(!Sl.ym(s))return!1;return!0},Sl.bm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Sl.Mm=function(t){return[...t].filter(t=>!Sl.bm(t)).join("")};let Ml=null;try{Ml=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Sl.Gm=function(t){return!Sl.ym(t)&&Ml&&Ml.test(t)};const Gl=new Set("0123456789.+-e");Sl.xm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!vl.has(s))return!1;for(let s of t)if(!Gl.has(s))return!1;return!0},Sl.Tm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Sl.gm(i))break;--s}return t.substr(0,s)},Sl._m=function(t){let s=Sl.Tm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const xl=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Tl=/[&<>"']/g;Sl.Im=function(t){return t.replace(Tl,wl)},Sl.Cm=function(t){let s=Sl.Pm(t,"\\","\\\\");return s=Sl.Pm(s,'"','\\"'),s=Sl.Pm(s,"\t","\\t"),s=Sl.Pm(s,"\r",""),Sl.Pm(s,"\n","\\n")},Sl.Rm=function(t){let s=Sl.Pm(t,"&","&amp;");return s=Sl.Pm(s,"<","&lt;"),s=Sl.Pm(s,">","&gt;"),Sl.Pm(s,'"',"&quot;")};const _l=/[-[\]{}()*+?.,\\^$|#\s]/g;Sl.Yi=function(t){return t.replace(_l,"\\$&")},Sl.Am=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Sl.Em=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Sl.Fm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Sl.Pm=function(t,s,i){return t.replaceAll(s,()=>i)},Sl.Om=function(t,s,i){return t.replace(new RegExp(Sl.Yi(s),"gi"),()=>i)},Sl.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Lm(),s instanceof Sl.dn&&s.Nm(t))},Sl.Bm=function(t,s){return t instanceof Sl.fn||t instanceof Sl.dn?t.equals(s):s instanceof Sl.fn||s instanceof Sl.dn?s.equals(t):t===s},Sl.Wm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Sl.jm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Sl.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Sl.Um=function(t,s){return t>s?1:t<s?-1:0},Sl.Hm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Il=new self.Intl.Segmenter;Sl.zm=function(t){const s=[];for(const i of Il.segment(t))s.push(i.segment);return s},Sl.Jm=function*(t){for(const s of Il.segment(t))yield s.segment},Sl.qm=function(t){let s=0;for(const i of Il.segment(t))++s;return s};const Cl=1073741824,Pl=1099511627776;Sl.$m=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Xm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Cl){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Pl){let s=t/Cl;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Pl;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Rl={Ym:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};Sl.sg=function(t,s){s=Object.assign({},Rl,s),Sl.eg.ig("common.time");const i=[],e=self.lang,n=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Ym?e(".approx-prefix"):"")+i.join(e(".separator"));return Sl.eg.rg(),r},Sl.hg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Sl.og=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Sl.ag=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());Sl.Gh(i,4,"0"),Sl.Gh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Sl.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Sl.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Sl.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let Al=function(t,s,i){const e=Fl.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Bl++}">`:t;if("string"==typeof e){if("a"===e&&0===Ll.length||"abbr"===e&&0===Nl.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Nl.length)throw new Error("invalid bbcode tip substitution");const s=Nl[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${El.Pm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Ll.length)throw new Error("invalid bbcode link substitution");const s=Ll[t];if("string"==typeof s)return`<a href="${Ll[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const El=self._s,Fl=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),Ol=new Set(["icon"]),Dl=/\[(\/?)([a-zA-Z0-9]+)\]/g,kl=/\[(\/?)([^\[\n]*?)\]/g;let Ll=null,Nl=null,Bl=0;const Wl=/\n/g;El.dn=class{constructor(t,s){if(this.fg=s&&s.dg?t:El.Im(t),this.pg="",this.mg=!1,this.gg=[],this.yg=[],s){if(this.mg=!!s.wg,s.links){if(s.links.length>9)throw new Error("too many links");this.gg=s.links}if(s.Sg){if(s.Sg.length>9)throw new Error("too many tips");this.yg=s.Sg}}this.vg=this.fg.includes("["),this.bg=this.mg&&this.fg.includes("\n"),this.Mg=!this.vg&&!this.bg&&!this.fg.includes("&"),this.Gg=!1,this.xg=[]}toString(){return this.fg}valueOf(){return this.fg}km(){return this.Mg}Tg(){return this.vg?this.fg.replace(Dl,""):this.fg}Lm(){if(this.Mg)return this.fg;if(!this.pg&&this.fg){let t=this.fg;this.vg&&(Bl=0,Ll=this.gg,Nl=this.yg,t=t.replace(Dl,Al),Ll=null,Nl=null),this.bg&&(t=t.replace(Wl,"<br>")),this.pg=t}return this.pg}Nm(t){if(this.gg.length)for(let s=0,i=this.gg.length;s<i;++s){const i=this.gg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof El.fn?this.Lm()===t.Lm():t instanceof El.dn?this.fg===t.fg:this.fg===t}_g(){if(this.Gg)return this.xg;const t=[],s=this.fg,i=[];kl.lastIndex=0;let e=0,n=null;for(;null!==(n=kl.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Ig:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ol.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Ig:i.slice(0)})}else i.push({tag:s,Cg:e})}}e<s.length&&t.push({text:s.substring(e),Ig:i.slice(0)});for(const s of t)s.text&&(s.text=this.Pg(s.text));return this.xg=t.map(t=>t.icon?El.Hn(El.Rg,{icon:t.icon,Ig:t.Ig}):El.Hn(El.Ag,{Eg:El.zm(t.text),Ig:t.Ig})),this.Gg=!0,this.xg}Pg(t){return t=El.Pm(t,"\\[","["),El.Pm(t,"\\\\","\\")}static Fg(t){return El.Hn(El.dn,t,{dg:!0}).Tg()}static Og(t){return t.replace(kl,"")}}}{let jl=function(t){return""!==t&&""!==t&&Jl.ym(t)},Vl=function(t){return ql.has(t)},Ul=function(t){return Jl.Gm(t)&&!Vl(t)},Hl=function(t){for(;t.length>0&&jl(t.at(-1));)t.pop()},zl=function(t){return"\n"===t||"\r\n"===t};0;const Jl=self._s,ql=new Set("");Jl.Dg=class{constructor(){this.kg=[],this.Lg=null}Ng(){return this.kg}Bg(){return this.kg.length}Wg(t){this.Lg=t}jg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vg()){const t=s(o);o.Ug(t.height),o.Hg(t.fontBoundingBoxAscent||0),o.zg(t.fontBoundingBoxDescent||0),o.Jg(t.qg||0),o.$g()?o.Xg(t.width):o.Yg()&&o.Kg(this.Lg)}i+=o.Vg(),e=Math.max(e,o.Zg()),n=Math.max(n,o.Qg()),r=Math.max(r,o.ty()),h=Math.max(h,o.sy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,qg:h}}iy(t,s,i,e,n,r){this.kg.push(Jl.Hn(Jl.Dg.ey,{ny:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,qg:r}))}Dg(t,s,i,e,n){if("string"==typeof t&&(t=[Jl.Hn(Jl.Ag,{Eg:Jl.zm(t)})]),Jl.Sh(this.kg),!t.length||1===t.length&&t[0].$g()&&t[0].Ru()||i<2)return;if(1===t.length){const e=t[0];if(e.$g()&&e.hy()<=100&&!e.oy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,qg:a}=s(e);if(t+=n,e.Xg(t),e.Ug(r),e.Hg(h||0),e.zg(o||0),e.Jg(a||0),t<=i)return void this.iy([e],t,r,h,o,a)}}let r;r="word"===e?this.ly(t):"cjk"===e?this.uy(t):this.py(t),this.my(r,s,i,n)}ly(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Yg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(zl(r))i.length>0&&s.push(i),s.push([Jl.Hn(Jl.Ag,{Eg:["\n"],Ig:t})]),i=[];else if(0===i.length)i.push(Jl.Hn(Jl.Ag,{Eg:[r],Ig:t})),e=jl(r);else{const n=jl(r);if(n===e){const s=i.at(-1);s.gy()===t?s.wy(r):i.push(Jl.Hn(Jl.Ag,{Eg:[r],Ig:t}))}else s.push(i),i=[Jl.Hn(Jl.Ag,{Eg:[r],Ig:t})],e=n}}return i.length>0&&s.push(i),s}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Yg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(zl(r))i.length>0&&s.push(i),s.push([Jl.Hn(Jl.Ag,{Eg:["\n"],Ig:t})]),i=[];else if(0===i.length)i.push(Jl.Hn(Jl.Ag,{Eg:[r],Ig:t})),e=Vl(r);else if(e||Ul(r)){const s=i.at(-1);s.gy()===t?s.wy(r):i.push(Jl.Hn(Jl.Ag,{Eg:[r],Ig:t})),e=Vl(r)}else s.push(i),i=[Jl.Hn(Jl.Ag,{Eg:[r],Ig:t})],e=Vl(r)}return i.length>0&&s.push(i),s}py(t){const s=[];for(const i of t)if(i.$g()){const t=i.yy();Jl.En(s,t.map(t=>[Jl.Hn(Jl.Ag,{Eg:[t],Ig:i.gy()})]))}else s.push([i]);return s}Sy(t){return t.map(t=>t.vy())}by(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.$g()&&s[0].$g()&&s[0].gy()===i.gy()&&(i.My(s[0].yy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.vy())}}my(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].$g()&&1===e[0].hy()&&zl(e[0].yy()[0])){if(0===h){const t=s(Jl.Hn(Jl.Ag,{Eg:[" "],Ig:e[0].gy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.qg||0}this.iy(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.Sy(n);this.by(t,e);const u=this.jg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.iy(n,r,h,o,a,l),n=[],e[0].$g()&&Jl.vm(e[0].yy()))r=0,h=0,o=0,a=0,l=0;else{this.by(n,e);const t=this.jg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.qg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.qg}n.length>0&&this.iy(n,r,h,o,a,l),this.Gy(s,e)}Gy(t,s){for(const i of this.kg){const e=i.xy();if(!e.length)continue;let n=e.at(-1);if(n.$g()){const r=n.yy(),h=r.slice(0);if(Hl(h),0===h.length)i.Ty(-n.Vg()),e.pop();else if(h.length<r.length){n._y(h);const s=t(n).width,e=n.Vg()-s;n.Xg(s),i.Ty(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Ty(s),i.Ty(s))}}}Pu(){Jl.Sh(this.kg)}Iy(){return this.kg.reduce((t,s)=>Math.max(t,s.Vg()),0)}Cy(){return this.kg.reduce((t,s)=>t+s.Zg(),0)}}}self._s.Dg.ey=class{constructor(t){this.xg=t.ny||[],this.Py=t.width||-1,this.Ry=t.height||-1,this.Ay=t.fontBoundingBoxAscent||-1,this.Ey=t.fontBoundingBoxDescent||-1,this.Fy=t.qg||-1,this.Oy=0,this.Dy=0}ny(){return this.xg.values()}*ky(){const t=this.xg;for(let s=t.length-1;s>=0;--s)yield t[s]}xy(){return this.xg}Ty(t){this.Py+=t}Vg(){return this.Py}Zg(){return this.Ry}Ly(){return this.Ay}ty(){return this.Ey}sy(){return this.Fy}Ny(t){this.Oy=t}By(){return this.Oy}Wy(t){this.Dy=t}jy(){return this.Dy}};self._s.Vy=class{constructor(t){this.Uy=t.Ig||[],this.Py=t.width||-1,this.Ry=t.height||-1,this.Ay=t.fontBoundingBoxAscent||-1,this.Ey=t.fontBoundingBoxDescent||-1,this.Fy=t.qg||-1,this.Oy=0,this.Dy=0}$g(){return!1}Yg(){return!1}gy(){return this.Uy}Hy(t){const s=this.Uy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}zy(t){return!!this.Hy(t)}Jy(){const t=new Map;for(const s of this.Uy)t.set(s.tag,s.Cg);return t}Ty(t){this.Py+=t}Xg(t){this.Py=t}Vg(){return this.Py}Ug(t){this.Ry=t}Zg(){return this.Ry}Hg(t){this.Ay=t}Qg(){return this.Ay}zg(t){this.Ey=t}ty(){return this.Ey}Jg(t){this.Fy=t}sy(){return this.Fy}Ny(t){this.Oy=t}By(){return this.Oy}Wy(t){this.Dy=t}jy(){return this.Dy}};{const $l=self._s;$l.Ag=class extends $l.Vy{constructor(t){super(t),this.qy=t.Eg}$g(){return!0}My(t){$l.En(this.qy,t),this.Py=-1,this.Ry=-1,this.Ay=-1,this.Ey=-1,this.Fy=-1}wy(t){this.qy.push(t)}vy(){return $l.Hn($l.Ag,{Eg:this.qy.slice(0),Ig:this.Uy,width:this.Py,height:this.Ry,fontBoundingBoxAscent:this.Ay,fontBoundingBoxDescent:this.Ey,qg:this.Fy})}yy(){return this.qy}_y(t){this.qy=t}hy(){return this.qy.length}Ru(){return 0===this.qy.length}oy(){return this.qy.includes("\n")}}}{const Xl=self._s;Xl.Rg=class extends Xl.Vy{constructor(t){super(t),this.$y=t.icon}Yg(){return!0}Xy(){return this.$y}vy(){return Xl.Hn(Xl.Rg,{icon:this.$y,Ig:this.Uy,width:this.Py,height:this.Ry,fontBoundingBoxAscent:this.Ay,fontBoundingBoxDescent:this.Ey,qg:this.Fy})}Yy(t){if(!t)return null;let s=Number(this.$y);return String(s)===this.$y?(s=Math.floor(s),t.Ky(s)):t.Zy(this.$y)}Kg(t){const s=this.Yy(t);this.Py=s?this.Ry*s.Vg()/s.Zg():0}Qy(t){const s=this.Yy(t);return s?s.Qy():null}hy(){return 1}}}{const Yl=self._s;Yl.tw=class{constructor(t){this.sw=new Map,this.iw=t.ew,this.rw=t.hw}zn(){for(const t of this.sw.values())t.zn();this.sw.clear()}ow(t){let s=this.sw.get(t);if(s)return s;const i=this.iw(t);return s=Yl.Hn(Yl.aw,this,{source:t,lw:i}),this.sw.set(t,s),s}uw(t){return this.sw.has(t)}cw(t){const s=this.sw.get(t);s&&s.zn(),this.sw.delete(t)}async fw(t){return await this.rw(t)}}}{const Kl=self._s;Kl.aw=class{constructor(t,s){this.dw=t,this.pw=s.source,this.mw=[],this.gw=new Map,this.yw=!1,this.ww=!1,this.Sw=null;const i=s.lw.bw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=Kl.Hn(Kl.Mw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.mw.push(e),s.tag&&this.gw.set(s.tag.toLowerCase(),e)}}zn(){for(const t of this.mw)t.zn();Kl.Sh(this.mw),this.gw.clear(),this.dw=null,this.pw=null}Gw(){return this.yw}xw(){return this.ww}Tw(){return this.Sw||(this.Sw=this._w()),this.Sw}async _w(){if(this.yw)return;this.yw=!0,this.ww=!0;const t=await this.dw.fw(this.pw);if(!this.dw)return;const s=t.bw;for(let t=0,i=Math.min(s.length,this.mw.length);t<i;++t){const i=s[t].Iw;this.mw[t].Cw(i)}this.ww=!1}Ky(t){return(t=Math.floor(t))<0||t>=this.mw.length?null:this.mw[t]}Zy(t){return this.gw.get(t.toLowerCase())||null}}}self._s.Mw=class{constructor(t,s){this.Pw=t,this.pw=s.source||null,this.Rw=s.index,this.Aw=s.tag,this.Py=s.width,this.Ry=s.height,this.Ew=null}zn(){this.Py=0,this.Ry=0,this.Pw=null}Fw(){return this.pw}Vg(){return this.Py}Zg(){return this.Ry}Cw(t){this.Ew=t}Qy(){return this.Ew}};{let Zl=function(t,s,i,e){const n=au;eu.A(hu,i,s),eu.A(ou,t,s),eu.Tt(n,hu,ou),eu.normalize(n,n),e.set(n[0],n[1],n[2],eu.xt(t,n))},Ql=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Ow,f=h.Dw,d=h.kw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},tu=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const su=self._s,iu=self.hs,eu=iu.ys,nu=iu.ws,ru=iu.fs,hu=eu.create(),ou=eu.create(),au=eu.create(),lu=nu.create(),uu=ru.create(),cu=eu.create(),fu=eu.create(),du=eu.create(),pu=eu.create(),mu=eu.create(),gu=eu.create(),yu=eu.create(),wu=eu.create(),Su=nu.S(0,0,1,1);su.Lw={Nw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Bw(t,s,i,e,n,r,h){const o=uu,a=lu;return ru.multiply(o,n,e),null!==ru.M(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,nu.Rt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Ww(t,s,i,e,n,r,h){const o=hu,a=ou;if(!su.Lw.Bw(t,s,0,e,n,r,o))return!1;if(!su.Lw.Bw(t,s,1,e,n,r,a))return!1;const l=ou;eu.A(l,a,o);const u=au;eu.set(u,0,0,1);const c=-i,f=eu.xt(u,l);let d=0;if(0===f){if(0!==eu.xt(u,o)+c)return!1}else if(d=-(eu.xt(o,u)+c)/f,d<0)return!1;return eu.St(h,o,l,d),!0}};class vu{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Ow=NaN,this.Dw=NaN,this.kw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Ow=t>0?1:0,this.Dw=s>0?1:0,this.kw=i>0?1:0}}su.Lw.jw=class{constructor(){this.Vw=new vu,this.Uw=new vu,this.Hw=new vu,this.zw=new vu,this.Jw=new vu,this.qw=new vu}$w(t,s){const i=Su;su.Lw.Bw(0,1,0,t,s,i,cu),su.Lw.Bw(1,1,0,t,s,i,fu),su.Lw.Bw(0,0,0,t,s,i,du),su.Lw.Bw(1,0,0,t,s,i,pu),su.Lw.Bw(0,1,1,t,s,i,mu),su.Lw.Bw(1,1,1,t,s,i,gu),su.Lw.Bw(0,0,1,t,s,i,yu),su.Lw.Bw(1,0,1,t,s,i,wu),Zl(du,cu,mu,this.Vw),Zl(cu,fu,gu,this.Uw),Zl(fu,pu,wu,this.Hw),Zl(pu,du,yu,this.zw),Zl(yu,mu,gu,this.qw),Zl(pu,fu,cu,this.Jw)}Xw(t,s,i,e,n,r){return Ql(t,s,i,e,n,r,this.Vw)&&Ql(t,s,i,e,n,r,this.Uw)&&Ql(t,s,i,e,n,r,this.Hw)&&Ql(t,s,i,e,n,r,this.zw)&&Ql(t,s,i,e,n,r,this.Jw)&&Ql(t,s,i,e,n,r,this.qw)}Yw(t,s,i){return!tu(t,s,i,this.Jw)}}}{const bu=self._s,Mu=self.hs,Gu=Mu.ys,xu=Mu.ws,Tu=Mu.fs,_u=Tu.create(),Iu=Gu.S(0,0,0),Cu=Gu.S(0,0,0),Pu=Gu.S(0,0,0),Ru=Gu.S(0,1,0),Au=(xu.S(0,0,0,0),new bu.Cl),Eu=new bu.Rect,Fu=new bu.Cl(0,0,1,0,1,1,0,1),Ou={Kw:1,Zw:1e4},Du=Tu.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);bu.Lw.Qw=class{constructor(t){t=Object.assign({},Ou,t),this.Py=0,this.Ry=0,this.tS=bu.Zn(45),this.sS=Math.tan(this.tS/2),this.iS=Tu.create(),this.eS=Tu.create(),this.nS=!1,this.rS=t.Kw,this.hS=t.Zw,this.oS=[],this.aS=new Map,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=new Map,this.MS=null,this.GS=[],this.xS=new Map,this.TS=0,this._S=0,this.IS=1,this.CS=[this.IS],this.PS=1,this.RS=[this.PS],this.AS=.5,this.ES=[this.AS],this.FS=0,this.OS=!0,this.DS=!1}kS(){this.TS=0,this._S=0,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.LS()}NS(){this.kS(),this.MS=null}BS(){for(const t of this.oS)t.zn();this.kS()}Vg(){return this.Py}Zg(){return this.Ry}WS(t){return this.jS()?100:t/(2*this.VS())}US(t){return this.jS()?t/(2*this.VS())/this.WS(t):1}HS(t){this.rS=t}zS(){return this.rS}JS(t){this.hS=t}qS(){return this.hS}$S(t){this.tS=t,this.sS=Math.tan(this.tS/2)}XS(){return this.tS}VS(){return this.sS}YS(){this.nS=!1}KS(){this.nS=!0}jS(){return!this.nS}ZS(){return this.nS}QS(t,s,i=.5,e=.5){const n=this.zS(),r=this.qS(),h=this.XS();if(.5===i&&.5===e)this.tv()?Tu.lt(t,h,s,n,r):Tu.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.VS()*n,c=u*s;Tu.ht(t,h*c,o*c,a*u,l*u,n,r),this.tv()&&Tu.mul(t,Du,t)}}sv(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.WS(i)*n*this.VS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.tv()?Tu.dt(t,a,l,u,c,this.zS(),this.qS()):Tu.ft(t,a,l,u,c,this.zS(),this.qS())}ev(t,s,i,e,n,r=1){let h=1;this.jS()&&(h=200*this.VS()/n);const o=Pu;Gu.set(o,h,-h,1);const a=Iu,l=Cu;Gu.multiply(a,s,o),Gu.multiply(l,i,o),Tu.gt(t,a,l,e||Ru),o[2]=r,Tu.scale(t,t,o)}nv(t,s,i,e,n,r,h,o){return Gu.set(Iu,t,s,i),Gu.set(Cu,e,n,r),this.ev(_u,Iu,Cu,Ru,h,o),_u}rv(t){this.oS.push(t),this.aS.set(t.Pc(),t)}hv(t){const s=this.oS.indexOf(t);-1!==s&&this.oS.splice(s,1),this.aS.delete(t.Pc())}LS(){bu.Sh(this.oS),this.aS.clear()}ov(t){return this.aS.get(t)||null}av(){return this.lS}lv(){this.uv(this.lS)}cv(){return this.uS}fv(){this.uv(this.uS)}dv(){this.uv(this.cS)}pv(){this.uv(this.fS)}mv(){this.uv(this.dS)}gv(){this.uv(this.pS)}yv(){this.uv(this.mS)}wv(){this.uv(this.gS)}Sv(){this.uv(this.yS)}vv(){this.uv(this.wS)}bv(){this.uv(this.SS)}Mv(){this.uv(this.vS)}Gv(t){this.MS=t}xv(){return this.MS}Tv(t,s,i,e,n,r){const h=bu.Lw.Iv._v(t,s,i,e,n,r);let o=this.bS.get(h);return o||(o=bu.Hn(bu.Lw.Iv,this,t,s,i,e,n,r),this.bS.set(h,o)),o.Cv(),o}Pv(t){t.Rv(),0===t.Av()&&(this.MS===t&&(this.MS=null),this.bS.delete(t.Ev()),t.zn())}Fv(t){bu.Sh(this.GS),this.xS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.GS.push([e,n]),this.xS.set(t,{number:s,Ov:e,Dv:n}),s++}}kv(t){return this.GS[t]}Lv(t){return this.kv(t)[0]}Nv(t){return this.kv(t)[1]}Bv(t){const s=this.xS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Wv(t){const s=this.xS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}jv(t){this.TS=t}Vv(){return this.TS}Uv(t){this._S=t,this.MS=null}Hv(){return this._S}ey(t,s,i,e){const n=bu.nr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.IS,a=r*o,l=h*o,u=this.PS;2===u?this.zv(t,s,0,i,e,0,a,l):1===u?this.Jv(t,s,0,i,e,0,a,l):this.qv(t,s,0,i,e,0,a,l)}$v(t,s,i,e,n,r){const h=bu.nr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.IS,u=o*l,c=a*l,f=this.PS;2===f?this.zv(t,s,i,e,n,r,u,c):1===f?this.Jv(t,s,i,e,n,r,u,c):this.qv(t,s,i,e,n,r,u,c)}zv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,M=f+o-p;this.Xv(m,g,i,S,v,r,b,M,r,y,w,i,Fu)}Jv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,Fu)}qv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,Fu)}Yv(t,s,i,e,n,r){const h=bu.nr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.IS,u=o*l,c=a*l,f=this.PS;2===f?this.Kv(t,s,i,e,u,c,n,r):1===f?this.Zv(t,s,i,e,u,c,n,r):this.Qv(t,s,i,e,u,c,n,r)}Kv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,M=f+r-p;Au.set(m,g,S,v,b,M,y,w),Eu.set(h,0,o,0),this.tb(Au,Eu)}Zv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Au.set(d,p,y,w,S,v,m,g),Eu.set(h,0,o,0),this.tb(Au,Eu)}Qv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Au.set(d,p,y,w,S,v,m,g),Eu.set(h,0,o,0),this.tb(Au,Eu)}sb(t,s,i,e){const n=.5*this.IS,r=this.PS;2===r?this.ib(t,s,i,e,n):1===r?this.eb(t,s,i,e,n):this.nb(t,s,i,e,n)}ib(t,s,i,e,n){this.zv(t,s,0,i,s,0,0,n),this.zv(i,s,0,i,e,0,n,0),this.zv(i,e,0,t,e,0,0,-n),this.zv(t,e,0,t,s,0,-n,0)}eb(t,s,i,e,n){this.Jv(t,s,0,i,s,0,0,n),this.Jv(i,s,0,i,e,0,n,0),this.Jv(i,e,0,t,e,0,0,-n),this.Jv(t,e,0,t,s,0,-n,0)}nb(t,s,i,e,n){this.qv(t,s,0,i,s,0,0,n),this.qv(i,s,0,i,e,0,n,0),this.qv(i,e,0,t,e,0,0,-n),this.qv(t,e,0,t,s,0,-n,0)}rb(t){this.sb(t.Za(),t.Qa(),t.tl(),t.sl())}hb(t){const s=bu.nr(t.Nr(),t.Br(),t.Wr(),t.jr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.IS,r=i*n,h=e*n,o=this.PS;2===o?this.ob(t,r,h):1===o?this.ab(t,r,h):this.lb(t,r,h)}ob(t,s,i){this.zv(t.Nr(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.zv(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.zv(t.Vr(),t.Ur(),0,t.Hr(),t.zr(),0,-s,-i),this.zv(t.Hr(),t.zr(),0,t.Nr(),t.Br(),0,-i,s)}ab(t,s,i){this.Jv(t.Nr(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Jv(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.Jv(t.Vr(),t.Ur(),0,t.Hr(),t.zr(),0,-s,-i),this.Jv(t.Hr(),t.zr(),0,t.Nr(),t.Br(),0,-i,s)}lb(t,s,i){this.qv(t.Nr(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.qv(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.qv(t.Vr(),t.Ur(),0,t.Hr(),t.zr(),0,-s,-i),this.qv(t.Hr(),t.zr(),0,t.Nr(),t.Br(),0,-i,s)}ub(t){this.IS=t,this.CS[this.CS.length-1]=t}cb(){return this.IS}fb(t){if(this.CS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.CS.push(t),this.IS=t}pb(){if(this.CS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.CS.pop(),this.IS=this.CS.at(-1)}mb(){this.PS=0,this.RS[this.RS.length-1]=0}gb(){this.PS=1,this.RS[this.RS.length-1]=0}yb(){this.PS=2,this.RS[this.RS.length-1]=0}wb(t){if("butt"===t)this.Sb();else if("square"===t)this.bb();else{if("zag"!==t)throw new Error("invalid line cap");this.Mb()}}Sb(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(0),this.PS=0}bb(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(1),this.PS=1}Mb(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(2),this.PS=2}Gb(){if(this.RS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.RS.pop(),this.PS=this.RS.at(-1)}xb(t){this.AS=t,this.ES[this.ES.length-1]=t}Tb(){return this.AS}_b(t){if(this.ES.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.ES.push(t),this.AS=t}Ib(){if(this.ES.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.ES.pop(),this.AS=this.ES.at(-1)}Cb(){this.Pb(0),this.Rb(0)}Ab(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Eb(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Eb(n,r,h,o,a,l,s,e)}}}Fb(){this.Ob(!0),this.FS++}Db(){return this.FS}kb(){this.FS++}Lb(t){this.OS=!!t}Nb(){return this.OS}Bb(t){this.DS=!!t}Wb(){return this.DS}jb(){return!1}tv(){return!1}Vb(){}Ub(){}Hb(){}zb(){return this.Vb()+this.Ub()+this.Hb()}Jb(){return bu.Hn(bu.Lw.qb,this)}}}self._s.Lw.$b=class{constructor(t,s){this.$n=s.name,this.Xb=t,this.Yb=s.Kb||0,this.Zb=s.Qb||0,this.tM=!!s.sM,this.iM=!!s.eM,this.nM=!!s.rM,this.hM=!!s.oM,this.aM=!!s.animated,this.lM=!!s.uM,this.cM=!!s.fM,this.dM=!1,this.pM=this.tM||this.lM||0!==this.Yb||0!==this.Zb}zn(){this.Xb=null}mM(){return this.Xb}Pc(){return this.$n}gM(){return 0!==this.Yb||0!==this.Zb}yM(){return this.Yb}wM(){return this.Zb}SM(){return this.tM}vM(){return this.iM}bM(){return this.nM}MM(){return this.hM}GM(){return this.aM}xM(){return this.lM}TM(){return this.cM}_M(){return this.dM}IM(){return this.pM}CM(){return!1}};{const ku=self._s;ku.Lw.Iv=class{constructor(t,s,i,e,n,r,h){this.Xb=t,this.Hp=0,this.PM=null,this.RM="",this.AM=i,this.EM=ku.Hn(ku.Go),this.EM.set(e),this.FM=n,this.OM=r,this.DM=h,"string"==typeof s?this.RM=s:(this.PM=s,this.RM=this.PM.Pc())}zn(){if(this.Hp>0)throw new Error("releasing state group still in use");this.Xb=null,this.PM=null,this.RM=""}kM(){const t=this.Xb;t.uv(this.PM),t.LM(this.AM),t.NM(this.EM),t.Uv(this.FM),t.Pb(this.OM),t.Rb(this.DM),t.Gv(this)}Ev(){return ku.Lw.Iv._v(this.RM,this.AM,this.EM,this.FM,this.OM,this.DM)}Cv(){++this.Hp}Rv(){--this.Hp}Av(){return this.Hp}BM(){this.PM=null}WM(t){if(this.PM=t.ov(this.RM),!this.PM)throw new Error("failed to restore shader program")}static _v(t,s,i,e,n,r){return("string"==typeof t?t:t.Pc())+","+s+","+i.Lo()+","+i.No()+","+i.Bo()+","+i.Wo()+","+e+","+n+","+r}}}{let Lu=function(t,s,i){const e=i.Nr(),n=i.Br(),r=i.Wr()-e,h=i.jr()-n;return[e+r*t+(i.Hr()-e)*s,n+h*t+(i.zr()-n)*s]};0;const Nu=globalThis._s;globalThis.assert;Nu.Lw.jM=class{constructor(t,s,i){this.VM=t,this.UM=s,this.HM=i,this.Pa=NaN,this.Ra=NaN,this.FM=NaN,this.zM=NaN,this.JM=NaN,this.Pa=0,this.Ra=0,this.FM=0,this.zM=0,this.JM=0}qM(t,s,i,e){this.Pa=t,this.Ra=s,this.zM=i,this.JM=e}$M(){return this.Pa}XM(t){this.Pa!==t&&(this.Pa=t,this.VM.YM())}KM(){return this.Ra}ZM(t){this.Ra!==t&&(this.Ra=t,this.VM.YM())}QM(){return this.FM}tG(t){this.FM!==t&&(this.FM=Math.max(t,0),this.VM.YM())}sG(){return this.zM}iG(t){this.zM=t}eG(){return this.JM}nG(t){this.JM=t}rG(t,s,i){[this.Pa,this.Ra]=Lu(t.Pa,t.Ra,s),this.FM=t.FM,this.zM=Nu._t(i.Za(),i.tl(),t.zM),this.JM=Nu._t(i.Qa(),i.sl(),t.JM)}hG(t,s,i){[this.Pa,this.Ra]=Lu(t.Pa,t.Ra,s),this.FM=t.FM,[this.zM,this.JM]=Lu(t.zM,t.JM,i)}oG(){return{x:this.$M(),y:this.KM(),z:this.QM(),u:this.sG(),v:this.eG()}}aG(t){this.XM(t.x),this.ZM(t.y),t.hasOwnProperty("z")&&this.tG(t.z),this.iG(t.u),this.nG(t.v)}lG(){return this.VM}uG(){return this.UM}cG(){return this.HM}},Nu.Lw.fG=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.dG=t,this.pG=s,this.mG=i||null,this.gG=[],this.yG=0,this.wG=0,this.SG=1,this.vG=1,this.bG=0,this.MG=!1,this.GG=[],this.xG=0,this.TG=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Nu.Hn(Nu.Lw.jM,this,r,i),h=r/e,o=i/n;t.qM(h,o,h,o),s.push(t)}this.gG.push(s)}}zn(){Nu.Sh(this.gG),Nu.Sh(this.GG)}_G(){return this.dG}IG(){return this.pG}CG(){return this.mG}PG(){return this.gG}YM(){this.MG=!0,this.TG=!0}AG(){if(!this.MG)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.gG)for(const h of r){const r=h.$M(),o=h.KM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.QM())}this.yG=t,this.wG=s,this.SG=i,this.vG=e,this.bG=n,this.MG=!1}EG(){return this.AG(),this.yG}FG(){return this.AG(),this.wG}OG(){return this.AG(),this.SG}DG(){return this.AG(),this.vG}kG(){return this.AG(),this.bG}LG(){return this.kG()>0}NG(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.dG||s<0||s>=this.pG?null:this.gG[s][t]}BG(t,s,i){const e=i instanceof Nu.Rect;if(t._G()!==this._G()||t.IG()!==this.IG())throw new Error("source mesh wrong size");const n=t.gG,r=this.gG;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.rG(n,s,i):r.hG(n,s,i)}}this.TG=!0}WG(t){if(!this.TG&&this.xG===t)return;const s=this.dG,i=this.pG,e=this.GG,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({jG:new Float32Array(l),VG:new Float32Array(u),UG:new Uint16Array(c)});else{const t=e[o];t.jG.length!==l&&(t.jG=new Float32Array(l)),t.VG.length!==u&&(t.VG=new Float32Array(u)),t.UG.length!==c&&(t.UG=new Uint16Array(c))}const{jG:f,VG:d,UG:p}=e[o];this.HG(h,r,t,f,d,p),h+=n}this.xG=t,this.TG=!1}HG(t,s,i,e,n,r){const h=this.gG,o=this.dG;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.$M(),e[a++]=o.KM(),e[a++]=o.QM()+i,n[l++]=o.sG(),n[l++]=o.eG(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}zG(t,s){this.WG(s);for(const{jG:s,VG:i,UG:e}of this.GG)t.JG(s,i,e)}qG(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.gG;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.$M(),o.KM(),o.QM()),[m,g,y]=s(u.$M(),u.KM(),u.QM()),[w,S,v]=s(c.$M(),c.KM(),c.QM()),[b,M,G]=s(a.$M(),a.KM(),a.QM());t.$v(f,d,p,m,g,y),t.$v(f,d,p,w,S,v),t.$v(f,d,p,b,M,G),i===l-1&&t.$v(m,g,y,w,S,v),n===r-1&&t.$v(b,M,G,w,S,v),o=u,a=c}e=h}}$G(t){const s=.001,i=.99999999,e=t.du(),n=[],r=this._G()-1,h=this.IG()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Nu.Yn(Math.floor(c*r),0,l),p=Nu.Yn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const v=()=>{c=Nu.Yn(Nu._t(c,g,w),0,1),f=Nu.Yn(Nu._t(f,y,w),0,1),n.push(c,f)};for(let t=0,b=e.length;t<b;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Nu.Yn(Math.floor(c*r),0,l),p=Nu.Yn(Math.floor(f*h),0,u);const M=(t+2)%b;for(g=e[M],y=e[M+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Nu.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Nu.$r(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))v(),m=!m,S=0;else if(p>0&&2!==S&&(w=Nu.$r(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))v(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Nu.$r(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))v(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Nu.$r(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Nu.$r(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;v(),p++,m=!0,S=2}}}return Nu.Hn(Nu.au,n)}XG(t,s){const i=this.YG(t);this.KG(i),s.mu(i)}YG(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.ZG(e,n);s.push(r,h)}return s}ZG(t,s){const i=this._G()-1,e=this.IG()-1,n=1/i,r=1/e,h=Nu.Yn(Math.floor(t*i),0,i-1),o=Nu.Yn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.NG(h,o),d=this.NG(h+1,o+1),p=Nu.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.NG(h+(p?1:0),o+(p?0:1)),[w,S,v]=Nu.Yr(t,s,a,l,m,g,u,c);return Nu.Kr(w,S,v,f.$M(),f.KM(),f.QM(),y.$M(),y.KM(),y.QM(),d.$M(),d.KM(),d.QM())}KG(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Nu.xh(t,s)}oG(){return{cols:this._G(),rows:this.IG(),points:this.gG.map(t=>t.map(t=>t.oG()))}}aG(t){const s=this._G(),i=this.IG();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.NG(e,t).aG(i[e])}}}}{let Bu=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{QG:i,tx:e,format:n,type:r}};0;const Wu=self._s,ju=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Vu=new Set(["nearest","bilinear","trilinear"]),Uu=new Set(["default","low","high"]),Hu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),zu={sx:"clamp-to-edge",ix:"clamp-to-edge",nx:"trilinear",hx:0,ox:"rgba8",lx:!0,ux:"default",mx:!0,gx:!1,width:-1,height:-1},Ju={mx:!0,flipY:!1},qu=new Set;Wu.Lw.yx=class{constructor(t){this.Xb=t,this.wx=null,this.Py=0,this.Ry=0,this.Sx=!0,this.vx="clamp-to-edge",this.bx="clamp-to-edge",this.Mx="trilinear",this.Gx=0,this.xx="rgba8",this.Tx=!1,this._x="default",this.Hp=0}Ix(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},zu,s),this.wx)throw new Error("already created texture");if(this.vx=s.sx,this.bx=s.ix,this.Mx=s.nx,this.Gx=s.hx,this.xx=s.ox,this.Tx=!!s.lx&&this.Xb.Nb(),this._x=s.ux,!Hu.has(this.vx)||!Hu.has(this.bx))throw new Error("invalid wrap mode");if(!Vu.has(this.Mx))throw new Error("invalid sampling");if(!ju.has(this.xx))throw new Error("invalid pixel format");if(!Uu.has(this._x))throw new Error("invalid mipmap quality");if(this.Sx=!0,t instanceof ArrayBuffer||null===t||s.gx){if(this.Py=s.width,this.Ry=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Py*this.Ry*4)throw new Error("ArrayBuffer wrong size")}else this.Py=t.width,this.Ry=t.height;if(this.Py<=0||this.Ry<=0)throw new Error("invalid texture data size");if(s.gx){const s=Wu.uo(this.Py,this.Ry);s.getContext("2d").drawImage(t,0,0,this.Py,this.Ry),t=s}const i=Wu.Sr(this.Py)&&Wu.Sr(this.Ry),e=this.Xb.Cx();if(this.Py>e||this.Ry>e)throw new Error("texture data exceeds maximum texture size");const n=this.Xb.Px(),r=this.Xb.Rx();this.wx=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.wx),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.mx),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=Bu(this.xx,n);if(this.Xb.Ax()||i||!this.Ex())if(r>=2){let s;s=this.Tx?Math.floor(Math.log2(Math.max(this.Py,this.Ry))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.QG,this.Py,this.Ry),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Py,this.Ry,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.tx,this.Py,this.Ry,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.tx,this.Py,this.Ry,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.tx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Py,this.Ry)),t instanceof ImageData){const s=Wu.uo(this.Py,this.Ry);s.getContext("2d").putImageData(t,0,0),t=s}const s=Wu.uo(Wu.vr(this.Py),Wu.vr(this.Ry)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.Mx,i.drawImage(t,0,0,this.Py,this.Ry,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.tx,h.format,h.type,s)}null!==t&&this.Fx(n),n.bindTexture(n.TEXTURE_2D,null),this.Xb.Ox(),this.Hp=1,qu.add(this)}Dx(t,s,i){if(i=Object.assign({},zu,i),this.wx)throw new Error("already created texture");if(this.vx=i.sx,this.bx=i.ix,this.Mx=i.nx,this.xx=i.ox,this.Tx=!!i.lx&&this.Xb.Nb(),this._x=i.ux,!Hu.has(this.vx)||!Hu.has(this.bx))throw new Error("invalid wrap mode");if(!Vu.has(this.Mx))throw new Error("invalid sampling");if(!ju.has(this.xx))throw new Error("invalid pixel format");if(!Uu.has(this._x))throw new Error("invalid mipmap quality");this.Sx=!1,this.Py=Math.floor(t),this.Ry=Math.floor(s);const e=Wu.Sr(this.Py)&&Wu.Sr(this.Ry),n=this.Xb.Cx();if(this.Py<=0||this.Ry<=0)throw new Error("invalid texture size");if(this.Py>n||this.Ry>n)throw new Error("texture exceeds maximum texture size");if(!this.Xb.Ax()&&this.Ex()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Xb.Px(),h=this.Xb.Rx();this.wx=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.wx),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.mx),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=Bu(this.xx,r),a=h>=2?o.QG:o.tx;r.texImage2D(r.TEXTURE_2D,0,a,this.Py,this.Ry,0,o.format,o.type,null),this.Fx(r),r.bindTexture(r.TEXTURE_2D,null),this.Xb.Ox(),this.Hp=1,qu.add(this)}kx(t){if("default"===this._x)return this.Sx?t.NICEST:t.FASTEST;if("low"===this._x)return t.FASTEST;if("high"===this._x)return t.NICEST;throw new Error("invalid mipmap quality")}Ex(){return"clamp-to-edge"!==this.vx||"clamp-to-edge"!==this.bx}Lx(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}Fx(t){const s=Wu.Sr(this.Py)&&Wu.Sr(this.Ry);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.Lx(t,this.vx)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.Lx(t,this.bx)),"nearest"===this.Mx)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Tx=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Xb.Ax())&&this.Tx){t.hint(t.GENERATE_MIPMAP_HINT,this.kx(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.Mx&&!this.Xb.Wb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Tx=!1;const i=this.Xb.Nx();i&&this.Gx>0&&"nearest"!==this.Mx&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Gx,this.Xb.Bx()))}Wx(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.wx||this.Hp<=0)throw new Error("texture not created");if(this.Sx)throw new Error("cannot update static texture");s=Object.assign({},Ju,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.Xb.Rx(),r=this.Xb.Px();r.bindTexture(r.TEXTURE_2D,this.wx),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.mx),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=Bu(this.xx,r),o=n>=2?h.QG:h.tx;try{if(this.Py===i&&this.Ry===e){const s=Wu.Sr(this.Py)&&Wu.Sr(this.Ry);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Xb.Ax())&&this.Tx&&(r.hint(r.GENERATE_MIPMAP_HINT,this.kx(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Py=i,this.Ry=e;const s=Wu.Sr(this.Py)&&Wu.Sr(this.Ry);if(!this.Xb.Ax()&&this.Ex()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Xb.Ax())&&this.Tx&&(r.hint(r.GENERATE_MIPMAP_HINT,this.kx(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Xb.Ox()}jx(){if(this.Hp>0)throw new Error("texture still has references");if(!this.wx)throw new Error("already deleted texture");qu.delete(this),this.Xb.Px().deleteTexture(this.wx),this.wx=null}Vx(){return!!this.wx}Ux(){return this.wx}mM(){return this.Xb}Hx(){this.Hp++}zx(){if(this.Hp<=0)throw new Error("no more references");this.Hp--}Jx(){return this.Hp}Vg(){return this.Py}Zg(){return this.Ry}qx(){return this.Sx}$x(){let t=this.Py*this.Ry;switch(this.xx){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Tx&&(t+=Math.floor(t/3)),t}static BM(){qu.clear()}static Xx(){return qu.values()}}}{const $u=self._s,Xu=(self.assert,self.hs),Yu=(Xu.ys,Xu.fs),Ku=new Set(["nearest","bilinear","trilinear"]),Zu={nx:"trilinear",alpha:!0,depth:!1,Yx:!0,Kx:!0,Zx:0},Qu=new Set;$u.Lw.Qx=class{constructor(t){this.Xb=t,this.tT=null,this.sT=null,this.wx=null,this.iT=null,this.Py=0,this.Ry=0,this.eT=!0,this.Mx="trilinear",this.nT=!0,this.rT=!1,this.hT=!0,this.oT=0,this.aT=Yu.create(),this.lT=0,this.uT=0,this.cT=0}fT(t,s,i){i=Object.assign({},Zu,i);const e=this.Xb.Rx();if(this.wx||this.iT)throw new Error("already created render target");if(this.Mx=i.nx,this.nT=!!i.alpha,this.rT=!!i.depth,this.hT=!!i.Yx,this.eT=!!i.Kx,this.oT=i.Zx,!Ku.has(this.Mx))throw new Error("invalid sampling");if(this.oT>0&&(e<2||this.hT))throw new Error("invalid use of multisampling");if(e<2&&(this.hT=!0),this.Py=t,this.Ry=s,this.Py<=0||this.Ry<=0)throw new Error("invalid render target size");this.dT();const n=this.Xb.Px();if(this.tT=n.createFramebuffer(),this.rT&&(this.sT=n.createFramebuffer()),this.hT){this.wx=this.Xb.pT(this.Py,this.Ry,{nx:this.Mx,ox:this.nT?"rgba8":"rgb8",lx:!1});const t=this.wx.Ux();n.bindFramebuffer(n.FRAMEBUFFER,this.tT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.rT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.sT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.iT=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.iT);const t=this.nT?n.RGBA8:n.RGB8;if(this.oT>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.oT>t&&(this.oT=t)}else this.oT=0}0===this.oT?n.renderbufferStorage(n.RENDERBUFFER,t,this.Py,this.Ry):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.oT,t,this.Py,this.Ry),n.bindFramebuffer(n.FRAMEBUFFER,this.tT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.iT),this.rT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.sT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.iT)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.Xb.mT();this.rT&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.tT),this.Xb.gT()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),Qu.add(this)}yT(t,s){if(this.Py===t&&this.Ry===s)return;this.Py=t,this.Ry=s,this.dT();const i=this.Xb.Px();i.bindFramebuffer(i.FRAMEBUFFER,this.tT),this.wx?this.wx.Wx(new ImageData(this.Py,this.Ry)):(i.bindRenderbuffer(i.RENDERBUFFER,this.iT),i.renderbufferStorage(i.RENDERBUFFER,this.nT?i.RGBA8:i.RGB8,this.Py,this.Ry),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.Xb.mT();this.rT&&e&&(this.Xb.gT()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}jx(){if(!this.wx&&!this.iT)throw new Error("already deleted render target");Qu.delete(this);const t=this.Xb.Px();this.wx?(t.bindFramebuffer(t.FRAMEBUFFER,this.tT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.rT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.sT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Xb.wT(this.wx),this.wx=null):this.iT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.rT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.sT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.iT),this.iT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Xb.Rx()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.tT),this.rT&&t.deleteFramebuffer(this.sT);const s=this.Xb.ST();s.vT=null,s.bT=null,this.tT=null}dT(){this.Xb.QS(this.aT,this.Py/this.Ry),this.lT=this.Xb.XS(),this.uT=this.Xb.zS(),this.cT=this.Xb.qS()}MT(){return this.tT}GT(){return this.sT}mM(){return this.Xb}xT(){return this.wx}TT(){return this.Xb.XS()===this.lT&&this.Xb.zS()===this.uT&&this.Xb.qS()===this.cT||this.dT(),this.aT}_T(){return"nearest"!==this.Mx}IT(){return this.nT}CT(){return this.hT}PT(){return this.rT}Vg(){return this.Py}Zg(){return this.Ry}RT(){return this.eT}AT(){return this.oT}ET(){const t={nx:this.Mx,alpha:this.nT,Yx:this.hT};return this.eT||(t.width=this.Py,t.height=this.Ry),t}FT(t){return"nearest"!==(t=Object.assign({},Zu,t)).nx===this._T()&&!!t.alpha===this.IT()&&!!t.depth===this.PT()&&!(this.Xb.Rx()>=2&&!!t.Yx!==this.CT())&&("number"==typeof t.width||"number"==typeof t.height?!this.RT()&&this.Vg()===Math.floor(t.width)&&this.Zg()===Math.floor(t.height):this.RT())}OT(){return this.wx?this.wx.Ux():null}$x(){return this.wx?this.wx.$x():this.Py*this.Ry*(this.nT?4:3)}static async DT(t,s){const i=await t.kT(s,!0);return await $u.do(i)}static BM(){Qu.clear()}static LT(){return Qu.values()}static NT(t,s){for(const i of Qu)i.RT()&&i.yT(t,s)}}}{const tc=self._s,sc=self.hs,ic=(sc.ys,sc.fs,new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));tc.Lw.BT=class extends tc.Lw.$b{static async WT(t,s){const i=t.Px(),e=s.src,n=s.jT,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.VT();if(l?await t.UT(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await tc.dh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=tc.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!tc.Sm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async HT(t,s){const i=await tc.Lw.BT.WT(t,s);return new tc.Lw.BT(t,i,s)}constructor(t,s,i){super(t,i);const e=t.Px(),n=t.ST();t.Ob(),e.useProgram(s),this.zT=e,this.PM=s,this.JT="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.qT=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.$T),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.XT),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.YT),e.vertexAttribPointer(o,4,t.KT()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.qT&&(e.bindBuffer(e.ARRAY_BUFFER,t.ZT),e.vertexAttribPointer(this.qT,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.qT)),e.bindBuffer(e.ARRAY_BUFFER,null),this.QT=new tc.Lw.t_(this,"matP","mat4"),this.s_=new tc.Lw.t_(this,"matMV","mat4"),this.i_=new tc.Lw.t_(this,"color","vec4"),this.e_=new tc.Lw.t_(this,"samplerFront","sampler"),this.n_=new tc.Lw.t_(this,"pointTexStart","vec2"),this.r_=new tc.Lw.t_(this,"pointTexEnd","vec2"),this.h_=new tc.Lw.t_(this,"zElevation","float"),this.o_=new tc.Lw.t_(this,"tileSize","vec2"),this.a_=new tc.Lw.t_(this,"tileSpacing","vec2"),this.l_=new tc.Lw.t_(this,"color2_","vec4"),this.u_=new tc.Lw.t_(this,"outlineThickness","float"),this.c_=new tc.Lw.t_(this,"samplerBack","sampler"),this.f_=new tc.Lw.t_(this,"samplerDepth","sampler"),this.d_=new tc.Lw.t_(this,"destStart","vec2"),this.p_=new tc.Lw.t_(this,"destEnd","vec2"),this.m_=new tc.Lw.t_(this,"srcStart","vec2"),this.g_=new tc.Lw.t_(this,"srcEnd","vec2"),this.y_=new tc.Lw.t_(this,"srcOriginStart","vec2"),this.w_=new tc.Lw.t_(this,"srcOriginEnd","vec2"),this.S_=new tc.Lw.t_(this,"pixelSize","vec2"),this.v_=new tc.Lw.t_(this,"seconds","float"),this.b_=new tc.Lw.t_(this,"devicePixelRatio","float"),this.M_=new tc.Lw.t_(this,"layerScale","float"),this.G_=new tc.Lw.t_(this,"layerAngle","float"),this.x_=new tc.Lw.t_(this,"layoutStart","vec2"),this.T_=new tc.Lw.t_(this,"layoutEnd","vec2"),this.__=new tc.Lw.t_(this,"zNear","float"),this.I_=new tc.Lw.t_(this,"zFar","float"),this.C_=!!(this.S_.P_()||this.v_.P_()||this.c_.P_()||this.d_.P_()||this.p_.P_()||this.m_.P_()||this.g_.P_()||this.y_.P_()||this.w_.P_()||this.b_.P_()||this.M_.P_()||this.G_.P_()||this.x_.P_()||this.T_.P_());const a=i.parameters||[];this.R_=[],this.dM=this.S_.P_()||this.m_.P_()||this.g_.P_()||this.y_.P_()||this.w_.P_(),this.A_=!1,this.E_=!1,this.i_.F_(1,1,1,1),this.l_.F_(1,1,1,1),this.e_.O_(0),this.c_.O_(1),this.f_.O_(2),this.n_.D_(0,0),this.r_.D_(1,1),this.h_.k_(0),this.o_.D_(0,0),this.a_.D_(0,0),this.d_.D_(0,0),this.p_.D_(1,1),this.m_.D_(0,0),this.g_.D_(0,0),this.y_.D_(0,0),this.w_.D_(0,0),this.S_.D_(0,0),this.b_.k_(1),this.__.k_(t.zS()),this.I_.k_(t.qS()),this.M_.k_(1),this.G_.k_(0),this.v_.k_(0),this.x_.D_(0,0),this.T_.D_(0,0),this.u_.k_(1);for(const t of a){const s=t[0],i=t[2],e=new tc.Lw.t_(this,s,i);"color"===i?e.L_(0,0,0):e.k_(0),this.R_.push(e)}this.JT?this.N_(n.B_):(this.W_(n.B_,!0),this.j_(n.V_,!0));const l=n.U_;e.useProgram(l?l.PM:null)}zn(){this.zT.deleteProgram(this.PM),this.PM=null,this.Xb.hv(this),this.zT=null,super.zn()}H_(){return this.zT}z_(){return this.PM}J_(){return this.R_.length}q_(t){return t<0||t>=this.R_.length?null:this.R_[t].X_()}Y_(t){for(let s=0,i=t.length;s<i;++s)if(!this.R_[s].K_(t[s]))return!1;return!0}Z_(t){for(let s=0,i=t.length;s<i;++s)this.R_[s].Q_(t[s])}tI(t,s,i,e,n,r,h,o,a,l){return!(this.c_.P_()||this.S_.P_()&&!this.S_.sI(n,r)||this.d_.P_()&&!this.d_.sI(t.Za(),t.Qa())||this.p_.P_()&&!this.p_.sI(t.tl(),t.sl())||this.b_.P_()&&!this.b_.iI(h)||this.M_.P_()&&!this.M_.iI(o)||this.G_.P_()&&!this.G_.iI(a)||this.m_.P_()&&!this.m_.sI(s.Za(),s.Qa())||this.g_.P_()&&!this.g_.sI(s.tl(),s.sl())||this.y_.P_()&&!this.y_.sI(i.Za(),i.Qa())||this.w_.P_()&&!this.w_.sI(i.tl(),i.sl())||this.x_.P_()&&!this.x_.sI(e.Za(),e.Qa())||this.T_.P_()&&!this.T_.sI(e.Qa(),e.sl())||this.v_.P_()&&!this.v_.iI(l))}eI(t,s,i,e,n,r,h,o,a,l){this.c_.P_()||(this.S_.P_()&&this.S_.nI(n,r),this.d_.P_()&&this.d_.nI(t.Za(),t.Qa()),this.p_.P_()&&this.p_.nI(t.tl(),t.sl()),this.b_.P_()&&this.b_.rI(h),this.M_.P_()&&this.M_.rI(o),this.G_.P_()&&this.G_.rI(a),this.m_.P_()&&this.m_.nI(s.Za(),s.Qa()),this.g_.P_()&&this.g_.nI(s.tl(),s.sl()),this.y_.P_()&&this.y_.nI(i.Za(),i.Qa()),this.w_.P_()&&this.w_.nI(i.tl(),i.sl()),this.x_.P_()&&this.x_.nI(e.Za(),e.Qa()),this.T_.P_()&&this.T_.nI(e.Qa(),e.sl()),this.v_.P_()&&this.v_.rI(l))}W_(t,s){this.A_&&!s||this.JT||(this.QT.P_()&&this.QT.hI(t),this.A_=!0)}oI(){this.A_=!1}j_(t,s){this.E_&&!s||this.JT||(this.s_.P_()&&this.s_.hI(t),this.E_=!0)}aI(){this.E_=!1}N_(t){if(!this.JT)throw new Error("not device transform shader");this.QT.hI(t);const s=this.Xb,i=s.Vg()/2,e=s.Zg()/2,n=s.nv(i,e,s.WS(s.Zg()),i,e,0,s.Zg());this.s_.hI(n)}lI(t){this.i_.P_()&&this.i_.uI(t[0],t[1],t[2],t[3])}static cI(){return ic}static fI(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static dI(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static pI(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static mI(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static gI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yI(t){return["#version 300 es",tc.Lw.BT.fI(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static wI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static SI(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vI(t){return["#version 300 es",tc.Lw.BT.fI(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bI(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+tc.Lw.BT.fI(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static MI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static GI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static xI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static TI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _I(t){return["#version 300 es",tc.Lw.BT.fI(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static II(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static CI(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static RI(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static AI(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static EI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static FI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static OI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static DI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const ec=self._s,nc=self.hs.fs,rc=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);ec.Lw.t_=class{constructor(t,s,i){if(!rc.has(i))throw new Error("invalid uniform type");this.mG=t,this.zT=this.mG.H_(),this.$n=s,this.Jc=i,this.kI="color"===this.Jc,this.LI=this.zT.getUniformLocation(this.mG.z_(),s),this.NI=!!this.LI;const e=rc.get(i);this.BI=new Float32Array(e),this.WI=new Float32Array(e)}zn(){this.mG=null,this.zT=null,this.LI=null}P_(){return this.NI}X_(){return this.Jc}jI(){return this.kI}k_(t){this.P_()&&(this.BI[0]=t,this.WI.set(this.BI),this.zT.uniform1f(this.LI,t))}O_(t){this.P_()&&(this.BI[0]=t,this.WI.set(this.BI),this.zT.uniform1i(this.LI,t))}D_(t,s){this.P_()&&(this.BI[0]=t,this.BI[1]=s,this.WI.set(this.BI),this.zT.uniform2f(this.LI,t,s))}L_(t,s,i){this.P_()&&(this.BI[0]=t,this.BI[1]=s,this.BI[2]=i,this.WI.set(this.BI),this.zT.uniform3f(this.LI,t,s,i))}F_(t,s,i,e){this.P_()&&(this.BI[0]=t,this.BI[1]=s,this.BI[2]=i,this.BI[3]=e,this.WI.set(this.BI),this.zT.uniform4f(this.LI,t,s,i,e))}VI(t){t=Math.fround(t);const s=this.BI;s[0]!==t&&(s[0]=t,this.zT.uniform1f(this.LI,t))}UI(t){const s=this.BI;s[0]!==t&&(s[0]=t,this.zT.uniform1i(this.LI,t))}HI(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.BI;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.zT.uniform2f(this.LI,t,s))}zI(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.BI;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.zT.uniform3f(this.LI,t,s,i))}uI(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.BI;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.zT.uniform4f(this.LI,t,s,i,e))}hI(t){const s=this.BI;nc.F(s,t)||(ec.yh(s,t,0),this.zT.uniformMatrix4fv(this.LI,!1,t))}K_(t){const s=this.WI;return this.jI()?s[0]===Math.fround(t.Lo())&&s[1]===Math.fround(t.No())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}Q_(t){const s=this.WI;this.jI()?(s[0]=t.Lo(),s[1]=t.No(),s[2]=t.Bo()):s[0]=t}iI(t){return this.WI[0]===Math.fround(t)}sI(t,s){const i=this.WI;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}rI(t){this.WI[0]=t}nI(t,s){const i=this.WI;i[0]=t,i[1]=s}}}{const hc=self._s,oc=self.hs,ac=(oc.ws,oc.fs);hc.Lw.JI=class{constructor(t){this.qI=t,this.V_=ac.create(),this.B_=ac.create(),this.vT=null,this.bT=null,this.$I=!1,this.U_=null,this.XI=new hc.Rect,this.clearColor=hc.Hn(hc.Go,0,0,0,0)}},hc.Lw.YI=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.KI=t,this.zT=t.qI.Px(),this.ZI=0,this.QI=0,this.tC=null,this.sC=new Float32Array(s,0,16),this.iC=new Float32Array(s,64,4),this.eC=new Float32Array(s,80,4),this.nC=[]}rC(t,s){this.Jc=1,this.ZI=t,this.QI=s}hC(){const t=this.zT;t.drawElements(t.TRIANGLES,this.QI,t.UNSIGNED_SHORT,this.ZI)}oC(t){this.Jc=2,this.tC=t}aC(){const t=this.zT,s=this.tC;t.bindTexture(t.TEXTURE_2D,s?s.Ux():null)}lC(t){this.Jc=20,t.Vo(this.iC,0)}uC(){const t=this.iC,s=this.KI.U_;s.l_.P_()&&s.l_.uI(t[0],t[1],t[2],t[3])}cC(t,s){this.Jc=3,this.ZI=t,this.QI=s}fC(){this.zT.blendFunc(this.ZI,this.QI)}dC(t,s,i,e){this.Jc=4;const n=this.iC;n[0]=t,n[1]=s,n[2]=i,n[3]=e}pC(){const t=this.iC;this.zT.viewport(t[0],t[1],t[2],t[3])}mC(t){this.Jc=5,ac.m(this.sC,t)}gC(){const t=this.KI,s=t.qI.oS,i=t.U_,e=this.sC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.W_(e,!0):n.oI()}ac.m(t.B_,e)}yC(t){this.Jc=6,ac.m(this.sC,t)}wC(){const t=this.KI,s=t.qI.oS,i=t.U_,e=this.sC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.j_(e,!0):n.aI()}ac.m(t.V_,e)}SC(t){this.Jc=7,this.tC=t}vC(){const t=this.zT,s=this.tC,i=this.KI;s?(i.vT=s.MT(),i.bT=s.GT(),i.$I&&i.bT?t.bindFramebuffer(t.FRAMEBUFFER,i.bT):t.bindFramebuffer(t.FRAMEBUFFER,i.vT)):(i.vT=null,i.bT=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}bC(t){this.Jc=8,t.Vo(this.sC,0)}MC(t,s,i,e){this.Jc=8;const n=this.sC;n[0]=t,n[1]=s,n[2]=i,n[3]=e}GC(){const t=this.zT,s=this.sC,i=this.KI.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.qo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Co(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}xC(t){this.Jc=14,t.Vo(this.sC,0)}TC(){const t=this.sC;this.KI.XI.set(t[0],t[1],t[2],t[3])}_C(t,s,i){this.Jc=9,this.ZI=t,this.QI=1,this.sC[0]=s,i.Vo(this.iC,0)}IC(){const t=this.zT,s=this.KI,i=s.qI.uS;t.useProgram(i.PM),i.W_(s.B_,!1),i.j_(s.V_,!1);const e=s.XI;i.n_.P_()&&i.n_.HI(e.Za(),e.Qa()),i.r_.P_()&&i.r_.HI(e.tl(),e.sl());const n=this.sC[0];if(i.h_.P_()&&i.h_.VI(n),i.i_.P_()){const t=this.iC;i.i_.uI(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.ZI/4,this.QI),t.useProgram(s.U_.PM)}CC(t){this.Jc=10,this.tC=t}PC(){const t=this.zT,s=this.KI,i=this.tC;s.U_=i,t.useProgram(i.PM),i.W_(s.B_,!1),i.j_(s.V_,!1)}RC(){this.Jc=11}AC(){const t=this.KI.U_,s=this.zT,i=this.sC,e=this.iC,n=this.eC;if(t.c_.P_()){const t=this.KI.qI,i=this.tC;t.EC!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.Ux():null),t.EC=i,s.activeTexture(s.TEXTURE0))}t.S_.P_()&&t.S_.HI(i[0],i[1]),t.d_.P_()&&t.d_.HI(i[2],i[3]),t.p_.P_()&&t.p_.HI(i[4],i[5]),t.b_.P_()&&t.b_.VI(this.QI),t.M_.P_()&&t.M_.VI(i[6]),t.G_.P_()&&t.G_.VI(i[7]),t.m_.P_()&&t.m_.HI(i[12],i[13]),t.g_.P_()&&t.g_.HI(i[14],i[15]),t.y_.P_()&&t.y_.HI(n[0],n[1]),t.w_.P_()&&t.w_.HI(n[2],n[3]),t.x_.P_()&&t.x_.HI(e[0],e[1]),t.T_.P_()&&t.T_.HI(e[2],e[3]),t.v_.P_()&&t.v_.VI(this.ZI)}FC(){this.Jc=12}OC(){const t=this.KI.U_.R_,s=this.nC;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.jI()?e.zI(n.Lo(),n.No(),n.Bo()):e.VI(n)}}DC(t){this.Jc=13,this.tC=t}kC(){const t=this.zT,s=this.tC,i=this.KI.vT;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}LC(t,s,i){this.Jc=16;const e=this.sC,n=this.KI.qI;e[0]=t.Vg(),e[1]=t.Zg(),e[2]=s?s.Vg():n.Vg(),e[3]=s?s.Zg():n.Zg(),e[4]=t._T()?1:0,e[5]="stretch"===i;const r=this.nC;hc.Sh(r),r.push(t.MT()),r.push(s?s.MT():null)}NC(){const t=this.sC,s=this.nC,i=this.zT,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}BC(t){this.Jc=17,this.tC=t}WC(){this.tC.jC(),this.tC=null}VC(t){this.Jc=18,this.tC=t}UC(){this.tC.HC(),this.tC=null}zC(t,s,i){this.Jc=19;const e=this.sC;e[0]=t,e[1]=s,e[2]=i}JC(){const t=this.KI.U_,s=this.sC;t.S_.P_()&&t.S_.HI(s[0],s[1]),t.u_.P_()&&t.u_.VI(s[2])}qC(t,s,i,e,n,r,h){this.Jc=15;const o=this.sC;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}$C(){const t=this.KI.U_,s=this.sC;t.m_.P_()&&t.m_.HI(s[0],s[1]),t.S_.P_()&&t.S_.HI(s[4],s[5]),t.o_.P_()&&t.o_.HI(s[6],s[7]),t.a_.P_()&&t.a_.HI(s[8],s[9])}XC(t,s,i,e,n,r,h){this.Jc=28;const o=this.sC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}YC(){const t=this.KI.U_,s=this.sC;t.S_.P_()&&t.S_.HI(s[0],s[1]),t.o_.P_()&&t.o_.HI(s[2],s[3]),t.u_.P_()&&t.u_.VI(s[4]),t.a_.P_()&&t.a_.HI(s[5],s[6])}KC(t){this.Jc=21,this.ZI=t?1:0}ZC(){const t=this.zT,s=0!==this.ZI;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}QC(t){this.Jc=22,this.ZI=t?1:0}tP(){const t=this.zT;0===this.ZI?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}sP(t){this.Jc=23,this.ZI=t?1:0}iP(){const t=this.zT,s=this.KI,i=s.qI,e=0!==this.ZI;s.$I=e,t.activeTexture(t.TEXTURE2),e?(s.bT&&t.bindFramebuffer(t.FRAMEBUFFER,s.bT),t.bindTexture(t.TEXTURE_2D,i.mT())):(t.bindTexture(t.TEXTURE_2D,null),s.bT&&t.bindFramebuffer(t.FRAMEBUFFER,s.vT)),t.activeTexture(t.TEXTURE0)}eP(){this.Jc=24}nP(){const t=this.zT;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}rP(){this.Jc=25}hP(){const t=this.zT;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}oP(){this.Jc=26}aP(){const t=this.zT;t.disable(t.STENCIL_TEST)}lP(t,s,i,e,n){this.Jc=27,this.ZI=t?1:0;const r=this.sC;r[0]=s,r[1]=i,r[2]=e,r[3]=n}uP(){const t=this.zT,s=this.sC;1===this.ZI?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}cP(t){this.Jc=29,this.ZI=t}fP(){const t=this.zT,s=this.ZI;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}dP(t){this.Jc=30,this.ZI=t}pP(){const t=this.zT;t.frontFace(0===this.ZI?t.CW:t.CCW)}mP(){switch(this.Jc){case 1:return void this.hC();case 2:return void this.aC();case 3:return void this.fC();case 4:return void this.pC();case 5:return void this.gC();case 6:return void this.wC();case 7:return void this.vC();case 8:return void this.GC();case 9:return void this.IC();case 10:return void this.PC();case 11:return void this.AC();case 12:return void this.OC();case 13:return void this.kC();case 14:return void this.TC();case 15:return void this.$C();case 16:return void this.NC();case 17:return void this.WC();case 18:return void this.UC();case 19:return void this.JC();case 20:return void this.uC();case 21:return void this.ZC();case 22:return void this.tP();case 23:return void this.iP();case 24:return void this.nP();case 25:return void this.hP();case 26:return void this.aP();case 27:return void this.uP();case 28:return void this.YC();case 29:return void this.fP();case 30:return void this.pP()}}}}{let lc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},uc=function(t){return t*(4/3)},cc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const fc=self._s,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new fc.Go(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),wc=new Set(["word","cjk","character"]),Sc=new Set(["ltr","rtl"]),vc=new Set;fc.gP&&fc.gP.addEventListener("fontload",t=>{const s=t.font.Pc();for(const t of vc)(t.yP()||fc.Ke(t.wP(),s))&&t.SP()});let bc=!1,Mc=!1;fc.Lw.qb=class{constructor(t,s){s=Object.assign({},pc,s),this.Xb=t,this.vP="Arial",this.bP=16,this.MP=1,this.GP=0,this.xP=!1,this.TP=!1,this._P="black",this.IP=!1,this.Lg=null,this.CP=!0,this.PP=null,this.RP=new Set,this.AP="left",this.EP="top",this.Bc="",this.FP=null,this.OP=fc.Hn(fc.Dg),this.DP="word",this.kP="ltr",this.LP=!1,this.NP=!1,this.BP=!1,this.WP=-1,this.jP=0,this.VP=0,this.UP=0,this.Py=0,this.Ry=0,this.HP=1,this.zP=null,this.JP=null,this.qP=null,this.$P=null,this.XP=-1,this.YP=-1,this.KP="",this.ZP="",this.QP="",this.tR=1,this.sR=1,this.iR=t=>this.eR(t),this.wx=null,this.nR=new fc.Rect,this.rR=1,this.hR=new fc.Of(()=>{this.oR(),this.aR(8,8)},s.timeout),this.lR=null,this.uR=!1,vc.add(this)}zn(){this.PP=null,this.RP.clear(),this.Lg=null,this.FP=null,this.zP=null,this.JP=null,this.qP=null,this.$P=null,this.iR=null,this.hR.zn(),this.lR=null,this.oR(),this.OP.Pu(),this.OP=null,this.Xb=null,this.uR=!0,vc.delete(this)}cR(){this.BP=!0}fR(){this.cR(),this.NP=!0}SP(){this.fR(),this.LP=!0}dR(t){if(t=!!t,this.IP===t)return;this.IP=t;const s=this.IP?"alphabetic":"top";this.JP&&(this.JP.textBaseline=s),this.qP&&(this.qP.textBaseline=s),this.SP()}yP(){return this.IP}Wg(t){this.Lg!==t&&(this.Lg=t,this.OP.Wg(t),this.Lg&&this.Lg.xw()&&this.Lg.Tw().then(()=>this.cR()),this.SP())}pR(t){t=!!t,this.CP!==t&&(this.CP=t,this.cR())}mR(t){t||(t="serif"),this.vP!==t&&(this.vP=t,this.SP())}wP(){return this.vP}gR(t){t<.1&&(t=.1),this.bP!==t&&(this.bP=t,this.SP())}yR(){return this.bP}wR(t){this.MP!==t&&(this.MP=t,this.SP())}SR(t){this.GP!==t&&(this.GP=t,this.fR())}vR(){return this.GP}bR(t){t=!!t,this.xP!==t&&(this.xP=t,this.SP())}MR(){return this.xP}GR(t){t=!!t,this.TP!==t&&(this.TP=t,this.SP())}xR(){return this.TP}TR(t){t=Math.floor(t),this.WP!==t&&(this.WP=t,this.cR())}_R(){return this.WP}IR(t,s){let i=[];(this.xP||s.zy("b"))&&i.push("bold"),(this.TP||s.zy("i"))&&i.push("italic");const e=s.Hy("size"),n=(e?parseFloat(e.Cg):this.bP)*this.MP;t?i.push(n+"pt"):i.push(n*this.CR()+"pt");let r=this.vP;const h=s.Hy("font");return h&&h.Cg&&(r=h.Cg,this.PP&&!this.RP.has(r)&&(this.PP(r),this.RP.add(r))),r&&(dc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}NM(t){t instanceof fc.Go&&(t=t.ta()),this._P!==t&&(this._P=t,this.cR())}PR(t,s,i){mc.Po(t,s,i),this.NM(mc)}RR(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.AP!==t&&(this.AP=t,this.fR())}AR(){return this.AP}ER(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.EP!==t&&(this.EP=t,this.fR())}FR(){return this.EP}OR(t){if(!wc.has(t))throw new Error("invalid word wrap mode");this.DP!==t&&(this.DP=t,this.SP())}DR(){return this.DP}kR(t){if(!Sc.has(t))throw new Error("invalid text direction");this.kP!==t&&(this.kP=t,this.JP&&(this.JP.direction=this.kP),this.qP&&(this.qP.direction=this.kP),this.SP())}LR(){return this.kP}Vc(t){this.Bc!==t&&(this.Bc=t,this.SP())}NR(){return this.Bc}CR(){return this.rR*this.HP*self.devicePixelRatio}BR(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.VP===t&&this.UP===s&&this.HP===i)return;const e=this.VP;this.VP=t,this.UP=s,this.HP=i;const n=self.devicePixelRatio;this.Py=this.VP*this.HP*n,this.Ry=this.UP*this.HP*n;const r=Math.max(this.Py,this.Ry),h=Math.min(this.Xb.Cx(),4096);let o=1;r>h&&(o=h/r,this.Py=Math.min(this.Py*o,h),this.Ry=Math.min(this.Ry*o,h)),this.rR=o,this.VP!==e?this.SP():this.fR()}Vg(){return this.Py}Zg(){return this.Ry}WR(){return this.HP}jR(){return this.VR(),this.OP.Iy()}UR(){return this.VR(),this.OP.Cy()+this.OP.Bg()*(this.GP+4)-this.GP}HR(){this.VR();let t=0;for(const s of this.OP.Ng())for(const i of s.ny())t+=i.hy();return t}xT(){return this.hR.Bf(),this.zR(),this.wx}JR(t,s){this.VR();const i=this.CR(),e=this.OP.Ng();for(const n of e){const e=n.ty()*i;if(s>=n.jy()-n.Zg()*i+e&&s<n.jy()+e)for(const s of n.ny())if(t>=s.By()&&t<s.By()+s.Vg()*i)return s}return null}*qR(t){this.VR();const s=this.OP.Ng();for(const i of s)for(const s of i.ny()){const i=s.Hy("tag");i&&fc.Ke(i.Cg,t)&&(yield s)}}$R(t,s){for(const i of this.qR(t)){if(0===s)return i;--s}return null}XR(t){let s=0;for(const i of this.qR(t))++s;return s}zR(){(!this.wx||this.BP||this.NP||this.LP)&&(this.uR||this.Py<=0||this.Ry<=0||(this.BP=!1,this.YR()))}YR(){this.uR||(this.VR(),this.aR(Math.max(fc.vr(Math.ceil(this.Py)),128),Math.max(fc.vr(Math.ceil(this.Ry)),64)),this.KR(),this.ZR(),this.hR.Bf())}aR(t,s){this.zP||(this.zP=fc.uo(16,16));let i=!1;this.XP===t&&this.YP===s||(this.XP=t,this.YP=s,this.zP.width=t,this.zP.height=s,i=!0),this.JP||(this.JP=this.zP.getContext("2d"),i=!0),i?(this.JP.textBaseline=this.IP?"alphabetic":"top",this.JP.direction=this.kP,this.JP.font=this.KP,this.JP.fillStyle=this.QP,this.JP.strokeStyle=this.QP,this.JP.globalAlpha=this.tR,this.JP.lineWidth=this.sR):this.JP.clearRect(0,0,t,s)}QR(){this.qP||(this.qP=fc.uo(16,16).getContext("2d"),this.$P=fc.uo(16,16).getContext("2d"),this.qP.textBaseline=this.IP?"alphabetic":"top",this.$P.textBaseline="top",this.qP.direction=this.kP,this.$P.direction=this.kP)}tA(t){this.ZP!==t&&(this.ZP=t,this.qP.font=t,this.$P.font=t)}sA(){if(!bc){bc=!0,this.QR();const t=this.qP.measureText("test");Mc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Mc}VR(){this.iA(),this.eA()}iA(){this.LP&&(this.QR(),!this.IP||this.FP&&this.FP.toString()===this.Bc||(this.FP=new fc.dn(this.Bc,{dg:!0})),this.OP.Dg(this.IP?this.FP._g():this.Bc,this.iR,this.VP,this.DP,0),this.LP=!1)}eA(){this.NP&&(this.nA(),this.NP=!1)}eR(t){const s=t.$g()?t.yy().join(""):" ";this.tA(this.IR(!0,t));const i=t.Hy("size"),e=(i?parseFloat(i.Cg):this.bP)*this.MP,n=this.qP.measureText(s);let r=0;if(this.IP&&this.sA()){const t=this.$P.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:uc(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,qg:r}}rA(t){this.KP!==t&&(this.KP=t,this.JP.font=t)}hA(t){this.QP!==t&&(this.QP=t,this.JP.fillStyle=t,this.JP.strokeStyle=t)}oA(t){this.tR!==t&&(this.tR=t,this.JP.globalAlpha=t)}aA(t){this.sR!==t&&(this.sR=t,this.JP.lineWidth=t)}nA(){const t=this.CR(),s=(4+this.GP)*t;let i=0;const e=this.OP.Ng();if(0===e.length)return;for(const t of e){t.Ny(NaN),t.Wy(NaN);for(const s of t.ny())s.Ny(NaN),s.Wy(NaN)}const n=this.IP&&this.sA();let r=e[0].Zg()*t;if("center"===this.EP){const h=e.reduce((i,e)=>i+e.Zg()*t+s,0)-s;i=Math.max(this.Ry/2-h/2,0),n&&(r=e[0].sy()*t)}else if("bottom"===this.EP){const r=e.reduce((i,e)=>i+e.Zg()*t+s,0)-this.GP*t,h=n?e.at(-1).ty()*t:0;i=this.Ry-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Zg()*t,a=i;if(this.IP){if(i+=0===n?r:o,n>0&&i>this.Ry-4*t)break}else if(n>0&&i>=this.Ry-o)break;a>=0&&this.lA(h,i,t),this.IP||(i+=o),i+=s}}lA(t,s,i){let e=0;"center"===this.AP?e=Math.floor((this.Py-t.Vg()*i)/2):"right"===this.AP&&(e=this.Py-t.Vg()*i),t.Ny(e),t.Wy(s);for(const n of"ltr"===this.kP?t.ny():t.ky())this.uA(n,e,s,i),e+=n.Vg()*i}uA(t,s,i,e){const n=t.Hy("offsetx");s+=n?cc(n.Cg,t.Zg())*e:0;const r=t.Hy("offsety");if(i+=r?cc(r.Cg,t.Zg())*e:0,t.Yg()){const s=t.Hy("iconoffsety");i+=s?cc(s.Cg,t.Zg())*e:.2*t.Zg()*e}t.Ny(s),t.Wy(i)}KR(){this.JP.imageSmoothingEnabled=this.CP,this.JP.imageSmoothingQuality="high",this.jP=0;const t=this.CR(),s=this.OP.Ng();for(const i of s)this.cA(i,t)}cA(t,s){const i=t.By(),e=t.jy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.kP?t.ny():t.ky())this.fA(i,s,t.Zg())}fA(t,s,i){const e=this.JP,n=t.By(),r=t.jy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Vg()*s;const a=t.Zg()*s,l=t.Zg()/16,u=(4+this.GP)*s;let c=t.$g()?t.yy():null;if(-1!==this.WP){if(this.jP>=this.WP)return;t.$g()&&this.jP+c.length>this.WP&&(c=c.slice(0,this.WP-this.jP),o=this.eR(t).width*s),this.jP+=t.hy()}const f=t.Hy("background"),d=t.zy("u"),p=t.zy("s");if(t.$g()&&fc.vm(c)&&!f&&!d&&!p||t.zy("hide"))return;const m=t.Hy("color"),g=t.Hy("opacity");this.oA(g?parseFloat(g.Cg)/100:1),f&&(this.hA(f.Cg),e.fillRect(n,r-a,o,a+u));const y=t.Hy("linethickness"),w=y?parseFloat(y.Cg):1,S=t.zy("stroke");if(S&&this.aA(.5*l*w*this.CR()),t.$g()){const s=c.join("");if(this.rA(this.IR(!1,t)),!S){this.aA(.5*l*w*this.CR());const i=t.Hy("outlineback");i&&(this.hA(i.Cg),this.dA(!0,s,n,r,o))}if(this.hA(m?m.Cg:this._P),this.dA(S,s,n,r,o),!S){this.aA(.5*l*w*this.CR());const i=t.Hy("outline");i&&(this.hA(i.Cg),this.dA(!0,s,n,r,o))}}else if(t.Yg()&&t.Vg()>0){const s=t.Qy(this.Lg);s&&e.drawImage(s,n,r-a,o,a)}if(this.hA(m?m.Cg:this._P),d&&lc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}dA(t,s,i,e,n){"rtl"===this.kP&&(i+=n),t?"Gecko"===fc.Ks.ei?this.JP.strokeText(s,i,e,n):this.JP.strokeText(s,i,e):"Gecko"===fc.Ks.ei?this.JP.fillText(s,i,e,n):this.JP.fillText(s,i,e)}ZR(){this.Xb.pA()||(this.wx||(this.wx=this.Xb.pT(this.zP.width,this.zP.height,{lx:!0,ux:"high"})),this.Xb.mA(this.zP,this.wx),this.nR.set(0,0,this.Py/this.wx.Vg(),this.Ry/this.wx.Zg()),this.lR&&this.lR())}gA(){return this.nR}oR(){this.wx&&(this.Xb.pA()||this.Xb.wT(this.wx),this.wx=null)}static BM(){for(const t of vc)t.oR()}static yA(){return vc.values()}}}{const Gc=self._s;class xc{constructor(t){this.zT=t.Px(),this.wA=t.Rx(),this.SA=t.vA(),this.bA=null,this.Nf=!1,this.MA=!1,this.GA=0,1===this.wA?this.bA=this.SA.createQueryEXT():this.bA=this.zT.createQuery()}zn(){this.xA(),this.zT=null,this.SA=null,this.MA=!1}xA(){this.bA&&(1===this.wA?this.SA.deleteQueryEXT(this.bA):this.zT.deleteQuery(this.bA),this.bA=null)}jC(){if(this.Nf)throw new Error("query already active");1===this.wA?this.SA.beginQueryEXT(this.SA.TIME_ELAPSED_EXT,this.bA):this.zT.beginQuery(this.SA.TIME_ELAPSED_EXT,this.bA),this.Nf=!0}HC(){if(!this.Nf)throw new Error("query not active");1===this.wA?this.SA.endQueryEXT(this.SA.TIME_ELAPSED_EXT):this.zT.endQuery(this.SA.TIME_ELAPSED_EXT),this.Nf=!1}TA(){if(!this.bA||this.MA||this.Nf)return;let t=!1;t=1===this.wA?this.SA.getQueryObjectEXT(this.bA,this.SA.QUERY_RESULT_AVAILABLE_EXT):this.zT.getQueryParameter(this.bA,this.zT.QUERY_RESULT_AVAILABLE);const s=this.zT.getParameter(this.SA.GPU_DISJOINT_EXT);t&&!s&&(1===this.wA?this.GA=this.SA.getQueryObjectEXT(this.bA,this.SA.QUERY_RESULT_EXT):this.GA=this.zT.getQueryParameter(this.bA,this.zT.QUERY_RESULT),this.GA/=1e9,this.MA=!0),(t||s)&&this.xA()}_A(){return this.MA}IA(){if(!this.MA)throw new Error("no result available");return this.GA}}Gc.Lw.CA=class{constructor(t){this.Xb=t,this.FS=t.Db(),this.Nf=!1,this.PA=null,this.RA=!1,this.AA=null,this.EA=[]}zn(){for(const t of this.EA)t instanceof xc&&t.zn();Gc.Sh(this.EA),this.PA=null,this.AA=null,this.Xb=null}jC(){if(this.Nf)throw new Error("query already active");const t=this.Xb.FA();t.length>0?(this.RA=!0,this.PA=t.at(-1),this.PA.OA(),this.PA.EA.push(this)):(this.RA=!1,this.PA=null),this.Nf=!0,t.push(this),this.DA()}HC(){if(!this.Nf)throw new Error("query not active");if(this.Xb.FA().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.OA(),this.PA&&(this.PA.DA(),this.PA=null)}DA(){this.AA=Gc.Hn(xc,this.Xb),this.EA.push(this.AA),this.AA.jC()}OA(){this.AA.HC(),this.AA=null}TA(){for(const t of this.EA)t.TA()}kA(){return this.RA}_A(){return this.EA.every(t=>t._A())}IA(){return this.EA.reduce((t,s)=>t+s.IA(),0)}Db(){return this.FS}}}{const Tc=self._s;Tc.Lw.LA=class{constructor(t,s=1e3){this.Xb=t,this.NA=s,this.BA=[],this.Xb.WA(this)}zn(){this.Pu(),this.Xb.jA(this),this.Xb=null}Pu(){for(const t of this.BA)t.zn();Tc.Sh(this.BA)}VA(){const t=new Tc.Lw.CA(this.Xb);return this.BA.push(t),this.BA.length>this.NA&&this.BA.shift().zn(),t}UA(t){for(const s of this.BA){if(s.Db()>=t)return;if(s.kA())return;s.TA()}}HA(t,s){if(s<=t)return NaN;let i=0;for(const e of this.BA){if(e.Db()>=s)break;if(!(e.Db()<t)){if(!e._A())return NaN;i+=e.IA()}}return i}zA(t){for(let s=0,i=this.BA.length;s<i;++s){const i=this.BA[s];if(!(i.Db()<t))return void(s>0&&this.BA.splice(0,s));i.zn()}}}}{let _c=function(){Wc=-1;for(const t of Bc)t.JA()&&(t.resolve(),Bc.delete(t));Bc.size>0&&(Wc=self.requestAnimationFrame(_c))};0;const Ic=self._s,Cc=(self.assert,self.hs),Pc=(Cc.ys,Cc.ws),Rc=Cc.fs,Ac={powerPreference:"default",qA:!0,alpha:!1,depth:!1,$A:!1,XA:2,failIfMajorPerformanceCaveat:!1},Ec=new Set(["default","low-power","high-performance"]),Fc=new Ic.Cl(0,0,1,0,1,1,0,1),Oc=Rc.create(),Dc=Rc.create(),kc=new Ic.Cl,Lc=new Ic.Rect;let Nc=null;Ic.Ds&&(self.YA=function(){Nc?Nc.loseContext():console.warn("WEBGL_lose_context not supported")},self.KA=function(){Nc?Nc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Bc=new Set;let Wc=-1;Ic.Lw.ZA=class extends Ic.Lw.Qw{constructor(t,s){if(super(s),s=Object.assign({},Ac,s),!Ec.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.XA>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.zT=e,this.QA=e.getContextAttributes(),this.tE=e.getParameter(e.VERSION),this.wA=n,this.sE=Pc.create(),this.iE=!1,this.eE=Rc.create(),this.nE=!!s.depth,this.rE=!(!s.depth||!s.$A),this.hE=this.nE,this.oE=!1,this.aE=null,this.lE=!0,this.uE=0,this.cE=0,this.$T=null,this.XT=null,this.YT=null,this.fE=null,this.ZT=null,this.dE=this.wA>=2&&void 0!==globalThis.Float16Array,this.pE=new Float32Array(196605),this.mE=new Uint16Array(393210),this.gE=new Float32Array(131070),this.yE=this.dE?new globalThis.Float16Array(262140):new Float32Array(262140),this.wE=new Float32Array(32e3),this.SE=0,this.vE=0,this.bE=0,this.ME=null,this.GE=null,this.xE=[],this.TE=0,this._E=0,this.IE=null,this.CE=0,this.KI=Ic.Hn(Ic.Lw.JI,this),this.PE=Ic.Hn(Ic.Go,1,1,1,1),this.RE=null,this.EC=null,this.AE=0,this.EE=0,this.FE=new Ic.Rect,this.OE=Ic.Hn(Ic.Rect,0,0,-1,-1),this.DE=0,this.kE=0,this.LE=0,this.NE=-1,this.BE=0,this.WE=0,this.jE="(unavailable)",this.VE="(unavailable)",this.UE=[],this.HE=!1,this.zE=null,this.JE=null,this.qE=null,this.$E=null,this.XE=null,this.YE=null,this.KE=null,this.ZE=0,this.QE=!!s.qA,this.SA=null,this.tF=new Set,this.sF=[]}jb(){return!0}async NS(){super.NS();const t=this.zT;this.PE.Co(1,1,1,1),this.RE=null,this.EC=null,this.SE=0,this.vE=0,this.bE=0,Ic.Sh(this.xE),this.TE=0,this._E=0,this.ME=null,this.IE=null,this.FE.set(0,0,1,1),this.CE=0;const s=this.KI;s.U_=null,s.vT=null,s.bT=null,s.clearColor.Co(0,0,0,0),s.XI.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.AE=t.ONE,this.EE=t.ONE_MINUS_SRC_ALPHA,this.iF(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.kE=0,t.frontFace(t.CW),this.LE=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.nE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.hE=this.nE,this.oE=!1,this.ZT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ZT),t.bufferData(t.ARRAY_BUFFER,this.wE.byteLength,t.DYNAMIC_DRAW),this.$T=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.$T),t.bufferData(t.ARRAY_BUFFER,this.pE.byteLength,t.DYNAMIC_DRAW),this.XT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.XT),t.bufferData(t.ARRAY_BUFFER,this.gE.byteLength,t.DYNAMIC_DRAW),this.YT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.YT),t.bufferData(t.ARRAY_BUFFER,this.yE.byteLength,t.DYNAMIC_DRAW),this.fE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.mE.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.NE=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.BE=i[0],this.WE=i[1],this.WE>2048&&(this.WE=2048),this.UE=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.jE=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.VE=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.zE=t.getExtension("KHR_parallel_shader_compile"),this.wA>=2&&("Chromium"!==Ic.Ks.ei||Ic.Ks.ii>=135)&&(this.qE=t.getExtension("EXT_conservative_depth")),Ic.Ds&&(Nc=t.getExtension("WEBGL_lose_context")),this.QE&&(1===this.Rx()?this.SA=t.getExtension("EXT_disjoint_timer_query"):this.SA=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.JE=t.getExtension("EXT_texture_filter_anisotropic"),this.JE?this.ZE=t.getParameter(this.JE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.ZE=0,this.Rx()<2&&this.nE&&this.rE&&(this.$E=t.getExtension("WEBGL_depth_texture"),!this.$E))throw new Error("no depth texture support");this.Rx()<2&&(this.XE=t.getExtension("EXT_frag_depth"),this.YE=t.getExtension("OES_standard_derivatives"),this.KE=t.getExtension("EXT_shader_texture_lod"));const n=Ic.Lw.BT,r=n.dI(!1);let h=n.mI(),o=r,a=n.xI(),l=n.MI(),u=n.wI(),c=n.dI(!0),f=!1;this.nE&&(this.Rx()<2?this.XE&&(h=n.gI(),a=n.TI(),u=n.SI(),f=!0):(o=n.pI(),h=n.yI(this.eF()),a=n._I(this.eF()),l=n.GI(),u=n.vI(this.eF()),c=n.pI(!0)));const d=n.bI(this.Rx(),f,this.YE&&this.KE,this.eF()),p=this.Rx()>=2?n.pI():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.II(),r,"<fill>"],[n.CI(),r,"<lineargradient>"],[n.RI(),r,"<penumbra>"],[n.EI(),r,"<hardellipse>"],[n.FI(),r,"<hardellipseoutline>"],[n.OI(),r,"<smoothellipse>"],[n.DI(),r,"<smoothellipseoutline>"],[n.AI(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.nF({src:t[0],jT:t[1],name:t[2]})));this.lS=g[0],this.GE=g[1],this.uS=g[2],this.dS=g[3],this.pS=g[4],this.mS=g[5],this.gS=g[6],this.yS=g[7],this.wS=g[8],this.SS=g[9],this.vS=g[10],this.cS=g[11],this.fS=g[12],this.lv()}async nF(t){const s=await Ic.Lw.BT.HT(this,t);return this.rv(s),s}rF(){this.ME=null}BR(t,s,i){if(this.Py===t&&this.Ry===s&&!i)return;this.Ob();const e=this.zT,n=this.KI;this.Py=t,this.Ry=s,this.hF(0,0,t,s),this.QS(this.eE,t/s),this.oF(this.eE),this.GE&&(e.useProgram(this.GE.z_()),this.GE.N_(this.iS),this.ME=this.GE,this.KI.U_=this.GE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.RE=null,this.EC=null,this.nE&&this.lE&&this.aF(this.Py,this.Ry),this.IE&&this.IE.yT(this.Py,this.Ry),e.bindFramebuffer(e.FRAMEBUFFER,null),this.IE=null,n.vT=null,n.bT=null}aF(t,s){const i=this.zT;this.aE&&this.uE===t&&this.cE===s||(this.rE?(this.aE&&i.deleteTexture(this.aE),this.aE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.aE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.Rx()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.$E&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.$E.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.aE&&i.deleteRenderbuffer(this.aE),this.aE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.aE),i.renderbufferStorage(i.RENDERBUFFER,this.wA>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.uE=t,this.cE=s)}lF(t,s){this.nE&&(this.lE=!1,this.aF(t,s))}uF(){this.nE&&(this.lE=!0,this.aF(this.Py,this.Ry))}hF(t,s,i,e){const n=this.sE;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.cF().dC(t,s,i,e),Pc.set(n,t,s,i,e),this._E=0)}$S(t){super.$S(t),this.QS(this.eE,this.Py/this.Ry)}HS(t){super.HS(t),this.QS(this.eE,this.Py/this.Ry)}JS(t){super.JS(t),this.QS(this.eE,this.Py/this.Ry)}oF(t){Rc.F(this.iS,t)||(this.cF().mC(t),Rc.m(this.iS,t),this._E=0,this.iE=!0)}fF(){let t,s,i;const e=this.IE;null===e?(t=this.eE,s=this.Vg(),i=this.Zg()):(t=e.TT(),s=e.Vg(),i=e.Zg()),this.oF(t),this.hF(0,0,s,i)}dF(t){Rc.F(this.eS,t)||(this.cF().yC(t),Rc.m(this.eS,t),this._E=0,this.iE=!0)}pF(){this.iE=!1}mF(){return this.iE}ST(){return this.KI}cF(){const t=this.xE;return this.TE===t.length&&t.push(new Ic.Lw.YI(this.KI)),t[this.TE++]}Ob(){0!==this.TE&&(this.pA()||(this.gF(),this.yF(),this.TE=0,this.SE=0,this.vE=0,this.bE=0,this._E=0))}gF(){const t=this.zT;this.SE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.$T),t.bufferSubData(t.ARRAY_BUFFER,0,this.pE.subarray(0,3*this.SE)),t.bindBuffer(t.ARRAY_BUFFER,this.XT),t.bufferSubData(t.ARRAY_BUFFER,0,this.gE.subarray(0,2*this.SE)),t.bindBuffer(t.ARRAY_BUFFER,this.YT),t.bufferSubData(t.ARRAY_BUFFER,0,this.yE.subarray(0,4*this.SE))),this.vE>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fE),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.mE.subarray(0,this.vE))),this.bE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.ZT),t.bufferSubData(t.ARRAY_BUFFER,0,this.wE.subarray(0,this.bE)))}yF(){const t=this.xE;for(let s=0,i=this.TE;s<i;++s)t[s].mP()}wF(){return this.PE.Wo()}SF(t,s,i,e){const n=this.PE;n.qo(t,s,i,e)||(n.Co(t,s,i,e),this.MS=null,2===this._E&&(this._E=0))}vF(t){const s=this.PE;s.Wo()!==t&&(s.Do(t),this.MS=null,2===this._E&&(this._E=0))}NM(t){const s=this.PE;s.equals(t)||(s.set(t),this.MS=null,2===this._E&&(this._E=0))}bF(){this.SF(1,1,1,1)}MF(){return this.PE}GF(t){t!==this.RE&&(this.cF().oC(t),this.RE=t,this._E=0)}Ox(){this.RE=null}LM(t){const s=this.kv(t);this.xF(s[0],s[1])}TF(t){const s=this.Bv(t);this.xF(s.Ov,s.Dv)}xF(t,s){t===this.AE&&s===this.EE||(this.cF().cC(t,s),this.AE=t,this.EE=s,this._E=0,this.MS=null)}_F(){return this.AE===this.zT.ONE&&this.EE===this.zT.ONE_MINUS_SRC_ALPHA}IF(){this.xF(this.zT.ONE,this.zT.ONE_MINUS_SRC_ALPHA)}CF(){this.xF(this.zT.SRC_ALPHA,this.zT.ONE_MINUS_SRC_ALPHA)}Pb(t){this.kE!==t&&(this.cF().cP(t),this.kE=t,this._E=0,this.MS=null)}PF(){return this.kE}Rb(t){this.LE!==t&&(this.cF().dP(t),this.LE=t,this._E=0,this.MS=null)}RF(){return this.LE}AF(){this.xF(this.zT.ONE,this.zT.ZERO)}Rect(t){this.EF(t.Za(),t.Qa(),t.tl(),t.sl())}EF(t,s,i,e){this.Eb(t,s,i,s,i,e,t,e)}FF(t,s){(this.SE+t>65535||this.vE+s>393210)&&this.Ob(),1===this._E?this.xE[this.TE-1].QI+=s:(this.cF().rC(2*this.vE,s),this._E=1)}OF(){const t=this.SE;let s=this.vE;this.vE+=6;const i=this.mE;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Cl(t){this.DF(t,Fc)}Eb(t,s,i,e,n,r,h,o){this.FF(4,6),this.OF();const a=this.pE,l=this.SE;this.SE+=4;let u=3*l;const c=this.TS+this._S;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Fc.Vo(this.gE,2*l),this.PE.Uo(this.yE,4*l)}tb(t,s){this.FF(4,6),this.OF();const i=this.SE;this.SE+=4,t.$l(this.pE,3*i,this.TS+this._S),s.nl(this.gE,2*i),this.PE.Uo(this.yE,4*i)}DF(t,s){this.FF(4,6),this.OF();const i=this.SE;this.SE+=4,t.$l(this.pE,3*i,this.TS+this._S),s.Vo(this.gE,2*i),this.PE.Uo(this.yE,4*i)}kF(t,s,i){this.FF(4,6),this.OF();const e=this.SE;this.SE+=4,t.$l(this.pE,3*e,this.TS+this._S),s.Vo(this.gE,2*e),this.yE.set(i,4*e)}LF(t,s,i,e,n,r,h,o,a,l,u,c,f){this.FF(4,6),this.OF();const d=this.pE,p=this.SE;this.SE+=4;let m=3*p;const g=this.TS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.gE,2*p),this.PE.Uo(this.yE,4*p)}Xv(t,s,i,e,n,r,h,o,a,l,u,c,f){this.FF(4,6),this.OF();const d=this.pE,p=this.SE;this.SE+=4;let m=3*p;const g=this.TS+this._S;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.gE,2*p),this.PE.Uo(this.yE,4*p)}NF(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.FF(4,6),this.OF();const p=this.pE,m=this.SE;this.SE+=4;let g=3*m;const y=this.TS+this._S;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.gE,2*m),this.yE.set(d,4*m)}JG(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.FF(t.length,i.length);const n=this.SE;this.pE.set(t,3*n),this.gE.set(s,2*n);const r=this.mE;if(0===n)r.set(i,this.vE);else{let t=this.vE;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.yE;if(void 0!==e)h.set(e,4*n);else{const s=this.PE,i=s.Lo(),e=s.No(),r=s.Bo(),o=s.Wo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.SE+=t.length/3,this.vE+=i.length}BF(t,s){this.Uv(0),Rc.m(Oc,this.iS),Rc.m(Dc,this.eS),this.fF();const[i,e]=this.WF(this.IE),n=this.nv(0,0,this.WS(e),0,0,0,e);if(this.dF(n),"crop"===t&&this.IE&&s){const t=this.Py/2,i=this.Ry/2,e=s.Vg(),n=s.Zg(),r=this.IE.Vg(),h=this.IE.Zg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Lc.set(-t,i-u,-t+o,i-a-u),kc.Xl(Lc),Lc.set(0,l,o,a+l),Lc.wt(e,n),this.tb(kc,Lc)}else{const t=i/2,s=e/2;this.EF(-t,s,t,-s)}this.oF(Oc),this.dF(Dc)}jF(t){this.FE.equals(t)||(this.FE.m(t),this.cF().xC(t),this._E=0)}VF(){}UF(t,s,i,e){this.bE>=7996&&this.Ob();let n=this.bE;const r=this.TS+this._S;2===this._E&&this.CE===r?this.xE[this.TE-1].QI++:(this.cF()._C(n,r,this.PE),this._E=2,this.CE=r);const h=this.wE;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.bE=n}uv(t){this.ME!==t&&(this.cF().CC(t),this.ME=t,this._E=0,this.MS=null)}HF(){return this.ME}zF(){this.uv(this.GE)}JF(t){this.cF().lC(t),this._E=0}qF(t,s,i=1){this.cF().zC(t,s,i),this._E=0}$F(t,s,i,e,n,r,h){if(this.ME!==this.cS)throw new Error("must set tilemap fill mode first");this.cF().qC(t,s,i,e,n,r,h),this._E=0}XF(t,s,i,e,n,r,h){if(this.ME!==this.fS)throw new Error("must set tile randomization mode first");this.cF().XC(t,s,i,e,n,r,h),this._E=0}YF(t,s,i,e,n,r,h,o,a,l,u){const c=this.ME;if(u%=10800,!c.C_||c.tI(s,i,e,n,r,h,o,a,l,u))return;const f=this.cF();f.RC(),c.eI(s,i,e,n,r,h,o,a,l,u);const d=f.sC;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.iC;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.eC,0),f.ZI=u,f.QI=o,c.c_.P_()?f.tC=t?t.xT():null:f.tC=null,this._E=0}KF(t){const s=this.ME;if(0===t.length||s.Y_(t))return;const i=this.cF();i.FC(),s.Z_(t),Ic.xh(i.nC,t),this._E=0}ZF(t,s,i,e){this.cF().MC(t,s,i,e),this._E=0}Pu(t){this.cF().bC(t),this._E=0}QF(){}Fb(){super.Fb(),this.zT.flush()}tO(){this.nE&&this.IE&&this.IE.PT()&&(this.cF().KC(this.hE),this._E=0)}sO(t){t=!!t,this.hE!==t&&this.nE&&(this.hE=t,this.cF().QC(t),this._E=0)}iO(){return this.hE}mT(){return this.aE}gT(){return this.rE}eO(t){if(t=!!t,this.rE&&this.oE!==t){if(t&&this.iO())throw new Error("depth still enabled");this.oE=t,this.cF().sP(t),this._E=0}}nO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.OE.Ka(t,s,i,e)||(this.OE.Ha(t,s,i,e),s=(n||this.WF(this.rO())[1])-s-e,this.cF().lP(!0,t,s,i,e),this._E=0)}hO(){-1!==this.OE.tl()&&(this.OE.set(0,0,-1,-1),this.cF().lP(!1,0,0,0,0),this._E=0)}oO(){for(const t of this.tF)t.UA(this.FS)}pA(){return!this.zT||this.zT.isContextLost()||this.HE}BM(){super.BS(),Ic.Lw.yx.BM(),Ic.Lw.Qx.BM(),Ic.Lw.qb.BM();for(const t of this.tF)t.Pu();this.UE=[],this.SA=null,this.zE=null,this.qE=null,this.JE=null,this.$E=null,this.XE=null,this.YE=null,this.KE=null,this.ZE=0,this.jE="(unavailable)",this.VE="(unavailable)",this.ME=null,this.GE=null,this.aE=null;for(const t of this.bS.values())t.BM()}async WM(){this.HE=!0,await this.NS(),this.HE=!1;for(const t of this.bS.values())t.WM(this);this.BR(this.Py,this.Ry,!0)}aO(t,s){if(this.pA())throw new Error("context lost");this.Ob();const i=Ic.Hn(Ic.Lw.yx,this);return i.Ix(t,s),i}async lO(t,s){if(this.pA())throw new Error("context lost");if(s=Object.assign({},s),Ic.Ri.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.sx&&"clamp-to-edge"!==s.sx||s.ix&&"clamp-to-edge"!==s.ix,n=Ic.Sr(i.width)&&Ic.Sr(i.height);return this.Ax()||n||!e?s.mx=!1:Ic.Ri.Oi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ic.vr(i.width),resizeHeight:Ic.vr(i.height)}),s.mx=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ic.df(()=>this.aO(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ic.lo(t);t=s}return await Ic.df(()=>this.aO(t,s))}pT(t,s,i){this.Ob();const e=Ic.Hn(Ic.Lw.yx,this);return e.Dx(t,s,i),e}mA(t,s,i){this.Ob(),s.Wx(t,i)}wT(t){t&&(t.zx(),t.Jx()>0||(this.Ob(),t===this.RE&&(this.zT.bindTexture(this.zT.TEXTURE_2D,null),this.RE=null),t===this.EC&&(this.zT.activeTexture(this.zT.TEXTURE1),this.zT.bindTexture(this.zT.TEXTURE_2D,null),this.zT.activeTexture(this.zT.TEXTURE0),this.EC=null),t.jx()))}uO(t){let s=this.Py,i=this.Ry,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Ob();const n=Ic.Hn(Ic.Lw.Qx,this);return n.fT(s,i,Object.assign({Kx:e},t)),this.IE=null,this.KI.vT=null,this.KI.bT=null,n}cO(t,s=!0){t!==this.IE&&(t&&t.RT()&&t.yT(this.Py,this.Ry),this.cF().SC(t),this.IE=t,this._E=0,s&&this.fF())}rO(){return this.IE}WF(t){return t?[t.Vg(),t.Zg()]:[this.Py,this.Ry]}fO(t,s="stretch"){this.wA<2||this.IE&&this.IE.AT()>0?(this.AF(),this.bF(),this.dO(t,s)):(this.cF().LC(t,this.IE,s),this._E=0)}dO(t,s="stretch"){const i=t.xT();if(!i)throw new Error("not a texture-backed render target");this.GF(i),this.BF(s,i)}pO(t){this.wA<2||(this.cF().DC(t.MT()),this._E=0)}mO(t){this.cO(null),this.Ob();const s=t.xT();s===this.RE&&(this.zT.bindTexture(this.zT.TEXTURE_2D,null),this.RE=null),s===this.EC&&(this.zT.activeTexture(this.zT.TEXTURE1),this.zT.bindTexture(this.zT.TEXTURE_2D,null),this.zT.activeTexture(this.zT.TEXTURE0),this.EC=null),t.jx()}async kT(t,s,i){this.Ob();const e=this.IE;let n,r,h;t?(n=t.Vg(),r=t.Zg(),h=t.MT()):(n=this.Vg(),r=this.Zg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Ic.Yn(Math.floor(i.Za()),0,n-1),a=Ic.Yn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-o:Ic.Yn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ic.Yn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.zT;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.IE=null,this.KI.vT=null,this.KI.bT=null,this.cO(e)};let d;if(!s&&this.Rx()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.UT(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}gO(){this.sO(!0),this.cF().eP(),this._E=0,this.DE=1}yO(){this.sO(!1),this.cF().rP(),this._E=0,this.DE=2}wO(){return 2===this.DE}SO(){this.sO(!0),this.cF().oP(),this._E=0,this.DE=0}vO(t){this.bO()&&(this.cF().BC(t),this._E=0)}MO(t){this.bO()&&(this.cF().VC(t),this._E=0)}UT(t){const s=new Promise(s=>Bc.add({resolve:s,JA:t}));return-1===Wc&&(Wc=self.requestAnimationFrame(_c)),s}Vb(){return this.Py*this.Ry*(this.QA.alpha?4:3)}Ub(){let t=0;for(const s of Ic.Lw.Qx.LT())s.xT()||(t+=s.$x());return t}Hb(){let t=0;for(const s of Ic.Lw.yx.Xx())t+=s.$x();return t}GO(){return this.tE}Rx(){return this.wA}KT(){return this.dE}xO(){return"webgl"+this.Rx()}Ax(){return this.Rx()>=2}Cx(){return this.NE}TO(){return this.BE}_O(){return this.WE}IO(){return this.jE}CO(){return this.VE}PO(){if(this.Rx()>=2)return"webgl2";{const t=[];return this.XE&&t.push("EXT_frag_depth"),this.YE&&t.push("OES_standard_derivatives"),this.KE&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}RO(){return this.UE}bO(){return!!this.SA}vA(){return this.SA}VT(){return this.zE}eF(){return!!this.qE}Nx(){return this.JE}Bx(){return this.ZE}WA(t){this.tF.add(t)}jA(t){this.tF.delete(t)}FA(){return this.sF}Px(){return this.zT}iF(t){this.Fv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}AO(){return this.Jb()}}}{const jc=self._s,Vc={EO:null,FO:null,OO:null,getTime:null,DO:null};jc.Lw.kO=class{constructor(t){t=Object.assign({},Vc,t),this.LO=t.EO,this.NO=t.FO,this.BO=t.OO,this.WO=t.getTime,this.jO=t.DO,this.VO=null,this.UO=new Set}HO(t){this.UO.add(t)}zO(t){this.UO.delete(t)}BM(){this.VO=null;for(const t of this.UO)t.BM()}JO(t){return this.LO?this.LO(t):[t.Vg(),t.Zg()]}rO(t){return this.NO(t)}qO(t,s){this.BO(t,s)}$O(){return this.WO()}Fp(t){this.jO(t)}XO(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.VO||this.VO.Vg()===s&&this.VO.Zg()===i||(t.wT(this.VO),this.VO=null),null===this.VO&&(this.VO=t.aO(null,{width:s,height:i,nx:"nearest",lx:!1})),this.VO}}}{const Uc=self._s,Hc=(self.assert,self.hs.fs),zc=Uc.Hn(Uc.Rect),Jc=Uc.Hn(Uc.Rect),qc=Uc.Hn(Uc.Rect),$c=Uc.Hn(Uc.Rect),Xc=Hc.create(),Yc=Hc.create(),Kc={YO:null,KO:null,ZO:null,QO:!1},Zc={tD:null,sD:!1,iD:!1,eD:!1,nD:!1,rD:!1,hD:!1};Uc.Lw.oD=class{constructor(t,s){s=Object.assign({},Kc,s),this.Vp=t,this.aD=s.YO,this.lD=s.KO,this.uD=s.ZO,this.cD=null,this.fD=[],this.dD=[],this.pD=[],this.mD=!1,this.AM=0,this.gD=!1,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.iE=!1,this.MD=!1,this.GD=!1,this.xD=!1,this.TD=!1,this._D=!1,this.ID=0,this.CD=[null,null,null],this.PD=!!s.QO,this.RD=0,this.AD=0,this.ED=0,this.FD=0,this.OD=null,this.DD=null,this.kD=Uc.Hn(Uc.Rect),this.LD=Uc.Hn(Uc.Rect),this.ND=Uc.Hn(Uc.Rect),this.BD=Uc.Hn(Uc.Rect),this.WD=Uc.Hn(Uc.Rect),this.jD=1,this.VD=1,this.UD=0,this.HD=0,this.zD=null,this.JD=null,this.qD=0,this.$D=0,this.XD=0,this.YD=0,this.KD=!1,this.aT=Hc.create(),this.ZD=Hc.create(),this.Vp.HO(this)}zn(){this.Vp.zO(this),Uc.Sh(this.pD),Uc.Sh(this.fD),Uc.Sh(this.dD),this.OD=null,this.DD=null,this.aD=null,this.lD=null,this.uD=null}BM(){this.mD=!0,Uc.Sh(this.pD),Uc.Sh(this.fD),Uc.Sh(this.dD)}QD(){return this.mD}tk(t,s){if(s=Object.assign({},Zc,s),Uc.Sh(this.pD),this.RD=0,this.AD=0,this.gD=!1,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.ID=0,this._D=!!s.nD,this.TD=!!s.hD,this.mD=!1,Uc.xh(this.fD,t),0===t.length)return;if(s.tD){if(s.tD.length!==t.length)throw new Error("incorrect indexMap length");Uc.xh(this.dD,s.tD)}else{Uc.Sh(this.dD);for(let s=0,i=t.length;s<i;++s)this.dD.push(s)}for(const s of t)this.RD+=s.yM(),this.AD+=s.wM(),s.GM()&&(this.gD=!0),s.TM()&&(this.yD=!0),s.xM()&&(this.wD=!0),s.SM()&&(this.SD=!0),s.CM()&&(this.vD=!0);this.bD=this.sk(t[0].mM());const i=this.ik(t[0],s),e=this.ek(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.xD=!0);this.xD=!1;let n=0;i&&(this.ID=1,this.pD.push(Uc.Hn(Uc.Lw.oD.rk.nk,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.ID=Math.max(this.ID,t),this.pD.push(Uc.Hn(Uc.Lw.oD.rk.hk,this,n,t,s)),n=t}else this.ID=1,this.pD.push(Uc.Hn(Uc.Lw.oD.rk.ak,this,-1,1,s)),n=1;e&&this.pD.push(Uc.Hn(Uc.Lw.oD.rk.lk,this,n,0))}ik(t,s){return!!(s.sD||t.vM()||s.eD&&!t.MM()||t.TM()&&!this.TD||0!==this.RD||0!==this.AD)||(t.mM().jb()?t.xM()&&(s.rD||s.nD)||t._M()&&s.nD:t.xM()&&!this.bD&&s.rD)}ek(t,s){return!!s.iD||(t.mM().jb()?t.xM()||t.SM():(t.xM()||t.SM())&&this.uk())}sk(t){return t.tv()&&this.wD&&!this.SD}ck(t,s,i){t.tv()&&null===s&&(s=t.fk()),this.zD=s,this.OD=i.dk||null,this.DD=i.pk||null,this.AM=i.mk||0,this.jD=i.devicePixelRatio||1,this.VD=i.gk||1,this.UD=i.yk||0,this.HD="number"==typeof i.time?i.time:this.Vp.$O(),this.iE=!1,t.pF(),this.gD&&this.wk();let e=!1;if(this.Sk()&&(this.vk(t,i),e=!0,this.JD=this.Vp.XO(t,this.ED,this.FD),zc.m(this.LD),zc.vl(),t.tv()&&t.bk(this.zD),t.Mk(this.zD.xT(),this.JD,zc.Za(),zc.Qa(),zc.width(),zc.height())),this.xD)this.Gk(t,i);else if(e||this.vk(t,i),0!==this.ND.width()||0!==this.ND.height()){t.IF(),t.Cb(),t.bF(),t.jv(0),t.Uv(0),this.cD=i.xk||null,this.qD=i.Tk||0,this.$D=i._k||0,this.XD=i.Ik||0,this.YD=i.Ck||0,this.KD=!!i.Pk,this.Rk(t),this.CD[0]=s,this.CD[1]=this.ID>=1?this.Ak():null,this.CD[2]=2===this.ID?this.Ak():null;for(const s of this.pD){const i=this.Ek(s.Fk()),e=this.Ek(s.Ok());t.tv()?s.Dk(t,i,e):s.kk(t,i,e)}t.GF(null),this.CD[1]&&this.Lk(this.CD[1]),this.CD[2]&&this.Lk(this.CD[2]),this.CD.fill(null),this.Nk(t),this.zD=null,this.JD=null,this.OD=null,this.DD=null,this.cD=null}}vk(t,s){const[i,e]=this.Vp.JO(t);this.Bk(t,i,e),this.Wk(s)}Bk(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.ED===s&&this.FD===i||this.jk(t,s,i,0,0,this.aT,this.ZD),this.ED=s,this.FD=i}jk(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.QS(r,s/i);const l=t.nv(o,a,t.WS(i),o,a,0,i);Hc.m(h,l)}Wk(t){this.kD.m(t.Vk),t.Uk?this.LD.m(t.Uk):this.LD.set(0,0,this.ED,this.FD),this.ND.m(this.LD),this.ND.wt(this.ED,this.FD);const s=this.VD*this.jD;this.LD.cl(this.RD*s,this.AD*s),this.WD.m(this.LD),this.WD.wt(this.ED,this.FD),this.LD.bl(0,0,this.ED,this.FD),this.BD.m(this.LD),this.BD.wt(this.ED,this.FD)}Rk(t){if(this.MD=t.iO(),this.GD=t.wO(),this.TD)t.sO(!1),this.yD&&t.eO(!0);else{if(zc.m(this.LD),t.jb()){const t=this.VD*this.jD;zc.cl(Math.max(this.RD,1)*t,Math.max(this.AD,1)*t),zc.vl(),zc.Yn(0,0,this.ED,this.FD)}else zc.vl();t.nO(zc.Za(),zc.Qa(),zc.width(),zc.height(),this.FD)}}Hk(t){t.bF(),this.TD||(this.GD&&t.SO(),t.sO(!1),this.yD&&t.eO(!0)),t.tv()&&t.zk(!0)}Nk(t){t.eO(!1),this.GD&&t.yO(),t.sO(this.MD),this.TD||t.hO(),t.tv()&&t.zk(!1),this.iE=t.mF()}Jk(){this.WD.Yn(0,0,1,1)}Ek(t){return t<0?null:this.CD[t]}Ak(){return this.Vp.rO(this)}qk(){return this.zD}Lk(t){this.Vp.qO(t,this)}$k(t){return this.fD[t]}Xk(t){this.cD?this.cD(this,t,()=>this.aD(t,this)):this.aD(t,this),this.xD||this.Hk(t)}Yk(t){if(this.TD)return!0;if(0!==this.qD||0!==this.$D||0!==this.XD||0!==this.YD)return!1;const[s,i]=t.WF(t.rO());return s===this.ED&&i===this.FD}Kk(t,s){let i=this.aT,e=this.ZD;if(s&&!this.Yk(t)){let s,n;i=Xc,e=Yc,0!==this.XD&&0!==this.YD?[s,n]=[this.XD,this.YD]:[s,n]=t.WF(t.rO()),this.jk(t,s,n,this.qD,this.$D,i,e),this.TD||t.hO()}t.oF(i),t.dF(e)}wk(){this.Vp.Fp(this)}Zk(t,s){return this.uD(this.dD[t],s)}Qk(t,s){let i=this.WD,e=this.BD,n=this.ND;t.jb()&&(Jc.m(i),Jc.pl(1),i=Jc,qc.m(e),qc.pl(1),e=qc,$c.m(n),$c.pl(1),n=$c),this.tL(t,s,e,n,i,1/this.ED,1/this.FD)}sL(t,s){let i=this.BD,e=this.ND,n=1/this.ED,r=1/this.FD;if(this.lD){let{iL:t,eL:s,nL:h}=this.lD(this.OD);t||(zc.set(0,0,0,0),t=zc),s||(s=this.ED),h||(h=this.FD),i=t,e=t,n=1/s,r=1/h}else t.jb()&&(qc.m(i),qc.pl(1),i=qc,$c.m(e),$c.pl(1),e=$c);let h=this.WD;t.jb()&&(h=Jc,h.m(this.WD),h.pl(1)),this.tL(t,s,i,e,h,n,r),t.tv()&&this.vD&&t.rL(this._D)}hL(t){return this.wD?t.tv()?this.Sk()?this.JD:this.zD.xT():this.zD:null}tL(t,s,i,e,n,r,h){t.YF(this.hL(t),n,i,e,this.kD,r,h,this.jD,this.VD,this.UD,this.HD),t.KF(this.Zk(s,t))}Gk(t,s){const i=this.fD[0],e=t.iO(),n=i.TM();n&&(t.sO(!1),t.eO(!0),this.WD.set(0,0,1,1),this.ND.set(0,0,1,1)),t.uv(i),t.LM(this.AM),t.cO(this.zD),t.Cb();let r=0,h=1;if(this.ND.set(0,0,1,1),i._M()&&this.lD){const{iL:t,eL:s,nL:i}=this.lD(this.OD);t&&this.ND.m(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.JO(t);r=1/s,h=1/i}s.Vk?this.kD.m(s.Vk):this.kD.set(0,0,0,0),t.YF(this.hL(t),this.WD,this.ND,this.ND,this.kD,r,h,this.jD,this.VD,this.UD,this.HD),t.KF(this.Zk(0,t)),t.tv()&&this.vD&&t.rL(this._D),t.jv(0),this.Xk(t),n&&(t.eO(!1),t.sO(e))}Sk(){return this.bD}uk(){return!this.bD}oL(){return this.wD}aL(){return!!this.xD&&!this.Sk()}lL(){return this.TD}uL(){return this.OD}cL(){return this.DD}fL(){return this.AM}dL(){return this.KD}mF(){return this.iE}pL(){return this.LD}mL(){return this.BD}gL(){return this.PD}async yL(t,s,i){}}}self._s.Lw.oD.rk=class{constructor(t,s,i,e=-1){this.wL=t,this.SL=s,this.vL=i,this.Rw=e}bL(){return this.wL}Fk(){return this.SL}Ok(){return this.vL}ML(){return this.Rw}z_(){return this.bL().$k(this.ML())}kk(t,s,i){}Dk(t,s,i){}};{const Qc=self._s;Qc.Lw.oD.rk.nk=class extends Qc.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.IF(),t.Cb(),t.lv(),t.cO(i,e.dL()),t.ZF(0,0,0,0),e.Xk(t),e.Jk()}Dk(t,s,i){const e=this.bL();t.IF(),t.Cb(),t.lv(),t.cO(i,!1),t.ZF(0,0,0,0),e.Xk(t),e.Jk()}}}{const tf=self._s,sf=tf.Hn(tf.Rect),ef=tf.Hn(tf.Cl);tf.Lw.oD.rk.lk=class extends tf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.lv(),t.cO(i),e.Kk(t,!0),t.LM(e.fL()),t.GF(s.xT()),ef.Xl(e.pL()),sf.m(e.mL()),sf.pl(1),t.tb(ef,sf),e.gL()&&t.pO(s)}Dk(t,s,i){const e=this.bL();t.lv(),t.cO(i,!1),e.Yk(t)?ef.Xl(e.mL()):(t.zk(!1),e.Kk(t,!0),ef.Xl(e.pL())),t.GL(null),t.LM(e.fL()),t.GF(s.xT()),e.lL()?t.BF():t.tb(ef,e.mL())}}}{const nf=self._s;nf.Lw.oD.rk.ak=class extends nf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.cO(i,e.dL()),t.ZF(0,0,0,0),t.AF(),t.uv(this.z_()),e.sL(t,this.ML()),e.Xk(t),e.Jk()}Dk(t,s,i){const e=this.bL();t.cO(i,!1),t.ZF(0,0,0,0),t.AF(),t.uv(this.z_()),e.sL(t,this.ML()),e.Xk(t),e.Jk()}}}{const rf=self._s,hf=rf.Hn(rf.Rect),of=rf.Hn(rf.Cl);rf.Lw.oD.rk.hk=class extends rf.Lw.oD.rk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.bL();t.cO(i);const n=0===this.Ok();n?t.LM(e.fL()):(t.ZF(0,0,0,0),t.AF()),t.uv(this.z_()),e.Qk(t,this.ML()),t.GF(s.xT()),e.Kk(t,n),of.Xl(e.pL()),hf.m(e.mL()),hf.pl(1),t.tb(of,hf),e.gL()&&t.pO(s)}Dk(t,s,i){const e=this.bL();t.cO(i,!1),0===this.Ok()?(t.LM(e.fL()),t.GL(null),e.Yk(t)?of.Xl(e.mL()):(t.zk(!1),e.Kk(t,!0),of.Xl(e.pL()))):(t.ZF(0,0,0,0),t.AF(),of.Xl(e.mL())),t.uv(this.z_()),e.Qk(t,this.ML()),t.GF(s.xT()),e.lL()?t.BF():t.tb(of,e.mL())}}}{let af=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const lf=self._s,uf=self.Ls;let cf=null;const ff=new Set,df=[],pf=[];let mf=!1,gf=!1,yf=!1;const wf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.xL=class{constructor(t){cf=t,Object.defineProperties(this,{TL:{value:cf.IL()._L(),writable:!1},CL:{value:cf.RL().PL(),writable:!1},AL:{value:{},writable:!1},EL:{value:{},writable:!1},FL:{value:cf.OL(),writable:!1},DL:{value:cf.kL(),writable:!1},LL:{value:cf.NL(),writable:!1},BL:{value:cf.WL(),writable:!1},jL:{value:new Date(cf.VL()),writable:!1},storage:{value:new self.UL(cf),writable:!1},HL:{value:cf.zL(),writable:!1},JL:{value:cf.qL(),writable:!1},$L:{value:cf.XL(),writable:!1},nx:{value:cf.YL(),writable:!1},KL:{value:cf.ZL(),writable:!1},QL:{value:new self.tN(t),writable:!1},sN:{value:new self.iN(t),writable:!1}}),cf.eN().addEventListener("keydown",t=>{ff.has(t.key)?t.stopPropagation():ff.add(t.key)}),cf.eN().addEventListener("keyup",t=>ff.delete(t.key)),cf.wf().addEventListener("window-blur",()=>ff.clear()),cf.zL()&&(self.alert=t=>(mf||(mf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}nN(t){Object.defineProperties(this.AL,t)}rN(t){Object.defineProperties(this.EL,t)}addEventListener(t,s){cf.eN().addEventListener(t,s)}removeEventListener(t,s){cf.eN().removeEventListener(t,s)}hN(t,...s){uf.le(t);const i=cf.oN(),e=i.aN(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e._u())return e.lN();if(s.length<e.uN())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.uN()} expected)`);const n=e.cN();let r=n.fN();const h=i.dN();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.fN())t.has(s)||(r.push(s),t.add(s));for(const s of i.pN())t.has(s)||(r.push(s),t.add(s))}return n.mN(r,e.gN(),e.yN(),e.lN(),...s)}wN(t){const s=cf.vN().SN();if(!s)throw new Error("not in a function which returns a value");switch(s.bN()){case 1:"number"==typeof t&&s.MN(t);break;case 2:"string"==typeof t&&s.MN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.MN(t)}}signal(t){uf.le(t),cf.oN().GN(t)}xN(t){return uf.le(t),cf.oN().TN(t)}_N(){return[cf.qL(),cf.XL()]}get IN(){return cf.CN()}get PN(){return cf.RN()}get AN(){return cf.EN()}get FN(){return cf.ON()}get DN(){return cf.kN()}get LN(){return cf.NN()}get BN(){return cf.WN()}set BN(t){uf.re(t),cf.jN(t)}get VN(){return gf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),gf=!0),cf.UN()}get framesPerSecond(){return cf.UN()}get HN(){return cf.zN()}get JN(){return cf.qN()}get $N(){return cf.XN()}get YN(){return cf.KN()}set YN(t){if(!wf.has(t))throw new Error("invalid framerate mode");cf.ZN(t)}get QN(){return cf.tB()}set QN(t){uf.re(t),cf.sB(t)}get iB(){return cf.eB()}set iB(t){cf.nB(t)}get rB(){return cf.IL().hB()}get oB(){return cf.IL().aB()}random(){return cf.lB()}get layout(){const t=cf.uB();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.cB()}fB(t){const s=cf.dB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.pB(t),!i)throw new Error("invalid layout");return i.cB()}mB(){return cf.dB().gB().map(t=>t.cB())}yB(t){const s=cf.dB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.pB(t),!i)throw new Error("invalid layout");s.wB()||s.SB(i)}get keyboard(){const t=cf.vB().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get bB(){const t=cf.vB().bB;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get MB(){const t=cf.vB().MB;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get GB(){const t=cf.vB().GB;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get qI(){return cf.TB().xB()}_B(t,s){uf.le(t),uf.le(s),cf.IB(t,s)}CB(t){uf.re(t);const s=cf.PB(t);return s?s.RB():null}AB(t,s){uf.Ae(s);const i=cf.EB();for(const s of t){const t=cf.OB(s),i=t.DB();df.push([i.kB().ML(),i.LB()]),pf.push(t)}if(0===df.length)return;df.sort(af),pf.sort((t,i)=>s(t.RB(),i.RB()));let e=!1;for(let t=0,s=df.length;t<s;++t){const s=pf[t],n=i.NB(df[t][0]),r=df[t][1],h=n.BB();h[r]!==s&&(h[r]=s,s.DB().WB(n,!0),n.jB(s),e=!0)}e&&cf.VB(),lf.Sh(df),lf.Sh(pf)}async UB(t,s){yf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),yf=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await cf.HB("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return cf.HB("runtime","alert",{message:t+(cf.zL()?" [via Web Worker]":"")})}zB(t){return uf.re(t),cf.JB(t)}qB(t){cf.$B(t)}async XB(t,s,i){uf.ue(t),uf.se(s),uf.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=cf.TB();if(!e)return;cf.VB();const n=await e.YB(t||"image/png",s,i.x,i.y,i.width,i.height);return await cf.KB(lf.sW.tW.QB.ZB,null),n}}}{const Sf=self._s;self.Ls;let vf=null;self.iW=class{constructor(t){vf=t,Object.defineProperties(this,{eW:{value:!0,writable:!1}})}nW(t){const s=self.hW.rW(t);if(!s)throw new Error("invalid IImageInfo");s.oW(vf.aW())}lW(t){return vf.so(t)}uW(t){return vf.io(t)}cW(t){return vf.eo(t)}fW(t){return vf.no(t)}dW(t){return vf.pW(t)}mW(t){return"flat"===vf.gW()&&Sf.Kh(t)&&(t=t.toLowerCase()),vf.yW(t)}get wW(){return vf.SW()}async vW(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}bW(...t){return vf.MW(...t)}GW(t){return vf.xW(t)}TW(t){return vf._W(t)}}}{const bf=self._s,Mf=self.Ls;let Gf=null;self.IW=class{constructor(t){Gf=t,Object.defineProperties(this,{runtime:{value:Gf.aW(),writable:!1}})}PW(t,s){const i=Gf.aW(),e=i.OB(t),n=i.OB(s);return Gf.RW(e,n)}AW(t,s){const i=Gf.aW(),e=i.OB(t);for(const t of s){const s=i.OB(t);if(Gf.RW(e,s))return t}return null}EW(t){const s=Gf.aW().OB(t),i=Gf.FW(s);return i?i.RB():null}OW(t,s){if(Mf.re(t),Mf.re(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Gf.DW(t,s)}kW(){return Gf.LW()}NW(t,s){const i=Gf.aW();let e;e=Array.isArray(t)?t.map(t=>i.BW(t)):[i.BW(t)];const n=bf.Rect.Ya(s),r=[];return Gf.WW(null,e,n,r),r.map(t=>t.RB())}}}{const xf=self._s;self.Ls;let Tf=null;const _f=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),If=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Cf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.tN=class{constructor(t){Tf=t,Object.defineProperties(this,{jW:{value:xf.Ks.hi,writable:!1},os:{value:_f.get(xf.Ks.Zs)||"unknown",writable:!1},VW:{value:xf.Ks.Qs,writable:!1},browser:{value:If.get(xf.Ks.ti)||"unknown",writable:!1},UW:{value:xf.Ks.si,writable:!1},HW:{value:Cf.get(xf.Ks.ei)||"unknown",writable:!1}})}get zW(){let t=Tf.JW();return Tf.qW()?t="nwjs":Tf.$W()?t="windows-webview2":"cordova"===t?t="Android"===xf.Ks.Zs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get qI(){return Tf.TB().XW()}get YW(){return Tf.TB().KW()}get ZW(){return Tf.TB().QW()}get tj(){return Tf.TB().sj()}get ij(){return Tf.TB().ej()}get nj(){return Tf.TB().rj()}get hj(){return Tf.TB().oj()}get aj(){return Tf.TB().lj()}get devicePixelRatio(){return Tf.uj()}}}{self._s;const Pf=self.Ls;self.UL=class{constructor(t){this.cj=t.fj()}getItem(t){return Pf.le(t),this.cj.getItem(t)}setItem(t,s){return Pf.le(t),this.cj.setItem(t,s)}removeItem(t){return Pf.le(t),this.cj.removeItem(t)}clear(){return this.cj.clear()}keys(){return this.cj.keys()}}}{const Rf=self._s,Af=(self.Ls,Rf.Is());self.dj=class{#t;constructor(){const t=Rf.mj.pj(Af);this.#t=t,Object.defineProperties(this,{runtime:{value:t.aW().gj(),writable:!1},id:{value:t.yj(),writable:!1},wj:{value:t.Sj(),writable:!1},vj:{value:t.bj(),writable:!1},Mj:{value:t.Gj(),writable:!1},xj:{value:t.Tj(),writable:!1},_j:{value:t.Ij(),writable:!1},Cj:{value:t.Pj(),writable:!1},Rj:{value:t.Aj(),writable:!1},Ej:{value:t.Fj(),writable:!1}}),t.aW().Oj(this,t)}static Dj(t){if(!t)return null;const s=Rf.mj.kj(t);return s?s.Lj():null}Nj(){return this.#t.Wj().Bj()}jj(){return this.#t.Vj().RB()}}}{const Ef=globalThis._s,Ff=globalThis.Ls,Of=Ef.Is();globalThis.Uj=class{#t;constructor(){const t=Ef.mj.pj(Of);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.aW().gj(),writable:!1},Hj:{value:t.zj().Lj(),writable:!1}}),t.aW().Oj(this,t)}addEventListener(t,s){Ff.le(t),Ff.Ae(s),this.#t.eN().addEventListener(t,s)}removeEventListener(t,s){Ff.le(t),Ff.Ae(s),this.#t.eN().removeEventListener(t,s)}Jj(){return[...this.qj()]}$j(){return Ef.Bh(this.qj())}Xj(){return[...this.Yj()]}Kj(){return Ef.Bh(this.Yj())}Zj(t){const s=this.#t,i=s.aW().Qj(t),e=s.tV(i);return e?e.RB():null}*qj(){for(const t of this.#t.sV())yield t.RB()}*Yj(){for(const t of this.#t.eV().iV())yield t.RB()}}}{const Df=globalThis._s,kf=globalThis.Ls,Lf=Df.Is();globalThis.nV=class extends globalThis.Uj{#t;constructor(){super();const t=Df.mj.pj(Lf);this.#t=t}rV(t){kf.Ae(t);const s=this.#t;if(s.hV()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.oV(t)}Ti(t,s,i,e,n){if(kf.te(s),kf.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.aW(),o=h.uB().kB(t);if(!o)throw new Error("invalid layer");const a=h.aV(r,o,s,i,e,n);e&&o.lV(a);const l=h.oN();return l.uV(!0),a.cV(),l.uV(!1),l.fV()||h.dB().dV()||h.pV(),a.RB()}mV(){return this.#t.gV().map(t=>t.Bj())}*yV(){for(const t of this.#t.gV())yield t.Bj()}wV(t){return kf.Ne(t,globalThis.SV),t.vV(this)}}}{const Nf=globalThis._s,Bf=globalThis.Ls,Wf=globalThis.nV,jf=Nf.Is();globalThis.SV=class extends globalThis.Uj{#t;constructor(){super();const t=Nf.mj.pj(jf);this.#t=t}bV(){return this.#t.MV().map(t=>t.Bj())}*GV(){for(const t of this.#t.MV())yield t.Bj()}vV(t){Bf.Ne(t,Wf);const s=this.#t,i=s.aW().BW(t);return s.xV(i)}}}{self._s;const Vf=self.Ls,Uf=["above","below","top-sublayer","bottom-sublayer"];self.TV=class{#t;constructor(t){this.#t=t;const s=[],i=t._V(),e=i.IV().length;for(let t=0;t<e;++t)s.push(new self.CV(i,t));Object.defineProperties(this,{runtime:{value:t.aW().gj(),writable:!1},name:{value:t.Pc(),writable:!1},index:{value:t.ML(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Vf.le(t),Vf.Ae(s),this.#t.eN().addEventListener(t,s)}removeEventListener(t,s){Vf.le(t),Vf.Ae(s),this.#t.eN().removeEventListener(t,s)}get width(){return this.#t.Vg()}set width(t){Vf.re(t),this.#t.Xg(t)}get height(){return this.#t.Zg()}set height(t){Vf.re(t),this.#t.Ug(t)}PV(t,s){Vf.re(t),Vf.re(s);const i=this.#t;i.Xg(t),i.Ug(s)}getSize(){const t=this.#t;return[t.Vg(),t.Zg()]}set scale(t){Vf.re(t),this.#t.RV(t)}get scale(){return this.#t.AV()}set angle(t){Vf.re(t),this.#t.EV(t)}get angle(){return this.#t.FV()}set scrollX(t){Vf.te(t),this.#t.OV(t)}get scrollX(){return this.#t.DV()}set scrollY(t){Vf.te(t),this.#t.kV(t)}get scrollY(){return this.#t.LV()}scrollTo(t,s){Vf.te(t),Vf.te(s);const i=this.#t;i.OV(t),i.kV(s)}NV(){const t=this.#t;return[t.DV(),t.LV()]}get BV(){return this.#t.WV()}jV(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.kB(t),i?i.VV():null}UV(){return this.#t.HV().map(t=>t.VV())}*zV(){for(const t of this.#t.zV())yield t.VV()}JV(t,s,i){const e=this.#t,n=self.qV;Vf.le(t),Vf.Be(s,n);const r=s?e.aW().$V(s):null,h=Uf.indexOf(i);if(h<0)throw new Error("invalid location");e.XV(t,r,h)}YV(t,s,i){const e=this.#t,n=e.aW(),r=self.qV;Vf.Ne(t,r);const h=n.$V(t);if(!h)throw new Error("invalid layer");Vf.Be(s,r);const o=s?n.$V(s):null,a=Uf.indexOf(i);if(a<0)throw new Error("invalid location");e.KV(h,o,a)}ZV(t){const s=this.#t,i=self.qV;Vf.Ne(t,i);const e=s.aW().$V(t);if(!e)throw new Error("invalid layer");const n=e.aW();s.QV(e),n.oN().fV()||n.pV()}tU(){const t=this.#t,s=t.aW();t.sU(),s.oN().fV()||s.pV()}iU(t,s){Vf.re(t),Vf.re(s),this.#t.eU(t,s)}nU(){return this.#t.rU()}set V(t){Vf.le(t);const s=this.#t;if("perspective"===t)s.hU();else{if("orthographic"!==t)throw new Error("invalid projection");s.oU()}}get V(){return this.#t.aU()?"orthographic":"perspective"}}}{const Hf=self._s,zf=self.Ls,Jf=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),qf=new Map([...Jf.entries()].map(t=>[t[1],t[0]])),$f=new Set(["2d","3d"]),Xf=Hf.Hn(Hf.Go);self.qV=class{#t;constructor(t){this.#t=t;const s=[],i=t._V(),e=i.IV().length;for(let t=0;t<e;++t)s.push(new self.CV(i,t));Object.defineProperties(this,{runtime:{value:t.aW().gj(),writable:!1},name:{value:t.Pc(),writable:!1},layout:{value:t.pB().cB(),writable:!1},effects:{value:s,writable:!1}}),t.aW().Oj(this,t)}addEventListener(t,s){this.#t.eN().addEventListener(t,s)}removeEventListener(t,s){this.#t.eN().removeEventListener(t,s)}get lU(){const t=this.#t.uU();return t?t.VV():null}*cU(){for(const t of this.#t.cU())yield t.VV()}*fU(){for(const t of this.#t.dU())yield t.VV()}*pU(){for(const t of this.#t.dU())for(const s of t.mU())yield s.VV()}get index(){return this.#t.ML()}get isVisible(){return this.#t.gU()}set isVisible(t){this.#t.yU(t)}get wU(){return this.#t.SU()}get vU(){return this.#t.bU()}set vU(t){this.#t.MU(t)}get GU(){return this.#t.xU()}set GU(t){this.#t.TU(!!t)}get _U(){return this.#t.IU()}get opacity(){return this.#t.wF()}set opacity(t){t=Hf.Yn(+t,0,1),isNaN(t)||this.#t.vF(t)}set scale(t){zf.re(t),this.#t.CU(t)}get scale(){return this.#t.PU()}set RU(t){zf.re(t),this.#t.AU(t)}get RU(){return this.#t.EU()}set angle(t){zf.re(t),this.#t.EV(t)}get angle(){return this.#t.FU()}set OU(t){zf.re(t),this.#t.DU(t)}get OU(){return this.#t.kU()}set LU(t){zf.re(t),this.#t.NU(t)}get LU(){return this.#t.BU()}set WU(t){zf.re(t),this.#t.tG(t)}get WU(){return this.#t.QM()}set renderingMode(t){if(!$f.has(t))throw TypeError("invalid rendering mode");this.#t.jU("3d"===t)}get renderingMode(){return this.#t.VU()?"3d":"2d"}set UU(t){this.#t.HU(t)}get UU(){return this.#t.zU()}set JU(t){this.#t.qU(t)}get JU(){return this.#t.$U()}set mk(t){zf.le(t);const s=Jf.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.LM(s)}get mk(){return qf.get(this.#t.XU())}set backgroundColor(t){if(zf.xe(t),t.length<3)throw new Error("expected 3 elements");Xf.Po(t[0],t[1],t[2]);const s=this.#t,i=s.YU();i.zo(Xf)||(i.ko(Xf),s.aW().VB())}get backgroundColor(){const t=this.#t.YU();return[t.Lo(),t.No(),t.Bo()]}set scrollX(t){zf.te(t);const s=this.#t;s.KU(!0),s.OV(t)}get scrollX(){return this.#t.DV()}set scrollY(t){zf.te(t);const s=this.#t;s.KU(!0),s.kV(t)}get scrollY(){return this.#t.LV()}scrollTo(t,s){zf.te(t),zf.te(s);const i=this.#t;i.KU(!0),i.OV(t),i.kV(s)}NV(){const t=this.#t;return[t.DV(),t.LV()]}ZU(){this.#t.KU(!1)}getViewport(){return this.#t.QU().il()}tH(t,s,i=0){zf.te(t),zf.te(s),zf.te(i);const e=this.#t,n=e.aW();return e.sH(t-n.QW(),s-n.sj(),i)}iH(t,s,i=0){zf.te(t),zf.te(s),zf.te(i);const e=this.#t,n=e.aW(),[r,h]=e.eH(t,s,i);return[r+n.QW(),h+n.sj()]}nH(t,s,i=0){return zf.te(t),zf.te(s),zf.te(i),this.#t.rH(t,s,i)}hH(t,s,i=0){return zf.te(t),zf.te(s),zf.te(i),this.#t.oH(t,s,i)}get aH(){return this.#t.lH()}}}{let Yf=function(t){let s=Qf.get(t);return s||(s=Kf.Hn(Kf.Event.wf),Qf.set(t,s),s)};0;const Kf=self._s,Zf=self.Ls,Qf=new WeakMap,td=Kf.Is();self.uH=class{#t;constructor(){const t=Kf.mj.pj(td);this.#t=t;const s={runtime:{value:t.aW().gj(),writable:!1},objectType:{value:t.cH().Bj(),writable:!1},Hj:{value:t.zj().Lj(),writable:!1}};t.fH(s),t.dH(s),Object.defineProperties(this,s),t.aW().Oj(this,t)}static pH(){return Kf.mj.mH()}gH(){const t=Qf.get(this);t&&(t.zn(),Qf.delete(this))}addEventListener(t,s,i){Zf.le(t),Zf.Ae(s),Yf(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Zf.le(t),Zf.Ae(s),Yf(this).removeEventListener(t,s,i)}dispatchEvent(t){Yf(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.aW();s.yH(t),s.oN().fV()||s.dB().dV()||s.oN().wH()||s.pV()}SH(){const t=this.#t.vH();return t?t.map(t=>t.RB()):[]}*bH(){const t=this.#t;if(t.MH())for(const s of t.GH())yield s.RB()}get uid(){return this.#t.xH()}get TH(){return this.#t._H()}get IH(){return this.#t.CH()}set BN(t){Zf.re(t),this.#t.jN(t)}get BN(){return this.#t.PH()}RH(){this.#t.AH()}get PN(){const t=this.#t;return t.aW().RN(t)}EH(...t){Zf.xe(t);const s=new Set(t),i=this.#t.FH();return s.isSubsetOf(i)}OH(t){Zf.Ne(t,Set),this.#t.DH(t)}kH(){return new Set(this.#t.FH())}signal(t){Zf.le(t);const s=this.#t;s.aW().oN().LH(s,t)}xN(t){Zf.le(t);const s=this.#t;return s.aW().oN().NH(s,t)}}}{const sd=self._s,id=self.Ls,ed=sd.Is();self.BH=class extends self.uH{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=sd.mj.pj(ed),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.WH,this.#h=t?.jH}gH(){this.VH(!1),this.UH(!1),super.gH()}HH(){return sd.mj.zH()}JH(t){const s=this.#t;s.aW().qH(t,s)}$H(t){const s=this.#t;return s.aW().KB(t,s)}XH(t,s){if(id.le(t),id.Ae(s),!this.#r)throw new Error("no DOM component id set");this.#t.aW().YH(this.#r,t,s)}KH(t){id.xe(t);for(const[s,i]of t)this.XH(s,i)}ZH(t,s){if(id.le(t),!this.#r)throw new Error("no DOM component id set");this.#t.aW().jc(this.#r,t,s)}QH(t,s){if(id.le(t),!this.#r)throw new Error("no DOM component id set");return this.#t.aW().HB(this.#r,t,s)}tz(t,s){if(!this.#t.aW().zL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.ZH(t,s)}VH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.aW();if(t){if(!this.#i)if(this.#t.aW().sz()){const t=globalThis.iz,s=this.Hj;this.#i=()=>{const i=performance.now();this.ez(),t.nz(s,performance.now()-i)}}else this.#i=()=>this.ez();s.wf().addEventListener("tick",this.#i)}else s.wf().removeEventListener("tick",this.#i)}rz(){return this.#s}ez(){}UH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.aW();if(t){if(!this.#n)if(this.#t.aW().sz()){const t=globalThis.iz,s=this.Hj;this.#n=()=>{const i=performance.now();this.hz(),t.nz(s,performance.now()-i)}}else this.#n=()=>this.hz();s.wf().addEventListener("tick2",this.#n)}else s.wf().removeEventListener("tick2",this.#n)}oz(){return this.#e}hz(){}az(){return[]}lz(){return null}uz(t){}cz(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.aW().fz(this.#h)}dz(t,s){if(id.le(t),id.Ae(s),!this.#h)throw new Error("no wrapper component id set");this.#t.aW().pz(this.#h,t,s)}mz(t){id.xe(t);for(const[s,i]of t)this.dz(s,i)}gz(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.sN.yz(this.#h,t,s)}wz(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.sN.Sz(this.#h,t,s)}}}{let nd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=rd.mj.pj(cd),i=s.DB();this.#t=s,this.#s=i,ud.set(this,s);const e=[],n=i.vz();if(n){const t=i.cH()._V().IV().length;for(let s=0;s<t;++s)e.push(new self.CV(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.pB().cB()}get bz(){return this.#s.kB().VV()}get x(){return this.#s.$M()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.$M()===t||(s.XM(t),s.Mz())}get y(){return this.#s.KM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.KM()===t||(s.ZM(t),s.Mz())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.$M()===t&&i.KM()===s||(i.Gz(t,s),i.Mz())}xz(){const t=this.#s;return[t.$M(),t.KM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.Tz(t,s),i.Mz()}set _z(t){t=+t;const s=this.#s;isNaN(t)||s.Iz()===t||(s.Cz(t),s.Mz())}get _z(){return this.#s.Iz()}set Pz(t){t=+t;const s=this.#s;isNaN(t)||s.Rz()===t||(s.Az(t),s.Mz())}get Pz(){return this.#s.Rz()}Ez(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Iz()===t&&i.Rz()===s||(i.Cz(t),i.Az(s),i.Mz())}Fz(){const t=this.#s;return[t.Iz(),t.Rz()]}get WU(){return this.#s.QM()}set WU(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.QM()===t||(i.tG(t),s.aW().VB())}get Oz(){return this.#s.Dz()}get width(){return this.#s.Vg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vg()===t||(s.Xg(t),s.Mz())}get height(){return this.#s.Zg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Zg()===t||(s.Ug(t),s.Mz())}PV(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Vg()===t&&i.Zg()===s||(i.BR(t,s),i.Mz())}getSize(){const t=this.#s;return[t.Vg(),t.Zg()]}get angle(){return this.#s.FV()}set angle(t){t=rd.Kn(+t);const s=this.#s;isNaN(t)||s.FV()===t||(s.EV(t),s.Mz())}get kz(){return rd.Qn(this.angle)}set kz(t){this.angle=rd.Zn(t)}Zl(t){return t?(this.#s.Lz(ad,ld,!1),ad.il()):this.#s.Nz().il()}Bz(t){return t?(this.#s.Lz(ad,ld,!1),ld.Jl()):this.#s.Wz().Jl()}jz(){return this.#s.Vz()}get isVisible(){return this.#s.SU()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.SU()!==t&&(i.yU(t),s.aW().VB())}get opacity(){return this.#s.wF()}set opacity(t){t=rd.Yn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.wF()===t||(i.vF(t),s.aW().VB())}set Uz(t){if(hd.xe(t),t.length<3)throw new Error("expected 3 elements");pd.Po(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.zz().zo(pd)||(i.Jz(pd),s.aW().VB())}get Uz(){const t=this.#s.zz();return[t.Lo(),t.No(),t.Bo()]}set mk(t){hd.le(t);const s=fd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.LM(s),i.aW().VB()}get mk(){return dd.get(this.#s.XU())}qz(){this.#s.$z()}Xz(){this.#s.Yz()}Kz(t){hd.Ne(t,od);const s=this.#t,i=s.aW().$V(t);if(!i)throw new Error("invalid layer");s.DB().Zz(i)}Qz(t,i){hd.Ne(t,s),this.#s.tJ(ud.get(t),i)}get zIndex(){return this.#s.LB()}get sJ(){return this.#s.iJ()}set sJ(t){this.#s.eJ(!!t)}xl(t,s){return hd.te(t),hd.te(s),this.#s.nJ(+t,+s)}PW(t){hd.Ne(t,s);const i=this.#t,e=ud.get(t);return i.aW().RL().RW(i,e)}EW(){const t=this.#t,s=t.aW().RL().FW(t);return s?s.RB():null}getParent(){const t=this.#t.rJ();return t?t.RB():null}hJ(){const t=this.#t.oJ();return t?t.RB():null}*aJ(){for(const t of this.#t.aJ())yield t.RB()}lJ(){return this.#t.uJ()}cJ(t){const s=this.#t.fJ(t);return s?s.RB():null}*children(){for(const t of this.#t.children())yield t.RB()}*dJ(){for(const t of this.#t.dJ())yield t.RB()}pJ(t,i){hd.Ne(t,s),hd.ye(i),i||(i={});const e=this.#t,n=ud.get(t);e.mJ(n,i)}removeChild(t){hd.Ne(t,s);const i=this.#t,e=ud.get(t);i.gJ(e)}yJ(){const t=this.#t;t.wJ()&&t.rJ().gJ(t)}SJ(){const t=this.#s;return{vJ:t.bJ(),MJ:t.GJ(),xJ:t.TJ(),_J:t.IJ(),CJ:t.PJ(),RJ:t.AJ(),EJ:t.FJ(),OJ:t.DJ(),kJ:t.LJ()}}NJ(t,s){hd.re(t),hd.re(s),this.#s.BJ(t,s)}WJ(){const t=this.#s;t.jJ(),t.Mz()}VJ(t,s,i){hd.re(t),hd.re(s),hd.ge(i);const e=this.#s;e.UJ(t,s,i)&&e.Mz()}HJ(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.zJ()){const a=o.JJ().NG(t,s);null!==a&&(i=a.$M(),e=a.KM(),n=a.QM(),r=a.sG(),h=a.eG())}return{x:i,y:e,WU:n,qJ:r,$J:h}}XJ(){const t=this.#s;if(!t.zJ())return[0,0];const s=t.JJ();return[s._G(),s.IG()]}}};0;const rd=self._s,hd=self.Ls,od=(self.uH,self.qV),ad=rd.Hn(rd.Rect),ld=rd.Hn(rd.Cl),ud=new WeakMap,cd=rd.Is(),fd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),dd=new Map([...fd.entries()].map(t=>[t[1],t[0]])),pd=rd.Hn(rd.Go);self.YJ=nd(self.uH),self.KJ=nd(self.BH)}{self._s;const md=self.Ls;self.ZJ=class extends self.YJ{#t;constructor(){super(),this.#t=self.uH.pH()}QJ(){return this.#t.sq().tq()}focus(){this.#t.sq().iq()}blur(){this.#t.sq().eq()}nq(t,s){md.le(t),this.#t.sq().rq(t,s)}}}{let gd=function(t){let s=Sd.get(t);return s||(s=yd.Hn(yd.Event.wf),Sd.set(t,s),s)};0;const yd=self._s,wd=self.Ls,Sd=new WeakMap,vd=yd.Is();self.hq=class{#t;constructor(){const t=yd.mj.pj(vd);this.#t=t;const s={runtime:{value:t.aW().gj(),writable:!1},behavior:{value:t.aq().oq(),writable:!1},lq:{value:t.cq().uq(),writable:!1}};Object.defineProperties(this,s),t.aW().Oj(this,t)}static pH(){return yd.mj.mH()}get fq(){return this.#t.pq().RB()}gH(){const t=Sd.get(this);t&&(t.zn(),Sd.delete(this))}addEventListener(t,s,i){wd.le(t),wd.Ae(s),gd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){wd.le(t),wd.Ae(s),gd(this).removeEventListener(t,s,i)}dispatchEvent(t){gd(this).dispatchEvent(t)}}}{const bd=self._s,Md=(self.Ls,bd.Is());self.mq=class{constructor(){const t=bd.mj.pj(Md),s={runtime:{value:t.aW().gj(),writable:!1},behavior:{value:t.aq().oq(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const Gd=self._s,xd=(self.Ls,Gd.Is());self.gq=class{#s;constructor(){const t=Gd.mj.pj(xd);this.#s=t;const s={runtime:{value:t.aW().gj(),writable:!1},id:{value:t.yj(),writable:!1}};Object.defineProperties(this,s),t.aW().Oj(this,t)}Jj(){return this.#s.iV().map(t=>t.RB())}static Dj(t){if(!t)return null;const s=Gd.mj.yq(t);return s?s.oq():null}}}{const Td=self._s,_d=self.Ls,Id=Td.Hn(Td.Go);self.CV=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.IV()[this.index].Pc()}get isActive(){return this.#t.wq(this.index)}set isActive(t){t=!!t;const s=this.#t;s.wq(this.index)!==t&&(s.Sq(this.index,t),s.vq(),s.aW().VB())}setParameter(t,s){_d.re(t),t=Math.floor(+t);const i=this.#t,e=i.bq(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Td.Go){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Id.Po(s[0],s[1],s[2]),s=Id}else if("number"!=typeof s)throw new TypeError("expected number");i.Mq(this.index,t,s)&&i.wq(this.index)&&i.aW().VB()}getParameter(t){_d.re(t),t=Math.floor(+t);const s=this.#t.bq(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Td.Go?[s.Lo(),s.No(),s.Bo()]:s}}}self._s,self.Ls;self.Gq=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.xq()}get Tq(){return this.#t._q()}get Iq(){return this.#t.Cq()}get Pq(){return this.#t.Rq()}get Aq(){return this.#t.Eq()}get frameCount(){return this.#t.Fq()}Oq(){return this.#t.Dq().map(t=>t.kq())}*frames(){for(const t of this.#t.Dq())yield t.kq()}};self._s,self.Ls;self.hW=class{#s;constructor(t){this.#s=t}static rW(t){return t.#s}get width(){return this.#s.Vg()}get height(){return this.#s.Zg()}getSize(){const t=this.#s;return[t.Vg(),t.Zg()]}Lq(t){return t.Nq(this)}Bq(){return this.#s.gA().il()}};{self._s;const Cd=self.Ls;self.Wq=class extends self.hW{#s;constructor(t){super(t.jq()),this.#s=t,Object.defineProperties(this,{duration:{value:t.Vq(),writable:!1},_z:{value:t.Iz(),writable:!1},Pz:{value:t.Rz(),writable:!1}})}Fz(){const t=this.#s;return[t.Iz(),t.Rz()]}Uq(){return this.#s.Hq()}zq(t){return this.Jq(t)[0]}qq(t){return this.Jq(t)[1]}Jq(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.$q(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.Xq(t)}return i?[i.$M(),i.KM()]:this.Fz()}Yq(){const t=this.#s.Kq();return t?t.pu():0}Zq(t){return this.Qq(t)[0]}t$(t){return this.Qq(t)[1]}Qq(t){Cd.re(t),t=Math.floor(t);const s=this.#s.Kq();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.s$()}}}{let Pd=function(t){const s=Ad.get(t);if(s.i$())throw new Error("timeline/tween was released and is no longer valid");return s};0;self._s;const Rd=self.Ls,Ad=new WeakMap;self.e$=class{constructor(t){Ad.set(this,t),t.aW().Oj(this,t)}pause(){Pd(this).n$()}resume(){Pd(this).r$()}stop(){Pd(this).Bf()}EH(t){return Pd(this).h$(t)}set time(t){Rd.re(t),Pd(this).o$(t)}get time(){return Pd(this).$O()}set totalTime(t){Rd.re(t),Pd(this).a$(t)}get totalTime(){return Pd(this).l$()}set Tq(t){Pd(this).u$(!!t)}get Tq(){return Pd(this).c$()}set Aq(t){Pd(this).f$(!!t)}get Aq(){return Pd(this).d$()}set playbackRate(t){Rd.re(t),Pd(this).p$(t)}get playbackRate(){return Pd(this).m$()}get progress(){const t=Pd(this);return t.$O()/t.l$()}get tags(){return Pd(this).g$()}get finished(){return Pd(this).y$()}get w$(){return Pd(this).IsPlaying()}get S$(){return Pd(this).v$()}get b$(){return Ad.get(this).i$()}}}{let Ed=function(t){const s=Fd.get(t);if(s.i$())throw new Error("timeline was released and is no longer valid");return s};0;self._s,self.Ls;const Fd=new WeakMap;self.M$=class extends self.e${constructor(t){super(t),Fd.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let Od=function(t){const s=kd.get(t);if(s.i$())throw new Error("tween was released and is no longer valid");return s};0;self._s;const Dd=self.Ls,kd=new WeakMap,Ld=new WeakMap;let Nd=null;self.G$=class extends self.e${constructor(t,s,i){super(t),Nd||(Nd=i.x$),kd.set(this,t),s&&Ld.set(this,s)}stop(){const t=Od(this);Ld.get(this).T$(t)}_$(t){Dd.le(t);const s=self.Vu.oc(Nd(t));Od(this).I$(s)}get fq(){const t=Od(this).C$();return t?t.RB():null}get P$(){return Od(this).R$()}set P$(t){Od(this).A$(!!t)}get value(){const t=Od(this);if("value"!==t.E$())throw new Error("not a value tween");return t.O$("value").F$()}}}self._s,self.Ls;self.D$=class extends self.dj{constructor(){super()}};{const Bd=self._s,Wd=self.Ls,jd=Bd.Is();self.k$=class extends self.D${#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Bd.mj.pj(jd),!t?.WH)throw new Error("no DOM component ID specified");this.#i=t.WH,this.L$("elem-focused",t=>t.N$()),this.L$("elem-blurred",t=>{t&&t.B$()})}W$(t){const s=this.#s++;return this.#r.set(s,t),s}j$(t){this.#r.delete(t)}L$(t,s){this.#t.aW().YH(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}V$(t){Wd.xe(t);for(const[s,i]of t)this.V$(s,i)}}}{const Vd=self._s,Ud=(self.Ls,Vd.Is());self.U$=class extends self.nV{#t;constructor(){super(),this.#t=Vd.mj.pj(Ud)}H$(){}z$(){return this.#t.jq().J$()}q$(t){}$$(t){}X$(){}Y$(t){}}}{const Hd=self._s,zd=(self.Ls,Hd.Is());self.K$=class extends self.KJ{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Hd.mj.pj(zd)}gH(){if(super.gH(),this.#n){const t=this.#t.aW().wf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}Z$(){if(this.#n)return;this.#n=()=>this.Q$(),this.#s=()=>this.tX();const t=this.#t.aW().wf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}Q$(){}tX(){}sX(t){}iX(){return!0}iM(){return!1}}}{const Jd=self._s,qd=(self.Ls,Jd.Hn(Jd.Rect)),$d=new WeakMap,Xd=Jd.Is();self.eX=class extends self.K${#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Jd.Hn(Jd.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.WH)throw new Error("no DOM component ID specified");super(t);const s=Jd.mj.pj(Xd);$d.set(this,s),this.#t=this.Hj.W$(this);const i=s.aW().TB();this.#o=i.nX(),this.#a=i.rX(),this.VH(!0)}gH(){super.gH(),this.Hj.j$(this.#t),this.hX("destroy"),this.#t=-1,$d.delete(this)}oX(){if($d.get(this).aW().zL())throw new Error("not valid in worker mode");return this.aX("get-element")}hX(t,s){s||(s={}),s.elementId=this.#t,this.ZH(t,s)}aX(t,s){return s||(s={}),s.elementId=this.#t,this.tz(t,s)}lX(t,s){return s||(s={}),s.elementId=this.#t,this.QH(t,s)}uX(t){t||(t={});const s=$d.get(this).DB();t.elementId=this.#t,t.isVisible=s.SU(),t.htmlIndex=s.kB().cX(),t.htmlZIndex=s.fX(),Object.assign(t,this.dX()),this.#s=!!t.isVisible,this.tz("create",t),this.pX(!0)}mX(t){t=!!t,this.#s!==t&&(this.#s=t,this.hX("set-visible",{isVisible:t}))}ez(){this.pX(!1)}gX(){const t=$d.get(this).aW().TB().yX();return"Android"===Jd.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}pX(t){const s=$d.get(this);if(s.wX())return;const i=s.DB(),e=i.kB(),n=i.Nz();let[r,h]=e.eH(n.Za(),n.Qa()),[o,a]=e.eH(n.tl(),n.sl());const l=s.aW().TB(),u=l.ej(),c=l.rj();if(!i.SU()||!e.SU())return void this.mX(!1);if(!this.gX()&&(o<=0||a<=0||r>=u||h>=c))return void this.mX(!1);qd.set(r,h,o,a);const f=l.nX(),d=l.rX(),p=e.cX(),m=i.fX();if(!t&&qd.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.mX(!0);this.#h.m(qd),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.mX(!0);let g=null;this.#e&&(g=e.SX()+this.#i),this.hX("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}vX(){this.aX("focus",{focus:!0})}bX(){this.aX("focus",{focus:!1})}N$(){this.#r=!0}B$(){this.#r=!1}MX(){return this.#r}GX(t,s){this.xX("set-css-style",{prop:Jd.vo(t),val:s})}TX(t,s){this.xX("set-attribute",{name:t,val:s})}_X(t){this.xX("remove-attribute",{name:t})}IX(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.hX("update-state",this.dX())}))}dX(){}CX(){return this.#t}}}self._s,self.Ls;self.PX=class extends self.gq{constructor(){super()}};self._s,self.Ls;self.RX=class extends globalThis.mq{constructor(){super()}H$(){}};{const Yd=self._s,Kd=(self.Ls,new WeakMap),Zd=Yd.Is();self.AX=class extends self.hq{#e=!1;#s=!1;#t=!1;constructor(){super(),Kd.set(this,Yd.mj.pj(Zd))}gH(){super.gH(),this.VH(!1),this.UH(!1),this.EX(!1),Kd.delete(this)}HH(){return Yd.mj.zH()}FX(){}JH(t){const s=Kd.get(this);s.aW().qH(t,s.pq(),s.cq())}$H(t){const s=Kd.get(this);return s.aW().KB(t,s.pq(),s.cq())}VH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Kd.get(this).aW();t?s.OX(this):s.DX(this)}rz(){return this.#e}ez(){}UH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Kd.get(this).aW();t?s.kX(this):s.LX(this)}oz(){return this.#s}hz(){}EX(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Kd.get(this).aW();t?s.NX(this):s.BX(this)}WX(){return this.#t}jX(){}az(){return[]}lz(){return null}uz(t){}}}{self._s;const Qd=self.Ls;let tp=null;self.iN=class{constructor(t){tp=t}qB(t){tp.$B(t)}yz(t,s,i){Qd.le(t),Qd.le(s),Qd.Te(i),tp.VX(t,s,i)}Sz(t,s,i){return Qd.le(t),Qd.le(s),Qd.Te(i),tp.UX(t,s,i)}HX(t){return Qd.ue(t),new self.zX(tp,t)}set JX(t){tp.qX(!!t)}get JX(){return tp.$X()}XX(t){tp.YX(!!t)}KX(t){Qd.te(t);const s=tp.ZX(t);return s?s.Bj():null}}}self._s,self.Ls;self.zX=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.oN(),e=t.dN();this.#s=e,this.#h=e.QX();const n=t.vN();this.#i=n.tY(),this.#r=n.sY(e);const r=i.iY().sY();this.#n=r,s&&r.eY(s),t.nY(!1)}rY(){const t=this.#t.oN(),s=this.#h,i=this.#n;t.hY(s),this.#s.oY(this.#i,this.#r),t.aY(s),i.lY(i.ML()+1)}get uY(){return this.#n.cY()}release(){const t=this.#t,s=t.vN(),i=t.oN().iY();t.nY(!0),i.fY(),s.fY()}};{let sp=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};0;const ip=self._s,ep=self.Ls;let np=null,rp=null;const hp=["none","back","front"],op=["cw","ccw"];self.dY=class{constructor(t,s){rp=t,np=s}pY(){np.IF()}mY(t){np.TF(t)}gY(){np.mv()}yY(){np.lv()}wY(){np.Mv()}setColor(t){np.SF(t[0],t[1],t[2],t[3])}SY(t,s,i,e){np.SF(t,s,i,e)}vY(){np.bF()}bY(t){np.vF(t)}MY(t){np.Uv(t)}GY(){return np.Hv()}xY(t){const s=hp.indexOf(t);if(-1===s)throw new Error("invalid cull mode");np.Pb(s)}TY(){return hp[np.PF()]}_Y(t){const s=op.indexOf(t);if(-1===s)throw new Error("invalid front face winding");np.Rb(s)}IY(){return np.RF()}rect(t){np.EF(t.left,t.top,t.right,t.bottom)}CY(t,s,i,e){np.EF(t,s,i,e)}PY(t){np.Cl(ip.Cl.ql(t))}RY(t,s,i,e,n,r,h,o){np.Eb(t,s,i,e,n,r,h,o)}AY(t,s){np.tb(ip.Cl.ql(t),ip.Rect.el(s))}EY(t,s){np.DF(ip.Cl.ql(t),ip.Cl.ql(s))}FY(t,s,i){np.kF(ip.Cl.ql(t),ip.Cl.ql(s),i)}OY(t,s,i,e,n,r,h,o,a,l,u,c,f){np.LF(t,s,i,e,n,r,h,o,a,l,u,c,ip.Rect.el(f))}DY(t,s,i,e,n,r,h,o,a,l,u,c,f){np.Xv(t,s,i,e,n,r,h,o,a,l,u,c,ip.Cl.ql(f))}kY(t,s,i,e,n,r,h,o,a,l,u,c,f,d){np.NF(t,s,i,e,n,r,h,o,a,l,u,c,ip.Cl.ql(f),d)}LY(t,s,i,e){np.JG(t,s,i,e)}NY(t){np.Ab(t)}line(t,s,i,e){np.ey(t,s,i,e)}BY(t,s,i,e,n,r){np.Yv(t,s,i,e,n,r)}WY(t,s,i,e){np.sb(t,s,i,e)}jY(t){np.rb(ip.Rect.el(t))}VY(t){np.hb(ip.Cl.ql(t))}UY(t){np.fb(t)}HY(){np.pb()}zY(t){np.wb(t)}JY(){np.Gb()}qY(t){ep.Be(t,self.$Y);const s=t?rp.$V(t):null;np.GF(s)}XY(t,s){const i=self.hW.rW(t);if(!i)throw new Error("invalid IImageInfo");return i.YY(np,{sx:s?.sx??"clamp-to-edge",ix:s?.ix??"clamp-to-edge",nx:s?.nx??"trilinear",lx:s?.lx??!0})}KY(t){const s=self.hW.rW(t);if(!s)throw new Error("invalid IImageInfo");s.oR()}Nq(t){const s=self.hW.rW(t);if(!s)throw new Error("invalid IImageInfo");const i=s.xT();return self.$Y.ZY(rp,i)}QY(t,s){if(!sp(t))throw new TypeError("invalid texture data");const i=np.aO(t,{sx:s?.sx??"clamp-to-edge",ix:s?.ix??"clamp-to-edge",nx:s?.nx??"trilinear",lx:s?.lx??!0});return self.$Y.ZY(rp,i)}tK(t,s,i){ep.re(t),ep.re(s);const e=np.pT(t,s,{sx:i?.sx??"clamp-to-edge",ix:i?.ix??"clamp-to-edge",nx:i?.nx??"trilinear",lx:i?.lx??!0});return self.$Y.ZY(rp,e)}sK(t,s,i){ep.Ne(s,self.$Y);const e=rp.$V(s);np.mA(t,e,{mx:i?.mx??!0})}deleteTexture(t){ep.Ne(t,self.$Y);const s=rp.$V(t);np.wT(s)}iK(){const t=np.Jb();return new self.eK(rp,t)}nK(){rp.TB().rK(np)}hK(t){ep.Ne(t,globalThis.qV),rp.$V(t).oK(np)}}}{self._s,self.Ls;const ap=new WeakMap,lp=new WeakMap;self.$Y=class{constructor(t,s){ap.set(this,{runtime:t,texture:s}),lp.set(s,this),t.Oj(this,s),Object.defineProperties(this,{width:{value:s.Vg(),writable:!1},height:{value:s.Zg(),writable:!1}})}static ZY(t,s){if(!s)return null;return lp.get(s)||new self.$Y(t,s)}}}{let up=function(t){return fp.get(t).aK};0;self._s;const cp=self.Ls,fp=new WeakMap;self.eK=class{constructor(t,s){fp.set(this,{runtime:t,aK:s}),t.Oj(this,s)}release(){up(this).zn()}set lK(t){cp.le(t),up(this).mR(t)}get lK(){return up(this).wP()}set uK(t){cp.re(t),up(this).gR(t)}get uK(){return up(this).yR()}set lineHeight(t){cp.re(t),up(this).SR(t)}get lineHeight(){return up(this).vR()}set cK(t){up(this).bR(t)}get cK(){return up(this).MR()}set fK(t){up(this).GR(t)}get fK(){return up(this).xR()}setColor(t){cp.xe(t),this.dK(t[0],t[1],t[2])}dK(t,s,i){up(this).PR(t,s,i)}pK(t){cp.le(t),up(this).NM(t)}set mK(t){up(this).RR(t)}get mK(){return up(this).AR()}set verticalAlign(t){up(this).ER(t)}get verticalAlign(){return up(this).FR()}set gK(t){up(this).OR(t)}get gK(){return up(this).DR()}set yK(t){up(this).kR(t)}get yK(){return up(this).LR()}set text(t){cp.le(t),up(this).Vc(t)}get text(){return up(this).NR()}PV(t,s,i){cp.re(t),cp.re(s),cp.re(i),up(this).BR(t,s,i)}Lq(){const{runtime:t,aK:s}=fp.get(this),i=s.xT();return self.$Y.ZY(t,i)}Bq(){return up(this).gA().il()}wK(t){cp.Ae(t),up(this).lR=t}SK(){up(this).oR()}get vK(){return up(this).jR()}get bK(){return up(this).UR()}}}{let dp=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return yp.get(i)||""},pp=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};0;const mp=self._s,gp=new Set(["local","remote"]),yp=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);mp.MK=class extends mp.Vn{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.GK="folders",this.xK=new Map,this.TK="cordova"===i,this._K=!!s.isiOSCordova,this.IK=!!s.isFileProtocol,this.CK=s.swClientId,this.PK=s.supportedAudioFormats||{},this.RK=new Map,this.AK=!1,this.EK=s.scriptFolder,this.FK="",this.DK="",this.kK="",this.LK=s.fileMap||new Map,this.NK=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.BK=e?"remote":"local",this.WK=new Map,this.jK=[],this.VK=[],this.UK=!1,this.HK=0,this.zK=0,this.JK=0,this.qK=!1,this.$K=mp.Hn(mp.Qd,()=>this.XK(),50),this.YK=mp.Hn(mp.Hd,Math.max(mp.hardwareConcurrency,8)),this.KK=mp.Hn(mp.Hd,20),this.ZK=new self.iW(this)}zn(){for(const t of this.WK.values())t.zn();this.WK.clear(),mp.Sh(this.VK),this.Nc=null}aW(){return this.Nc}QK(t){this.GK=t}gW(){return this.GK}tZ(){return this.EK}sZ(t){this.FK=t}SW(){return this.FK}iZ(t){this.DK=t}eZ(){return this.DK}nZ(t){this.kK=t}rZ(){return this.kK}hZ(){return this.IK}eo(t,s){return s=s||this.BK,mp.Kh(t)?("flat"===this.GK&&(t=t.toLowerCase()),this.TK&&this.IK?this.oZ(t):"playable-ad-single-file"===this.Nc.JW()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.YK.Bu(()=>mp.eo(t)):this.KK.Bu(()=>mp.eo(t))):mp.eo(t)}no(t){return mp.Kh(t)?("flat"===this.GK&&(t=t.toLowerCase()),this.TK&&this.IK?this.aZ(t):"playable-ad-single-file"===this.Nc.JW()?mp.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BK?this.YK.Bu(()=>mp.no(t)):this.KK.Bu(()=>mp.no(t))):mp.no(t)}so(t){return mp.Kh(t)?("flat"===this.GK&&(t=t.toLowerCase()),this.TK&&this.IK?this.lZ(t):"playable-ad-single-file"===this.Nc.JW()?mp.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BK?this.YK.Bu(()=>mp.so(t)):this.KK.Bu(()=>mp.so(t))):mp.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}uZ(t,s){return"flat"===this.GK&&(t=t.toLowerCase()),this.Nc.HB("runtime","cordova-fetch-local-file",{filename:t,as:s})}lZ(t){return this.uZ(t,"text")}async oZ(t){const s=await this.uZ(t,"buffer"),i=dp(t);return new Blob([s],{type:i})}async cZ(t){"flat"===this.GK&&(t=t.toLowerCase());let s=this.xK.get(t);if(s)return s;const i=await this.oZ(t);return s=URL.createObjectURL(i),this.xK.set(t,s),s}aZ(t){return this.uZ(t,"buffer")}yW(t){"flat"===this.GK&&(t=t.toLowerCase());let s=this.FK+t;return"Gecko"===mp.Ks.ei&&"preview"===this.Nc.JW()&&(s=this.fZ(s)),s}pW(t){return mp.Yh(t)?Promise.resolve(t):this.TK&&this.IK?this.cZ(t):"playable-ad-single-file"===this.Nc.JW()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.GK&&(t=t.toLowerCase()),Promise.resolve(t))}dZ(t){if(mp.Yh(t)||"preview"!==this.Nc.JW()||!this.CK||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.CK),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}pZ(t){return this.pW(t)}mZ(t,s){return(s?"true":"false")+"|"+t}gZ(t){const s=!!t.yZ;if(t.wZ&&!gp.has(t.wZ))throw new Error("invalid load policy");const i=this.mZ(t.url,s);let e=this.WK.get(i);return e||(e=mp.Hn(mp.SZ,this,{url:t.url,size:t.size||0,wZ:t.wZ||this.BK,yZ:s}),this.WK.set(i,e),this.UK||(this.HK+=e.Fu(),this.VK.push(e.vZ().then(()=>this.bZ(e.Fu())))),e)}MZ(t){const s=this.mZ(t.GZ(),t.xZ());this.WK.delete(s)}async TZ(){try{await Promise.all(this.VK),this.JK=1}catch(t){console.error("Error loading: ",t),this.qK=!0,this.XK()}}_Z(){this.UK=!0}IZ(){return this.qK}bZ(t){this.zK+=t,this.$K.pp()}XK(){const t=mp.Hn(mp.Event,"loadingprogress");this.JK=mp.Yn(this.zK/this.HK,0,1),t.progress=this.JK,this.Nc.wf().dispatchEvent(t),this.Nc.CZ(mp.Hn(mp.Event,"loadingprogress"))}hB(){return this.JK}aB(){return this.Nc.RZ().PZ()}AZ(t){mp.xh(this.jK,t),this.jK.length&&this.VK.push(this.EZ())}async EZ(){const t=[],s=[];for(const[i,e,n]of this.jK)this.HK+=n,t.push(this.FZ(i,e,s).then(()=>this.bZ(n)));await Promise.all(t),this.Nc.zL()&&s.length>0&&await this.Nc.HB("runtime","load-webfonts",{webfonts:s})}async FZ(t,s,i){try{let e=await this.pW(s);"Gecko"===mp.Ks.ei&&(t=`'${t}'`),("Gecko"===mp.Ks.ei&&"preview"===this.Nc.JW()||"playable-ad-single-file"===this.Nc.JW())&&(e=this.fZ(e));const n=new FontFace(t,`url('${e}')`);this.Nc.zL()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.zL()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}OZ(t){return!!this.PK[t]}DZ(t,s){this.AK=!!s;for(const[s,i,e]of t)this.RK.set(s,{fileName:s,kZ:i.map(t=>({type:t[0],LZ:t[1],fullName:s+t[1],fileSize:t[2]})),NZ:e})}BZ(t){"flat"===this.GK&&(t=t.toLowerCase());const s=this.RK.get(t);if(!s)return null;let i=null;for(const t of s.kZ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.OZ(t.type))return t;return i}WZ(t){const s=this.BZ(t);return s?{url:this.yW(s.fullName),type:s.type}:null}jZ(){if(this.AK){const t=[];for(const s of this.RK.values()){if(s.NZ)continue;const i=this.BZ(s.fileName);i&&t.push({VZ:s.fileName,url:this.yW(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}UZ(t){return"preview"===this.Nc.JW()&&(t=new URL(t,location.href).toString()),this.LK.get(t)||null}fZ(t){let s=this.NK.get(t);if(s)return s;const i=this.UZ(t);return i?(s=URL.createObjectURL(i),this.NK.set(t,s),s):t}_L(){return this.ZK}async MW(...t){const s=await Promise.all(t.map(t=>this.pW(t)));if(this.Nc.zL())if(1===t.length){const s=t[0];await import((mp.Kh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${mp.Kh(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>pp(t)))}async xW(t){if(WebAssembly.compileStreaming){const s=await this.pW(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await mp.no(t);return await WebAssembly.compile(s)}}async _W(t){const s=await this.pW(t);return await this.Nc.HB("runtime","add-stylesheet",{url:s})}}}{const wp=self._s;wp.HZ=class extends wp.Vn{constructor(t,s){super(),this.zZ=t,this.Nc=t.aW(),this.JZ=s.url||"",this.qZ=s.size,this.$Z=s.wZ,this.XZ=s.blob||null,this.YZ=!!this.XZ,this.Sw=null}zn(){this.Sw=null,this.zZ=null,this.Nc=null,this.XZ=null}GZ(){return this.JZ}Fu(){return this.qZ}vZ(){return"local"===this.$Z||this.XZ?(this.YZ=!0,Promise.resolve()):(this.Sw||(this.Sw=this.zZ.eo(this.JZ,this.$Z).then(t=>(this.YZ=!0,this.Sw=null,this.XZ=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.Sw=null})),this.Sw)}KZ(){return this.YZ}ZZ(){return this.XZ?Promise.resolve(this.XZ):this.Sw?this.Sw:this.zZ.eo(this.JZ,this.$Z)}}}{const Sp=self._s,vp=new Sp.Hd,bp=new Set;Sp.SZ=class extends Sp.HZ{constructor(t,s){super(t,s),this.QZ=null,this.tQ=null,this.Hp=0,this.sQ=-1,this.iQ=-1,this.eQ=!!s.yZ,bp.add(this)}zn(){if(0!==this.Hp)throw new Error("released image asset which still has texture references");this.zZ.MZ(this),this.QZ=null,bp.delete(this),super.zn()}static nQ(){for(const t of bp)t.QZ=null,t.tQ=null,t.Hp=0}YY(t,s){return s=s||{},this.Hp++,this.tQ?Promise.resolve(this.tQ):(this.QZ||(s.hx=this.Nc.TB().rQ(),this.QZ=this.hQ(t,s)),this.QZ)}async hQ(t,s){try{const i=await this.ZZ();return 0===this.Hp?(this.QZ=null,null):await vp.Bu(async()=>{const e=await t.lO(i,s);return this.QZ=null,0===this.Hp?(t.wT(e),null):(this.tQ=e,this.sQ=e.Vg(),this.iQ=e.Zg(),this.tQ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}oR(){if(this.Hp<=0)throw new Error("texture released too many times");this.Hp--,0===this.Hp&&this.tQ&&(this.tQ.mM().wT(this.tQ),this.tQ=null)}oQ(){return this.Hp}xT(){return this.tQ}Vg(){return this.sQ}Zg(){return this.iQ}xZ(){return this.eQ}async aQ(){const t=await this.ZZ();return Sp.Ri.ImageBitmap?await createImageBitmap(t):await Sp.lo(t)}}}{let Mp=function(t,s){return t.DB().lQ()-s.DB().lQ()};0;const Gp=self._s;self.assert;Gp.uQ=class extends Gp.Vn{constructor(t,s,i){super(),this.cQ=t,this.Pa=s,this.Ra=i,this.fQ=[],this.dQ=!0,this.pQ=new Set,this.mQ=!1}zn(){Gp.Sh(this.fQ),this.pQ.clear(),this.cQ=null}Bf(){Gp.Sh(this.fQ),this.dQ=!0,this.pQ.clear(),this.mQ=!1}gQ(){this.dQ=!1}Ru(){return!this.fQ.length||!(this.fQ.length>this.pQ.size)&&(this.yQ(),!0)}wQ(t){if(this.pQ.has(t))return this.pQ.delete(t),void(0===this.pQ.size&&(this.mQ=!1));this.fQ.push(t),this.dQ=1===this.fQ.length}Kf(t){this.pQ.add(t),this.mQ=!0,this.pQ.size>=50&&this.yQ()}yQ(){this.mQ&&(this.fQ.length!==this.pQ.size?(Gp.Ph(this.fQ,this.pQ),this.pQ.clear(),this.mQ=!1):this.Bf())}SQ(){this.dQ||(this.fQ.sort(Mp),this.dQ=!0)}vQ(t){this.yQ(),this.SQ(),this.fQ.length&&t.push(this.fQ)}}}{const xp=self._s;xp.bQ=class extends xp.Vn{constructor(t,s){super(),this.MQ=t,this.GQ=s,this.xQ=xp.Hn(xp.Iu)}zn(){this.xQ.zn(),this.xQ=null}TQ(t,s,i){let e=this.xQ.zs(t,s);return e||(i?(e=xp.Hn(xp.uQ,this,t,s),this.xQ.Set(t,s,e),e):null)}_Q(t){return Math.floor(t/this.MQ)}IQ(t){return Math.floor(t/this.GQ)}CQ(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.xl(e,n))continue;const s=this.TQ(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.xQ.Au(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.xl(e,n)||this.TQ(e,n,!0).wQ(t)}PQ(t,s){let i=this._Q(t.Za());const e=this.IQ(t.Qa()),n=this._Q(t.tl()),r=this.IQ(t.sl());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.TQ(i,t,!1);e&&e.vQ(s)}}RQ(t){let s=t.Za();const i=t.Qa(),e=t.tl(),n=t.sl();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.TQ(s,t,!1);i&&i.gQ()}}}}{let Tp=function(t,s){return t.DB().lQ()-s.DB().lQ()},_p=function(t,s){return t.DB().QM()-s.DB().QM()};0;const Ip=self._s,Cp=(self.assert,new Ip.Rect),Pp=new Ip.Cl,Rp=[],Ap=(new Ip.Rect,new Ip.Rect,self.hs),Ep=Ap.ys,Fp=Ap.ws,Op=Ap.fs,Dp=Op.create(),kp=Ep.create(),Lp=Fp.create(),Np=Ep.create(),Bp=Ep.create(),Wp=Ep.create(),jp=Ip.Hn(Ip.Ca),Vp=(Ip.Hn(Ip.Rect),[]),Up=[],Hp=[],zp={name:"",AQ:-1,EQ:!1,isVisible:!0,vU:!0,GU:!1,backgroundColor:[1,1,1,1],UU:!0,FQ:[1,1],opacity:1,JU:!1,OQ:!1,DQ:!1,kQ:!1,RU:1,mk:0,WU:0,LQ:[],NQ:[],BQ:[]},Jp=new Map,qp=t=>{if(!t.fq.cH().WQ())return;const s=t.fq.xH();Jp.has(s)&&(Jp.delete(s),Jp.size||t.fq.aW().wf().removeEventListener("instancedestroy",qp))};Ip.jQ=class extends Ip.Vn{constructor(t,s,i){super(),i=Object.assign({},zp,i),this.VQ=t,this.Nc=t.aW(),this.UQ=s,this.$n=i.name,this.Rw=-1,this.HQ=!!i.GU,this.zQ=-1,this.JQ=i.AQ,this.qQ=!!i.EQ,this.$Q=!!i.isVisible,this.XQ=!!i.vU,this.YQ=Ip.Hn(Ip.Go),this.YQ.wa(i.backgroundColor),this.KQ=!!i.UU,this.ZQ=i.FQ[0],this.QQ=i.FQ[1],this.EM=Ip.Hn(Ip.Go,1,1,1,i.opacity),this.t0=Ip.Hn(Ip.Go),this.s0=!!i.JU,this.i0=!!i.OQ,this.e0=!!i.DQ,this.n0=!!i.kQ,this.r0=i.RU,this.AM=i.mk,this.h0=null,this.o0=1,this.FM=i.WU,this.a0=0,this.l0=0,this.u0=0,this.c0=!1,this.sE=Ip.Hn(Ip.Rect),this.f0=Ip.Hn(Ip.Rect),this.d0=Ip.Hn(Ip.Rect),this.p0=!0,this.aT=Op.create(),this.m0=!0,this.ZD=Op.create(),this.g0=!0,this.y0=Ip.Hn(Ip.Lw.jw),this.w0=!0,this.S0=[],this.v0=i.LQ,this.b0=[],this.M0=[],this.G0=new Map,this.fQ=[],this.x0=!1,this.T0=!1,this._0=!1;const e=this.Nc.TB();this.I0=Ip.Hn(Ip.C0,this,i.NQ),this.wL=Ip.Hn(Ip.Lw.oD,e.P0(),{YO:(t,s)=>{const i=s.uL(),n=i.rO();t.NM(i.R0()),t.dO(n),t.pO(n),e.A0(n)},ZO:t=>this._V().E0(t)}),this.F0=!0,this.O0=!0,this.D0=null,this.k0=[],this.L0=!1,this.N0=Ip.Hn(Ip.Rect,0,0,-1,-1),this.B0=Ip.Hn(Ip.Rect,0,0,-1,-1),this.W0=new self.qV(this),this.j0=Ip.Hn(Ip.Event.wf),this.V0(),this.U0()&&(this.D0=Ip.Hn(Ip.bQ,this.Nc.qL(),this.Nc.XL())),this.H0=i.BQ.map(t=>Ip.jQ.z0(this.VQ,this,t))}J0(){for(const t of this.v0){const s=this.Nc.q0(t[1]);this.VQ.$0(s),s.X0()||(s.Y0(t),s.K0(this.Rw)),this.b0.push(t),this.G0.set(t[2],t)}Ip.xh(this.S0,this.b0),this.v0=null}static z0(t,s,i){return Ip.Hn(Ip.jQ,t,s,{name:i[0],AQ:i[2],isVisible:i[3],vU:i[13],GU:i[19],backgroundColor:i[4].map(t=>t/255),UU:i[5],FQ:[i[6],i[7]],opacity:i[8],JU:i[9],OQ:i[17],DQ:i[18],kQ:i[10],RU:i[11],mk:i[12],WU:i[16],LQ:i[14],NQ:i[15],BQ:i[20]})}zn(){for(const t of this.H0)t.zn();Ip.Sh(this.H0);for(const t of this.fQ)this.Nc.yH(t);Ip.Sh(this.fQ),this.I0.zn(),this.I0=null,this.wL.zn(),this.wL=null,this.W0=null,this.UQ=null,this.VQ=null,this.Nc=null}Jn(){return!this.VQ}Z0(t){return this.G0.get(t)}Q0(t){const s=this.VQ.t1(),i=this.b0;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.Nc.q0(r[1]);let o=!0;if(!h.s1()||s)if(h.WQ()&&Jp.has(r[2]))o=!1;else{const s=this.Nc.i1(r,this,!0);t.push(s),h.WQ()&&(Jp.size||this.Nc.wf().addEventListener("instancedestroy",qp),Jp.set(s.xH(),s),o=!1,this.M0.push(s.xH()))}o&&(i[e]=i[n],++e)}Ip.wh(i,e),this.Nc.pV(),this.jB()}e1(t,s){if(!t.zj().bj())throw new Error("instance is not of world type");const i=t.DB();if(i.kB()!==this)throw new Error("instance added to wrong layer");this.fQ.push(t),0!==i.QM()&&(this._0=!0),s&&this.U0()&&t.DB().Mz(),this.jB(t)}n1(t){this.fQ.includes(t)||(this.fQ.push(t),0!==t.DB().QM()&&(this._0=!0),this.jB(t))}h1(t,s){const i=t.DB();if(i.kB()!==this)throw new Error("instance added to wrong layer");this.fQ.unshift(t),0!==i.QM()&&(this._0=!0),this.jB(t),s&&this.U0()&&t.DB().Mz()}o1(t,s){const i=this.fQ.indexOf(t);i<0||(s&&this.U0()&&t.DB().a1(),this.fQ.splice(i,1),this.jB(t),this.l1())}u1(){this._0=!0}l1(){0===this.fQ.length&&(this._0=!1)}c1(t){if(t){const t=new Set;for(const s of this.fQ){const i=s.DB().lQ();i>=0&&t.add(i)}let s=-1;for(const i of this.fQ){const e=i.DB();if(!(e.lQ()>=0)){for(++s;t.has(s);)++s;e.f1(s)}}}this.fQ.sort(Tp)}d1(){}m1(){for(const t of this.fQ)t.cH().WQ()||this.Nc.yH(t);this.Nc.pV(),Ip.Sh(this.fQ),this._0=!1,this.jB()}g1(t,s,i,e,n,r){const h=this.Nc.oN(),o=this.Nc.w1(),a=t.S1(),l=[];for(const u of this.b0){const c=u[0],f=c[0],d=c[1];if(!s.xl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.xV(p))continue}let m=n;if(!m){const t=this.Nc.EB();this.pB()===t?m=this:(m=t.v1(this.Pc()),m||(m=t.NB(this.ML())))}const g=this.Nc.i1(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.lV(g);const y=g.DB();y.Tz(i,e),y.Mz(),h.uV(!0),g.cV(),h.uV(!1),l.push(g)}return l}hV(){return this.fQ.length}pB(){return this.VQ}Pc(){return this.$n}b1(t){this.Rw=t}ML(){return this.Rw}M1(t){this.zQ=t}cX(){return this.zQ}xU(){return this.HQ}TU(t){t=!!t,this.HQ!==t&&(this.HQ=t,this.VQ.G1(),this.Nc.VB())}T1(){let t=-1;const s=this.uU();return t=s?s.dU().indexOf(this):this.pB()._1().indexOf(this),t}I1(){return this.JQ}aW(){return this.Nc}C1(){return this.qQ}P1(){for(const t of this.cU())if(t.C1())return!0;return!1}uj(){return this.Nc.uj()}_V(){return this.I0}bL(){return this.R1(),this.wL}R1(){const t=this.A1();if(!this.F0&&t===this.O0&&!this.wL.QD())return;const s=this._V().E1();this.wL.tk(s.map(t=>t.z_()),{tD:s.map(t=>t.ML()),sD:!t,hD:!0}),this.F0=!1,this.O0=t}vq(){this._V().vq(),this.F0=!0}U0(){return this.n0&&!this.e0}F1(){return this.D0}O1(){this.L0=!1}SU(){for(const t of this.D1())if(!t.gU())return!1;return!0}gU(){return this.$Q}yU(t){t=!!t,this.$Q!==t&&(this.$Q=t,this.Nc.VB())}MU(t){this.XQ=!!t}bU(){return this.XQ}IU(){for(const t of this.D1())if(!t.bU())return!1;return!0}KU(t){if(t=!!t,this.c0!==t){if(this.c0=t,t){const t=this.pB();this.l0=t.DV(),this.u0=t.LV()}this.L1(),this.Nc.VB()}}N1(){return this.c0}OV(t){const s=this.pB(),i=s.B1(),e=s.W1();t>e&&(t=e),t<i&&(t=i),this.l0!==t&&(this.l0=t,this.N1()&&(this.L1(),this.Nc.VB()))}kV(t){const s=this.pB(),i=s.j1(),e=s.V1();t>e&&(t=e),t<i&&(t=i),this.u0!==t&&(this.u0=t,this.N1()&&(this.L1(),this.Nc.VB()))}DV(){return this.N1()?this.l0:this.pB().DV()}LV(){return this.N1()?this.u0:this.pB().LV()}QU(){return this.U1(),this.sE}H1(){return this.U1(),this.f0}z1(){return this.U1(),this.d0}J1(){return this.pB().rU()}WS(t){return this.Nc.WS(t)}q1(t,s){const i=this.H1();if(0===t)s.m(i);else{let e=i.hl(),n=i.ol();const r=this.X1(t),h=i.width()/r,o=i.height()/r,[a,l]=this.J1();if(.5!==a||.5!==l){const s=this.Y1(),i=this.Nc,r=this.WS()/s;let h=(a-.5)*i.K1()/r,o=(l-.5)*i.Z1()/r;const u=this.FV();0!==u&&(jp.set(h,o),jp.rotate(u),h=jp.Fa(),o=jp.Da());const c=Ip.pr(s,0,t);e+=Ip._t(h,0,c),n+=Ip._t(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}wF(){return this.EM.Wo()}vF(t){t=Ip.Yn(t,0,1),this.EM.Wo()!==t&&(this.EM.Do(t),this.V0(),this.Nc.VB())}V0(){this.t0.m(this.EM),this.t0.Ko()}R0(){return this.t0}A1(){return this.EM.qo(1,1,1,1)}EU(){return this.r0}AU(t){this.r0!==t&&(this.r0=t,this.L1(),this.Nc.VB())}kU(){return this.ZQ}BU(){return this.QQ}Q1(t,s){this.ZQ===t&&this.QQ===s||(this.ZQ=t,this.QQ=s,this.L1(),this.Nc.VB())}DU(t){this.Q1(t,this.BU())}NU(t){this.Q1(this.kU(),t)}tG(t){this.FM!==t&&(this.FM=t,this.Nc.VB())}QM(){return this.FM}EV(t){t=Ip.Kn(t),this.a0!==t&&(this.a0=t,this.L1(),this.Nc.VB())}FV(){return Ip.Kn(this.VQ.FV()+this.a0)}FU(){return this.a0}t2(){return this.fQ.length>0}BB(){return this.fQ}s2(){return this.i2()&&this.e0?(Ip.xh(Hp,this.BB()),Hp.sort((t,s)=>this.e2(t,s)),Hp):this.BB()}n2(t){Ip.En(t,this.s2());for(const s of this.H0)s.SU()&&s.wF()>0&&s.n2(t)}e2(t,s){const i=this.pB().h2(),e=i[0],n=i[1],r=i[2],h=t.DB(),o=s.DB(),a=h.$M()-e,l=h.KM()-n,u=h.QM()-r,c=o.$M()-e,f=o.KM()-n,d=o.QM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}YU(){return this.YQ}zU(){return this.KQ}HU(t){t=!!t,this.KQ!==t&&(this.KQ=t,this.Nc.VB())}$U(){return this.s0}qU(t){t=!!t,this.s0!==t&&(this.s0=t,this.Nc.VB())}jU(t){t=!!t,this.i0!==t&&(this.i0=t,this.L1(),this.Nc.VB())}VU(){return this.i0}o2(){return!this.aW().a2()||!this.i0}i2(){return!this.o2()}l2(){return this.i2()&&this.pB().u2()}c2(){if(!this.l2())return!1;for(const t of this.H0)if(!t.c2())return!1;return!0}LM(t){this.AM!==t&&(this.AM=t,this.Nc.VB())}XU(){return this.AM}f2(){return!this.UQ}uU(){return this.UQ}d2(t){this.UQ=t}dU(){return this.H0}m2(){return this.H0.length>0}g2(t,s=!0){s?this.H0.push(t):this.H0.unshift(t)}w2(t,s,i){let e=this.H0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.H0.splice(e,0,t)}S2(t){const s=this.H0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.H0.splice(s,1)}v2(){for(const t of this.H0)if(t.b2())return!0;return!1}*mU(){for(const t of this.H0)yield*t.mU();yield this}*cU(){let t=this.uU();for(;t;)yield t,t=t.uU()}*D1(){yield this,yield*this.cU()}M2(t){for(const s of this.cU())if(s===t)return!0;return!1}G2(t){return this===t||this.ZQ===t.ZQ&&this.QQ===t.QQ&&this.o0===t.o0&&this.r0===t.r0&&this.a0===t.a0&&this.DV()===t.DV()&&this.LV()===t.LV()}T2(){return{parallaxX:this.kU(),parallaxY:this.BU(),scale:this.PU(),scaleRate:this.EU(),angle:this.FU(),hasOwnScroll:this.N1(),scrollX:this.DV(),scrollY:this.LV()}}_2(t){this.Q1(t.parallaxX,t.parallaxY),this.CU(t.scale),this.AU(t.scaleRate),this.EV(t.angle),this.KU(t.hasOwnScroll),this.OV(t.scrollX),this.kV(t.scrollY),this.U1()}I2(t){0!==t.size&&Ip.Ph(this.fQ,t)>0&&(this.l1(),this.jB())}jB(t){this.x0=!1,this.L0=!1,t&&!t.cH().zj().Gj()||(this.T0=!1)}C2(){if(!this.x0){if(this.fQ.sort(_p),this.U0())for(let t=0,s=this.fQ.length;t<s;++t){const s=this.fQ[t].DB();s.f1(t),this.D0.RQ(s.P2())}else for(let t=0,s=this.fQ.length;t<s;++t)this.fQ[t].DB().f1(t);this.x0=!0}}R2(){if(this.T0)return;const t=this.VQ.A2(this.cX()).map(t=>[...t.mU()]).flat();let s=0;for(const i of t){for(const t of i.BB())t.cH().zj().Gj()&&t.DB().E2(s++);i.F2()}}F2(){this.T0=!0}O2(){return{isVisible:this.SU(),opacity:this.wF(),isInteractive:this.bU()}}D2(t,s,i){const e=t.DB(),n=s.DB();if(e.kB()!==this||n.kB()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.LB();let h=n.LB();return r!==h+(i?1:-1)&&(Ip.Th(this.fQ,r),r<h&&h--,i&&h++,h===this.fQ.length?this.fQ.push(t):this.fQ.splice(h,0,t),this.jB(t),!0)}L2(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.DB().lQ()<h.DB().lQ()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}N2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.L2(i,n))}return i%2==1&&s.push(t[i-1]),s}B2(t){for(;t.length>1;)t=this.N2(t);return t[0]}W2(){return this.C2(),Ip.Sh(Rp),this.D0.PQ(this.QU(),Rp),Rp.length?1===Rp.length?Rp[0]:this.B2(Rp):[]}b2(){return this.SU()&&this.wF()>0&&this.j2()}j2(){if(this.t2()||!this.zU()||this.j0.Gf("beforedraw")||this.j0.Gf("afterdraw"))return!0;for(const t of this.H0)if(t.j2())return!0;return!1}V2(){return this.$U()||!this.A1()||0!==this.XU()||this.I0.U2()}H2(){if(this.V2())return!0;for(const t of this.H0)if(t.H2())return!0;return!1}rO(){return this.h0}X1(t){if(this.VQ.aU())return 1;{const s=this.z2();return s/(s-t)}}J2(t){const s=this.Nc.lH();if(this.VQ.aU())return s;{const i=this.z2();return this.WS()/Math.abs(i-t)*s}}L1(){this.g0=!0,this.w0=!0,this.p0=!0}q2(t){return this.g0&&(this.X2(t,this.ZD,0,0,null),this.g0=!1),this.ZD}Y1(t){return this.WS(t)/this.Y2()}z2(){return this.l2()?this.pB().h2()[2]:this.Y1()}K2(){if(this.l2()){const t=this.pB().h2();return[t[0],t[1],t[2]]}return this.Z2()}Z2(t=0,s=0,i=0){const e=this.Nc,n=this.pB(),r=e.Q2(),h=e.t3();let o=(this.DV()-r)*this.ZQ+r,a=(this.LV()-h)*this.QQ+h;e.ZL()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.aU()?this.WS(i):this.Y1(i),[f,d]=this.J1();if(.5!==f||.5!==d){const t=this.WS(i)/c;let s=(f-.5)*e.K1()/t,n=(d-.5)*e.Z1()/t;const r=this.FV();0!==r&&(jp.set(s,n),jp.rotate(r),s=jp.Fa(),n=jp.Da()),l+=s,u+=n}return[l,u,c]}X2(t,s,i,e,n){const r=this.Nc,h=this.pB();if(this.l2()){Ep.m(Np,h.h2()),Ep.m(Bp,h.s3()),Ep.m(Wp,h.i3());const t=r.Q2(),s=r.t3(),i=Bp[0]-Np[0],e=Bp[1]-Np[1],n=Bp[2]-Np[2];Np[0]=(Np[0]-t)*this.ZQ+t,Np[1]=(Np[1]-s)*this.QQ+s,Np[2]*=Math.max(this.ZQ,this.QQ),Bp[0]=Np[0]+i,Bp[1]=Np[1]+e,Bp[2]=Np[2]+n}else{const[t,s,r]=this.Z2(i,e,n);Ep.set(Np,t,s,r),Ep.set(Bp,t,s,r-100);const h=this.FV();0===h?Ep.set(Wp,0,1,0):Ep.set(Wp,Math.sin(h),Math.cos(h),0)}t.ev(s,Np,Bp,Wp,n||r.Z1())}e3(){this.m0=!0,this.w0=!0,this.p0=!0}n3(t){return this.m0&&(this.r3(t),this.m0=!1),this.aT}r3(t){const s=this.Nc.TB(),[i,e]=this.J1();if(this.VQ.aU())t.sv(this.aT,s.h3(),s.o3());else if(.5===i&&.5===e)Op.m(this.aT,s.a3());else{const n=s.h3(),r=s.o3();t.QS(this.aT,n/r,i,e)}}oK(t,s=!0,i=0,e=0,n=0){s&&t.oF(this.n3(t));let r=null;0===i&&0===e&&0===n?r=this.q2(t):(this.X2(t,Dp,i,e,n),r=Dp),t.dF(r)}l3(t){this.oK(t),t.jv(this.QM())}u3(t){let s=null;if(t.jb()&&this.Nc.c3()){const i=this.Nc.TB().f3(this);i&&(s=i.VA(),t.vO(s))}return s}d3(t){if(t.tv()&&this.Nc.c3()){const s=2*(this.ML()+1);t.m3(s,s+1)}}g3(t,s){if(this.j0.Gf(s)){t.lv(),t.GF(null),t.IF(),t.Cb(),t.SF(1,1,1,1),t.jv(this.QM()),t.Uv(0);const i=new Ip.Event(s);i.qI=this.Nc.TB().xB(),this.CZ(i)}}zG(t,s,i){const e=this.Nc.TB(),n=this.V2();let r=null;const h=this.u3(t);if(this.d3(t),n){const s={nx:this.Nc.YL(),Yx:!0,y3:!!t.tv()&&this.Nc.w3()};"low"===e.S3()&&(s.width=e.h3(),s.height=e.o3()),r=this.Nc.v3(s),this.h0=r,t.cO(r),this.zU()&&t.ZF(0,0,0,0)}else this.h0=s,t.cO(s);if(this.zU()||t.Pu(this.YQ),this.VQ.b3(t,this.h0,this.H0,n&&this.zU()),this.d3(t),this.oK(t),t.jv(this.QM()),t.sO(this.i2()),this.g3(t,"beforedraw"),this.Y2()>Number.EPSILON){this.C2();const s=this.U0()&&0===this.QM()&&!this._0;this.l2()?this.M3(t):s?this.G3(t):this.x3(t,this.s2())}this.g3(t,"afterdraw"),t.jv(0),t.Uv(0),n&&(t.sO(!1),this.T3(t,r,s,i)),h&&t.MO(h),this.h0=null}x3(t,s){const i=this.QU(),e=this.h0,n=this.pB().aU(),r=this.pB()._3();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.DB();l.SU()&&l.I3(i,r,n)&&this.C3(a,l,t,e)}}M3(t){const s=this.h0,i=this.P3(),e=Vp,n=Up,r=this.s2();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.DB();if(!l.SU()||!l.R3(i)){++h;continue}(!a.A3()||l.E3()>0)&&n.push(a);const u=a.DB().Dz();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.DB();if(s.SU()&&s.R3(i)){if(s.Dz()!==u)break;t.A3()?(s.E3()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].F3()){this.O3(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.DB();r.D3(!0),this.C3(e,r,t,s),r.D3(!1)}}else{this.C3(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.DB();r.kB().C3(e,r,t,s)}}h=c,Ip.Sh(e),Ip.Sh(n)}}O3(t,s){const i=this.h0;t.gO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.DB();n.L3(!0),this.N3(e,n,t)}t.yO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.DB();this.C3(n,r,t,i),r.L3(!1)}t.SO()}G3(t){const s=this.D0,i=this.B0,e=this.N0,n=this.QU();let r;i.set(s._Q(n.Za()),s.IQ(n.Qa()),s._Q(n.tl()),s.IQ(n.sl())),this.L0&&i.equals(e)?r=this.k0:(r=this.W2(),this.L0=!0,e.m(i)),this.x3(t,r),r!==this.k0&&Ip.xh(this.k0,r)}C3(t,s,i,e){s.U2()?this.B3(t,s,i,e):this.N3(t,s,i)}N3(t,s,i){const e=s.W3();i.xv()!==e&&e.kM(),t.zG(i)}B3(t,s,i,e){this.j3(t,s,i,e,null)&&this.oK(i)}j3(t,s,i,e,n){const r=s.vz().bL();return r.ck(i,e,{dk:t,mk:s.XU(),devicePixelRatio:this.Nc.V3(),time:t.U3(),gk:this.Nc.H3()*this.Y2(),yk:this.FV(),Vk:s.Nz(),Uk:r.aL()?null:this.z3(s),xk:n&&n.xk,Tk:n&&n.Tk,_k:n&&n._k,Ik:n&&n.Ik,Ck:n&&n.Ck,Pk:n&&n.Pk}),i.jv(this.QM()),r.mF()}T3(t,s,i,e){const n=this.I0.E1(),r=this.Nc;0===n.length?(t.cO(i),t.lv(),e&&0===this.AM&&this.A1()?t.fO(s):(t.LM(this.AM),t.NM(this.t0),t.dO(s)),t.pO(s),r.A0(s)):this.bL().ck(t,i,{dk:this,mk:this.XU(),devicePixelRatio:r.V3(),gk:r.H3()*this.Y2(),yk:this.FV(),Vk:this.QU(),Uk:null,QO:!0})}PU(){return this.o0}CU(t){this.o0!==t&&(this.o0=t,this.VQ.J3(),this.L1(),this.Nc.VB())}lH(){return this.Y2()*this.Nc.lH()}SX(){return this.Y2()*this.Nc.SX()}Y2(){return(this.o0*this.VQ.AV()-1)*this.r0+1}U1(){if(!this.p0)return;this.p0=!1;const t=this.Nc.Q2(),s=this.Nc.t3(),i=(this.DV()-t)*this.ZQ+t,e=(this.LV()-s)*this.QQ+s,n=this.Y2(),r=this.Nc.K1()/n,h=this.Nc.Z1()/n;let o=i-r/2,a=e-h/2;this.Nc.ZL()&&(o=Math.round(o),a=Math.round(a));const l=this.f0;l.set(o,a,o+r,a+h);const u=this.FV();0!==u&&(Cp.m(l),Cp.offset(-l.hl(),-l.ol()),Pp.Yl(Cp,u),Pp.Zl(Cp),Cp.offset(l.hl(),l.ol()),l.m(Cp));const c=this.FM;this.q1(c,this.sE),this.l2()?this.q3(c,this.d0):this.d0.m(this.sE)}q3(t,s){const i=this.Nc.TB(),e=i.ej(),n=i.rj(),[r,h]=this.sH(0,0,t),[o,a]=this.sH(e,0,t),[l,u]=this.sH(e,n,t),[c,f]=this.sH(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}sH(t,s,i=0){return this.X3(t,s,i,this.SX())}rH(t,s,i=0){return this.X3(t,s,i,this.lH()*this.uj())}X3(t,s,i,e){const n=this.Nc,r=n.mM(),h=this.Y2(),o=n.K1()/h,a=n.Z1()/h,l=Lp;Fp.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.n3(r),c=this.q2(r),f=kp;return Ip.Lw.Ww(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}Y3(t,s){const i=this.o0,e=this.r0,n=this.ZQ,r=this.QQ,h=this.a0,o=this.l2();o&&this.pB().K3(!1),this.o0=1,this.r0=1,this.ZQ=1,this.QQ=1,this.a0=0,this.L1();const a=this.sH(t,s);return this.o0=i,this.r0=e,this.ZQ=n,this.QQ=r,this.a0=h,this.L1(),o&&this.pB().K3(!0),a}eH(t,s,i=0){return this.Z3(t,s,i,this.SX())}oH(t,s,i=0){return this.Z3(t,s,i,this.lH()*this.uj())}Z3(t,s,i,e){const n=this.Nc,r=n.mM(),h=this.Y2(),o=n.K1()/h,a=n.Z1()/h,l=Lp;Fp.set(l,0,0,o,a);const u=this.n3(r),c=this.q2(r),f=kp;return Ip.Lw.Nw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Q3(t,s){return t*=this.lH()*this.uj(),0!==s&&(t*=this.X1(s)),t}z3(t){const s=t.Nz(),i=t.Dz(),e=t.E3(),n=i+e,r=s.Za(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.l2()){if(this.t5(r,h,i)||this.t5(o,h,i)||this.t5(o,a,i)||this.t5(r,a,i))return null;if(e>0&&(this.t5(r,h,n)||this.t5(o,h,n)||this.t5(o,a,n)||this.t5(r,a,n)))return null}else if(n>=this.Y1())return null;let[l,u]=this.oH(r,h,i),[c,f]=this.oH(o,a,i);if(0!==this.FV()||e>0||this.l2()){const[t,s]=this.oH(o,h,i),[d,p]=this.oH(r,a,i);if(e>0){const[i,e]=this.oH(r,h,n),[m,g]=this.oH(o,h,n),[y,w]=this.oH(o,a,n),[S,v]=this.oH(r,a,n);let b=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=b,b=Math.min(u,f,s,p,e,g,w,v),f=Math.max(u,f,s,p,e,g,w,v),u=b}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Cp.set(l,u,c,f),Cp}P3(){return this.w0&&(this.s5(),this.w0=!1),this.y0}s5(){const t=this.Nc.mM(),s=this.n3(t),i=this.q2(t);this.y0.$w(i,s)}t5(t,s,i){return this.P3().Yw(t,s,i)}i5(){return{d:this.C1(),s:this.PU(),a:this.FU(),v:this.gU(),i:this.bU(),html:this.xU(),bc:this.YQ.toJSON(),t:this.zU(),sx:this.l0,sy:this.u0,hosp:this.c0,px:this.kU(),py:this.BU(),c:this.EM.toJSON(),sr:this.EU(),fx:this.I0.oG(),cg:this.M0}}e5(t){this.qQ=!!t.d,this.o0=t.s,this.a0=t.a,this.$Q=!!t.v,this.XQ=!t.hasOwnProperty("i")||t.i,this.HQ=!!t.html,this.YQ.wa(t.bc),this.KQ=!!t.t,t.hasOwnProperty("sx")&&(this.l0=t.sx),t.hasOwnProperty("sy")&&(this.u0=t.sy),t.hasOwnProperty("hosp")&&(this.c0=!!t.hosp),this.ZQ=t.px,this.QQ=t.py,this.EM.wa(t.c),this.V0(),this.r0=t.sr,Ip.xh(this.M0,t.cg),Ip.xh(this.b0,this.S0);const s=new Set(this.M0);let i=0;for(let t=0,e=this.b0.length;t<e;++t)s.has(this.b0[t][2])||(this.b0[i]=this.b0[t],++i);Ip.wh(this.b0,i),this.I0.aG(t.fx),this.F0=!0}n5(){this.c1(!1),this.jB(),this.L1(),this.e3()}VV(){return this.W0}eN(){return this.j0}CZ(t){t.bz=this.VV(),this.j0.dispatchEvent(t)}lV(t,s=!1,i=!1){if(this.fQ.includes(t))return s&&this.fQ.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0)),void(i&&this.fQ.forEach((t,s)=>t.DB().f1(s)));if(t.h5()){const s=[...t.dJ()];s.push(t),s.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0));for(const t of s)if(t.MH())for(const i of t.GH()){if(s.includes(i))continue;const t=[...i.dJ()];t.push(i),t.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.zj().bj()&&this.e1(t,!0);i&&this.fQ.forEach((t,s)=>t.DB().f1(s))}else{if(t.zj().bj()&&this.e1(t,!0),!t.MH())return void(i&&this.fQ.forEach((t,s)=>t.DB().f1(s)));for(const s of t.GH()){const t=[...s.dJ()];if(t.push(s),t.sort((t,s)=>(t.DB().r5()??0)-(s.DB().r5()??0)),t&&t.length)for(const s of t)s.zj().bj()&&this.e1(s,!0)}i&&this.fQ.forEach((t,s)=>t.DB().f1(s))}}}}{let $p=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Xp=function(t,s){rm!==t&&(t.l3(s),rm=t)};0;const Yp=self._s,Kp=self.iz,Zp=(self.assert,Yp.Hn(Yp.Rect),Yp.Hn(Yp.Rect),Yp.Hn(Yp.Rect)),Qp=Yp.Hn(Yp.Go),tm=self.hs.ys,sm=[],im=[],em=[],nm=[];let rm=null;Yp.o5=class extends Yp.Vn{constructor(t,s,i){super(),this.a5=t,this.Nc=t.aW(),this.$n=i[0],this.l5=i[1],this.u5=i[2],this.Py=i[1],this.Ry=i[2],this.c5=!!i[3],this.f5=!!i[4],this.d5=i[5],this.p5=i[6],this.m5=i[7],this.g5=null,this.JQ=i[8],this.Rw=s,this.l0=0,this.u0=0,this.o0=1,this.a0=0,this.y5=new Set,this.w5=new Set,this.S5=new Set,this.v5=[],this.b5=[],this.M5=new Map,this.G5=new Map,this.x5=[],this.T5=!1,this._5=tm.create(),this.I5=tm.create(),this.C5=tm.create(),this.P5=[],this.R5=[],this.A5=new Map,this.E5=new Map,this.F5=-1;const e=this.Nc.TB();this.I0=Yp.Hn(Yp.C0,this,i[11]),this.wL=Yp.Hn(Yp.Lw.oD,e.P0(),{YO:(t,s)=>{const i=s.uL().rO();t.bF(),t.dO(i),t.pO(i),e.A0(i)},ZO:t=>this._V().E0(t)}),this.F0=!0,this.O5=!1,this.h0=null,this.D5={},this.k5=new Map,this.L5=!0,this.N5=new self.TV(this),this.j0=Yp.Hn(Yp.Event.wf);for(const t of i[9])this.P5.push(Yp.jQ.z0(this,null,t));this.B5();for(const t of this.zV())t.J0();for(const t of i[10]){const s=this.Nc.q0(t[1]);if(!s)throw new Error("missing nonworld object class");s.X0()||s.Y0(t),this.x5.push(t),this.$0(s)}}zn(){for(const t of this.R5)t.zn();Yp.Sh(this.R5),this.S5.clear(),this.g5=null,this.a5=null,this.Nc=null}aW(){return this.Nc}Pc(){return this.$n}I1(){return this.JQ}ML(){return this.Rw}_V(){return this.I0}bL(){return this.R1(),this.wL}R1(){const t="low"===this.Nc.TB().S3();if(!this.F0&&this.O5===t&&!this.wL.QD())return;const s=this._V().E1();this.wL.tk(s.map(t=>t.z_()),{tD:s.map(t=>t.ML()),iD:t,hD:!0}),this.F0=!1,this.O5=t}vq(){this._V().vq(),this.F0=!0}W5(){let t=this.R5[0].Y2();for(let s=1,i=this.R5.length;s<i;++s){const i=this.R5[s];0===i.kU()&&0===i.BU()||(t=Math.min(t,i.Y2()))}return t}j5(){return.5*this.Nc.K1()/this.W5()}V5(){return.5*this.Nc.Z1()/this.W5()}B1(){return this.WV()?-1/0:this.j5()}W1(){return this.WV()?1/0:this.Vg()-this.j5()}j1(){return this.WV()?-1/0:this.V5()}V1(){return this.WV()?1/0:this.Zg()-this.V5()}OV(t){const s=this.B1(),i=this.W1();t>i&&(t=i),t<s&&(t=s),this.l0!==t&&(this.l0=t,this.U5(),this.Nc.VB())}DV(){return this.l0}kV(t){const s=this.j1(),i=this.V1();t>i&&(t=i),t<s&&(t=s),this.u0!==t&&(this.u0=t,this.U5(),this.Nc.VB())}LV(){return this.u0}WV(){return this.c5}J3(){this.OV(this.DV()),this.kV(this.LV());for(const t of this.R5)t.N1()&&(t.OV(t.DV()),t.kV(t.LV()))}eU(t,s){this.d5===t&&this.p5===s||(this.d5=t,this.p5=s,this.H5()&&(this.z5(),this.U5(),this.Nc.VB()))}J5(){return this.aU()?.5:this.d5}q5(){return this.aU()?.5:this.p5}rU(){return[this.J5(),this.q5()]}_3(){const t=this.J5(),s=this.q5();return t<0||t>1||s<0||s>1}hU(){this.f5&&(this.f5=!1,this.z5(),this.U5(),this.Nc.VB())}oU(){this.f5||(this.f5=!0,this.z5(),this.U5(),this.Nc.VB())}aU(){return this.f5}H5(){return!this.aU()}K3(t){t=!!t,this.T5!==t&&(this.T5=t,this.U5(),this.Nc.VB())}u2(){return this.T5}X5(t,s,i,e,n,r,h,o,a){$p(this._5,t,s,i)&&$p(this.I5,e,n,r)&&$p(this.C5,h,o,a)||(tm.set(this._5,t,s,i),tm.set(this.I5,e,n,r),tm.set(this.C5,h,o,a),this.Y5())}Y5(){this.U5(),this.Nc.VB()}h2(){return this._5}s3(){return this.I5}i3(){return this.C5}AV(){return this.o0}RV(t){this.o0!==t&&(this.o0=t,this.U5(),this.J3(),this.Nc.VB())}EV(t){t=Yp.Kn(t),this.a0!==t&&(this.a0=t,this.U5(),this.Nc.VB())}FV(){return this.a0}Vg(){return this.Py}Xg(t){!isFinite(t)||t<1||(this.Py=t)}Zg(){return this.Ry}Ug(t){!isFinite(t)||t<1||(this.Ry=t)}K5(){return this.g5}_1(){return this.P5}*zV(){for(const t of this.P5)yield*t.mU()}HV(){return this.R5}Z5(){return this.R5.length}kB(t){return"number"==typeof t?this.NB(t):this.v1(t.toString())}NB(t){return t=Yp.Yn(Math.floor(t),0,this.R5.length-1),this.R5[t]}v1(t){return this.A5.get(t.toLowerCase())||null}Q5(t){return!!this.v1(t)}t4(t){return this.E5.get(t)||null}z5(){for(const t of this.R5)t.e3()}U5(){for(const t of this.R5)t.L1()}XV(t,s,i){if(this.Q5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.uU(),n=Yp.Hn(Yp.jQ,this,e,{name:t,AQ:Math.floor(1e15*Math.random()),EQ:!0});this.s4(n,s,i),this.aW().VB(),this.G1()}KV(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.i4(t),this.s4(t,s,i),this.aW().VB(),this.G1())}QV(t){if(this.i4(t)){const s=this.Nc.oN();s.uV(!0),t.zn(),s.uV(!1),this.aW().VB(),this.G1()}}sU(){const t=new Set;for(const s of this.zV())s.C1()&&!s.P1()&&t.add(s);if(0===t.size)return;const s=this.Nc.oN();s.uV(!0);for(const s of t)this.i4(s),s.zn();s.uV(!1),this.aW().VB(),this.G1()}s4(t,s,i){if(i>=2)if(s){if(s===t||s.M2(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.g2(t,2===i),t.d2(s)}else 2===i?this.P5.push(t):this.P5.unshift(t),t.d2(null);else{const e=s.uU();if(e){if(s.M2(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);e.w2(t,s,0===i),t.d2(e)}else{let e=this.P5.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.P5.splice(e,0,t),t.d2(null)}}}i4(t){const s=t.uU();if(s)return s.S2(t),!0;if(this.P5.length>1){const s=this.P5.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.P5.splice(s,1),!0}return!1}B5(){this.R5=[...this.zV()],this.A5.clear(),this.E5.clear();for(let t=0,s=this.R5.length;t<s;++t){const s=this.R5[t];s.b1(t),this.A5.set(s.Pc().toLowerCase(),s),this.E5.set(s.I1(),s)}}e4(){let t=0;for(const s of this.P5){for(const i of s.mU())i.M1(t);s.xU()&&t++}}n4(){return this.P5.at(-1).cX()+1}async G1(){this.B5(),this.e4(),this.F5=this.n4()}r4(){return this.F5}h4(){this.F5=-1}A2(t){const s=[];for(const i of this.P5){const e=i.cX();if(e===t)s.push(i);else if(e>t)break}return s}T2(){return{scrollX:this.DV(),scrollY:this.LV(),scale:this.AV(),angle:this.FV(),vpX:this.J5(),vpY:this.q5()}}_2(t){this.OV(t.scrollX),this.kV(t.scrollY),this.RV(t.scale),this.EV(t.angle),this.eU(t.vpX,t.vpY)}o4(){let t=this.P5.filter(t=>t.b2())[0];for(;t;){if(!t.zU())return Qp.ko(t.YU()),Qp.Do(1),Qp;if(t.V2())return Qp.Co(0,0,0,0),Qp;t=t.dU().filter(t=>t.b2())[0]}return Qp.Co(0,0,0,0),Qp}t1(){return this.L5}a4(){return[...this.y5]}$0(t){if(t.MH())for(const s of t.u4().l4())this.y5.add(s);else this.y5.add(t)}c4(){return[...this.w5]}f4(t,s){if(t===this||!s)return Promise.resolve();t&&(Yp.po(this.w5,t.w5),t.w5.clear());const i=[];for(const t of this.y5)this.w5.has(t)||(i.push(t.d4(s)),this.w5.add(t));return Promise.all(i)}async m4(t){if(t.S1())throw new Error("cannot load textures for family");const s=this.Nc.mM();if(!s||s.pA()||this.w5.has(t))return;this.w5.add(t);const i=t.d4(s);this.g4(i),await i,t.y4(),this.Nc.VB()}g4(t){this.S5.add(t),t.then(()=>this.S5.delete(t)).catch(()=>this.S5.delete(t))}w4(){return Promise.all([...this.S5])}S4(t){if(t.S1()||t.hV()>0)throw new Error("cannot unload textures");const s=this.Nc.mM();s&&this.w5.has(t)&&(this.w5.delete(t),t.v4(s))}b4(t,s){if(t!==this&&s)for(const s of this.w5)s.WQ()||t.y5.has(s)||(s.v4(),this.w5.delete(s))}M4(){this.w5.clear()}async G4(t){const s=this.Nc,i=this.a5,e=s.oN();this.m5&&(this.g5=e.x4(this.m5),this.g5.T4()),i._4(this),this.Py=this.l5,this.Ry=this.u5,this.l0=s.qL()/2,this.u0=s.XL()/2,this.J3(),this.z5(),this.U5(),this.e4(),await this.Nc.TB().I4(this.n4(),!0),this.C4(t),this.Nc.P4(!0),this.R4(),this.L5||this.A4(),this.E4(this.v5),this.E4(this.b5),this.F4(),i.O4(),s.pV(),this.Nc.P4(!1);const n=this.Nc.D4();if(await Promise.all(n),Yp.Sh(n),!s.L4()){for(const t of this.v5)t.N4();for(const t of this.b5)t.B4(this.M5,this.G5);for(const[t,s]of Object.entries(this.D5)){const i=this.Nc.ZX(parseInt(t,10));i&&!i.S1()&&i.s1()&&Yp.Sh(s)}for(const t of this.v5)t.W4();for(const t of this.b5)t.W4();for(const t of this.v5)t.wJ()||t.j4();for(const t of this.b5)t.wJ()||t.j4()}Yp.Sh(this.v5),Yp.Sh(this.b5),this.M5.clear(),this.G5.clear(),await Promise.all([...this.y5].map(t=>t.V4(this.Nc.mM()))),t&&(s.wf().dispatchEvent(new Yp.Event("beforefirstlayoutstart")),await s.U4(new Yp.Event("beforeprojectstart"))),await this.H4(new Yp.Event("beforeanylayoutstart")),s.wf().dispatchEvent(new Yp.Event("beforelayoutstart")),await this.U4(new Yp.Event("beforelayoutstart")),s.L4()||await s.KB(Yp.sW.tW.QB.z4,null,null),s.wf().dispatchEvent(new Yp.Event("afterlayoutstart")),await this.U4(new Yp.Event("afterlayoutstart")),await this.H4(new Yp.Event("afteranylayoutstart")),t&&(s.wf().dispatchEvent(new Yp.Event("afterfirstlayoutstart")),await s.U4(new Yp.Event("afterprojectstart"))),e.J4(i),await this.w4(),this.L5=!1}C4(t){for(const t of this.Nc.w1())if(!t.S1()&&t.bj())for(const s of t.iV()){const t=s.DB(),i=t.kB(),e=Yp.Yn(i.ML(),0,this.R5.length-1),n=this.R5[e];t.WB(n,!0),n.n1(s)}if(!t)for(const t of this.R5)t.c1(!1)}R4(){for(const t of this.R5)t.Q0(this.v5),t.d1()}A4(){let t=!1;for(const[s,i]of Object.entries(this.D5)){const e=this.Nc.ZX(parseInt(s,10));if(e&&!e.S1()&&e.s1())for(const s of i){let i=null;if(e.bj()&&(i=s.hasOwnProperty("instJson")?this.t4(s.instJson.w.l):this.t4(s.w.l),!i))continue;const n=this.Nc.i1(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.aG(s.instJson):n.aG(s),t=!0,this.b5.push(n),s.hasOwnProperty("instJson")&&(this.M5.set(n,s),this.G5.set(s.index,n))}}for(const t of this.R5)t.c1(!0),t.jB();t&&(this.Nc.pV(),this.Nc.q4())}E4(t){for(const s of t){if(!s.MH())continue;const i=s.DB(),e=s._H();for(const n of s.cH().u4().GV()){if(n===s.cH())continue;const r=n.iV();if(r.length>e)s.X4(r[e]);else{let e;e=i?this.Nc.i1(n,i.kB(),!0,i.$M(),i.KM(),!0):this.Nc.i1(n,null,!0,0,0,!0),this.Nc.pV(),n.Y4(),s.X4(e),t.push(e)}}}}F4(){for(const t of this.x5)this.Nc.q0(t[1]).MH()||this.Nc.i1(t,null,!0)}K4(){const t=[],s=this.x5;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Nc.q0(n[1]);r.WQ()?r.MH()&&r.u4().Z4()||t.push(this.Nc.i1(n,null,!0)):(s[i]=n,++i)}Yp.wh(s,i),this.Nc.pV(),this.E4(t)}g1(t,s,i,e,n,r,h){if(i)return i.g1(t,s,n,r,e,h);{const i=[];for(const o of this.R5)i.push(o.g1(t,s,n,r,e,h));return i.flat()}}async Q4(){const t=this.a5;this.Nc.L4()||(await this.H4(new Yp.Event("beforeanylayoutend")),await this.U4(new Yp.Event("beforelayoutend")),await this.Nc.KB(Yp.sW.tW.QB.t6,null,null),await this.U4(new Yp.Event("afterlayoutend")),await this.H4(new Yp.Event("afteranylayoutend"))),t.s6(!0),this.Nc.oN().i6(),this.L5||this.e6();for(const t of this.R5)t.m1();for(const t of this.Nc.w1())if(!(t.WQ()||t.bj()||t.zj().Sj()||t.S1())){for(const s of t.iV())this.Nc.yH(s);this.Nc.pV()}t.s6(!1),t.uB()===this&&t._4(null)}n6(t,s){const i=t.cH().I1().toString();this.D5.hasOwnProperty(i)||(this.D5[i]=[]);const e=this.D5[i],n={index:s,instJson:t.oG(),sceneGraphJson:{children:[]}};e.push(n),this.k5.set(t,n)}r6(t){const s=this.k5.get(t);for(const i of t.h6()){const t=this.k5.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Yp.a6.o6(i.DB())})}}e6(){this.k5.clear();let t=0;for(const s of this.R5){s.C2();for(const i of s.BB()){const s=i.cH();!s.WQ()&&s.s1()&&(this.n6(i,t),t++)}}for(const t of this.R5)for(const s of t.BB()){const t=s.cH();!t.WQ()&&t.s1()&&this.r6(s)}this.k5.clear()}l6(){this.D5={},this.L5=!0}rO(){return this.h0}V2(){const t=this.Nc,s=t.mM().jb();return"low"===t.TB().S3()||s&&t.w3()||this.I0.U2()||s&&t.a2()}u6(t){const s=this.Nc.TB();if(this.V2()){t.cO(null),t.ZF(0,0,0,0);const i={nx:this.Nc.YL(),Yx:t.tv()||this.Nc.w3()||this.I0.U2(),y3:!!t.tv()&&this.Nc.w3()};"low"===s.S3()&&(i.width=s.h3(),i.height=s.o3()),this.h0=this.Nc.v3(i)}else this.h0=null}c6(t){this.Nc.f6(t)&&(t.sO(!1),t.cO(null),t.lv(),t.fO(this.h0))}d6(t){this.V2()&&(t.sO(!1),this.p6(t,this.h0))}m6(t){t.cO(this.h0),t.Pu(this.o4()),this.Nc.a2()&&t.tO();const s=this.A2(0);this.b3(t,this.h0,s,!0),t.tv()&&t.m3(0,1),this.d6(t),this.h0=null}g6(t,s){let i=null;this.Nc.f6(t)&&(i=this.h0),t.cO(i),t.ZF(0,0,0,0),this.Nc.a2()&&t.tO();const e=this.A2(s);this.b3(t,i,e,!0),this.c6(t),t.Ob(),this.Nc.TB().y6(s)}b3(t,s,i,e){const n=i.filter(t=>t.b2());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.c2()&&!h.H2()){sm.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.c2()||s.H2())break;sm.push(n[t])}if(sm.length>=2||1===sm.length&&sm[0].v2()){this.w6(t,s,sm),i+=sm.length,Yp.Sh(sm);continue}Yp.Sh(sm)}h.zG(t,s,e&&0===i),++i}}p6(t,s){const i=this.I0.E1(),e=this.Nc;0===i.length?(t.cO(null),t.lv(),t.fO(s),t.pO(s),e.A0(s)):(Zp.set(0,0,e.K1(),e.Z1()),this.bL().ck(t,null,{dk:this,mk:3,devicePixelRatio:this.Nc.V3(),gk:this.Nc.H3()*this.AV(),yk:this.FV(),Vk:Zp,Uk:null,QO:!0}))}w6(t,s,i){const e=i[0],n=e.u3(t);e.d3(t),i[0].zU()||(Qp.ko(i[0].YU()),Qp.Do(1),t.Pu(Qp)),t.sO(!0);const r=im,h=em,o=nm;for(const s of i)s.C2(),s.n2(r),s.g3(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.DB(),l=a.kB();if(!a.SU()||!a.R3(l.P3())){++i;continue}(!n.A3()||a.E3()>0)&&o.push(n);const u=n.DB().Dz();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.DB();if(s.SU()&&s.R3(s.kB().P3())){if(s.Dz()!==u)break;t.A3()?(s.E3()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].F3()){this.S6(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.DB(),r=n.kB();n.D3(!0),Xp(r,t),r.C3(e,n,t,s),n.D3(!1)}}else{Xp(l,t),l.C3(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.DB(),h=r.kB();Xp(h,t),h.C3(e,r,t,s)}}i=c,Yp.Sh(h),Yp.Sh(o)}for(const s of i)s.g3(t,"afterdraw");n&&t.MO(n),Yp.Sh(r),rm=null}S6(t,s,i){t.gO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.DB(),r=n.kB();n.L3(!0),Xp(r,t),r.N3(e,n,t)}t.yO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.DB(),h=r.kB();Xp(h,t),h.C3(n,r,t,s),r.L3(!1)}t.SO()}i5(){const t={sx:this.DV(),sy:this.LV(),s:this.AV(),a:this.FV(),w:this.Vg(),h:this.Zg(),ortho:this.aU(),vpX:this.J5(),vpY:this.q5(),fv:this.L5,persist:this.D5,fx:this.I0.oG(),layers:{},dynamicLayers:[]};for(const s of this.R5)if(s.C1()){const i=s.uU();t.dynamicLayers.push({sid:s.I1(),name:s.Pc(),parentSid:i?i.I1():null,siblingIndex:s.T1(),data:s.i5()})}else t.layers[s.I1().toString()]=s.i5();return t}e5(t){this.l0=t.sx,this.u0=t.sy,this.o0=t.s,this.a0=t.a,this.Py=t.w,this.Ry=t.h,this.f5=!!t.ortho,t.hasOwnProperty("vpX")&&(this.d5=t.vpX),t.hasOwnProperty("vpY")&&(this.p5=t.vpY),this.L5=!!t.fv,this.D5=t.persist,this.I0.aG(t.fx),this.F0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.t4(t);e&&e.e5(i)}if(t.hasOwnProperty("dynamicLayers")){this.sU(),this.Nc.pV();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.B5(),this.Q5(r)||this.t4(n))continue;let l,u;if(null===h)l=null,u=this.P5;else{if(l=this.t4(h),!l)continue;u=l.dU()}const c=Yp.Hn(Yp.jQ,this,l,{name:r,AQ:n,EQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({bz:c,v6:o}),c.e5(a)}for(const[t,i]of s){i.sort((t,s)=>t.v6-s.v6);for(const s of i){const i=s.bz,e=s.v6;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.G1(),this.z5(),this.U5()}cB(){return this.N5}eN(){return this.j0}CZ(t){t.layout=this.cB();const s=this.Nc,i=s.sz()&&!s.oN().fV();i&&Kp.b6(),this.j0.dispatchEvent(t),i&&Kp.M6()}U4(t){return t.layout=this.cB(),this.j0._f(t)}H4(t){return t.layout=this.cB(),this.Nc.U4(t)}G6(){this.x6(this.P5)}x6(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.x6(t.dU(),s+1)}}}{const hm=self._s;hm.T6=class extends hm.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}zn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,hm.Sh(this.#i),this.#f.clear(),this.#a.clear(),hm.Sh(this.#t)}HT(t){const s=hm.Hn(hm.o5,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s.I1(),s)}aW(){return this.#s}_6(t){this.#r=t}I6(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}C6(t){return this.#f.get(t.toLowerCase())||null}P6(t){return this.#a.get(t)||null}R6(t){return t=hm.Yn(Math.floor(t),0,this.#i.length-1),this.#i[t]}pB(t){return"number"==typeof t?this.R6(t):this.C6(t.toString())}gB(){return this.#i}_4(t){this.#e=t}uB(){return this.#e}A6(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}E6(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*F6(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}O6(t){return this.#e===t||this.#t.includes(t)}s6(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}dV(){return this.#h>0}SB(t){this.#d=t}O4(){this.#d=null}wB(){return!!this.#d}D6(){return this.#d}k6(){const t=this.uB();t&&t.z5()}L6(){const t=this.uB();t&&t.U5()}}}{const om=self._s,am=new RegExp("<(.+?)>","g");om.N6=class extends om.Vn{constructor(t){super(),this.Nc=t,this.B6=om.Hn(om.W6),this.j6=null,this.V6=[],this.U6=new Map,this.H6=new Map,this.z6=new Map,this.J6=[],this.q6=[],this.X6=[],this.Y6=!1,this.K6=!1,this.Z6=!1,this.Q6=()=>this.t8(),this.s8=()=>this.i8(),this.e8=()=>this.n8(),this.r8=()=>this.h8(),this.o8=t=>this.a8(t.fq),this.l8=t=>this.u8(),this.c8=t=>this.f8(),this.d8=t=>this.p8(),this.m8=[],this.g8=0}zn(){this.y8(),this.Q6=null,this.s8=null,this.e8=null,this.r8=null,this.o8=null,this.c8=null;for(const t of this.V6)t.n$(),t.zn();om.Sh(this.V6),this.V6=null,this.B6.zn(),this.B6=null,om.Sh(this.J6),this.J6=null,om.Sh(this.q6),this.q6=null,om.Sh(this.X6),this.X6=null,this.U6.clear(),this.U6=null,this.H6.clear(),this.H6=null,this.z6.clear(),this.z6=null,om.Sh(this.m8),this.m8=null,this.Nc=null}w8(){const t=this.Nc.wf();t.addEventListener("pretick",this.Q6),t.addEventListener("tick2",this.s8),t.addEventListener("beforelayoutchange",this.e8),t.addEventListener("layoutchange",this.r8),t.addEventListener("instancedestroy",this.o8),t.addEventListener("beforeload",this.l8),t.addEventListener("afterload",this.c8),t.addEventListener("afterlayoutstart",this.d8)}y8(){const t=this.Nc.wf();t.removeEventListener("pretick",this.Q6),t.removeEventListener("tick2",this.s8),t.removeEventListener("beforelayoutchange",this.e8),t.removeEventListener("layoutchange",this.r8),t.removeEventListener("instancedestroy",this.o8),t.removeEventListener("beforeload",this.l8),t.removeEventListener("afterload",this.c8),t.removeEventListener("afterlayoutstart",this.d8)}HT(t){this.B6.Bu(t);const s=om.v8.S8(t,this);this.Bu(s),this.b8(s),this.z6.set(s.Pc(),0)}M8(t){const s=this.G8(),i=t.CH(),e=s.zs(i),n=om.v8.M8(`${i}:${this.z6.get(i)}`,e,this);return this.x8(i),this.Bu(n),n}x8(t){this.z6.set(t,this.z6.get(t)+1)}T8(){for(const t of this.V6){if(t._8())continue;const s=t.CH();this.x8(s)}}I8(){for(const t of this.z6.keys())this.z6.set(t,0)}Bu(t){this.V6.push(t),this.U6.set(t.Pc().toLowerCase(),t)}Kf(t){t.C8(),t._8()||(om._h(this.V6,t),om._h(this.J6,t),om._h(this.q6,t),om._h(this.X6,t),this.U6.delete(t.Pc().toLowerCase()),this.P8(t),t.i$()||t.zn())}qH(t){this.Nc.qH(t,this.j6,null)}aW(){return this.Nc}G8(){return this.B6}A8(t){this.j6=t}E8(){return this.j6}*F8(){for(const t of this.V6)yield t}*O8(){for(const t of this.q6)yield t}D8(t,s){this.H6.has(t)||this.H6.set(t,new Set),this.H6.get(t).add(s)}b8(t){for(const s of t.k8())this.D8(s,t)}P8(t){for(const[s,i]of this.H6.entries())i.has(t)&&(i.delete(t),0===i.size&&this.H6.delete(s))}L8(t){if(this.H6.has(t))return this.H6.get(t)}N8(t,s){if(s)for(const i of this.V6)if(s.every(t=>i.B8(t.fq,t.trackId))&&i.Pc().includes(t.Pc()))return i}W8(t){return this.U6.get(t.toLowerCase())||null}j8(t){for(const s of this.J6)if(s.Pc()===t)return s;for(const s of this.q6)if(s.Pc()===t)return s;return null}*V8(t){if(am.test(t)){let s;am.lastIndex=0;const i=new Set;do{if(s=am.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.W8(t);s&&(yield s)}i.clear()}else{const s=this.W8(t);s&&(yield s)}}*U8(t){for(const s of this.V6)s.h$(t)&&(yield s)}H8(t){this.J6.includes(t)||this.J6.push(t),this.z8()}J8(t){om._h(this.q6,t),this.q8()}X8(t){this.q6.includes(t)?(t.Y8(!0),t.K8(!1),t.Z8(!1)):(t.Y8(!1),t.K8(!0),t.Z8(!1),this.J6.includes(t)||this.J6.push(t)),this.z8()}Q8(t){t.Y8(!1),t.K8(!1),t.t7(),om._h(this.J6,t),this.q8()}s7(t){t.Y8(!1),t.K8(!1),this.q6.includes(t)&&(t.Z8(!0),this.X6.push(t),om._h(this.q6,t)),this.J6.includes(t)&&t.Z8(!0)}i7(t){t.Y8(!1),t.K8(!1),t.Z8(!1),t.p$(1),om._h(this.q6,t)}e7(t){this.s7(t),t.t7()}t8(){const t=this.aW();if(t.L4())return;if(!this.Y6)return;if(this.K6)return;let s=0;for(t.sz()&&(s=performance.now()),this.Z6=!0;this.J6.length;){const t=this.J6.pop();t.n7()?(t.r7(),this.X6.push(t)):(t.h7(),this.q6.push(t)),0!==t.o7()&&(this.g8=1)}const i=this.Nc.a7(),e=this.Nc.l7(),n=this.Nc.WN();for(let t=this.q6.length-1;t>=0;t--){const s=this.q6[t];s&&s.u7(i,n,e)}this.Z6=!1,t.sz()&&globalThis.iz.c7(performance.now()-s),0!==this.g8&&t.VB()}i8(){const t=this.aW();if(t.L4())return;if(!this.Y6)return;if(this.K6)return;let s,i=0;t.sz()&&(i=performance.now());for(let t=0,i=this.X6.length;t<i;t++){const i=this.X6[t];s||(s=new Set),i.C8(),this.f7(i),s.add(i)}if(s){om.Ph(this.X6,s),this.g8=0;for(let t=0,s=this.q6.length;t<s;t++)if(0!==this.q6[t].o7()){this.g8=1;break}}this.q8(),t.sz()&&globalThis.iz.c7(performance.now()-i)}f7(t){t.i$()||t.d7()&&t.p7()&&t.m7()&&t.g7()}z8(){this.Y6||(this.Y6=!0)}q8(){this.X6.length||this.q6.length||this.J6.length||this.Z6||(this.Y6=!1)}n8(){for(this.K6=!0;this.J6.length;)this.Q8(this.J6.pop());const t=new Set;for(const s of this.q6)s.n8()&&(s.C8(),t.add(s));om.Ph(this.q6,t),t.clear();for(const s of this.X6)s.n8()&&(s.C8(),t.add(s));om.Ph(this.X6,t),this.q8();for(const t of this.V6)t.y7()}h8(){this.K6=!1}a8(t){const s=t.cH(),i=this.L8(s);if(i)if(this.Nc.L4())this.m8.push(t);else for(const t of i)t._8()||(t.i$()?this.Kf(t):t.d7()||(this.f7(t),this.Kf(t)))}u8(){for(const t of this.J6.map(t=>t))this.f7(t),this.Kf(t);for(const t of this.q6.map(t=>t))this.f7(t),this.Kf(t)}f8(){for(const t of this.m8)this.a8(t);om.Sh(this.m8);for(const t of this.V6)t.f8()}p8(){const t=this.Nc.dB().uB();if(t)for(const s of this.V6){const i=s.w7();i&&t.Pc()===i&&this.X8(s)}}i5(){return{timelinesJson:this.S7(),scheduledTimelinesJson:this.v7(),playingTimelinesJson:this.b7(),markedForRemovalTimelinesJson:this.M7(),hasRuntimeListeners:this.Y6,changingLayout:this.K6,isTickingTimelines:this.Z6}}e5(t){t&&(this.I8(),this.G7(t.timelinesJson),this.x7(t.scheduledTimelinesJson),this.T7(t.playingTimelinesJson),this._7(t.markedForRemovalTimelinesJson),this.Y6=!t.hasRuntimeListeners,this.K6=!!t.changingLayout,this.Z6=!!t.isTickingTimelines,this.T8(),this.z8(),this.q8())}S7(){return this.V6.map(t=>t.i5())}G7(t){for(const s of t){let t=this.W8(s.name);if(t)t.e5(s);else{const i=this.I7(s);if(!i)continue;const e=this.W8(i);t=this.M8(e),t.e5(s)}t.C7()||this.Kf(t)}}I7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}v7(){return this.P7(this.J6)}x7(t){this.R7(t,this.J6)}b7(){return this.P7(this.q6)}T7(t){this.R7(t,this.q6)}M7(){return this.P7(this.X6)}_7(t){this.R7(t,this.X6)}A7(t,s){if(!s)return!1;for(const i of s)if(i===t.Pc())return!0;return!1}P7(t){return t.map(t=>t.Pc())}R7(t,s){const i=new Set;for(const e of s)this.A7(e,t)||i.add(e);if(om.Ph(s,i),t){const i=t=>s=>s.Pc()===t;for(const e of t){const t=this.W8(e);t&&(s.find(i(e))||s.push(t))}}}}}{const lm=self._s,um=[0,0],cm=[0,0],fm=[0,0],dm=[0,0,0,0,0],pm=new Array(4),mm=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],gm={x:0,y:0,t:0,vt:0};lm.E7=class{constructor(t,s){this.F7=!1,this.O7=t,this.D7=[];let i=null;if(i=s?this.O7.k7(s):lm.Bh(this.O7.L7()),!i)return;const e=i.O$("offsetX"),n=i.O$("offsetY");if(!e||!n)return;this.N7=e,this.B7=n;const r=e.W7(),h=n.W7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.j7(),s.V7()),e=h[t],n=(e.j7(),e.V7());i&&"cubic-bezier"===i.U7()&&n&&"cubic-bezier"===n.U7()?this.D7.push(lm.Hn(lm.H7,i,n,s,e,this.D7.length)):(i&&"line"===i.U7()&&n&&n.U7(),this.D7.push(lm.Hn(lm.z7,s,e,this.D7.length)))}this.F7=!0}zn(){for(const t of this.D7)t.zn();lm.Sh(this.D7),this.D7=null,this.O7=null,this.N7=null,this.B7=null}J7(){return this.F7}q7(){return this.D7}X7(t){const s="relative"===this.N7.Y7()?t.$M():0,i="relative"===this.B7.Y7()?t.KM():0;for(const t of this.D7)t.X7(s,i)}Nw(t,s,i){let e=NaN,n=this.D7.length;for(let i=0;i<n;i++){const n=this.D7[i];if("cubic-bezier"===n.X_()){const i=n.Nw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],fm[0]=i[2],fm[1]=n.ML())}}return fm}K7(t,s,i){const e=i.Z7;lm.Qi(e[0])||(e[0]=0),lm.Qi(e[1])||(e[1]=1);let n=NaN,r=this.D7.length;for(let i=0;i<r;i++){const r=this.D7[i];if("cubic-bezier"===r.X_()){const i=r.Q7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],fm[0]=i[2],fm[1]=r.ML())}}return fm}t9(t,s){return this.D7[s].t9(t)}s9(t,s){return this.D7[s].s9(t)}},lm.H7=class{constructor(t,s,i,e,n){this.Rw=n;const r=t.i9("cubic-bezier"),h=i.i9("cubic-bezier"),o=s.i9("cubic-bezier"),a=e.i9("cubic-bezier");this.e9=t.n9(),this.r9=s.n9(),this.h9=t.n9()+r.o9(),this.a9=s.n9()+o.o9(),this.l9=i.n9()+h.u9(),this.c9=e.n9()+a.u9(),this.f9=i.n9(),this.d9=e.n9(),this.p9=0,this.m9=0,this.g9=0,this.y9=0,this.w9=0,this.S9=0,this.v9=0,this.b9=0,this.M9=0,this.G9=0,this.x9=0,this.T9=0,this._9=0,this.I9=0,this.C9=0,this.P9=0,this.R9=0,this.A9=0,this.E9=0,this.F9=0,this.O9=NaN,this.F7=!1,this.D9=100,this.k9=new Array(this.D9+1),this.k9[0]=0,this.L9=0,this.N9=[],this.B9=[];for(let t=0;t<100;t++)this.B9.push({x:0,y:0,t:0,vt:0});this.W9()}zn(){lm.Sh(this.k9),this.k9=null,lm.Sh(this.N9),this.N9=null,lm.Sh(this.B9),this.B9=null}X_(){return"cubic-bezier"}ML(){return this.Rw}j9(){return Math.floor(this.L9/25)}V9(){return 1/this.j9()}X7(t,s){this.U9=t,this.H9=s,this.k9=new Array(this.D9+1),this.k9[0]=0,this.W9(),this.p9=this.e9+this.U9,this.m9=this.r9+this.H9,this.g9=this.h9+this.U9,this.y9=this.a9+this.H9,this.w9=this.l9+this.U9,this.S9=this.c9+this.H9,this.v9=this.f9+this.U9,this.b9=this.d9+this.H9,this.M9=3*(this.g9-this.p9),this.G9=3*(this.y9-this.m9),this.x9=3*(this.w9-this.g9),this.T9=3*(this.S9-this.y9),this._9=3*(this.v9-this.w9),this.I9=3*(this.b9-this.S9),this.C9=3*(this.g9-this.p9),this.P9=3*(this.p9+this.w9-2*this.g9),this.R9=this.v9-this.p9+3*(this.g9-this.w9),this.A9=3*(this.y9-this.m9),this.E9=3*(this.m9+this.S9-2*this.y9),this.F9=this.b9-this.m9+3*(this.y9-this.S9)}Map(t){if(!this.F7)return NaN;const s=this.z9(t);return cm[0]=this.J9(s),cm[1]=this.q9(s),cm}Nw(t,s){const i=this.X9(100),e=this.Y9(t,s,i),n=this.K9(t,s,i,e);return dm[0]=n.x,dm[1]=n.y,dm[2]=n.t,dm[3]=n.vt,dm}Q7(t,s,i){const e=this.X9(100),n=this.Z9(t,s,e,i),r=this.K9(t,s,e,n);return dm[0]=r.x,dm[1]=r.y,dm[2]=r.t,dm[3]=r.vt,dm}t9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.M9+e*this.x9+n*this._9,h=i*this.G9+e*this.T9+n*this.I9,o=lm.tr(r,h);return um[0]=r/o,um[1]=h/o,um}s9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.M9+e*this.x9+n*this._9,h=i*this.G9+e*this.T9+n*this.I9;return Math.atan2(h,r)}z9(t){if(!this.F7)return;let s=t*this.k9[this.D9],i=0,e=this.D9,n=0;for(;i<e;)n=i+((e-i)/2|0),this.k9[n]<s?i=n+1:e=n;this.k9[n]>s&&n--;const r=this.k9[n];return r===s?n/this.D9:(n+(s-r)/(this.k9[n+1]-r))/this.D9}J9(t){return this.F7?self.Vu.rc("cubicbezier")(t,this.e9+this.U9,this.h9+this.U9,this.l9+this.U9,this.f9+this.U9):NaN}q9(t){return this.F7?self.Vu.rc("cubicbezier")(t,this.r9+this.H9,this.a9+this.H9,this.c9+this.H9,this.d9+this.H9):NaN}X9(t){if(t=t||100,this.N9.length>=t)return this.N9;this.N9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.C9*i,h=this.P9*e,o=this.R9*n,a=this.A9*i,l=this.E9*e,u=this.F9*n,c=this.p9+r+h+o,f=this.m9+a+l+u;this.B9[s].x=c,this.B9[s].y=f,this.B9[s].t=i,this.B9[s].vt=0,this.N9[s]=this.B9[s]}return this.N9}Y9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.O9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}else{for(let e=this.O9;e<this.O9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}for(let e=this.O9;e>this.O9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}}return this.O9=r,r}Z9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.O9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.O9;h<this.O9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.O9;h>this.O9-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.O9=r,r}K9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;pm[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.C9*r,f=this.P9*o,d=this.R9*a,p=this.A9*r,m=this.E9*o,g=this.F9*a,y=this.p9+c+f+d,w=this.m9+p+m+g,S=y-t,v=w-s,b=S*S+v*v;if(b<h){h=b,e=i,gm.x=y,gm.y=w,gm.t=r,gm.vt=b,n=gm;break t}const M=mm[i-1];M.x=y,M.y=w,M.t=r,M.vt=b,pm[i]=M}pm[3]=i[a],i=pm}while(r++<20);return n}W9(){this.F7=!0;let t=this.J9(0),s=this.q9(0),i=0;for(let e=1;e<=this.D9;e++){const n=this.J9(.01*e),r=this.q9(.01*e),h=t-n,o=s-r;i+=lm.tr(h,o),this.k9[e]=i,t=n,s=r}this.L9=i}},lm.z7=class{constructor(t,s,i){this.Rw=i,this.Q9=t.n9(),this.ttt=s.n9(),this.U9=0,this.H9=0}zn(){}X_(){return"line"}ML(){return this.Rw}X7(t,s){this.U9=t,this.H9=s}$M(){return this.Q9+this.U9}KM(){return this.ttt+this.H9}}}{const ym=self._s;ym.v8=class extends ym.Vn{constructor(t,s,i){super(),this.Nc=i.aW(),this.stt=i,this.itt=s,this.$n=t,this.ett=[],this.ntt=0,this.htt=null,this.ott=0,this.att(),this.ltt=null,this.utt=null,this.ctt=0,this.ftt=0,this.dtt=1,this.ptt=0,this.mtt=-1,this.gtt=1,this.ytt=!1,this.wtt=!1,this.Stt=!1,this.vtt=!0,this.btt=!1,this.Mtt=!1,this.Gtt=-1,this.xtt=!1,this.Ttt=!1,this._tt=!1,this.Itt=!1,this.Ctt=NaN,this.Ptt=[""],this.Rtt="",this.Att=!1,this.g8=0,this.Ett=0,this.Ftt=null,this.Ott=null}static S8(t,s){const i=s.G8(),e=i.Dtt(),n=i.zs(t[e]),r=ym.Hn(ym.v8,t[e],n,s);return r.ktt(!0),r}static M8(t,s,i){return ym.Hn(ym.v8,t,s,i)}zn(){if(this.i$())return;const t=this.Nc.wf();this.stt.Q8(this),this.stt.e7(this);for(const t of this.ett)t.zn();ym.Sh(this.ett),this.ett=null,this.Nc=null,this.stt=null,this.itt=null,this.btt=!0,this.ltt=null,this.utt=null,this.Ltt(t)}Ltt(t){const s=ym.Hn(ym.Event,"timelinestatereleased");s.Ntt=this,t.dispatchEvent(s)}X_(){return 0}att(){for(const t of this.itt.Wtt().Btt())this.ntt=this.ett.push(ym.jtt.HT(this,t))}Vtt(){return this.stt}aW(){return this.Nc}L7(){return this.ett}Utt(t,s,i,e){if(!this.Ett)return;let n;for(let r=0;r<this.ett.length;r++){let h=this.ett[r];if(t!==h.C$())continue;const o=h.O$(i);o&&s.constructor===o.Htt().constructor&&o.Y7()===e.Y7()&&(n||(n=[]),n.push(o))}return n}C7(){return!!this.ett.length}k7(t){for(const s of this.ett)if(ym.Ke(s.E$(),t))return s;return null}ztt(t){for(const s of this.ett)if(!s.Jtt()&&ym.Ke(s.Pc(),t))return s;return null}eY(t){this.$n=t}Pc(){return this.$n}qtt(){return this.itt}CH(){return this.itt.Pc()}l$(){return this.itt.l$()}a$(t){this.itt.a$(t)}$tt(){return this.itt.$tt()}Xtt(t){this.itt.Xtt(t)}Ytt(){return this.itt.Ytt()}Ktt(t){this.itt.Ktt(t)}Y7(){return this.itt.Y7()}Ztt(t){this.itt.Y7(t)}I$(t){for(const s of this.L7())s.I$(t)}c$(){return this.itt.c$()}u$(t){return this.itt.u$(t)}d$(){return this.itt.d$()}f$(t){return this.itt.f$(t)}Cq(){return this.itt.Cq()}Qtt(t){return this.itt.Qtt(t)}p$(t){return this.dtt=t}m$(){return this.dtt}w7(){return this.itt.w7()}tst(){return this.itt.tst()}sst(){return this.itt.sst()}ist(){return this.ptt}est(){return!this.IsPlaying()||this.dtt>0}y$(){return this.ltt||(this.ltt=new Promise(t=>{this.utt=t})),this.ltt}t7(){this.ltt&&(this.utt(),this.ltt=null,this.utt=null)}nst(t){this.Ptt=ym.v8.rst(t),this.Att=!0}g$(){return this.Ptt}hst(){return this.Att&&(this.Rtt=this.Ptt.join(" ")),this.Att=!1,this.Rtt}h$(t){if(!this.Ptt)return!1;if(!this.Ptt.length)return!1;const s=ym.v8.rst(t);return!!s&&!!s.length&&s.every(ym.v8.ost,this)}ast(){ym.sW.lst&&this.constructor===ym.v8&&(ym.sW.lst.QB.ust(this),this.stt.qH(ym.sW.lst.QB.cst),this.stt.qH(ym.sW.lst.QB.fst),this.stt.qH(ym.sW.lst.QB.dst),this.stt.qH(ym.sW.lst.QB.pst),ym.sW.lst.QB.mst())}gst(){this.Gtt=this.Nc.kN()}g7(){this._tt||(this._tt=!0,ym.sW.lst&&this.constructor===ym.v8&&(ym.sW.lst.QB.ust(this),this.stt.qH(ym.sW.lst.QB.yst),this.stt.qH(ym.sW.lst.QB.wst),this.stt.qH(ym.sW.lst.QB.Sst),this.stt.qH(ym.sW.lst.QB.vst),ym.sW.lst.QB.mst()))}Y8(t){this.ytt=t}bst(){return this.Gtt===this.Nc.kN()}IsPlaying(t=!1){return!!this.bst()||!(!this.Mst()||t)||this.ytt}Gst(){return this.IsPlaying(!0)}v$(){return this.xst()}xst(){return!(this.i$()||this.Mst()||this.Gst()||this.p7())}K8(t){this.wtt=t}Mst(){return this.wtt}Tst(t){this.vtt=t;const s=this.c$(),i=this.d$();if(s||i){if(s&&!i);else if(!s&&i){const t=this.$O();1===this.ptt&&(t<=0||t>=this.l$())&&(this.vtt=!0)}}else{const t=this.$O();(t<=0||t>=this.l$())&&(this.vtt=!0)}}p7(){return this.vtt}i$(){return this.btt}Z8(t){this.Mtt=t}n7(){return this.Mtt}_st(t){this.xtt=t}Ist(){return this.xtt}ktt(t){this.Ttt=!!t}_8(){return this.Ttt}m7(){return this.Stt}$O(){return this.ctt}o$(t){const s=this.$O();this.Cst(t),this.Tst(!1),this.p7()||this._st(!0),(this.Gst()||this.Mst()||!this.Stt)&&(this.Gst()||this.Mst()||this.Stt?this.Gst()?this.n$():this.Mst()&&(this.stt.Q8(this),this.Pst()):this.Pst()),this.Rst(),this.Ast(this.$O(),!1,!0,!0,s),this.Est(),this.g8&&this.aW().VB(),this.Fst()}Cst(t){ym.Qi(t)||(t=this.l$()),t<0?this.ctt=0:t>=this.l$()?this.ctt=this.l$():this.ctt=t}Ost(t){ym.Qi(t)||(t=this.l$()),t<0?this.ctt=0:t>=this.l$()?this.ctt=this.l$():this.ctt=t;for(const t of this.ett)t.Dst()}Fst(){ym.sW.lst&&this.constructor===ym.v8&&(ym.sW.lst.QB.ust(this),this.stt.qH(ym.sW.lst.QB.kst),this.stt.qH(ym.sW.lst.QB.Lst),this.stt.qH(ym.sW.lst.QB.Nst),ym.sW.lst.QB.mst())}Bst(){if(this.c$())return!0;if(this.d$()&&1===this.ptt){if(this.est()){if(this.$O()>=this.l$())return!1}else if(this.$O()<=0)return!1}else if(!this.c$()&&!this.d$())if(this.est()){if(this.$O()>=this.l$())return!1}else if(this.$O()<=0)return!1;return!0}r$(){this.i$()||this.Bst()&&this.Play(!0)}Play(t=!1){return!this.i$()&&!this.Mst()&&(this.Gst()&&this.bst()?this.Wst():!this.Gst()&&!!(this.p7()||t||this.Ist())&&this.jst())}Wst(){return this._st(!1),this.stt.J8(this),this.stt.X8(this),this.y$(),!0}jst(){return this._st(!1),this.stt.X8(this),this.y$(),!0}n$(t=!1){this.i$()||(this.Tst(t),this.stt.s7(this),this.p7()&&this.t7())}Bf(t=!0,s=!1){if(this.i$())return;if(!this.Gst()&&this.Mst())return this.stt.Q8(this);if(this.p7())return;this.n$(!0),this.est()?this.Cst(0):this.Cst(this.l$());const i=this.$O();this.Rst(),s?this.Vst(i):this.Ast(i,!1,!1,!0),t&&this.Fst(),this.Est(),this.g8&&t&&this.aW().VB()}Ust(){this.Bf(!1,!0)}Vst(t){this.Ast(t,!1,!1,!0,NaN,!1,!0)}n8(){return!!this.i$()||!(!this.aW().L4()&&this.Hst())&&(this.stt.i7(this),this.aW().L4()||this.Ust(),!0)}Pst(){this.h7(!0)}r7(){this.h7(!1,!0),this.Y8(!1),this.K8(!1)}h7(t=!1,s=!1){if(!this.n7()||s)if(t){this._tt=!1,this.Stt=!0,this.Itt=!0,this.Rst();for(const t of this.ett)t.h7();this.Est()}else if(this.Y8(!0),this.K8(!1),this.ast(),this.p7()){this.Gtt=-1,0!==this.ptt&&(this.dtt=Math.abs(this.dtt)),this.ptt=0,this.mtt=-1,this.gtt=1,this.vtt=!1,this._tt=!1,this.Stt=!0,this.Itt=!0,this.est()?this.Cst(0):this.Cst(this.l$()),this.Rst();for(const t of this.ett)t.h7();this.Est()}else{-1!==this.mtt&&(this.ptt=this.mtt),this.Itt=!0,this._tt=!1,this.Rst();for(const t of this.ett)t.zst();this.Est()}}o7(){return this.g8}Rst(){this.Ett=0;for(const t of this.ett)t.kA()&&(this.Ett=1)}Est(){this.g8=0;for(const t of this.ett)t.Jst(),0===this.g8&&1===t.o7()&&(this.g8=1),this.htt||1!==t.qst()||(this.htt||(this.htt=[]),this.ott=this.htt.push(t))}u7(t,s,i){if(this.sst()){if(0===t&&0===this.Ctt)return;this.Ctt=t,t=i}else{if(0===i&&0===this.Ctt)return;this.Ctt=i,t=i,s=1}const e=this.ctt+this.ftt,n=e+t*s*this.dtt,r=this.itt.$st;n<0?(this.ctt=0,this.ftt=-n):n>=r?(this.ctt=r,this.ftt=this.ctt-n):(this.ctt=n,this.ftt=0);let h=!1,o=!1;const a=this.c$(),l=this.d$();let u;a||l?a&&!l?this.dtt>0?this.ctt>=r&&(this.Ost(0),o=!0):this.ctt<=0&&(this.Ost(r),o=!0):!a&&l?this.dtt>0?this.ctt>=r&&(this.Cst(r),this.p$(-1*this.m$()),o=!0,1===this.ptt?this.gtt<this.Cq()?(this.gtt++,this.ptt=0):h=!0:0===this.ptt&&(this.ptt=1)):this.ctt<=0&&(this.Cst(0),this.p$(-1*this.m$()),o=!0,1===this.ptt?this.gtt<this.Cq()?(this.gtt++,this.ptt=0):h=!0:0===this.ptt&&(this.ptt=1)):a&&l&&(this.dtt>0?this.ctt>=r&&(this.Cst(r),this.p$(-1*this.m$()),o=!0,this.ptt++,ym.wrap(this.ptt,0,2)):this.ctt<=0&&(this.Cst(0),this.p$(-1*this.m$()),o=!0,this.ptt++,ym.wrap(this.ptt,0,2))):this.dtt>0?this.ctt>=r&&(this.gtt<this.Cq()?(this.gtt++,this.Ost(0),o=!0):(this.Cst(r),h=!0)):this.ctt<=0&&(this.gtt<this.Cq()?(this.gtt++,this.Ost(r),o=!0):(this.Cst(0),h=!0));const c=this.ntt;if(h){for(u=0;u<c;u++)this.ett[u].Xst();return this.n$(!0),void this.gst()}const f=this.ott;for(u=0;u<f;u++)this.htt[u].Yst();if(1===this.Ett)for(u=0;u<c;u++){const t=this.ett[u],s=t.Kst();this.ctt-s<0&&e-s>0?(this.ctt=s<0?0:s>=r?r:s,t.Sc(s,!0,!1,o,this.Itt,!1)):t.Sc(this.ctt,!0,!1,o,this.Itt,!1)}else for(u=0;u<c;u++)this.ett[u].Sc(this.ctt,!0,!1,o,this.Itt,!1);if(!this.IsPlaying()&&this.Ftt){const t=this.Ftt.$O()+this.Ftt.Qst().Zst().Kst(),s=this.ctt-t;this.ctt-=s,0!==this.ftt&&(this.ftt-=s),this.Ftt=null}for(u=0;u<f;u++)this.htt[u].tit();this.Itt&&(this.Itt=!1)}sit(t){this.Ftt=t}iit(){return this.Ftt}Ast(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.ett)t.Yst();for(const r of this.ett){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.$O()-r.Kst(),s=n-r.Kst();t<0&&s>0&&(o=r.Kst(),this.Cst(o))}r.Sc(o,s,i,e,this.Itt,h)}for(const t of this.ett)t.tit();this.Itt&&r&&(this.Itt=!1)}eit(){const t=this.itt.Wtt().nit(),s=ym.jtt.HT(this,t);return this.ntt=this.ett.push(s),s}C8(){if(!this.i$())for(const t of this.ett)t.rit()}y7(){for(const t of this.ett)t.y7()}hit(){for(const t of this.ett)t.oit()}ait(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.ett[i];if(!t)return;return t.lit(s),void this.stt.D8(s.cH(),this)}for(const i of this.ett)if(i.Jtt()){if(t){if(i.E$()!==t)continue;i.lit(s),this.stt.D8(s.cH(),this);break}if(!i.uit()){i.lit(s),this.stt.D8(s.cH(),this);break}}}}B8(t,s){for(const i of this.ett)if(i.Jtt())if(s){if(s===i.E$()&&t===i.C$())return!0}else if(t===i.C$())return!0;return!1}d7(){return this.ett.some(t=>!t.Jtt()||t.cit())}Hst(){return this.ett.some(t=>{if(t.Jtt()){if(!t.cit())return!1;const s=t.cH();return!!s&&s.WQ()}return!1})}O$(t){for(const s of this.L7())for(const i of s.fit())if(i.dit()===t)return i}pit(t){for(const s of this.ett)if(t===s.C$())return s;return null}mit(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.L7())for(const i of t.git())if(s.every(t=>i.yit(t)))return i}k8(){const t=[];for(const s of this.L7())t.push(s.cH());return t.filter(t=>t)}f8(){for(const t of this.L7())t.f8()}i5(){return{tracksJson:this.wit(),name:this.$n,playheadTime:this.$O(),playbackRate:this.dtt,pingPongState:this.ptt,resumePingPongState:this.mtt,currentRepeatCount:this.gtt,isPlaying:this.ytt,isScheduled:this.wtt,initialStateSet:this.Stt,finishedTriggers:this._tt,complete:this.vtt,released:this.btt,markedForRemoval:this.Mtt,completedTick:this.Gtt,implicitPause:this.xtt,isTemplate:this.Ttt,tags:this.Ptt.join(" "),stringTags:this.Rtt,tagsChanged:this.Att,firstTick:this.Itt}}e5(t){t&&(this.Sit(t.tracksJson),this.$n=t.name,this.ctt=t.playheadTime,this.dtt=t.playbackRate,this.ptt=t.pingPongState,this.mtt=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.gtt=t.currentRepeatCount,this.ytt=!!t.isPlaying,this.wtt=!!t.isScheduled,this.Stt=!!t.initialStateSet,this._tt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.vtt=!!t.complete,this.btt=!!t.released,this.Mtt=!!t.markedForRemoval,this.Gtt=t.completedTick,this.xtt=!!t.implicitPause,this.Ttt=!!t.isTemplate,this.Ptt=t.tags.split(" "),this.Rtt=t.stringTags,this.Att=!!t.tagsChanged,this.Itt=!!t.firstTick)}wit(){return this.ett.map(t=>t.i5())}Sit(t){this.hit(),t.forEach((t,s)=>{this.ett[s].e5(t)}),this.ett.filter(t=>t.cit())}static ost(t){const s=this.g$();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static rst(t){if(ym.Ge(t))return t.slice(0);if(ym.ae(t))return t.split(" ");throw new Error("invalid tags")}vit(){return this.Ott||(this.Ott=ym.Hn(self.M$,this)),this.Ott}}}{const wm=self._s;wm.jtt=class extends wm.Vn{constructor(t,s){super(),this.O7=t,this.bit=s,this.Mit=s.Wtt(),this.Git=NaN,this.xit=NaN,this.Tit=null,this._it=null,this.Iit=!1,this.RA=s.Kst()>0,this.Cit=!1,this.Pit=!1,this.Rit=NaN,this.Ait=null,this.Eit=this.bit.Qst().Fit(),this.Oit=[],this.Dit(),this.kit=0,this.g8=0,this.Lit=0}static HT(t,s){return wm.Hn(wm.jtt,t,s)}zn(){this.Eit=null;for(const t of this.Oit)t.zn();wm.Sh(this.Oit),this.Oit=null,this.O7=null,this.Tit=null,this._it=null,this.bit=null,this.Ait=null}Dit(){for(const t of this.bit.Bit().Nit())this.Oit.push(wm.Wit.HT(this,t))}rit(){for(const t of this.Oit)t.rit()}y7(){for(const t of this.Oit)t.y7();this.Tit=null,this._it=null}jit(){return this.O7}aW(){return this.O7.aW()}git(){return this.Eit||(this.Eit=this.bit.Qst().Fit()),this.Eit}fit(){return this.Oit}O$(t){for(let s=0;s<this.Oit.length;s++){const i=this.Oit[s];if(i.dit()===t)return i}}Vit(){this.Tit||this.C$()}Uit(){return!!this.Tit&&!this.Tit.wX()}cit(){if(!this.Jtt())return!1;const t=this.Hit(),s=this.aW().PB(t);return!!s&&!s.wX()}cH(){if(!this.Jtt())return;const t=this.zit();return-1!==t?this.aW().q0(t):void 0}Jit(){return this.O7.L7().indexOf(this)}oit(){this.Tit=null,this.Git=NaN,this._it=null,this.xit=NaN,this.Iit=!0}uit(){return!!this.Tit}C$(){if(this.Iit)return;if(this.Tit&&this.Uit())return this.Tit;const t=this.Hit();return this.Tit=this.aW().PB(t),this.Tit}lit(t){if(this.Iit=!1,this.Tit!==t){this.y7(),this.Tit=t,this.xit=t.cH().ML(),this.Git=t.xH(),this._it=t.DB();for(const s of this.qit()){const i=s.$it,e=s.Xit;switch(i.Yit()){case"instance-variable":{e.Kit();const i=t.cH(),n=i.Zit(s.name),r=i.Qit(n),h=i.tet(n);r===s.name&&h===s.type&&e.iet(n);break}case"behavior":{const i=s.lq,n=this.cH(),r=t.cH(),h=e.cq(r);if(i&&h){const t=i.Pc();n.eet(t),r.eet(t),e.Kit(),e.net(h.I1())}break}}}}}*qit(){for(const t of this.Oit){const s=t.Htt(),i=this.cH(),e={$it:t,Xit:s};switch(t.Yit()){case"world-instance":e.ret=t.dit();break;case"instance-variable":{const t=s.Kit();e.name=i.Qit(t),e.type=i.tet(t);break}case"effect":{const t=i._V(),n=s.het(t);e.oet=n;break}case"behavior":{const t=s.cq(i);e.lq=t;break}case"plugin":e.Hj=i.zj()}yield e}}DB(){if(this._it&&this.Uit())return this._it;const t=this.C$();return t&&(this._it=t.DB()),this._it}Zst(){return this.bit}Hit(){return isNaN(this.Git)?this.bit.Hit():this.Git}aet(t){this.bit.aet(t)}Ytt(){return this.bit.Ytt()}Ktt(t){this.bit.Ktt(t)}Y7(){return this.bit.Y7()}E$(){return this.bit.E$()}Kst(){return this.bit.Kst()}let(){return this.bit.let()}uet(t){this.bit.uet(t)}Ztt(t){this.bit.Ztt(t)}I$(t){for(const s of this.git())s.I$(t);for(const s of this.fit())s.I$(t)}cet(){return this.bit.cet()}fet(t){this.bit.fet(t)}zit(){return isNaN(this.xit)?this.bit.zit():this.xit}det(t){this.bit.det(t)}pet(t){this.bit.pet(t)}met(){const t=this.C$();return t&&t.sq().yet()?t.sq().met():this.bit.met()}wet(t){this.bit.wet(t)}vet(){const t=this.C$();return t&&t.sq().yet()?t.sq().vet():this.bit.vet()}X_(){return this.bit.X_()}Pc(){return this.bit.Pc()}Jtt(){return 0===this.X_()}bet(){return 1===this.X_()}Met(){return 2===this.X_()}Get(){return this.kit}o7(){return this.g8}qst(){return this.Lit}kA(){return this.RA}Dst(){for(const t of this.Oit)t.Dst()}h7(){if(this.Vit(),!this.Uit()&&this.Jtt())return;const t=this.jit().est(),s=t?0:this.let();for(const t of this.Oit)t.h7(s),0===this.kit&&1===t.Get()&&(this.kit=1),0===this.g8&&1===t.o7()&&(this.g8=1);this.Lit=0,this.Oit.some(t=>t.qst())&&(this.Lit=1),this.Ait=t?this.xet(s):this.Tet(s),this.Cit=!1,this.Pit=!1,this.Sc(s),this._et(this.Ait)}zst(){if(this.Vit(),!this.Uit()&&this.Jtt())return;const t=this.O7.est(),s=this.O7.$O()-this.Kst();this.Ait=t?this.xet(s):this.Tet(s);for(const t of this.Oit)t.zst(s)}Xst(){if(!this.jit().p7()&&(this.Vit(),(this.Uit()||!this.Jtt())&&!this.RA)){const t=this.O7.$O();t>=this.Kst()+this.let()?this.Sc(this.let(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sc(0,!0,!1,!0,!1,!1,!0)}}Jst(){for(let t=0,s=this.Oit.length;t<s;t++){const s=this.Oit[t];s.Jst(),0===this.kit&&1===s.Get()&&(this.kit=1),0===this.g8&&1===s.o7()&&(this.g8=1)}}Yst(){const t=this.Oit.length;for(let s=0;s<t;s++)this.Oit[s].Yst()}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Tit||this.C$();const o=this.Tit&&!this.Tit.wX(),a=0===this.bit.Jc;if((o||!a)&&!(r&&a&&this.cH().WQ()||(t-=this.Kst())<0)){this.Iet(t,s),this.Cet(t,s,n),!this.jit().IsPlaying()&&this.jit().iit()&&(t=this.jit().iit().$O());for(let s=0,n=this.Oit.length;s<n;s++)this.Oit[s].Sc(t,i,e,h);this.Pet(t,s),0!==this.kit&&(this._it||(this._it=this.Tit.DB()),this._it&&this._it.Mz())}}tit(){const t=this.Oit.length;for(let s=0;s<t;s++)this.Oit[s].tit()}Iet(t,s){if(s&&this.RA&&!this.Cit){if(this.jit().est()){if(t<0)return}else if(t>this.let())return;for(const t of this.Oit)t.h7();this.Cit=!0}}Pet(t,s){if(s&&this.RA&&!this.Pit)if(this.jit().est()){if(t>=this.let()){for(const t of this.Oit)t.Sc(this.let(),!1,!0);this.Pit=!0}}else if(t<=0){for(const t of this.Oit)t.Sc(0,!1,!0);this.Pit=!0}}Cet(t,s,i){if(i)return;if(!s)return;if(!wm.sW.lst)return;const e=this.jit();if(e.est()){const s=this.Ait.j7(),i=this.Ait.$O(),n=s?s.$O():e.l$();(t<=i||t>=n)&&(this.Ait=this.Mit.Ret(t,this.bit),s&&this.Aet(this.Ait))}else{if(!this.Mit.Eet(t,this.bit))return;this.Ait||(this.Ait=this.Mit.Eet(t,this.bit));const s=this.Ait.Fet(),i=this.Ait.$O(),e=s?s.$O():0;(t>=i||t<=e)&&(this.Ait=this.Mit.Eet(t,this.bit),this.Ait&&this.Aet(this.Ait))}}xet(t){return this.Mit.Oet(t,this.bit)||this.Mit.Ret(t,this.bit)}Tet(t){return this.Mit.Oet(t,this.bit)||this.Mit.Eet(t,this.bit)}Aet(t,s=!1){if(!wm.sW.lst)return;const i=this.jit(),e=i.Vtt();wm.sW.lst.QB.ust(i),wm.sW.lst.QB.Det(t),e.qH(wm.sW.lst.QB.ket),e.qH(wm.sW.lst.QB.Aet),i.IsPlaying()||s||i.sit(t),wm.sW.lst.QB.mst(i),wm.sW.lst.QB.Let(t)}_et(t){this.Aet(t,!0)}Net(){return this.bit.Qst().Bet()}Wet(){const t=this.bit.Bit().jet(),s=wm.Wit.HT(this,t);return this.Oit.push(s),s}Vet(t){this.bit.Qst().Uet(t)}Het(t){for(const s of this.Oit)s.Het(t)}zet(){for(const t of this.Oit)t.zet()}Jet(){if(this.Vit(),this.Uit()||!this.Jtt())for(const t of this.Oit)t.Jet()}qet(){if(this.Vit(),!this.Uit()&&this.Jtt())return;let t=!1;for(const s of this.Oit){const i=s.qet();!t&&i&&(t=!0)}if(t){const t=this.Net();t.o$(this.jit().$O()),t.I$("noease"),t.fet(!0),t.nst("")}}f8(){isNaN(this.Rit)||this.$et(this.Rit),this.Rit=NaN}i5(){const t=this.C$(),s=t?t.xH():this.Hit();return{propertyTracksJson:this.Xet(),lastKeyframeDataItemJson:this.Yet(),initialStateOfNestedSet:this.Cit,endStateOfNestedSet:this.Pit,instanceUid:s,cleared:this.Iit}}e5(t){if(t){this.Ket(t.propertyTracksJson),this.Zet(t.lastKeyframeDataItemJson),this.Rit=t.instanceUid,this.Cit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Cit=t.initialStateOfNestedSet),this.Pit=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Pit=t.endStateOfNestedSet),this.Iit=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Oit)0===this.kit&&1===t.Get()&&(this.kit=1),0===this.g8&&1===t.o7()&&(this.g8=1);this.Lit=0,this.Oit.some(t=>t.qst())&&(this.Lit=1)}}Yet(){return this.bit.Qst().Qet(this.Ait)}Xet(){return this.Oit.map(t=>t.i5())}Ket(t){t.forEach((t,s)=>{this.Oit[s].e5(t)})}$et(t){if(!wm.Qi(t))return;const s=this.aW().PB(t);s&&this.jit().ait(this.bit.E$(),s,this.Jit())}Zet(t){const s=this.bit.Qst();this.Ait=s.tnt(t)}}}{const Sm=self._s;Sm.Wit=class extends Sm.Vn{constructor(t,s){super(),this.snt=t,this.int=s,this.ent=s.Bit(),this.kit=0,this.g8=0,this.Lit=0,this.nnt=this.Htt(),this.rnt=this.int.ont().hnt(),this.ant=null,this.lnt=null}static HT(t,s){return Sm.Hn(Sm.Wit,t,s)}zn(){this.snt=null,this.nnt&&(this.nnt.zn(),this.nnt=null),this.rnt=null,this.int=null,this.ent=null}Get(){return this.kit}o7(){return this.g8}qst(){return this.Lit}unt(){return!!this.lnt}cnt(t){this.lnt=t}fnt(){return this.lnt}dnt(){return this.snt}pnt(){return this.int}Bit(){return this.ent}jit(){return this.snt.jit()}aW(){return this.snt.aW()}C$(){return this.snt.C$()}Htt(){if(this.nnt)return this.nnt;let t;switch(this.int.Yit()){case"behavior":t=new Sm.Wit.mnt(this);break;case"effect":t=new Sm.Wit.gnt(this),this.g8=1;break;case"instance-variable":t=new Sm.Wit.ynt(this);break;case"plugin":t=new Sm.Wit.wnt(this),this.g8=1;break;case"world-instance":t=new Sm.Wit.Snt(this),this.g8=1,this.kit=1;break;case"value":t=new Sm.Wit.vnt(this);break;case"audio":t=new Sm.Wit.bnt(this)}return this.nnt=t,this.nnt}Yit(){return this.int.Yit()}Mnt(t){this.int.Mnt(t)}Gnt(){return this.int.xnt()}Tnt(t){this.int._nt(t)}F$(){return this.Htt().Int()}dit(){return this.int.Cnt()}Pnt(t){this.int.Rnt(t)}Ant(){return this.int.X_()}Ent(t){this.int.Fnt(t)}Ont(){return this.Bit().Dnt(this.int).X_()}knt(){return this.int.knt()}Lnt(t){this.int.Lnt(t)}Nnt(){return this.int.Nnt()}Bnt(t){this.int.Bnt(t)}cet(){return this.int.cet()}fet(t){this.int.fet(t)}Ytt(){return this.int.Ytt()}Ktt(t){this.int.Ktt(t)}Y7(){return this.int.Y7()}Ztt(t){this.int.Ztt(t)}I$(t){for(const s of this.Wnt())s.I$(t)}jnt(){return this.int.jnt()}Wnt(){return this.rnt||(this.rnt=this.int.ont().hnt()),this.rnt}W7(){return this.int.ont().W7()}Vnt(t){return this.ent.Vnt(t,this.int)}Unt(t){return this.ent.Unt(t,this.int)}Hnt(t){let s,i=this.ent.Vnt(t,this.int);return i?s=this.ent.znt(t,this.int):(i=this.ent.Unt(t,this.int),s=this.ent.Jnt(t,this.int)),{start:i,end:s}}*qnt(){for(const t of this.Wnt())yield t.n9()}*$nt(){for(const t of this.Wnt())yield t.$O()}rit(){this.Htt().rit()}y7(){this.Htt().y7()}Xnt(){return this.Htt().Xnt()}Dst(){this.Htt().Dst()}h7(t){this.Htt().h7(),this.ant=this.Ynt(t),this.Jst()}zst(t){this.Htt().zst(),this.ant=this.Ynt(t)}Jst(){const t=this.dnt();if(this.Lit=0,t.Jtt()){const s=this.jit(),i=t.C$(),e=this.Htt(),n=this.dit();if(e.Knt()){const t=s.Utt(i,e,n,this);t&&t.length&&(this.Lit=1)}else this.Lit=0}}Ynt(t){const s=this.jit();return this.ent.Vnt(t,this.int)||(s.est()?this.ent.Unt(t,this.int):this.ent.Jnt(t,this.int))}Yst(){this.nnt.Yst()}Sc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.ent.Unt(t,this.int);else{if(this.ant){const s=this.jit(),i=this.ant.j7(),e=this.ant.$O(),n=i?i.$O():s.l$();(t<=e||t>=n)&&(this.ant=this.ent.Unt(t,this.int),h=!0)}else this.ant=this.ent.Unt(t,this.int),h=!0;n=this.ant}n&&(r=n.j7()),this.nnt.Sc(t,n,r,s,i,e,h)}Znt(t){if(this.ant){const s=this.jit(),i=this.ant.j7(),e=this.ant.$O(),n=i?i.$O():s.l$();(t<=e||t>=n)&&(this.ant=this.ent.Unt(t,this.int))}else this.ant=this.ent.Unt(t,this.int);const s=this.ant,i=s.j7();return this.nnt.Znt(t,s,i)}Qnt(t,s,i){return this.nnt.Znt(t,s,i)}tit(){this.nnt.tit()}static trt(t,s){const i=s.pnt();return s.ent.Unt(t,i)}static srt(t,s){const i=s.pnt();return s.ent.Jnt(t,i)}irt(){const t=this.int.ont().ert();return this.ant=null,t}Het(t){this.ant=null,this.int.ont().nrt(t)}zet(){this.Htt().zet()}Jet(){if(this.Htt().Jet()){const t=this.ent.Dnt(this.int),s=this.Htt().Xnt();t.rrt(s)}}qet(){const t=this.Htt().qet();return t&&this.hrt(),this.Htt().ort(),t}hrt(){const t=this.jit().$O(),s=this.Htt(),i=Sm.Wit.trt(t,this),e=this.irt();e.Fnt(i.X_()),e.o$(t),e.I$(i.art()),e.fet(!0),e.lrt(s.urt()),e.rrt(s.Xnt())}i5(){return{sourceAdapterJson:this.Htt().i5()}}e5(t){t&&this.Htt().e5(t.sourceAdapterJson)}}}{const vm=self._s.Wit;vm.Snt=class{constructor(t){this.crt=t,this.frt=null,this.drt()}zn(){this.frt&&(this.frt.zn(),this.frt=null),this.crt=null}Knt(){return this.frt.Knt()}O$(){return this.crt}rit(){this.frt&&this.frt.rit()}y7(){this.frt&&this.frt.y7()}drt(){return this.frt||(this.frt=this.prt()),this.frt}Kit(){}ML(){return this.Kit()}mrt(){}Dst(){this.drt().Dst()}h7(){this.drt().h7()}zst(){this.drt().zst()}Yst(){this.frt.grt()}Sc(t,s,i,e,n,r,h){let o;switch(this.crt.Ont()){case"numeric":o=vm.yrt.Sc(t,s,i,this.crt);break;case"angle":o=vm.wrt.Sc(t,s,i,this.crt);break;case"boolean":o=vm.Srt.Sc(t,s,i,this.crt);break;case"color":o=vm.vrt.Sc(t,s,i,this.crt);break;case"text":o=vm.brt.Sc(t,s,i,this.crt)}this.frt.Mrt(t,o,s,i,e,n,r,h)}Znt(t,s,i){switch(this.crt.Ont()){case"numeric":return vm.yrt.Sc(t,s,i,this.crt);case"angle":return vm.wrt.Sc(t,s,i,this.crt);case"boolean":return vm.Srt.Sc(t,s,i,this.crt);case"color":return vm.vrt.Sc(t,s,i,this.crt);case"text":return vm.brt.Sc(t,s,i,this.crt)}}tit(){this.frt.Grt()}zet(){this.drt().xrt()}ort(){this.drt().ort()}Xnt(){return this.drt().Xnt()}Jet(){return this.drt().Jet()}qet(){return this.drt().qet()}urt(){const t=this.crt,s=t.dnt().jit().$O(),i=vm.trt(s,t),e=i.j7();switch(t.Ont()){case"numeric":return vm.yrt.Sc(s,i,e,t);case"angle":return vm.wrt.Sc(s,i,e,t);case"boolean":return vm.Srt.Sc(s,i,e,t);case"color":return vm.vrt.Sc(s,i,e,t);case"text":return vm.brt.Sc(s,i,e,t)}}prt(){const t=this.crt;switch(t.jnt()?t.Ont():""){case"combo":case"boolean":case"text":case"string":return new vm._rt.Trt(this);case"numeric":case"number":case"angle":return"combo"===this.crt.Ant()?new vm._rt.Trt(this):new vm._rt.Irt(this);case"color":case"offsetColor":return new vm._rt.Crt(this);default:return new vm._rt.Irt(this)}}i5(){return{propertyAdapterJson:this.drt().i5()}}e5(t){t&&this.drt().e5(t.propertyAdapterJson)}}}{const bm=self._s;class Mm extends bm.Wit.Snt{constructor(t){super(t),this.Prt=NaN}Kit(){return this.crt.pnt().xnt()[0]}ML(){return this.Prt?this.Prt:super.ML()}mrt(){return this.crt.dnt().C$()}iet(t){this.crt.pnt().xnt()[0]!==t&&(this.Prt=t)}Sc(t,s,i,e,n,r,h){this.drt().Rrt(s.Int())&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){if(this.drt().Rrt(s.Int()))return super.Znt(t,s,i)}i5(){return Object.assign(super.i5(),{index:this.Prt})}e5(t){t&&(super.e5(t),this.Prt=t.index)}}bm.Wit.ynt=Mm}{const Gm=self._s;class xm extends Gm.Wit.Snt{constructor(t){super(t),this.JQ=NaN}Kit(){return this.crt.pnt().xnt()[1]}mrt(){const t=this.crt.pnt(),s=this.crt.dnt(),i=this.JQ?this.JQ:t.xnt()[0],e=s.C$(),n=e.Art(i);return e.Ert()[n].sq()}cq(t){const s=this.crt.pnt().xnt()[2];return t.Frt(s)}net(t){this.crt.pnt().xnt()[0]!==t&&(this.JQ=t)}Sc(t,s,i,e,n,r,h){const o=this.crt.dnt().C$();this.cq(o.cH())&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){const e=this.crt.dnt().C$();if(this.cq(e.cH()))return super.Znt(t,s,i)}i5(){return Object.assign(super.i5(),{sid:this.JQ})}e5(t){t&&(super.e5(t),this.JQ=t.sid)}}Gm.Wit.mnt=xm}{const Tm=self._s;class _m extends Tm.Wit.Snt{constructor(t){super(t)}Kit(){return this.crt.pnt().xnt()[1]}mrt(){const t=this.crt.dnt().DB().vz(),s=t._V(),i=this.het(s).ML();return t.wq(i)?t.Ort(i):null}het(t){const s=this.crt.pnt().xnt()[0];return t.Drt(s)}Sc(t,s,i,e,n,r,h){this.krt()&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){if(this.krt())return super.Znt(t,s,i)}krt(){const t=this.crt.dnt().DB().vz(),s=t._V(),i=this.het(s);if(!i)return;const e=i.ML();return t.wq(e)}}Tm.Wit.gnt=_m}{const Im=self._s;class Cm extends Im.Wit.Snt{constructor(t){super(t)}Kit(){return this.crt.pnt().xnt()[0]}mrt(){return this.crt.dnt().C$().sq()}Sc(t,s,i,e,n,r,h){const o=this.crt.dnt();o.cH().zj()===o.C$().cH().zj()&&super.Sc(t,s,i,e,n,r,h)}Znt(t,s,i){const e=this.crt.dnt();if(e.cH().zj()===e.C$().cH().zj())return super.Znt(t,s,i)}Lrt(){const t=this.crt.dnt(),s=t.cH().zj();if(Im.sW.Nrt&&s instanceof Im.sW.Nrt&&("initial-frame"===this.crt.dit()||"initial-animation"===this.crt.dit()))switch(this.crt.Y7()){case"relative":return{Brt:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.O$("offsetWidth"),h=t.O$("offsetScaleX");if(r||h){const o=r?.Htt()?.drt(),a=h?.Htt()?.drt();if(s.wJ()&&s.TJ())a&&a.Wrt(n),s.Xg(this.jrt(n,i,s,t,o,a));else{const i=n*((s.Urt()?.Vrt()??this.Hrt(s,t))/this.Hrt(s,t));a&&a.Wrt(n);const r=o?.zrt()??0,h=a?.zrt()??0;s.Xg(i+(r+h*e))}}else s.Xg(s.Vg()*e)}if(e!==r){const i=r/e,n=t.O$("offsetHeight"),h=t.O$("offsetScaleY");if(n||h){const o=n?.Htt()?.drt(),a=h?.Htt()?.drt();if(s.wJ()&&s.IJ())a&&a.Wrt(r),s.Ug(this.Jrt(r,e,s,t,o,a));else{const e=r*((s.Urt()?.qrt()??this.$rt(s,t))/this.$rt(s,t));a&&a.Wrt(r);const n=o?.zrt()??0,h=a?.zrt()??0;s.Ug(e+(n+h*i))}}else s.Ug(s.Zg()*i)}}};case"absolute":return null}}Xrt(t,s,i,e=0){const n=s.jit().pit(t.C$());if(!n)return e;const r=n.O$(i);if(!r)return e;const h=r.pnt().ont();if(!h)return e;const o=h.Yrt();return o?o.Int():e}Hrt(t,s){const i=s.jit().pit(t.C$());if(i)return i.met();const e=t.C$().sq();return e.yet()?e.met():t.Urt().Vrt()}$rt(t,s){const i=s.jit().pit(t.C$());if(i)return i.vet();const e=t.C$().sq();return e.yet()?e.vet():t.Urt().qrt()}jrt(t,s,i,e,n,r){const h=i.Urt().Vrt(),o=h/i.rJ().Urt().Vrt();let a=1;const l=r?.Krt()??0;if(0!==l){const t=h/this.Hrt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Zrt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rJ().Vg()*o*a*f}Jrt(t,s,i,e,n,r){const h=i.Urt().qrt(),o=h/i.rJ().Urt().qrt();let a=1;const l=r?.Qrt()??0;if(0!==l){const t=h/this.$rt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.tht()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rJ().Zg()*o*a*f}}Im.Wit.wnt=Cm}{const Pm=self._s;class Rm extends Pm.Wit.Snt{constructor(t){super(t),this.sht=0,this.iht=!1}Knt(){return!1}h7(){const t=this.crt.Bit();let s=this.crt.pnt();s=t.Dnt(s),this.sht=s.n9()}zst(){}Int(){return this.iht||this.crt.Sc(0),this.sht}Sc(t,s,i,e,n,r,h){this.sht=Pm.Wit.yrt.Sc(t,s,i,this.crt),this.iht=!0}zet(){}ort(){}Xnt(){return this.sht}Jet(){return!1}qet(){return!1}i5(){return{value:this.sht,init:this.iht}}e5(t){t&&(this.sht=t.value,this.iht=!t.hasOwnProperty("init")||t.init)}}Pm.Wit.vnt=Rm}{const Am=self._s;class Em extends Am.Wit.Snt{constructor(t){super(t),this.eht=!1,this.nht=null,this.rht=null,this.hht=null,this.O7=this.crt.jit(),this.snt=this.crt.dnt(),this.oht=this.crt.Gnt(),this.aht=this.oht[0],this.lht=this.oht[1],this.oht[3]?this.uht=this.oht[3]:this.uht=Math.random().toString(36).slice(2),this.cht=NaN,this.fht=NaN,this.dht=NaN,this.pht=null,this.mht()}zn(){super.zn(),this.nht=null,this.rht=null,this.hht=null,this.O7=null,this.snt=null,this.oht=null,this.aht=null,this.pht=null}mht(){if(!self._s.sW.Audio)return;const t=this.crt.aW().ght(self._s.sW.Audio);t&&(this.nht=t.Vj().sq()),this.rht=self._s.sW.Audio.yht,this.hht=self._s.sW.Audio.wht}Sht(){if(this.pht)return;const t=this.crt.dnt().O$("audioSource");t&&(this.pht=t.Htt())}vht(){const t=this.crt.dnt().O$("volume");return t?t.Htt().fht:this.fht}rit(){super.rit(),this.eht=!1,this.nht&&(this.hht&&(this.cht=this.hht.bht.call(this.nht,this.uht),this.fht=this.hht.Mht.call(this.nht,this.uht)),this.rht&&this.rht.n$.call(this.nht,this.uht))}Ght(){return this.uht}xht(){return this.dht}Tht(t){this.dht=t}h7(){super.h7(),this.cht=NaN,this.eht=!1}zst(){super.zst();const t=this.crt.jit().$O();switch(this.cht=t-this.lht,this.crt.dit()){case"audioSource":break;case"volume":this.fht=this.crt.Znt(t)}this.eht=!1}Sc(t,s,i,e,n,r,h){if(this.nht)switch(this.crt.dit()){case"audioSource":{if(!this.O7.est())return;if(e)return void(this.rht&&this.rht.n$.call(this.nht,this.uht));if(t<this.lht)return void(this.eht=!1);const s=this.hht._ht.call(this.nht,this.uht),i=this.O7.m$();if(i!==s&&this.rht.p$.call(this.nht,this.uht,i),this.eht)return;if(!this.crt.jit().IsPlaying())return;if(this.eht=!0,isNaN(this.cht)){const s=self.performance.now(),i=t-this.lht;if("suspended"===this.nht.Iht())return void(this.eht=!1);const e=i+(self.performance.now()-s)/1e3;if(this.rht){let t=this.xht();isNaN(t)?(this.Tht(0),t=0):this.Tht(t),this.rht.Cht.call(this.nht,this.aht,t,this.uht,e)}}else{const t=this.cht;this.cht=NaN;const s=this.vht();if(this.fht=NaN,"suspended"===this.nht.Iht())return void(this.eht=!1);this.rht&&(this.Tht(s),this.rht.Cht.call(this.nht,this.aht,s,this.uht,t))}break}case"volume":this.Sht(),super.Sc(t,s,i,e,n,r,h)}}Znt(t,s,i){if(this.nht)switch(this.crt.dit()){case"audioSource":return;case"volume":return this.Sht(),super.Znt(t,s,i)}}Pht(t,s){return this.pht?this.pht.xht():0}Rht(t,s,i,e){this.pht&&this.pht.Tht(this.Pht()+s),this.rht&&this.pht&&this.rht.Tht.call(this.nht,this.pht.Ght(),this.pht.xht())}Aht(t,s,i){this.pht&&this.pht.Tht(s),this.rht&&this.pht&&this.rht.Tht.call(this.nht,this.pht.Ght(),this.pht.xht())}Eht(){return!0}i5(){return{audioPlaybackStarted:this.eht,audioTag:this.uht,pauseTime:this.cht,pauseVolume:this.fht,volume:this.dht}}e5(t){t&&(this.eht=t.audioPlaybackStarted,this.uht=t.audioTag,this.cht=t.pauseTime,this.fht=t.pauseVolume,this.dht=t.volume,this.mht())}}Am.Wit.bnt=Em}self._s.Wit._rt=class{constructor(t){this.nnt=t,this.crt=t.O$(),this._it=this.crt.dnt().DB(),this.Fht=this.crt.dit(),this.Oht=!1,this.Dht=null,this.kht=null}zn(){this.nnt=null,this.crt=null,this._it=null,this.Dht=null,this.kht=null}Knt(){return!1}rit(){}y7(){this._it=null,this.Dht=null,this.kht=null}Htt(){return this.nnt}O$(){return this.crt}DB(){return this._it||(this._it=this.crt.dnt().DB()),this._it}Lht(t){this.Oht=!!t}Nht(){return this.Oht}Dst(){}h7(){}zst(){}xrt(){this.Dht=this.Xnt()}ort(){this.Dht=null}Xnt(){}Jet(){}qet(){}Rrt(t){return typeof this.Bht()==typeof t}grt(){}Mrt(t,s,i,e,n,r,h,o){}Grt(){}Wht(){return this.Vht(()=>{const t=this.crt.pnt();return this.crt.Bit().Dnt(t)},()=>{const t=this.crt.pnt();return this.crt.Bit().Yrt(t)}).jht()}Uht(){const t=this.crt.jit().$O()-this.crt.dnt().Kst();return this.Vht(()=>{const s=this.crt.pnt();return this.crt.Bit().Unt(t,s)},()=>{const s=this.crt.pnt(),i=this.crt.Bit();return i.Jnt(t,s)||i.Yrt(s)}).jht()}Vht(t,s){return this.crt.jit().est()?t():s()}Hht(t,s){return"relative"===this.crt.Y7()?t():s()}zht(t,s){return this.Nht()?(this.Lht(!1),t()):s()}Jht(t){}qht(){return this.nnt.ML()}$ht(){return this.kht||(this.kht=this.nnt.mrt()),this.kht}Xht(t,s,i,e,n,r){switch(this.crt.Yit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}i5(){return{firstAbsoluteUpdate:this.Oht,saveState:this.Dht}}e5(t){t&&(this.Oht=t.firstAbsoluteUpdate,this.Dht=t.saveState)}Yht(t,s=!1){const i=[];for(const e of t){const t=e.dnt().Kst();for(const n of e.Wnt())s&&0===n.$O()?i.push({time:t+n.$O(),value:n.jht()}):s||i.push({time:t+n.$O(),value:n.jht()})}return i.sort((t,s)=>t.time-s.time)}Kht(t,s,i){return this.Zht(s,i)}Zht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const Fm=self._s,Om=new Map,Dm=[0,0,0];class km extends Fm.Wit._rt{constructor(t){super(t)}Dst(){}h7(){}zst(){}Xnt(){const t=this.crt.Yit(),s=this.$ht(),i=this.qht();switch(t){case"behavior":case"plugin":return this.Qht(s.tot(i));case"effect":return this.Qht(s[i]);case"world-instance":return this.Qht(this.Bht())}}Jet(){const t=this.Wht();return!this.sot(t,this.Bht())}qet(){return!Fm.ie(this.Dht)&&!this.sot(this.Dht,this.Bht())}sot(t,s){return t=this.iot(t),s=this.iot(s),t.zo(s)}Wht(){const t=super.Wht();return this.iot(t)}Uht(){const t=super.Uht();return this.iot(t)}Jht(t){}Qht(t){return Fm.ke(t,Fm.Go)?t.toArray().slice(0,3):t.slice(0,3)}iot(t){return Fm.ke(t,Fm.Go)?t:new Fm.Go(t[0],t[1],t[2],1)}Rrt(t){return!0}Knt(){return!0}grt(){const t=this.crt.jit(),s=this.crt.C$(),i=this.crt.Htt(),e=t.Utt(s,i,this.Fht,this.crt);if(e&&e.length>1){Om.has(s)||Om.set(s,new Map);const t=Om.get(s),i=this.crt.Yit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Fht)||e.set(this.Fht,{eot:!1,color:new Fm.Go(0,0,0,1)})}}not(t,s,i){const e=Om.get(t).get(s).get(i);return e.eot=!0,e.color}Mrt(t,s,i,e,n,r,h,o){const a=this.crt.jit(),l=this.crt.dnt(),u=this.crt.C$(),c=this.crt.Htt(),f=this.crt.Yit(),d=this.Fht,p=a.Utt(u,c,d,this.crt);if(p&&p.length>1){const t=this.Yht(p,!0),i=this.Kht(a,a.$O(),t);if(i){const t=l.Kst(),e=i.time-t;if(0===e)this.not(u,f,this.Fht).Ro(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.crt.Sc(e,!1,!0),h=Fm.Go.Ma(t,r[0]),o=Fm.Go.Ma(i,r[1]),a=Fm.Go.Ma(n,r[2]);this.not(u,f,this.Fht).Ro(h,o,a)}}}else this.rot(s[0],s[1],s[2])}Grt(){const t=this.crt.C$();if(!Om.has(t))return;const s=Om.get(t),i=this.crt.Yit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Fht))return;const n=e.get(this.Fht),r=n.eot,h=n.color;r&&this.rot(h.Lo(),h.No(),h.Bo()),0===e.size&&s.delete(i),0===s.size&&Om.delete(t)}Bht(){const t=this.crt.Yit(),s=this.$ht(),i=this.qht();switch(t){case"behavior":case"plugin":return this.iot(s.tot(i));case"effect":return s[i].clone();case"world-instance":return this.DB().zz().clone()}}rot(t,s,i){const e=this.crt.Yit(),n=this.$ht(),r=this.qht();switch(e){case"behavior":case"plugin":Dm[0]=t,Dm[1]=s,Dm[2]=i,n.hot(r,Dm);break;case"effect":n[r].Po(t,s,i);break;case"world-instance":this.DB().oot(t,s,i)}}i5(){}e5(t){}}Fm.Wit._rt.Crt=km}{const Lm=self._s,Nm=Lm.Wit;class Bm extends Lm.Wit._rt{constructor(t){super(t)}Dst(){}h7(){}zst(){}Xnt(){return this.Bht()}Jet(){return this.Wht()!==this.Xnt()}qet(){return!Lm.ie(this.Dht)&&this.Dht!==this.Xnt()}Knt(){return!1}Mrt(t,s,i,e,n,r,h,o){const a=this.crt,l=a.dnt(),u=a.Yit(),c=a.jit(),f=l.C$(),d=a.Htt(),p=this.Fht,m=c.Utt(f,d,p,a);if(m&&m.length>1){const i=this.Yht(m),e=t+l.Kst(),n=this.Kht(c,e,i);n&&(s=n.value)}switch(a.Ont()){case"numeric":if(!Nm.yrt.aot(this.qht(),this.$ht(),s,u))return;break;case"angle":if(!Nm.wrt.aot(this.qht(),this.$ht(),s,u))return;break;case"boolean":if(!Nm.Srt.aot(this.qht(),this.$ht(),s,u))return;break;case"color":if(!Nm.vrt.aot(this.qht(),this.$ht(),s,u))return;break;case"text":if(!Nm.brt.aot(this.qht(),this.$ht(),s,u))return}this.rot(s)}Bht(){const t=this.crt.Yit(),s=this.$ht(),i=this.qht();switch(t){case"behavior":case"plugin":return s.tot(i);case"effect":return s[i];case"instance-variable":return s.lot(i)}}rot(t){const s=this.crt.Yit(),i=this.$ht(),e=this.qht();switch(s){case"behavior":case"plugin":i.hot(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.uot(e,t)}}}Lm.Wit._rt.Trt=Bm}{const Wm=self._s,jm=(Wm.Wit._rt,new Map),Vm=(t,s,i,e,n,r=!1,h=null,o=null)=>{jm.set(t,{cot:s,fot:i,dot:e,round:n,pot:r,init:h,reset:o})},Um=(t,s,i,e=0)=>{const n=s.jit().pit(t.C$());if(!n)return e;const r=n.O$(i);if(!r)return e;const h=r.pnt().ont();if(!h)return e;const o=h.Yrt();return o?o.Int():e},Hm=t=>{const s=[];let i=t.rJ();for(;i;)s.push(i),i=i.rJ();return s.reverse(),s};Vm("offsetX",(t,s,i,e)=>{"relative"===e.crt.Y7()?t.mot(s,i.jit().tst()):t.mot(s)},(t,s)=>t.XM(s),t=>t.$M(),!0),Vm("offsetY",(t,s,i,e)=>{"relative"===e.crt.Y7()?t.got(s,i.jit().tst()):t.got(s)},(t,s)=>t.ZM(s),t=>t.KM(),!0),Vm("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.crt.Y7(),o=1===e.yot.X_();if((h||o)&&t.wJ()&&t.TJ()){if(isNaN(e.wot)){const s=Hm(t);let i;i=o?s[s.length-1].Vg():s[s.length-1].Urt().Vrt(),e.wot=0===i?Number.EPSILON:i}if(n)return;e.Sot+=s;const i=s/e.wot;t.Ty(i,r),e.vot+=i}else t.Ty(s),e.vot+=s},(t,s)=>t.Xg(s),t=>t.Vg(),!0,!1,null,t=>{t.vot=0,t.Sot=0}),Vm("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.crt.Y7(),o=1===e.yot.X_();if((h||o)&&t.wJ()&&t.IJ()){if(isNaN(e.wot)){const s=Hm(t);let i;i=o?s[s.length-1].Zg():s[s.length-1].Urt().qrt(),e.wot=0===i?Number.EPSILON:i}if(n)return;e.bot+=s;const i=s/e.wot;t.Mot(i,r),e.vot+=i}else t.Mot(s),e.vot+=s},(t,s)=>t.Ug(s),t=>t.Zg(),!0,!1,null,t=>{t.vot=0,t.bot=0}),Vm("offsetAngle",(t,s,i,e,n)=>{t.Got(s)},(t,s)=>t.EV(s),t=>t.FV(),!1,!0),Vm("offsetOpacity",(t,s,i,e,n)=>{s/=e.xot?e.xot:1;const r=t.wF()+s;if(0===e.Tot)r>1?e.Tot+=r-1:r<0&&(e.Tot+=r),t._ot(s);else{const i=t.wF()+s;s>0&&e.Tot>0?i>1&&(e.Tot+=i-1):s>0&&e.Tot<0?(e.Tot+=s,e.Tot>0&&(t._ot(e.Tot),e.Tot=0)):s<0&&e.Tot>0?(e.Tot+=s,e.Tot<0&&(t._ot(e.Tot),e.Tot=0)):s<0&&e.Tot<0&&i<0&&(e.Tot+=i)}},(t,s)=>{t.vF(s)},t=>t.wF(),!1,!0,(t,s,i)=>{switch(t.Tot=0,t.crt.Y7()){case"relative":{t.crt.Bit();const s=t.crt.pnt().ont().hnt();let i=t.DB().wF(),e=i;for(const n of s){const s=n.$O();e=i+t.crt.Znt(s),e=Wm.Yn(e,0,1)}t.Iot=i-e,t.Iot=Math.round(100*(t.Iot+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].$O();e-=t.crt.Znt(n),e=Wm.Yn(e,0,1)}t.Cot=e,t.Cot=Math.round(100*(t.Cot+Number.EPSILON))/100;break}}const e="relative"===t.crt.Y7(),n=1===t.yot.X_();if((e||n)&&s.wJ()&&s.FJ()){const e=Hm(s);let n=e[0].Urt().Pot();n+=Um(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=Um(e[t],i,"offsetOpacity");t.xot=0===n?1:n}},t=>{switch(t.crt.Y7()){case"relative":{t.Tot=0;const s=t.DB();let i=s.wF();i=Math.round(100*(i+Number.EPSILON))/100,t.crt.jit().est()?(s.vF(i+t.Iot),t.BI=0):(s.vF(i-t.Cot),t.BI=t.Htt().urt());break}}}),Vm("offsetOriginX",(t,s)=>t.Rot(s),(t,s)=>t.Cz(s),t=>t.Iz(),!1),Vm("offsetOriginY",(t,s)=>t.Aot(s),(t,s)=>t.Az(s),t=>t.Rz(),!1),Vm("offsetZElevation",(t,s)=>t.Eot(s),(t,s)=>t.tG(s),t=>t.QM(),!0),Vm("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.Vg()<0?-1:1;if(e.Fot+=s,"relative"===e.crt.Y7()&&t.wJ()&&t.TJ()){const r=Um(t,i,"offsetWidth"),h=isNaN(e.Oot)?i.met():e.Oot,o=(h+r/(t.Urt().Vrt()/h))*n*s;isNaN(e.wot)&&jm.get("offsetWidth").cot(t,1,i,e,!0);const a=o/e.wot;t.Ty(a,!0),e.vot+=a}else{const r=(isNaN(e.Oot)?i.met():e.Oot)*n*s;t.Ty(r),e.vot+=r}},(t,s,i)=>{t.Xg(i.met()*s)},(t,s)=>{const i=t.Vg()<0?-1:1;if(t.TJ()){const e=t.rJ(),n=s.jit().pit(e.C$());let r=NaN;if(n)r=e.Vg()/n.met();else{const t=e.C$().sq();r=t.yet()?e.Vg()/t.met():1}return t.Vg()*i/(s.met()*r)}return t.Vg()*i/s.met()},!1,!1,null,t=>{t.vot=0,t.Oot=NaN,t.Fot=0}),Vm("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.Zg()<0?-1:1;if(e.Dot+=s,"relative"===e.crt.Y7()&&t.wJ()&&t.IJ()){const r=Um(t,i,"offsetHeight"),h=isNaN(e.Oot)?i.vet():e.Oot,o=(h+r/(t.Urt().qrt()/h))*n*s;isNaN(e.wot)&&jm.get("offsetHeight").cot(t,1,i,e,!0);const a=o/e.wot;t.Mot(a,!0),e.vot+=a}else{const r=(isNaN(e.Oot)?i.vet():e.Oot)*n*s;t.Mot(r),e.vot+=r}},(t,s,i)=>{t.Ug(i.vet()*s)},(t,s)=>{const i=t.Zg()<0?-1:1;if(t.IJ()){const e=t.rJ(),n=s.jit().pit(e.C$());let r=NaN;if(n)r=e.Zg()/n.vet();else{const t=e.C$().sq();r=t.yet()?e.Zg()/t.vet():1}return t.Zg()*i/(s.vet()*r)}return t.Zg()*i/s.vet()},!1,!1,null,t=>{t.vot=0,t.Oot=NaN,t.Dot=0});class zm extends Wm.Wit._rt{constructor(t){super(t),this.BI=0,this.Tot=0,this.Iot=0,this.Cot=0,this.xot=NaN,this.wot=NaN,this.vot=0,this.Oot=NaN,this.Sot=0,this.Fot=0,this.bot=0,this.Dot=0,this.kot=void 0,this.Lot=void 0,this.Not=null,this.Bot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Uot=null,this.Hot=null,this.zot=null,this.Jot=!1,this.qot=!1,Wm.ke(this.crt.jit(),Wm.$ot)?this.yot=new Wm.Wit._rt.Xot(this):this.yot=new Wm.Wit._rt.Yot(this);const s=this.crt.dit();switch(this.crt.Yit()){case"world-instance":{const t=jm.get(s);this.Not=t.dot,this.Bot=t.cot,this.Wot=t.fot,this.Jot=t.round,this.qot=t.pot,this.Vot=t.init,this.jot=t.reset;break}case"audio":this.Uot=t.Pht,this.Hot=t.Rht,this.zot=t.Aht,this.Jot=!!t.Eht(),this.qot=!1}}zn(){this.yot=null,this.Not=null,this.Bot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Uot=null,this.Hot=null,this.zot=null,super.zn()}Knt(){return this.yot.Knt()}Kot(){return this.BI}Zot(t){this.BI=t}Dst(){this.jot&&this.jot(this)}h7(){const t=this.yot.h7();if("number"==typeof t&&(this.BI=t),this.Vot){const t=this.DB(),s=this.crt.dnt();this.Vot(this,t,s)}}zst(){const t=this.yot.zst();"number"==typeof t&&(this.BI=t)}Xnt(){return this.Bht()}Jet(){return this.Wht()!==this.Xnt()}qet(){return!Wm.ie(this.Dht)&&this.Dht!==this.Xnt()}grt(){this.yot.grt()}Mrt(t,s,i,e,n,r,h,o){return this.yot.Mrt(t,s,i,e,n,r,h,o)}Grt(){this.yot.Grt()}Bht(){const t=this.$ht(),s=this.qht(),i=this.DB(),e=this.crt.dnt();switch(this.crt.Yit()){case"behavior":case"plugin":return t.tot(s);case"effect":return t[s];case"instance-variable":return t.lot(s);case"world-instance":return this.Not(i,e);case"audio":return this.Uot.call(this.Htt(),i,e)}}rot(t,s,i,e=!0){const n=this.$ht(),r=this.qht(),h=this.DB(),o=this.crt.dnt();switch(this.crt.Yit()){case"behavior":n.Qot(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.tat(r,t);break;case"plugin":n.Qot(r,t,this.Htt().Lrt());break;case"world-instance":this.Bot(h,t,o,this,!1,e);break;case"audio":this.Hot.call(this.Htt(),h,t,o,this)}}sat(t,s,i){let e=this.crt.Ytt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.crt.jit().$O();if(!this.crt.Vnt(t))return}const n=this.$ht(),r=this.qht(),h=this.DB(),o=this.crt.dnt();switch(this.crt.Yit()){case"behavior":n.hot(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.uot(r,t);break;case"plugin":n.hot(r,t,this.Htt().Lrt());break;case"world-instance":this.Wot(h,t,o);break;case"audio":this.zot.call(this.Htt(),h,t,o)}}iat(t,s,i,e,n,r,h,o){this.yot.iat(t,s,i,e,n,r,h,o)}eat(t,s,i,e,n){"angle"===this.crt.Ant()&&(t=Wm.Qn(t));const r=(t.toString().split(".")[1]||"").length,h=this.Bht();let o;switch(o=0===r?this.Jot?Math.round(h):this.qot?"angle"===this.crt.Ant()?Wm.Zn(Math.round(Wm.Qn(h))):Number(Wm.toFixed(h,2)):h:this.Jot?Number(Wm.toFixed(h,r)):(this.qot,h),this.rot(o-h,s,i,!1),this.crt.dit()){case"offsetWidth":case"offsetScaleX":{const t=this.DB(),s=t.Vg(),i=Number(Wm.toFixed(s,2));t.Ty(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.DB(),s=t.Zg(),i=Number(Wm.toFixed(s,2));t.Mot(i-s);break}}}i5(){return Object.assign(super.i5(),{v:this.BI,a:this.Tot,fod:this.Iot,bod:this.Cot,of:this.xot,sf:this.wot,armorf:this.kot,armandf:this.Lot,ca:this.vot,os:this.Oot,awo:this.Sot,aho:this.bot,asxo:this.Fot,asyo:this.Dot})}e5(t){t&&(super.e5(t),this.BI=t.v,this.Tot=t.a,this.Iot=Wm.Qi(t.fod)?t.fod:0,this.Cot=Wm.Qi(t.bod)?t.bod:0,this.xot=Wm.Qi(t.of)?t.of:NaN,this.wot=Wm.Qi(t.sf)?t.sf:NaN,this.kot=Wm.Qi(t.armorf)?t.armorf:void 0,this.Lot=Wm.Qi(t.armandf)?t.armandf:void 0,this.vot=Wm.Qi(t.ca)?t.ca:0,this.Oot=Wm.Qi(t.os)?t.os:NaN,this.Sot=Wm.Qi(t.awo)?t.awo:0,this.bot=Wm.Qi(t.aho)?t.aho:0,this.Fot=Wm.Qi(t.asxo)?t.asxo:0,this.Dot=Wm.Qi(t.asyo)?t.asyo:0)}Wrt(t){this.Oot=t}zrt(){return this.vot}Zrt(){return this.Sot}tht(){return this.bot}Krt(){return this.Fot}Qrt(){return this.Dot}}Wm.Wit._rt.Irt=zm}{const Jm=self._s;class qm{constructor(t){this.nat=!1,this.sht=0,this.rat=!1,this.hat=!1,this.Oit=t;for(let t=0,s=this.Oit.length;t<s;t++)this.Oit[t].cnt(this)}fit(){return this.Oit}oat(){this.nat=!0}aat(){return this.nat}lrt(t){this.sht=t}Int(){return this.sht}lat(t){this.rat=t}uat(){return this.rat}Xst(t){this.hat=t}cat(){return this.hat}Bf(){this.nat=!1,this.sht=0,this.rat=!1,this.hat=!1}}class $m{constructor(t){this.fat=t}zn(){this.fat=null}X_(){return 0}h7(){const t=this.fat;return this.fat.O$(),t.Hht(()=>t.Vht(()=>0,()=>t.Htt().urt()),()=>{})}zst(){}Knt(){switch(this.fat,this.fat.O$().Y7()){case"relative":return!1;case"absolute":return!0}}grt(){this.fat;const t=this.fat.O$(),s=t.dit();switch(t.Y7()){case"relative":break;case"absolute":if(t.unt())t.fnt().Bf();else{const i=t.jit(),e=t.C$(),n=t.Htt(),r=i.Utt(e,n,s,t);r&&r.length>1&&new qm(r)}}}Mrt(t,s,i,e,n,r,h,o){const a=this.fat,l=this.fat.O$();switch(l.Y7()){case"relative":{const h=a.Kot();a.rot(s-h,i,e),r&&this.iat(t,i,e,n,h,s),a.Zot(s);break}case"absolute":{const t=l.jit(),i=l.dnt();if(l.C$(),l.Htt(),l.unt()){const e=l.fnt(),n=e.fit(),r=a.Yht(n,!0),u=a.Kht(t,t.$O(),r);if(u){const t=i.Kst(),n=u.time-t;if(0===n)e.Xst(h),e.lat(o),e.oat(),e.lrt(e.Int()+s);else{if(n<0)return;const t=l.Znt(n);e.Xst(h),e.lat(o),e.oat(),e.lrt(e.Int()+(s-t))}}}else a.sat(s,o,h);break}}}Grt(){const t=this.fat,s=this.fat.O$();switch(s.Y7()){case"relative":break;case"absolute":if(s.unt()){const i=s.fnt();i.aat()&&t.sat(i.Int(),i.uat(),i.cat())}}}iat(t,s,i,e,n,r){const h=this.fat;e||(s&&t===s.$O()?h.eat(s.n9(),s,i):i&&t===i.$O()?h.eat(i.n9(),s,i):r-n===0&&h.eat(s.n9(),s,i))}}Jm.Wit._rt.Yot=$m}{const Xm=self._s;class Ym{constructor(t){this.fat=t}zn(){this.fat=null}X_(){return 1}h7(){const t=this.fat;return t.Lht(!0),this.Jht(t.Wht())}zst(){const t=this.fat;if(t.Wht()!==t.Uht())return t.Lht(!0),this.Jht(t.Uht())}Knt(){return!1}grt(){}Mrt(t,s,i,e,n,r,h,o){const a=this.fat,l=a.Kot();switch(a.O$().Y7()){case"relative":a.rot(s-l,i,e),r&&this.iat(t,i,e,n,l,s,!1,h);break;case"absolute":a.Nht()?(a.Lht(!1),a.rot(l,i,e)):0===t&&0===a.O$().jit().l$()?a.sat(s,!0,!1):(a.rot(s-l,i,e),r&&this.iat(t,i,e,n,l,s,this.dat(),h))}a.Zot(s)}Grt(){}Jht(t){return t-this.fat.Xnt()}dat(){const t=this.fat,s=t.DB().C$(),i=t.O$().aW().Vtt();let e=0;for(const t of i.O8())0===t.X_()?t.B8(s)&&e++:1===t.X_()&&t.C$()===s&&e++;return e<=1}iat(t,s,i,e,n,r,h,o){const a=this.fat;e?s&&t===s.$O()?a.eat(s.n9(),s,i,h,o):i&&t===i.$O()?a.eat(i.n9(),s,i,h,o):i||a.eat(s.n9(),s,i,h,o):s&&t===s.$O()?a.eat(s.n9(),s,i,h,o):i&&t===i.$O()?a.eat(i.n9(),s,i,h,o):r-n===0&&a.eat(s.n9(),s,i,h,o)}}Xm.Wit._rt.Xot=Ym}{const Km=self._s,Zm=self.Vu;Km.Wit.yrt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()}let n=e.Ytt();if("default"===n&&(n="continuous"),"combo"===e.Ant()&&(n="discrete"),"discrete"===n)return s.n9();if("continuous"===n||"step"===n){const r=e.jit().$tt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.n9(),o=i.n9(),a=s.i9("cubic-bezier"),l=i.i9("cubic-bezier"),u=a&&a.pat()&&l&&l.mat();if(!u&&h===o)return h;const c=s.$O(),f=i.$O();"step"===n&&0!==r&&(t=Km.Yn(t,c,f));const d=Km.normalize(t,c,f),p=s.art();let m;if(u){const t=f-c;m=Zm.rc(p)(t*d,0,1,t),m=Zm.rc("cubicbezier")(m,h,h+a.o9(),o+l.u9(),o)}else m=Zm.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Ant()?Math.floor(m):m}}}}{const Qm=self._s;Qm.Wit.wrt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()}let n=e.Ytt();if("default"===n&&(n="continuous"),"combo"===e.Ant()&&(n="discrete"),"discrete"===n)return s.n9();if("continuous"===n||"step"===n){const r=e.jit().$tt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.$O(),o=i.$O(),a=s.n9(),l=i.n9();"step"===n&&0!==r&&(t=Qm.Yn(t,h,o));const u=s.i9("angle");if(!u){if(a===l)return a;const i=Qm.normalize(t,h,o),e=self.Vu.rc(s.art());return Qm.lr(a,l,e(i,0,1,1))}{const i=u.gat();if(a===l&&0===i)return a;const e=Qm.normalize(t,h,o),n=self.Vu.rc(s.art())(e,0,1,1);switch(u.yat()){case"closest":return Qm.lr(a,l,n,i);case"clockwise":return Qm.ur(a,l,n,i);case"anti-clockwise":return Qm.cr(a,l,n,i)}}}}}}self._s.Wit.Srt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return!!n!=!!i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()?1:0}return s.n9()?1:0}};{const tg=self._s,sg=[0,0,0],ig=[0,0,0],eg=[0,0,0];tg.Wit.vrt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return Array.isArray(i)?(sg[0]=i[0],sg[1]=i[1],sg[2]=i[2]):(eg.ha(i),sg[0]=Math.floor(255*eg.Lo()),sg[1]=Math.floor(255*eg.No()),sg[2]=Math.floor(255*eg.Bo())),Array.isArray(n)?(ig[0]=n[0],ig[1]=n[1],ig[2]=n[2]):(eg.ha(n),ig[0]=Math.floor(255*eg.Lo()),ig[1]=Math.floor(255*eg.No()),ig[2]=Math.floor(255*eg.Bo())),sg[0]!==ig[0]||sg[1]!==ig[1]||sg[2]!==ig[2]}static Sc(t,s,i,e){if(!i){let t=e.pnt();t=e.Bit().Yrt(t);const s=t.n9();return sg[0]=s[0],sg[1]=s[1],sg[2]=s[2],sg}let n=e.Ytt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.n9();return sg[0]=t[0],sg[1]=t[1],sg[2]=t[2],sg}if("continuous"===n||"step"===n){const r=e.jit().$tt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.$O(),o=i.$O(),a=s.n9(),l=i.n9();"step"===n&&0!==r&&(t=tg.Yn(t,h,o));const u=tg.normalize(t,h,o),c=s.art(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.Vu.rc(c),S=o-h,v=S*u;return sg[0]=f===m?f:w(v,f,m-f,S),sg[1]=d===g?d:w(v,d,g-d,S),sg[2]=p===y?p:w(v,p,y-p,S),sg}}}}self._s.Wit.brt=class{constructor(){}static aot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.tot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.lot(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.pnt();return t=e.Bit().Yrt(t),t.n9()}return s.n9()}};{const ng=self._s;ng.W6=class{constructor(){this.wat=new Map}zn(){for(const t of this.wat.values())t.zn();this.wat.clear(),this.wat=null}Bu(t){const s=new ng.Sat(t),i=s.Pc();this.wat.set(i,s)}zs(t){return this.wat.get(t)}Dtt(){return 0}static vat(t,s,i,e){if(s)for(const n of s)ng.W6.bat("create",n,t,i,e)}static Mat(t,s,i,e){if(s)for(const n of s)ng.W6.bat("create-including-disabled",n,t,i,e)}static Gat(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].e5(s)}):s.forEach(s=>{ng.W6.bat("load",s,t,i,e)})}static bat(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.xat],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.e5(s),i.push(r);break;case"create":if("function"==typeof r.cet&&!r.cet())return r.zn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const rg=self._s;rg.Sat=class{constructor(t){this.$n="",this.$st=NaN,this.Tat=0,this._at="default",this.Iat="default",this.Cat=!1,this.Pat=!1,this.Rat=1,this.Mit=null,this.Aat="",this.Eat=!1,this.Fat=!0,t&&(this.$n=t[0],this.$st=t[1],this.Tat=t[2],this._at=t[3],this.Iat=t[4],this.Cat=!!t[6],this.Pat=!!t[7],this.Rat=t[8],this.Aat=t[9],this.Eat=!!t[10],this.Fat=!!t[11],this.Mit=new rg.Oat(t[5],this))}zn(){this.Mit.zn(),this.Mit=null}Wtt(){return this.Mit||(this.Mit=new rg.Oat(null,this)),this.Mit}Pc(){return this.$n}eY(t){this.$n=t}l$(){return this.$st}a$(t){this.$st=t}$tt(){return this.Tat}Xtt(t){this.Tat=t}Ytt(){return this._at}Ktt(t){this._at=t}Y7(){return this.Iat}Ztt(t){this.Iat=t}c$(){return this.Cat}u$(t){this.Cat=t}d$(){return this.Pat}f$(t){this.Pat=t}Cq(){return this.Rat}Qtt(t){this.Rat=t}w7(){return this.Aat}tst(){return this.Eat}sst(){return this.Fat}i5(){return{trackDataJson:this.Mit.i5(),name:this.$n,totalTime:this.$st,step:this.Tat,interpolationMode:this._at,resultMode:this.Iat,loop:this.Cat,pingPong:this.Pat,repeatCount:this.Rat,startOnLayout:this.Aat,transformWithSceneGraph:!!this.Eat,useSystemTimescale:this.Fat}}e5(t){t&&(this.Wtt().e5(t.trackDataJson),this.$n=t.name,this.$st=t.totalTime,this.Tat=t.step,this._at=t.interpolationMode,this.Iat=t.resultMode,this.Cat=t.loop,this.Pat=t.pingPong,this.Rat=t.repeatCount,this.Aat=t.startOnLayout,this.Eat=!!t.transformWithSceneGraph,this.Fat=!!t.useSystemTimescale)}}}{const hg=self._s;class og{constructor(t,s){this.Mit=s,this.Dat=null,this.kat=null,this.Git=NaN,this.xit=NaN,this._at="default",this.Iat="default",this.fu=!1,this.Lat=null,this.ent=null,this.Wc="",this.Nat=null,this.Bat=0,this.Wat=this.Mit.qtt().l$(),this.Jc=0,this.$n="",t&&(t[0]&&(this.Dat=t[0],this.Git=t[0][2],this.xit=t[0][1]),this._at=t[1],this.Iat=t[2],this.fu=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.Nat=t[7],this.Bat=t[7][0],this.Wat=t[7][1]),t[8]&&(this.kat=t[8]),t[8]&&(this.kat=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.$n=t[10]),this.Lat=new hg.jat(t[4],this),this.ent=new hg.Vat(t[5],this))}zn(){this.Dat=null,this.Mit=null,this.Lat&&(this.Lat.zn(),this.Lat=null),this.ent&&(this.ent.zn(),this.ent=null),this.Nat=null}Wtt(){return this.Mit}Qst(){return this.Lat||(this.Lat=new hg.jat(null,this)),this.Lat}Bit(){return this.ent||(this.ent=new hg.Vat(null,this)),this.ent}Uat(){return this.Dat}zit(){return this.xit}det(t){this.xit=t}Hit(){return this.Git}aet(t){this.Git=t}Ytt(){return this._at}Ktt(t){this._at=t}Y7(){return this.Iat}Ztt(t){this.Iat=t}cet(){return this.fu}fet(t){this.fu=!!t}E$(){return this.Wc}Kst(){return this.Bat}let(){return this.Wat}uet(t){this.Wat=t}met(){return this.kat[0]}pet(t){this.kat||(this.kat=[]),this.kat[0]=t}vet(){return this.kat||(this.kat=[]),this.kat[1]}wet(t){this.kat||(this.kat=[]),this.kat[1]=t}X_(){return this.Jc}Pc(){return this.$n}i5(){return{keyframeDataJson:this.Lat.i5(),propertyTrackDataJson:this.ent.i5(),instanceData:this.Dat,additionalInstanceData:this.kat,instanceUid:this.Git,objectClassIndex:this.xit,interpolationMode:this._at,resultMode:this.Iat,enabled:this.fu,id:this.Wc,nestedData:this.Nat,type:this.Jc,name:this.$n}}e5(t){t&&(this.Dat=t.instanceData,this.Git=t.instanceUid,this.xit=t.objectClassIndex,this._at=t.interpolationMode,this.Iat=t.resultMode,this.fu=t.enabled,this.Wc=t.id,this.Jc=t.type?t.type:0,this.$n=t.name?t.name:"",this.Wat=this.Mit.qtt().l$(),t.nestedData&&(this.Nat=t.nestedData,this.Bat=this.Nat[0],this.Wat=this.Nat[1]),t.additionalInstanceData&&(this.kat=t.additionalInstanceData),this.Qst().e5(t.keyframeDataJson),this.Bit().e5(t.propertyTrackDataJson))}}hg.Oat=class{constructor(t,s){this.itt=s,this.Hat=[],hg.W6.vat(this.Hat,t,og,this)}zn(){this.itt=null;for(const t of this.Hat)t.zn();hg.Sh(this.Hat),this.Hat=null}qtt(){return this.itt}nit(){const t=new og(null,this);return this.Hat.push(t),t}zat(t){return t.Qst().Fit()[0]}Jat(t){return t.Qst().Fit().at(-1)}Oet(t,s){const i=s.Qst().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.$O()===t)return e}}qat(t,s){const i=s.Qst().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.$O()>t)return e}}Eet(t,s){const i=s.Qst().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.$O()>=t)return e}}Ret(t,s){const i=s.Qst().Fit();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.$O()<=t)return e}}*Btt(){for(const t of this.Hat)yield t}i5(){return{trackDataItemsJson:this.Hat.map(t=>t.i5())}}e5(t){t&&hg.W6.Gat(this.Hat,t.trackDataItemsJson,og,this)}}}{const ag=self._s;class lg{constructor(t,s){this.ent=s,this.$at="",this.Xat=null,this.Fht=null,this.Jc=null,this.Yat=NaN,this.Kat=NaN,this._at="default",this.Iat="default",this.fu=!1,this.Zat=null,this.Qat=!0,t&&(this.$at=t[0][0],this.Xat=t[0].slice(1),this.Fht=t[1],this.Jc=t[2],this.Yat=t[3],this.Kat=t[4],this._at=t[5],this.Iat=t[6],this.fu=!!t[7],this.Zat=new ag.tlt(t[8],this),this.Qat=t[9])}zn(){this.Zat.zn(),this.Zat=null,this.ent=null,this.Xat=null}Bit(){return this.ent}ont(){return this.Zat||(this.Zat=new ag.tlt(null,this)),this.Zat}Yit(){return this.$at}Mnt(t){this.$at=t}xnt(){return this.Xat}_nt(t){this.Xat=t}Cnt(){return this.Fht}Rnt(t){this.Fht=t}X_(){return this.Jc}Fnt(t){this.Jc=t}knt(){return this.Yat}Lnt(t){this.Yat=t}Nnt(){return this.Kat}Bnt(t){this.Kat=t}Ytt(){return this._at}Ktt(t){this._at=t}Y7(){return this.Iat}Ztt(t){this.Iat=t}cet(){return this.fu}fet(t){this.fu=!!t}jnt(){return!!this.Qat}i5(){return{propertyKeyframeDataJson:this.Zat.i5(),sourceAdapterId:this.$at,sourceAdapterArguments:this.Xat,property:this.Fht,type:this.Jc,min:this.Yat,max:this.Kat,interpolationMode:this._at,resultMode:this.Iat,enabled:this.fu,canHavePropertyKeyframes:this.Qat}}e5(t){t&&(this.$at=t.sourceAdapterId,this.Xat=t.sourceAdapterArguments,this.Fht=t.property,this.Jc=t.type,this.Yat=t.min,this.Kat=t.max,this._at=t.interpolationMode,this.Iat=t.resultMode,this.fu=t.enabled,this.Qat=t.canHavePropertyKeyframes,this.ont().e5(t.propertyKeyframeDataJson))}}ag.Vat=class{constructor(t,s){this.bit=s,this.slt=[],ag.W6.vat(this.slt,t,lg,this)}zn(){this.bit=null;for(const t of this.slt)t.zn();ag.Sh(this.slt),this.slt=null}Zst(){return this.bit}jet(){const t=new lg(null,this);return this.slt.push(t),t}Dnt(t){return t.ont().hnt()[0]}Yrt(t){return t.ont().hnt().at(-1)}Vnt(t,s){const i=s.ont().hnt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.$O()===t)return e}}znt(t,s){const i=s.ont().hnt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.$O()>t)return e}}Jnt(t,s){const i=s.ont().hnt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.$O()>=t)return e}}Unt(t,s){const i=s.ont().hnt();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.$O()<=t)return e}}*Nit(){for(const t of this.slt)yield t}i5(){return{propertyTrackDataItemsJson:this.slt.map(t=>t.i5())}}e5(t){t&&ag.W6.Gat(this.slt,t.propertyTrackDataItemsJson,lg,this)}}}{const ug=self._s;class cg{constructor(t,s){if(this.Lat=s,this.HD=-1,this.ilt="noease",this.elt=!1,this.Ptt=null,this.nlt=null,!t)return;this.HD=t[0],this.ilt=t[1],this.elt=!!t[2];const i=t[3];this.Ptt=i?i.split(" "):[],this.nlt=new Set(this.Ptt.map(t=>t.toLowerCase())),this.rlt=null,this.hlt=null}zn(){this.Lat=null,ug.Sh(this.Ptt),this.Ptt=null,this.nlt.clear(),this.nlt=null,this.rlt=null}Qst(){return this.Lat}j7(){return this.rlt}olt(t){this.rlt=t}Fet(){return this.hlt}llt(t){this.hlt=t}$O(){return this.HD}o$(t){this.HD=t,this.Lat.ult()}art(){return this.ilt}I$(t){this.ilt=t}cet(){return this.elt}fet(t){this.elt=!!t}g$(){return this.Ptt}nst(t){this.Ptt=t?t.split(" "):[],this.nlt=new Set(this.Ptt.map(t=>t.toLowerCase()))}clt(){return this.nlt}yit(t){return this.nlt.has(t.toLowerCase())}i5(){return{time:this.HD,ease:this.ilt,enable:this.elt,tags:this.Ptt}}e5(t){t&&(this.HD=t.time,this.ilt=t.ease,this.elt=t.enable,this.Ptt=t.tags,this.nlt=new Set(this.Ptt.map(t=>t.toLowerCase())))}}ug.jat=class{constructor(t,s){this.bit=s,this.Eit=[],ug.W6.vat(this.Eit,t,cg,this),this.ult()}zn(){this.bit=null;for(const t of this.Eit)t.zn();ug.Sh(this.Eit),this.Eit=null}ult(){this.Eit.sort((t,s)=>t.$O()-s.$O());for(let t=0;t<this.Eit.length;t++){const s=this.Eit[t];s.olt(this.Eit[t+1]),s.llt(this.Eit[t-1])}}Zst(){return this.bit}flt(){return this.Eit.length}Fit(){return this.Eit}Bet(){const t=new cg(null,this);return this.Eit.push(t),this.ult(),t}Uet(t){for(const s of this.Eit){if(!t(s))continue;const i=this.Eit.indexOf(s);-1!==i&&(s.zn(),this.Eit.splice(i,1))}this.dlt(),this.ult()}dlt(){this.Eit.sort((t,s)=>t.$O()-s.$O())}Qet(t){return this.Eit.indexOf(t)}tnt(t){return this.Eit[t]}*plt(){for(const t of this.Eit)yield t}*mlt(){for(let t=this.Eit.length-1;t>=0;t--)yield this.Eit[t]}i5(){return{keyframeDataItemsJson:this.Eit.map(t=>t.i5())}}e5(t){t&&(ug.W6.Gat(this.Eit,t.keyframeDataItemsJson,cg,this),this.ult())}}}{const fg=self._s;class dg{constructor(t,s){this.Zat=s,this.sht=null,this.glt=null,this.Jc="",this.HD=NaN,this.ilt="noease",this.elt=!1,this.ylt=null,this.wlt=void 0,this.Slt="line",t&&(this.sht=t[0][0],this.glt=t[0][1],this.Jc=t[0][2],this.HD=t[1],this.ilt=t[2],this.elt=!!t[3],this.Slt=t[5],this.ylt=null,t[4]&&(this.ylt=new fg.vlt(t[4],this)),this.rlt=null,this.blt=null)}zn(){this.Zat=null,this.ylt&&(this.ylt.zn(),this.ylt=null),this.rlt=null,this.blt=null}Mlt(){return this.ylt}olt(t){this.rlt=t}j7(){return this.rlt}Glt(t){this.blt=t}V7(){return this.blt}Int(){return this.sht}lrt(t){"color"===this.Jc&&fg.Qi(t)?(this.sht[0]=fg.Pr(t),this.sht[1]=fg.Rr(t),this.sht[2]=fg.Ar(t)):this.sht=t}jht(){return this.glt}rrt(t){"color"===this.Jc&&fg.Qi(t)?(this.glt[0]=fg.Pr(t),this.glt[1]=fg.Rr(t),this.glt[2]=fg.Ar(t)):this.glt=t}n9(){const t=this.Zat.pnt().Y7();return"relative"===t?this.Int():"absolute"===t?this.jht():void 0}X_(){return this.Jc}Fnt(t){this.Jc=t}$O(){return this.HD}o$(t){this.HD=t,this.Zat.xlt()}art(){return this.ilt}I$(t){this.ilt=t}cet(){return this.elt}fet(t){this.elt=!!t}U7(){return this.Slt}i9(t){if(!this.ylt)return;if(this.wlt||null===this.wlt)return this.wlt;const s=this.ylt.Tlt();if(!s)return this.wlt=null,this.wlt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.E$()===t)return this.wlt=i,this.wlt}return this.wlt=null,this.wlt}i5(){const t=this.ylt;return{addonDataJson:t?t.i5():t,value:this.sht,aValue:this.glt,type:this.Jc,time:this.HD,ease:this.ilt,enable:this.elt}}e5(t){t&&(t.addonDataJson&&this.ylt._lt(t.addonDataJson),this.sht=t.value,this.glt=t.aValue,this.Jc=t.type,this.HD=t.time,this.ilt=t.ease,this.elt=t.enable)}}fg.tlt=class{constructor(t,s){this.int=s,this.rnt=[],this.Ilt=[],fg.W6.vat(this.rnt,t,dg,this),fg.W6.Mat(this.Ilt,t,dg,this),this.xlt()}zn(){this.int=null;for(const t of this.rnt)t.zn();fg.Sh(this.rnt),this.rnt=null;for(const t of this.Ilt)t.zn();fg.Sh(this.Ilt),this.Ilt=null}xlt(){let t=this.rnt;t.sort((t,s)=>t.$O()-s.$O());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.olt(t[s+1]),s-1>=0&&i.Glt(t[s-1])}t=this.Ilt,t.sort((t,s)=>t.$O()-s.$O());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.olt(t[s+1]),s-1>=0&&i.Glt(t[s-1])}}ert(){const t=new dg(null,this);return this.rnt.push(t),this.xlt(),t}nrt(t){for(const s of this.rnt){if(!t(s))continue;const i=this.rnt.indexOf(s);-1!==i&&(s.zn(),this.rnt.splice(i,1))}this.Clt(),this.xlt()}Clt(){this.rnt.sort((t,s)=>t.$O()-s.$O())}pnt(){return this.int}Plt(){return this.rnt.length}Yrt(){return this.rnt[this.rnt.length-1]}hnt(){return this.rnt}W7(){return this.Ilt}*Rlt(){for(const t of this.rnt)yield t}*Alt(){for(let t=this.rnt.length-1;t>=0;t--)yield this.rnt[t]}i5(){const t=this.rnt,s=this.Ilt;return{propertyKeyframeDataItemsJson:t.map(t=>t.i5()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.i5())}}e5(t){t&&(fg.W6.Gat(this.rnt,t.propertyKeyframeDataItemsJson,dg,this),fg.W6.Gat(this.Ilt,t.propertyKeyframeDataItemsIncludingDisabledJson,dg,this),this.xlt())}}}{const pg=self._s;class mg{constructor(t,s){this.ylt=s,this.Wc=t[0],this.Elt=t[1]}zn(){this.ylt=null,this.Elt=null}Mlt(){return this.ylt}E$(){return this.Wc}i5(){return{id:this.Wc,data:this.Elt}}e5(t){t&&(this.Wc=t.id,this.Elt=t.data)}}class gg extends mg{constructor(t,s){super(t,s),this.Flt=this.Elt[0],this.Olt=!!this.Elt[1],this.Dlt=this.Elt[2],this.klt=!!this.Elt[3]}zn(){super.zn()}o9(){return this.Flt}pat(){return this.Olt}u9(){return this.Dlt}mat(){return this.klt}i5(){return Object.assign(super.i5(),{startAnchor:this.Flt,startEnable:!!this.Olt,endAnchor:this.Dlt,endEnable:!!this.klt})}e5(t){t&&(super.e5(t),this.Flt=t.startAnchor,this.Olt=!!t.startEnable,this.Dlt=t.endAnchor,this.klt=!!t.endEnable)}}class yg extends mg{constructor(t,s){super(t,s),this.Llt=this.Elt[0],this.Nlt=this.Elt[1]}zn(){super.zn()}yat(){return this.Llt}gat(){return this.Nlt}i5(){return Object.assign(super.i5(),{direction:this.Llt,revolutions:this.Nlt})}e5(t){t&&(super.e5(t),this.Llt=t.direction,this.Nlt=t.revolutions)}}pg.vlt=class{constructor(t,s){this.Blt=s,this.Wlt=[],pg.W6.vat(this.Wlt,t,{xat:0,map:new Map([["cubic-bezier",gg],["angle",yg]])},this)}zn(){this.Blt=null;for(const t of this.Wlt)t.zn();pg.Sh(this.Wlt),this.Wlt=null}jlt(){return this.Blt}Tlt(){return this.Wlt}*Vlt(){for(const t of this.Wlt)yield t}i5(){return{addonDataItemsJson:this.Wlt.map(t=>t.i5())}}e5(t){t&&pg.W6.Gat(this.Wlt,t.addonDataItemsJson,{xat:"id",map:new Map([["cubic-bezier",gg],["angle",yg]])},this)}}}{const wg=self._s;let Sg=0;wg.$ot=class extends wg.v8{constructor(t,s){super("tween-"+Sg++,t,s),this.Wc="",this.Ult=!1,this.Hlt="start-value",this.Tit=null,this.zlt=null,this.Jlt=null,this.qlt=null,this.snt=null,this.$lt=null}Ltt(t){const s=wg.Hn(wg.Event,"tweenstatereleased");s.Xlt=this,t.dispatchEvent(s)}X_(){return 1}att(){for(const t of this.itt.Wtt().Btt())this.ett.push(wg.Ylt.HT(this,t));this.snt=this.ett[0]}eit(){const t=this.itt.Wtt().nit(),s=wg.Ylt.HT(this,t);return this.ett.push(s),this.Klt(),s}Klt(){this.snt=this.ett[0]}O$(t){return this.snt.fit()[0]}Ent(t){this.Zlt=t}C$(){const t=this.L7();if(!t||!t.length)return;const s=t[0];if(this.snt=s,!s)return;const i=s.C$();return s.Uit()?i:void 0}Qlt(t){this.qlt=t}tut(t){this.Jlt||(this.Jlt=[]),this.Jlt.push(t)}sut(t){this.zlt||(this.zlt=[]),this.zlt.push(t)}iut(t){if(!this.Jlt)return;const s=this.Jlt.indexOf(t);-1!==s&&this.Jlt.splice(s,1)}eut(t){if(!this.zlt)return;const s=this.zlt.indexOf(t);-1!==s&&this.zlt.splice(s,1)}nut(t,s){for(const i of this.ett)for(const e of i.Oit){if(e.dit()!==s)continue;const i=e.Bit(),n=e.pnt(),r=i.Dnt(n);r.lrt(t),r.rrt(t)}}rut(t){for(const s of this.ett)for(const i of s.Oit)if(i.dit()===t)return i}hut(t){let s=!1;for(const i of t){const t=this.rut(i);t&&(this.nut(t.Xnt(),i),s=!0)}if(s){if(this.est()){const t=this.l$()-this.$O();this.a$(t);for(const s of this.ett)s.uet(t);this.Cst(0)}else{const t=this.$O();this.a$(t);for(const s of this.ett)s.uet(t);this.Cst(t)}this.Pst()}}out(t,s){const i=this.rut(s);if(!i)return;const e=i.Bit(),n=i.pnt(),r=e.Yrt(n);r.o$(this.l$()),r.lrt(t),r.rrt(t)}aut(t){this.Wc=t}E$(){return this.Wc}lut(t){this.Hlt=t}uut(){return this.Hlt}A$(t){this.Ult=t}R$(){return this.Ult}ast(){if(this.Jlt)for(const t of this.Jlt)t(this);if(!this.p7())for(const t of this.ett)t.qet()}gst(){this.Gtt=this.Nc.kN()}g7(){if(!this._tt&&(this._tt=!0,this.zlt))for(const t of this.zlt)t(this)}o$(t){this.cut(),super.o$(t)}Ost(t){wg.Qi(t)||(t=this.l$()),t<0?this.ctt=0:t>=this.l$()?this.ctt=this.l$():this.ctt=t,this.snt.Dst()}h7(t){if(!this.m7()&&"current-state"===this.uut())for(const t of this.ett)t.Jet();super.h7(t)}n$(t=!1){if(super.n$(t),!this.p7())for(const t of this.ett)t.zet()}Bf(t=!0,s=!1){this.cut(),super.Bf(t,s)}cut(){for(const t of this.ett){const s=t=>{const s=t.$O(),i=this.l$();return 0!==s&&s!==i};t.Vet(s),t.Het(s)}}n8(){if(this.i$())return!0;const t=this.C$();return!(t&&t.cH().WQ()||(this.stt.i7(this),this.Ust(),0))}u7(t,s,i){if(this.Tit||(this.Tit=this.C$()),!this.Tit||this.Tit.wX())return this.n$(!0),void this.gst();const e=this.Tit.WN();if(-1!==e&&(t=i*e),0===t&&0===this.Ctt)return;this.Ctt=t;const n=this.ctt+this.ftt+t*this.dtt,r=this.itt.$st;n<0?(this.ctt=0,this.ftt=-n):n>=r?(this.ctt=r,this.ftt=this.ctt-n):(this.ctt=n,this.ftt=0);let h=!1,o=!1;const a=this.c$(),l=this.d$();if(a||l?a&&!l?this.dtt>0?this.ctt>=r&&(this.Ost(0),this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),o=!0):this.ctt<=0&&(this.Ost(r),this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),o=!0):!a&&l?this.dtt>0?this.ctt>=r&&(this.Cst(r),this.p$(-1*this.m$()),o=!0,1===this.ptt?this.gtt<this.Cq()?(this.gtt++,this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=0:this.mtt=0):(this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut),h=!0):0===this.ptt&&(this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=1:this.mtt=1)):this.ctt<=0&&(this.Cst(0),this.p$(-1*this.m$()),o=!0,1===this.ptt?this.gtt<this.Cq()?(this.gtt++,this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=0:this.mtt=0):(h=!0,this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut)):0===this.ptt&&(this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut),this.IsPlaying()?this.ptt=1:this.mtt=1)):a&&l&&(this.dtt>0?this.ctt>=r&&(this.Cst(r),this.p$(-1*this.m$()),o=!0,0===this.ptt&&(this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut)),1===this.ptt&&(this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut)),this.IsPlaying()?(this.ptt++,this.ptt=wg.wrap(this.ptt,0,2)):(this.mtt=this.ptt+1,this.mtt=wg.wrap(this.mtt,0,2))):this.ctt<=0&&(this.Cst(0),this.p$(-1*this.m$()),o=!0,0===this.ptt&&(this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut)),1===this.ptt&&(this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),this.fut(wg.gut.mut.QB.wut),this.fut(wg.gut.mut.QB.Sut)),this.IsPlaying()?(this.ptt++,this.ptt=wg.wrap(this.ptt,0,2)):(this.mtt=this.ptt+1,this.mtt=wg.wrap(this.mtt,0,2)))):this.dtt>0?this.ctt>=r&&(this.gtt<this.Cq()?(this.gtt++,this.Ost(0),this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),o=!0):(this.Cst(r),h=!0)):this.ctt<=0&&(this.gtt<this.Cq()?(this.gtt++,this.Ost(r),this.fut(wg.gut.mut.QB.dut),this.fut(wg.gut.mut.QB.yut),o=!0):(this.Cst(0),h=!0)),!this.i$()&&this.IsPlaying()){if(h)return this.snt.Xst(),this.n$(!0),void this.gst();this.snt.Sc(this.ctt,!0,!1,o,this.Itt,!1),this.Itt&&(this.Itt=!1)}}fut(t){const s=this.C$();this.qlt.vut(this),this.Nc.qH(t,s,this.qlt.cq()),this.qlt.but()}i5(){const t=super.i5(),s=this.qtt();return Object.assign(t,{tweenDataItemJson:s.i5(),id:this.Wc,destroyInstanceOnComplete:this.Ult,initialValueMode:this.Hlt})}e5(t){t&&(this.qtt().e5(t.tweenDataItemJson),super.e5(t),this.Wc=t.id,this.Ult=t.destroyInstanceOnComplete,this.Hlt=t.initialValueMode,this.Klt())}static IsPlaying(t){return t.IsPlaying()}static v$(t){return t.v$()}static Mut(t){return!!t.d$()&&0===t.ist()}static Gut(t){return!!t.d$()&&1===t.ist()}static xut(t){const s=t.runtime.Vtt(),i=new wg.Sat;if(t.json){i.e5(t.json.tweenDataItemJson);const e=new wg.$ot(i,s);return e.e5(t.json),e}{const e=new wg.$ot(i,s);wg.Ge(t.Tut)||(t.Tut=[t.Tut]),e.aut(t.id),e.nst(t.tags),e.lut(t._ut),e.A$(t.Iut),e.u$(t.loop),e.f$(t.Cut),e.a$(t.time),e.Xtt(0),e.Ktt("default"),e.Ztt(t.Tut[0].Put),e.Qtt(t.Iq);const n=e.eit();n.aet(t.fq.xH()),n.Ktt("default"),n.Ztt(t.Tut[0].Put),n.fet(!0),n.det(t.fq.cH().ML());const r=t.fq.sq(),h=r.yet()?r.met():t.fq.DB().Vg(),o=r.yet()?r.vet():t.fq.DB().Zg();n.pet(h),n.wet(o);const a=n.Net();a.o$(0),a.I$("noease"),a.fet(!0),a.nst("");const l=n.Net();l.o$(t.time),l.I$("noease"),l.fet(!0),l.nst("");for(const s of t.Tut){const i=n.Wet();i.Mnt(s.Rut),i.Tnt(s.Aut),i.Pnt(s.ret),i.Ent(s.type),i.Lnt(NaN),i.Bnt(NaN),i.Ktt("default"),i.Ztt(s.Put),i.fet(!0);const e=i.irt();e.Fnt(s.valueType),e.o$(0),e.I$(s.Eut),e.fet(!0),e.lrt(s.Fut),e.rrt(s.Fut);const r=i.irt();r.Fnt(s.valueType),r.o$(t.time),r.I$(s.Eut),r.fet(!0),r.lrt(s.Out),r.rrt(s.Out),i.Htt()}return e}}static aet(t,s){if(!isNaN(s))for(const i of t.L7())i.aet(s)}static Qlt(t,s){t.Qlt(s)}Dut(t,s){return this.$lt||(this.$lt=wg.Hn(self.G$,this,t,s)),this.$lt}}}{const vg=self._s;vg.Ylt=class extends vg.jtt{constructor(t,s){super(t,s),this.kut=null,this.Lut=null}static HT(t,s){return vg.Hn(vg.Ylt,t,s)}Nut(){1===this.Oit.length?this.kut=this.Oit[0]:(this.kut=this.Oit[0],this.Lut=this.Oit[1])}Dit(){for(const t of this.bit.Bit().Nit())this.Oit.push(vg.But.HT(this,t));this.Nut()}Wet(){const t=this.bit.Bit().jet(),s=vg.But.HT(this,t);return this.Oit.push(s),this.Nut(),s}h7(){if(this.Vit(),!this.Uit()&&this.Jtt())return;const t=this.jit().est()?0:this.let();for(const s of this.Oit)s.h7(t),0===this.kit&&1===s.Get()&&(this.kit=1),0===this.g8&&1===s.o7()&&(this.g8=1);this.Lit=0,this.Oit.some(t=>t.qst())&&(this.Lit=1),this.Ait=this.xet(t),this.Cit=!1,this.Pit=!1,this.Sc(t)}Yst(){}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Tit||this.C$(),this.Tit)return!this.Tit.wX()&&(!r||!this.cH().WQ())&&(this.Lut?(this.kut.Sc(t,i,e,h),this.Lut.Sc(t,i,e,h)):this.kut.Sc(t,i,e,h),void(0!==this.kut.Get()&&(this._it||(this._it=this.Tit.DB()),this._it&&this._it.Mz())))}tit(){}e5(t){super.e5(t),this.Nut()}}}{const bg=self._s;bg.But=class extends bg.Wit{constructor(t,s){super(t,s),this.Wut=!1}static HT(t,s){return bg.Hn(bg.But,t,s)}Sc(t,s=!1,i=!1,e=!1){let n,r;if(this.Wut)n=this.rnt[0],r=this.rnt[1];else if(s)n=this.ent.Unt(t,this.int),r=n.j7();else{if(this.ant){const s=this.jit(),i=this.ant.j7(),e=this.ant.$O(),n=i?i.$O():s.l$();(t<=e||t>=n)&&(this.ant=this.ent.Unt(t,this.int))}else this.ant=this.ent.Unt(t,this.int);n=this.ant,r=n.j7()}this.nnt.Sc(t,n,r,s,i,e)}irt(){const t=this.int.ont().ert();return this.ant=null,this.Wut=this.Wnt().length<=2,t}Het(t){this.ant=null,this.int.ont().nrt(t),this.Wut=this.Wnt().length<=2}i5(){return{sourceAdapterJson:this.Htt().i5(),basic:this.Wut}}e5(t){t&&(this.Htt().e5(t.sourceAdapterJson),this.Wut=t.basic)}}}{const Mg=self._s,Gg=self.Vu;Mg.vc=class extends Mg.Vn{constructor(t,s=!0){super(),this.$n=t[0],this.jut=t[2],this.Vut=[];for(const s of t[1]){const t=Mg.Uut.HT(this,s);this.Vut.push(t)}for(let t=0;t<this.Vut.length;t++){const s=this.Vut[t],i=this.Vut[t+1],e=this.Vut[t-1];s.olt(i),s.Glt(e)}this.Hut=new Map,this.zut=new Map,this.Jut(),s&&Gg.Mc(this.$n,(t,s,i,e)=>this.Sc(t,s,i,e),null,{transition:this})}static HT(t){return Mg.Hn(Mg.vc,t)}zn(){for(const t of this.Vut)t.zn();Mg.Sh(this.Vut),this.Vut=null,this.Hut.clear(),this.Hut=null,this.zut.clear(),this.zut=null}bc(t){this.jut=!!t}qut(t){const s=this.zut.get(t);if(s)return s;for(const s of this.Vut)if(s.$ut()===t)return this.zut.set(t,s),s}Xut(t){for(let s=this.Vut.length-1;s>=0;s--){const i=this.Vut[s],e=i.$ut();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.V7();if(!t)break;if(t.$ut()!==s.$ut())break;s=t}return s}}}}Sc(t,s,i,e){let n=t/e;if(this.jut){const n=this.qut(0),r=this.qut(1),h=s+(s+i)*n.Yut(),o=(s+i)*r.Yut()-h;return 0===e?h+o:Gg.xc(t,h,o,e)}0===e&&(n=1);let r=this.Xut(n),h=r.j7();if(!h){const t=r.V7(),s=r;r=t,h=s}const o=h.$ut()-r.$ut(),a=Mg.Xn(n,r.$ut(),h.$ut(),0,o);if(r.Kut()||0===o){const t=s+(s+i)*r.Yut(),e=(s+i)*h.Yut()-t;return 0===o?1===a?t+e:t:Gg.xc(a,t,e,o)}const l=r.$ut(),u=r.Yut(),c=r.$ut()+r.Zut(),f=r.Yut()+r.Qut(),d=h.$ut()+h.tct(),p=h.Yut()+h.sct(),m=h.$ut(),g=h.Yut();let y=Gg.rc("spline")(a,l,u,c,f,d,p,m,g,this.Hut.get(r));return y+=r.Yut(),(1-y)*s+y*(s+i)}Jut(){this.Hut.clear();for(let t=0;t<this.Vut.length-1;t++){const s=this.Vut[t];if(!s.pat())continue;const i=s,e=this.Vut[t+1];if(!e.mat())continue;const n=i.$ut(),r=i.$ut()+i.Zut(),h=e.$ut()+e.tct(),o=e.$ut();this.Hut.set(i,Gg.Tc(n,r,h,o))}}}}{const xg=self._s;xg.Uut=class extends xg.Vn{constructor(t,s){super(),this.ict=t,this.ect=s[0],this.nct=s[1],this.rct=s[2],this.hct=s[3],this.oct=s[4],this.act=s[5],this.Olt=s[6],this.klt=s[7],this.lct=s[8],this.rlt=null,this.blt=null}zn(){this.ict=null}static HT(t,s){return xg.Hn(xg.Uut,t,s)}olt(t){this.rlt=t}j7(){return this.rlt}Glt(t){this.blt=t}V7(){return this.blt}$ut(){return this.ect}Yut(){return this.nct}Zut(){return this.rct}Qut(){return this.hct}tct(){return this.oct}sct(){return this.act}pat(){return this.Olt}mat(){return this.klt}Kut(){return"linear"===this.lct}uct(){return"cubic"===this.lct}}}{const Tg=self._s;Tg.cct=class extends Tg.Vn{constructor(t){super(),this.Nc=t,this.fct=[]}zn(){for(const t of this.fct)t.zn();Tg.Sh(this.fct),this.fct=null}HT(t){this.fct.push(Tg.vc.HT(t))}}}{const _g=self._s;_g.dct=class extends _g.Vn{constructor(t){super(),this.Nc=t,this.pct=null,this.mct=null,this.o8=t=>this.a8(t.fq)}zn(){if(this.y8(),this.pct){for(const t of this.pct.values())t.clear();this.pct.clear()}this.pct=null,this.Nc=null}HT(t){if(this.pct||(this.pct=new Map),!t)return;const s=t[0][16][0],i=t[1];this.pct.has(i)||this.pct.set(i,new Map),this.pct.get(i).set(s,t)}w8(){const t=this.Nc.wf();t&&t.addEventListener("instancedestroy",this.o8)}y8(){const t=this.Nc.wf();t&&t.removeEventListener("instancedestroy",this.o8)}gct(){return!!this.pct&&0!==this.pct.size}yct(t,s){let i=0;if(i=t instanceof _g.wct?t.ML():t,!this.pct.has(i))return;const e=this.pct.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}Sct(t,s){this.mct||(this.mct=new WeakMap),this.mct.has(t)||this.mct.set(t,s)}vct(t){if(!this.mct)return"";return this.mct.get(t)||""}a8(t){this.mct&&this.mct.has(t)&&this.mct.delete(t)}}}{const Ig=self._s;Ig.bct=class{constructor(t){this.Nc=t,this.Mct=new Ig.Gct}zn(){this.Mct.zn(),this.Mct=null,this.Nc=null}aW(){return this.Nc}HT(t){this.Mct.Bu(t)}xct(t){return this.Mct.zs(t)}Tct(){return this.Mct.Tct()}}}{const Cg=self._s;Cg._ct=class{constructor(t,s,i,e,n,r,h){this.Nc=n.aW(),this.Ict=n,this.Cct=t,this.Pct=i,this.Rct=e,this.Aw=s,this.j6=r,this.Act=h??r.C$().xH(),this.Ect(),this.Fct=this.Dct?.Oct()??-1,this.kct=[],this.Lct=null,this.Nct=NaN,this.Bct=null,this.Wct=null,this.jct=null,this.Vct="",this.Uct=null,this.Hct="",this.zct="",this.Jct=0,this.qct=!1,this.btt=!1}zn(){this.btt||(Cg.Sh(this.kct),this.kct=null,this.Nc=null,this.Ict=null,this.Rct=null,this.j6=null,this.Lct=null,this.Nct=NaN,this.Bct&&this.Bct.clear(),this.Bct=null,this.Wct=null,this.jct=null,this.Vct="",this.Uct=null,this.Hct="",this.zct="",this.btt=!0)}Jn(){return this.btt}$ct(){return this.Ict}aW(){return this.Nc}Pc(){return this.Cct}Xct(){return this.Rct}s$(){return this.Aw}E8(){return this.j6||(this.j6=this.Nc.PB(this.Act).sq()),this.j6}Yct(){return this.Kct(this.Fct)}Zct(){const t=this.Yct();return t?t.s$():""}Qct(){const t=this.Yct();return t?t.g$():[]}tft(t){const s=this.Qct();if(!s)return!1;if(!s.length)return!1;const i=Cg._ct.rst(t);return!(!i||!i.length)&&i.every(Cg._ct.ost,s)}sft(t,s){const i=this.Qct();if(!i)return!1;if(!i.length)return!1;const e=Cg._ct.rst(t);return!(!e||!e.length)&&e.every(t=>Cg._ct.ift.call(i,t,s))}static ost(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static rst(t){return t.trim().split(" ")}static ift(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>Cg.compare(i.trim(),s,t.trim()))}eft(t){const s=this.Yct();if(s){if(Cg.Qi(t)){const i=s.nft(),e=i?i[t]:void 0;if(Cg.Qi(e))return this.Kct(e)}if("string"==typeof t)for(const i of s.nft()){const s=this.Kct(i);if(s.h$(t))return this.Kct(s.Oct())}}}rft(t){const s=this.eft(t);return s?s.s$():""}hft(t){const s=this.eft(t);return s?s.g$():""}oft(t){const s=this.Yct();if(!s)return-1;const i=s.nft();if(!i)return-1;const e=this.eft(t);return e?i.indexOf(e.Oct()):-1}aft(){const t=this.Yct();if(!t)return 0;const s=t.nft();return s?s.length:0}Kct(t){return this.Rct.Kct(t)}Bf(){this.uft().lft(!0)}lft(t){if(this.cft()){for(const[t,s]of this.cft().entries())s.lft(!1);this.cft().clear()}if(this.Bct=null,this.Lct=null,this.fft=null,this.Wct=null,this.Vct="",this.Uct=null,this.Hct="",this.zct="",this.kct=[],t){this.Ict.dft(this);const t=this.Dct.Oct();t!==this.Fct&&this.pft(t)}else this.Fct=this.Dct.Oct()}mft(){const t=this.Rct.Kct(this.Fct);return t?t.yft().gft():0}wft(t){return!(t<0)&&t===this.Sft()}Sft(){const t=this.Rct.Kct(this.Fct);if(!t)return-1;let s=t.yft().vft();return s?t.yft().bft().indexOf(s):-1}Mft(t){const s=this.Gft(t);return s?s.Pc():""}xft(t){let s;return Cg.Qi(t)&&(s=this.Gft(t)),"string"==typeof t&&(s=this.Tft(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Int():""}_ft(t,s){if(t.cet())return t.Oct();{const i=t.yft().vft();if(!i)return s.Oct();const e=i.Ift();if(!Cg.Qi(e))return s.Oct();const n=this.Kct(e);return n?this._ft(n,s):s.Oct()}}Cft(t,s){if(t.cet()){if("reference"===t.X_()){const s=t.Pft(),i=t.Rft(),e=this.Ict.xct(s);if(!e)return[-1,null];const n=e.Aft(i);return n?this.Cft(n,e):this.Cft(e.Eft(),e)}return[t.Oct(),s]}{const i=t.yft().vft();if(!i)return[-1,null];const e=i.Ift();if(!Cg.Qi(e))return[-1,null];const n=s.Kct(e);return n?this.Cft(n,s):[-1,null]}}Fft(t,s){let i=this.Kct(t);if(i){if(!i.cet()){const s=this.Kct(this.Fct);t=this._ft(i,s)}if(Cg.Qi(t)&&t!==this.Fct)if(i=this.Kct(t),"reference"===i.X_()){const e=i.Pft(),n=i.Rft(),r=this.Ict.xct(e);let h=r.Aft(n);if(h){const i=this.Cft(h,r);if(-1===i[0])return;s(this.Fct,t,i[1],i[0])}else s(this.Fct,t)}else s(this.Fct,t)}}Oft(t){let s;if(Cg.Qi(t)&&(s=this.Gft(t)),"string"==typeof t&&(s=this.Tft(t)),!s)return;let i=s.Ift();Cg.Qi(i)&&this.Fft(i,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Dft(){const t=this.kft();if(!t)return;const s=t.Ift();Cg.Qi(s)&&this.Fft(s,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Lft(t){const s=this.Rct.Aft(t);if(!s)return;const i=s.Oct();Cg.Qi(i)&&this.Fft(i,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Nft(){const t=this.kct.pop();Cg.Qi(t)?this.pft(t):this.Bft()&&(this.Ict.dft(this.Bft(),!0,!1,!1),this.Bft().pft(this.Wft()),this.uft().jft(this.Bft()))}Vft(t){if(!this.Yct())return;const s=this.eft(t);if(s){if(!s.cet())return;const t=s.Oct();if(!Cg.Qi(t))return;this.kct.push(this.Fct),this.pft(s.Oct())}}Uft(t){if(Cg.Qi(t))return!!this.Rct.Kct(this.Fct).yft().bft()[t];if("string"==typeof t){const s=this.Rct.Kct(this.Fct).yft().bft();for(let i=0;i<s.length;i++)if(s[i].Pc()===t)return!0;return!1}return!1}Hft(){this.qct=!0}zft(){return this.Jct>0}Jft(){this.Jct++}qft(){this.Jct--,0===this.Jct&&this.qct&&this.Ict.$ft(this)}pft(t,s,i){const e=this.Fct,n=this.E8().C$();this.Jft(),this.Ict.Xft(this),this.Nc.qH(Cg.sW.Kft.QB.Yft,n),this.Nc.qH(Cg.sW.Kft.QB.Zft,n),this.Nc.qH(Cg.sW.Kft.QB.Qft,n),this.Nc.qH(Cg.sW.Kft.QB.tdt,n),this.Fct=t;let r=this.Kct(this.Fct);if("dictionary"===r.X_()&&(this.Nc.qH(Cg.sW.Kft.QB.sdt,n),this.Nc.qH(Cg.sW.Kft.QB.idt,n),this.Nc.qH(Cg.sW.Kft.QB.edt,n),this.Nc.qH(Cg.sW.Kft.QB.ndt,n)),this.Ict.rdt(),this.qft(),!this.Jn()&&(r=this.Kct(this.Fct),"reference"===r.X_())){const t=s?s.Pc():r.Pft();if(this.hdt(r)){this.kct.pop();const t=this.odt(r);this.Ict.dft(t,!0,!0,!1),t.adt(this,e),this.uft().jft(t)}else{const s="number"==typeof i?i:r.Rft();if(t){this.kct.pop();let i=r.ldt();if(i){let t=this.Ict.udt(i);for(;t;)i=Cg._m(i),t=this.Ict.udt(i)}else{i=`${t}-ref`;let s=this.Ict.udt(i);for(;s;)i=Cg._m(i),s=this.Ict.udt(i)}const n=this.Ict.cdt(t,s,i,this.j6,!0);n.adt(this,e),this.fdt(r,n);const h=this.uft();n.ddt(h),h.jft(n)}}}}kft(){const t=this.Rct.Kct(this.Fct);return t?t.yft().vft():null}Gft(t){const s=this.Rct.Kct(this.Fct);if(!s)return null;const i=s.yft().bft();if(!i)return null;return i[t]||null}Tft(t){const s=this.Rct.Kct(this.Fct);if(!s)return null;return s.yft().pdt(t)||null}Ect(t){if("number"==typeof t){let s=this.Kct(t);s||(s=this.Rct.Eft()),this.Dct=s}else if("number"==typeof this.Pct){let t=this.Kct(this.Pct);t||(t=this.Rct.Eft()),this.Dct=t}else{let t=this.Rct.Aft(this.Pct);t||(t=this.Rct.Eft()),this.Dct=t}}i5(){return this.qct?null:{flowchartName:this.Cct,flowchartTag:this.Aw,startNodeTag:this.Pct,currentNodeId:this.Fct,previousNodeIds:this.kct,pluginUID:this.j6.C$().xH(),reference:{previousFlowchartTag:this.Bft()?this.Bft().s$():"",previousStartNodeId:Cg.Qi(this.Wft())?this.Wft():NaN,referencesJson:this.mdt(),currentReferenceFlowchartTag:this.gdt()?this.gdt().s$():"",rootFlowchartTag:this.uft()?this.uft().s$():""}}}mdt(){if(!this.ydt())return null;const t=[];for(const[s,i]of this.cft().entries())t.push({flowchartElementId:s.Oct(),flowchartStateTag:i.s$()});return t.length?t:null}e5(t){if(t){if(this.Cct=t.flowchartName,this.Aw=t.flowchartTag,this.Pct=t.startNodeTag,this.Fct=t.currentNodeId,this.kct=t.previousNodeIds,this.Act=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Vct=s.previousFlowchartTag,this.Nct=s.previousStartNodeId,this.Uct=s.referencesJson,this.Hct=s.currentReferenceFlowchartTag,this.zct=s.rootFlowchartTag}this.Ect()}}Bft(){return"string"==typeof this.Vct&&this.Vct&&(this.Lct=this.Ict.udt(this.Vct),this.Vct=""),this.Lct}Wft(){return this.Nct}adt(t,s){this.Lct=t,this.Nct=s}gdt(){return"string"==typeof this.Hct&&this.Hct&&(this.Wct=this.Ict.udt(this.Hct),this.Hct=""),this.Wct}jft(t){this.Wct=t,this.Wct===this&&(this.Wct=null)}uft(){return"string"==typeof this.zct&&this.zct&&(this.jct=this.Ict.udt(this.zct),this.zct=""),this.jct?this.jct:this}ddt(t){this.jct=t}ydt(){return this.wdt(),!!this.Bct}hdt(t){return this.wdt(),this.Bct&&this.Bct.has(t)}wdt(){if(this.Uct){this.Bct&&this.Bct.clear(),this.Bct||(this.Bct=new Map);for(const t of this.Uct){const s=this.Ict.udt(t.flowchartStateTag),i=s.Kct(t.flowchartElementId);this.Bct.set(i,s)}this.Uct=null}}cft(){return this.wdt(),this.Bct}odt(t){return this.wdt(),this.Bct.get(t)}fdt(t,s){this.Bct||(this.Bct=new Map),this.Bct.set(t,s)}}}{const Pg=self._s;Pg.Sdt=class{constructor(t){this.Nc=t,this.vdt=new Map,this.bdt=null,this.Mdt=[],this.Gdt=()=>this.f8(),this.xdt=null}zn(){Pg.Sh(this.Mdt),this.Mdt=null,this.vdt.clear(),this.vdt=null,this.bdt=null,this.Nc=null,this.xdt=null}aW(){return this.Nc}xct(t){return this.Nc.$ct().xct(t)}cdt(t,s,i,e,n,r){const h=this.Nc.$ct().xct(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.vdt.has(i)){const t=this.vdt.get(i);t&&this.$ft(t)}const o=new Pg._ct(t,i,s,h,this,e,r);return this.vdt.set(i,o),n&&this.dft(o,!0),o}$ft(t){if(t.Hft(),t.zft())return;const s=t.s$();this.vdt.delete(s),t.zn(),this.bdt===t&&(this.bdt=null)}Tdt(t){t.Bf()}udt(t){return this.vdt.get(t)}Xft(t){this.Mdt.push(t)}rdt(){this.Mdt.pop()}dft(t,s=!1,i=!1,e=!0){if(e){const s=t.gdt();t=s||t}t!==this.bdt&&(this._dt(),this.Idt(t,s,i))}Cdt(t){return"string"==typeof t?this.udt(t):this.Mdt.length?this.Mdt[this.Mdt.length-1]:this.bdt}_dt(){if(!this.bdt)return;if(this.bdt.Jn())return;const t=this.bdt.E8().C$();this.bdt.Jft(),this.Xft(this.bdt),this.Nc.qH(Pg.sW.Kft.QB.Pdt,t),this.rdt(),this.bdt.qft()}Idt(t,s=!1,i=!1){if(this.bdt=t,!this.bdt)return;if(this.bdt.Jn())return;const e=this.bdt.E8().C$();this.bdt.Jft(),this.Xft(this.bdt),this.Nc.qH(Pg.sW.Kft.QB.Rdt,e),!0!==i&&"number"!=typeof i||this.bdt.Ect(i),s&&(this.Nc.qH(Pg.sW.Kft.QB.sdt,e),this.Nc.qH(Pg.sW.Kft.QB.idt,e),this.Nc.qH(Pg.sW.Kft.QB.edt,e),this.Nc.qH(Pg.sW.Kft.QB.ndt,e)),this.rdt(),this.bdt.qft()}i5(){return{flowchartJsonObjects:[...this.vdt.values()].map(t=>t.i5()),currentFlowchartTag:this.bdt?this.bdt.s$():null}}e5(t){if(!t)return;this.xdt=t;const s=new Map;for(const t of this.xdt.flowchartJsonObjects){const i=t.flowchartTag;if(this.vdt.has(i)){const e=this.vdt.get(i);e.e5(t),s.set(i,e)}else{const i=this.cdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.e5(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.vdt.entries())s.has(t)||i.zn();this.vdt.clear(),this.vdt=s,this.Nc.L4()?this.Nc.wf().addEventListener("afterload",this.Gdt):this.f8()}f8(){this.Nc.wf().removeEventListener("afterload",this.Gdt);const t=this.vdt.get(this.xdt.currentFlowchartTag);t&&this.dft(t,!0),this.xdt=null}}}{const Rg=self._s;Rg.Gct=class{constructor(){this.Adt=new Map}zn(){for(const t of this.Adt.values())t.zn();this.Adt.clear(),this.Adt=null}Bu(t){const s=new Rg.Edt(t),i=s.Pc();this.Adt.set(i,s)}zs(t){return this.Adt.get(t)}Tct(){return!!this.Adt.size}static Fdt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const Ag=self._s;Ag.Edt=class{constructor(t){this.$n=t[0],this.Odt=new Ag.Ddt(t[1],this)}zn(){this.Odt.zn(),this.Odt=null}kdt(){return this.Odt}Kct(t){return this.Odt.Kct(t)}Aft(t){return this.Odt.Aft(t)}Eft(){return this.Odt.Eft()}Pc(){return this.$n}}}{const Eg=self._s;class Fg{constructor(t,s){this.Odt=s,this.Jc=t[7],this.Ldt=t[0],this.Aw=t[1],this.Aw?this.Ptt=this.Aw.trim().split(" ").map(t=>t.trim()):this.Ptt=[],this.Ndt=t[2],this.Bdt=null,this.Wdt=null,this.elt=!1,"dictionary"===this.Jc&&(this.Bdt=t[3],this.Wdt=t[4],this.elt=t[8]),this.jdt=t[6],this.Vdt=null,this.Udt=null,this.Hdt=null,"reference"===this.Jc&&(this.Vdt=t[8],this.Udt=t[9],this.Hdt=t[10],this.elt=t[11]),this.zdt=new Eg.Jdt(t[5],this)}zn(){this.Odt=null}kdt(){return this.Odt}yft(){return this.zdt}Oct(){return this.Ldt}s$(){return this.Aw}g$(){return this.Ptt}h$(t){if(!this.Ptt)return!1;if(!this.Ptt.length)return!1;const s=Eg._ct.rst(t);return!(!s||!s.length)&&s.every(Eg._ct.ost,this.Ptt)}qdt(){return this.jdt}$dt(t){this.jdt=!!t}Xdt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}nft(){return this.Ndt}Ydt(){return this.Bdt}Kdt(){return this.Wdt}X_(){return this.Jc}cet(){return this.elt}Pft(){return this.Vdt}Rft(){return this.Udt}ldt(){return this.Hdt}}Eg.Ddt=class{constructor(t,s){this.Rct=s,this.Zdt=[],this.Qdt=new Map,this.tpt=new Map,this.spt=null,Eg.Gct.Fdt(this.Zdt,t,Fg,this);for(const t of this.Zdt){const s=t.Oct(),i=t.s$(),e=t.g$(),n=t.qdt();if(this.Qdt.set(s,t),i)for(const s of e)this.tpt.has(s)||this.tpt.set(s,new Set),this.tpt.get(s).add(t);n&&(this.spt=t);const r=t.yft();for(const t of r.ipt()){const s=t.Oct();this.Qdt.set(s,t)}}this.spt||this.ept()}zn(){this.Rct=null;for(const t of this.Zdt)t.zn();Eg.Sh(this.Zdt),this.Zdt=null}Xct(){return this.Rct}Kct(t){return this.Qdt.get(t)}Aft(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.tpt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}Eft(){return this.spt}*npt(){for(const t of this.Zdt)yield t}ept(){let t=0;for(const s of this.npt())s.qdt()&&t++;if(0===t){for(const t of this.npt())if(t.Xdt()&&!t.qdt())return void t.$dt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.npt())s.Xdt()&&(s.qdt()&&t?t=!1:s.qdt()&&!t&&s.$dt(!1))}}for(const t of this.npt())if(t.Xdt()&&t.qdt())return void(this.spt=t)}}}{const Og=self._s;class Dg{constructor(t,s){this.zdt=s,this.Ldt=t[0],this.$n=t[1],this.sht=t[2],this.rpt=t[3],this.elt=t[4],this.hpt=t[5]}zn(){this.zdt=null}yft(){return this.zdt}Oct(){return this.Ldt}Pc(){return this.$n}Int(){return this.sht}Ift(){return this.rpt}cet(){return this.elt}opt(){return this.hpt}}Og.Jdt=class{constructor(t,s){this.apt=s,this.lpt=[],this.upt=new Map,Og.Gct.Fdt(this.lpt,t,Dg,this),this.cpt=this.lpt.filter(t=>t.cet());for(const t of this.cpt)this.upt.set(t.Pc(),t)}zn(){this.apt=null;for(const t of this.lpt)t.zn();Og.Sh(this.lpt),this.lpt=null,Og.Sh(this.cpt),this.cpt=null}fpt(){return this.apt}gft(){return this.cpt.length}bft(){return this.cpt}pdt(t){return this.upt.get(t)}vft(){for(const t of this.cpt)if(t.opt())return t}*ipt(){for(const t of this.cpt)yield t}}}{const kg=self._s;kg.dpt=class extends kg.Vn{constructor(t){super(),this.ppt=t,this.mpt=[],this.mpt.push(kg.Hn(kg.gpt,this)),this.Rw=0,this.ypt=this.mpt[0]}zn(){for(const t of this.mpt)t.zn();kg.Sh(this.mpt),this.ypt=null,this.ppt=null}cH(){return this.ppt}eV(){return this.ypt}wpt(){return this.mpt[this.Rw-1]}Pu(){this.eV().Pu()}Spt(){const t=this.mpt,s=++this.Rw;if(s===t.length){const s=kg.Hn(kg.gpt,this);t.push(s),this.ypt=s}else{const i=t[s];i.Bf(),this.ypt=i}}vpt(){const t=this.mpt,s=++this.Rw;s===t.length&&t.push(kg.Hn(kg.gpt,this));const i=t[s];i.rd(t[s-1]),this.ypt=i}fY(){this.ypt=this.mpt[--this.Rw]}bpt(t){const s=this.mpt;for(let i=0,e=s.length;i<e;++i)s[i].bpt(t)}}}{const Lg=self._s;Lg.gpt=class extends Lg.Vn{constructor(t){super(),this.mpt=t,this.ppt=this.mpt.cH(),this.Mpt=this.ppt.aW().vN(),this.Gpt=!0,this.fQ=[],this.xpt=[]}zn(){this.Tpt(),this.mpt=null,this.ppt=null,this.Mpt=null}Tpt(){Lg.Sh(this.fQ),Lg.Sh(this.xpt)}cH(){return this.ppt}_pt(){return this.Gpt}Ipt(){return this.Gpt?!!this.ppt.hV():!!this.fQ.length}iV(){return this.Gpt?this.ppt.iV():this.fQ}Cpt(){return!!this.xpt.length}Ppt(){return this.xpt}Rpt(){const t=this.iV();return t.length?t:this.xpt}Bf(){this.Gpt=!0,Lg.Sh(this.xpt)}Pu(){this.Gpt=!0}rd(t){t._pt()?this.Bf():(this.Gpt=!1,Lg.xh(this.fQ,t.fQ),Lg.Sh(this.xpt))}Apt(t){this.fQ.push(t)}Ept(t){this.xpt.push(t)}Fpt(t){this.Gpt=!!t}Opt(){return this.fQ}Dpt(){return this.xpt}kpt(t){this.Gpt=!1,Lg.Sh(this.fQ),this.fQ.push(t)}Lpt(t){this.Gpt=!1,Lg.xh(this.fQ,t)}Npt(t){this.Gpt=!1,Lg.Sh(this.fQ);for(const s of t)this.fQ.push(s)}Bpt(t,s){for(const i of s)t.has(i)||this.xpt.push(i)}Wpt(t){for(const s of t)this.fQ.push(s);Lg.Ph(this.xpt,t)}jpt(){Lg.Sh(this.xpt)}Vpt(t){if(t)if(this.Mpt.tY().dN().Upt()){this._pt()&&(Lg.Sh(this.fQ),Lg.xh(this.xpt,t.cH().iV()),this.Gpt=!1);const s=this.xpt.indexOf(t);-1!==s&&(this.fQ.push(this.xpt[s]),this.xpt.splice(s,1))}else this.kpt(t)}bpt(t){Lg.Ph(this.fQ,t),Lg.Ph(this.xpt,t)}}}{const Ng=self._s;Ng.Hpt=class extends Ng.Vn{constructor(t){super(),this.zpt=t,this.Nc=this.zpt.aW(),this.mpt=[],this.mpt.push(Ng.Hn(Ng.Jpt,this,null)),this.Rw=0,this.qpt=[]}zn(){for(const t of this.mpt)t.zn();Ng.Sh(this.mpt),Ng.Sh(this.qpt),this.zpt=null,this.Nc=null}oN(){return this.zpt}aW(){return this.Nc}tY(){return this.mpt[this.Rw]}$pt(){return this.mpt}Xpt(){return this.Rw}sY(t){const s=this.mpt,i=++this.Rw;if(i===s.length){const i=Ng.Hn(Ng.Jpt,this,t);return s.push(i),i}{const e=s[i];return e.Bf(t),e}}fY(){--this.Rw}Ypt(t){this.qpt.push(t)}Kpt(){this.qpt.pop()}SN(){const t=this.qpt;return 0===t.length?null:t.at(-1)}}}{const Bg=self._s;Bg.Jpt=class extends Bg.Vn{constructor(t,s){super(),this.mpt=t,this.Nc=this.mpt.aW(),this.Zpt=s,this.Qpt=0,this.tmt=0,this.smt=!1,this.imt=!1,this.emt=null,this.nmt=0,this.rmt=0,this.hmt=null}zn(){this.Bf(null),this.mpt=null,this.Nc=null}Bf(t){this.Zpt=t,this.Qpt=0,this.tmt=0,this.smt=!1,this.imt=!1,this.hmt=null}omt(t,s){this.Zpt=t,this.Qpt=0,this.tmt=s}amt(){this.Qpt=0,this.tmt=0}dN(){return this.Zpt}lmt(t){this.Zpt=t}umt(){return this.Qpt}cmt(t){this.Qpt=t}fmt(){return this.tmt}dmt(t){this.tmt=t}pmt(t){this.smt=!!t}mmt(){return this.smt}gmt(t){this.imt=!!t}ymt(){return this.imt}wmt(t){this.emt=t}Smt(){return this.emt}vmt(t,s){this.nmt=t,this.rmt=s}bN(){return this.nmt}MN(t){this.rmt=t}bmt(){return this.rmt}Mmt(){const t=this.Zpt;return!!t.Gmt()||this.Qpt<t.xmt()-1&&!!t.QX().length}Tmt(t){this.hmt=t}_mt(){return this.hmt}}}{const Wg=self._s;Wg.Imt=class extends Wg.Vn{constructor(t){super(),this.zpt=t,this.Nc=this.zpt.aW(),this.mpt=[],this.Rw=-1,this.ypt=null,this.Cmt=[]}zn(){Wg.Sh(this.mpt),this.zpt=null,this.Nc=null}Pmt(t){this.Cmt=t;const s=this.Cmt.slice(0);this.mpt.push(s),this.Rw=0,this.ypt=s}oN(){return this.zpt}aW(){return this.Nc}Rmt(){return this.ypt}sY(){const t=++this.Rw,s=this.mpt;t===s.length?s.push(this.Cmt.slice(0)):Wg.xh(s[t],this.Cmt),this.ypt=s[t]}fY(){this.ypt=this.mpt[--this.Rw]}}}{const jg=self._s;jg.Amt=class extends jg.Vn{constructor(t){super(),this.zpt=t,this.Nc=this.zpt.aW(),this.mpt=[],this.Rw=-1}zn(){jg.Sh(this.mpt),this.zpt=null,this.Nc=null}oN(){return this.zpt}aW(){return this.Nc}Emt(){return this.Rw>=0}Rmt(){return this.mpt[this.Rw]}sY(){if(++this.Rw,this.Rw===this.mpt.length){const t=jg.Hn(jg.Fmt,this);return this.mpt.push(t),t}{const t=this.mpt[this.Rw];return t.Bf(),t}}fY(){--this.Rw}Omt(t){const s=this.mpt;for(let i=this.Rw;i>=0;--i){const e=s[i];if(e.Pc()===t)return e}return null}Dmt(){return this.mpt.slice(0,this.Rw+1)}}}{const Vg=self._s;Vg.Fmt=class extends Vg.Vn{constructor(t){super(),this.kmt=t,this.$n="",this.Rw=0,this.Lmt=!1,this.Nmt=NaN}Bf(){this.$n="",this.Rw=0,this.Lmt=!1,this.Nmt=NaN}eY(t){this.$n=t}Pc(){return this.$n}lY(t){this.Rw=t}ML(){return this.Rw}n$(){this.Lmt=!0}cY(){return this.Lmt}Bmt(t){this.Nmt=t}Wmt(){return this.Nmt}}}{const Ug=self._s;Ug.jmt=class extends Ug.Vn{constructor(){super(),this.mpt=[],this.Rw=-1}zn(){Ug.Sh(this.mpt)}Rmt(){return this.mpt[this.Rw]}sY(){if(++this.Rw,this.Rw===this.mpt.length){const t=[];return this.mpt.push(t),t}return this.mpt[this.Rw]}fY(){--this.Rw}}}{let Hg=function(t,s){return t.ML()-s.ML()},zg=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const Jg=self._s;self.assert;Jg.Vmt=class extends Jg.Vn{constructor(t){super(),this.Nc=t,this.Umt=[],this.Hmt=new Map,this.zmt=[],this.Jmt=new Map,this.qmt=new Map,this.$mt=new Map,this.Xmt=new Map,this.Ymt=new Map,this.Kmt=new Map,this.Zmt=0,this.Qmt=[],this.tgt=[],this.sgt=[],this.igt=new Map,this.egt=new Map,this.Mpt=Jg.Hn(Jg.Hpt,this),this.ngt=Jg.Hn(Jg.Imt,this),this.kmt=Jg.Hn(Jg.Amt,this),this.rgt=[],this.hgt=[],this.ogt=[],this.agt=0,this.lgt=0,this.ugt=0,this.cgt=[],this.fgt=[],this.dgt=[],this.pgt=new Map,this.mgt=new Map,self.c3_callFunction=(t,s)=>this.ggt(t,s)}zn(){this.i6(),this.Mpt.zn(),this.Mpt=null,this.ngt.zn(),this.ngt=null,Jg.Sh(this.hgt),Jg.Sh(this.ogt),this.Nc=null,Jg.Sh(this.Umt),this.Hmt.clear()}HT(t){const s=Jg.Hn(Jg.ygt,this,t);this.Umt.push(s),this.Hmt.set(s.Pc().toLowerCase(),s)}wgt(t){this.rgt.push(t)}Sgt(){for(const t of this.egt.values())t.vgt();for(const t of this.igt.values())t.Sgt();for(const t of this.egt.values())t.Sgt();for(const t of this.Umt)t.Sgt();for(const t of this.Umt)t.T4();for(const t of this.rgt)t.Sgt(!1);Jg.Sh(this.rgt),this.ngt.Pmt(this.sgt)}aW(){return this.Nc}x4(t){return this.Hmt.get(t.toLowerCase())||null}bgt(t){this.zmt.push(t),this.Jmt.set(t.Mgt(),t)}Ggt(t){this.qmt.set(t.I1(),t)}xgt(t){this.$mt.set(t.I1(),t)}Tgt(t){this.Xmt.set(t.I1(),t)}_gt(t){switch(t.Igt()){case 0:this.igt.set(t.Cgt().toLowerCase(),t);break;case 1:this.egt.set(t.Cgt().toLowerCase(),t)}}Pgt(t){this.Kmt.set(t.I1(),t),t.WQ()?this.Qmt.push(t):this.tgt.push(t)}Rgt(t){t.length>=2&&t.sort(Hg);let s=this.Ymt.get(t.length);s||(s=[],this.Ymt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(zg(t,e))return e}return s.push(t),t}Agt(t){return this.sgt.push(t.Egt()),this.Zmt++}vN(){return this.Mpt}Fgt(){return this.vN().tY()}dN(){return this.Fgt().dN()}Ogt(){const t=this.Fgt();return t.dN().Dgt(t.umt())}kgt(){const t=this.Fgt();return t.dN().Lgt(t.fmt())}Ngt(){return this.ngt}iY(){return this.kmt}Bgt(t){const s=[];for(t=t.Wgt();t;)Jg.En(s,t.jgt()),t=t.Wgt();return s}Vgt(t){const s={};for(const i of this.Bgt(t))s[i.Ugt()]=i.Hgt();return Object.create(Object.prototype,s)}zgt(t){return this.Kmt.get(t)||null}Jgt(t){return this.qmt.get(t)||null}qgt(t){return this.$mt.get(t)||null}$gt(t){return this.Xmt.get(t)||null}aN(t){return this.igt.get(t.toLowerCase())||null}Xgt(t,s){let i=this.egt.get((t.Pc()+"."+s).toLowerCase());if(i)return i;if(!t.S1())for(const e of t.gV())if(i=this.egt.get((e.Pc()+"."+s).toLowerCase()),i)return i;return null}Ygt(){return this.Qmt}Kgt(){return this.tgt}Zgt(t){for(const t of this.Qmt)t.Qgt();if(t)for(const t of this.tgt)t.qx()&&t.Qgt()}tyt(t){return this.Jmt.get(t.toLowerCase())||null}syt(t){const s=this.qmt.get(t);return s&&s.iyt()?s:null}eyt(){return this.zmt}nyt(){for(const t of this.zmt)t.ryt()}hyt(){for(const t of this.Umt)t.oyt()}ayt(t){this.hyt(),this.agt++;for(const s of t.F6()){const t=s.K5();t&&(this.Nc.lyt(s),t.mP(),this.Nc.uyt())}this.agt--}async cyt(t){this.hyt(),this.agt++;for(const s of this.fyt(t))await this.Nc.dyt(s);this.agt--}*fyt(t){for(const s of t.F6()){const t=s.K5();t&&(this.Nc.lyt(s),yield*t.pyt(),this.Nc.uyt())}}myt(t,s,i,e){let n=!1;if(!t.uB())return this.gyt(s,i,e);this.lgt++;for(const r of t.F6()){const t=r.K5();if(!t)continue;this.Nc.lyt(r);for(const r of t.yyt()){const t=r.myt(s,i,e);n=n||t}const h=t.myt(s,i,e);n=n||h,this.Nc.uyt()}return this.lgt--,n}*wyt(t,s,i,e){let n=!1;if(!t.uB())return this.gyt(s,i,e);this.lgt++;for(const r of t.F6()){const t=r.K5();if(!t)continue;this.Nc.lyt(r);for(const r of t.yyt()){const t=yield*r.wyt(s,i,e);n=n||t}const h=yield*t.wyt(s,i,e);n=n||h,this.Nc.uyt()}return this.lgt--,n}gyt(t,s,i){return this.hgt.push([t,s,i]),!1}Syt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.ogt.push([t,s,i,e]),n}*vyt(){if(this.Nc.byt())throw new Error("should not be in breakpoint");const t=this.Nc.dB();for(;this.ogt.length;){const[s,i,e,n]=this.ogt.shift();n(yield*this.wyt(t,s,i,e))}}async Myt(){for(const t of this.vyt())await this.Nc.dyt(t)}Gyt(t,s,i,e){let n=!1;const r=t.uB(),h=r.K5();if(!h)return;this.lgt++,this.Nc.lyt(r);const o=h.yyt();for(let t=0,r=o.length;t<r;++t){const r=o[t].Gyt(s,i,e);n=n||r}const a=h.Gyt(s,i,e);return n=n||a,this.Nc.uyt(),this.lgt--,n}*xyt(t,s,i,e){let n=!1;const r=t.uB(),h=r.K5();if(!h)return;this.lgt++,this.Nc.lyt(r);const o=h.yyt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].xyt(s,i,e);n=n||r}const a=yield*h.xyt(s,i,e);return n=n||a,this.Nc.uyt(),this.lgt--,n}Tyt(){return this.lgt}_yt(){return this.Tyt()>0}Iyt(){return++this.lgt}Cyt(){--this.lgt}Pyt(){return this.agt>0}fV(){return this.Pyt()||this._yt()}J4(t){for(const[s,i,e]of this.hgt)this.myt(t,s,i,e);Jg.Sh(this.hgt)}uV(t){t?this.ugt++:this.ugt--}wH(){return this.ugt>0}Ryt(t){for(let s=0,i=t.length;s<i;++s)t[s].Ayt().Pu()}Eyt(t){for(let s=0,i=t.length;s<i;++s)t[s].Ayt().Spt()}hY(t){for(let s=0,i=t.length;s<i;++s)t[s].Ayt().vpt()}aY(t){for(let s=0,i=t.length;s<i;++s)t[s].Ayt().fY()}pN(t){const s=new Set,i=this.Mpt.$pt(),e=this.Mpt.Xpt();for(let n=0;n<=e;++n){const e=i[n]._mt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Fyt(t){const s=new Set([...t]),i=this.pN(s);if(i.size>0){for(const t of i)t.Ayt().Spt();return[...i]}return null}Oyt(){const t=Jg.Hn(Jg.Dyt,this);return this.cgt.push(t),t}kyt(){return this.cgt}Lyt(){if(!this.cgt.length)return;const t=this.Fgt();let s=!1;this.agt++;for(let i=0,e=this.cgt.length;i<e;++i){const e=this.cgt[i];e.Nyt()&&e.Byt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.Bf(null)),this.agt--}async Vyt(){if(!this.cgt.length)return;const t=this.Fgt();let s=!1;this.agt++;for(let i=0,e=this.cgt.length;i<e;++i){const e=this.cgt[i];e.Nyt()&&await e.Uyt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.Bf(null)),this.agt--}jyt(){const t=Jg.Ch(this.cgt,t=>t.Wyt());for(const s of t)s.zn()}i6(){for(const t of this.cgt)t.zn();Jg.Sh(this.cgt)}Hyt(t){for(const s of this.cgt)s.bpt(t);for(const s of t){const t=this.mgt.get(s);if(this.mgt.delete(s),t)for(const{resolve:s}of t.zyt.values())s(!0)}}Jyt(t){this.fgt.push({promise:t,qyt:this.Tyt()})}$yt(){Jg.Sh(this.fgt)}Xyt(){const t=this.Tyt(),s=Promise.all(this.fgt.filter(s=>s.qyt===t).map(t=>t.promise));return this.fgt=this.fgt.filter(s=>s.qyt<t),s}GN(t){const s=t.toLowerCase();this.dgt.push(s),this.Nc.qH(Jg.sW.tW.QB.Yyt,null),this.dgt.pop();for(const t of this.Nc.oN().kyt())t.Kyt()&&t.Zyt()===s&&t.Qyt();const i=this.pgt.get(s);i&&(i.resolve(),this.pgt.delete(s))}TN(t){const s=t.toLowerCase(),i=this.pgt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.pgt.set(s,{promise:i,resolve:t}),i}}twt(){if(0===this.dgt.length)throw new Error("not in a signal");return this.dgt.at(-1)}swt(t){let s=this.mgt.get(t);return s||(s={iwt:[],zyt:new Map},this.mgt.set(t,s)),s}LH(t,s){const i=this.swt(t),e=s.toLowerCase();i.iwt.push(e),this.Nc.qH(t.zj().nwt().QB.ewt,t),i.iwt.pop();for(const s of this.Nc.oN().kyt())s.rwt()&&s.Zyt()===e&&s.hwt(t);const n=i.zyt.get(e);n&&(n.resolve(!1),i.zyt.delete(e)),0===i.iwt.length&&0===i.zyt.size&&this.mgt.delete(t)}NH(t,s){const i=this.swt(t),e=s.toLowerCase(),n=i.zyt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.zyt.set(e,{promise:s,resolve:t}),s}}owt(t){const s=this.swt(t);if(!s||0===s.iwt.length)throw new Error("not in a signal");return s.iwt.at(-1)}i5(){return{groups:this.awt(),cnds:this.lwt(),acts:this.uwt(),vars:this.cwt(),waits:this.fwt()}}e5(t){this.dwt(t.groups),this.pwt(t.cnds),this.mwt(t.acts),this.gwt(t.vars),this.ywt(t.waits)}awt(){const t={};for(const s of this.eyt())t[s.I1().toString()]=s.wwt();return t}dwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.syt(t);e&&e.Swt(i)}}lwt(){const t={};for(const[s,i]of this.$mt){const e=i.i5();e&&(t[s.toString()]=e)}return t}pwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.$mt)i.e5(s.get(t)||null)}uwt(){const t={};for(const[s,i]of this.Xmt){const e=i.i5();e&&(t[s.toString()]=e)}return t}mwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Xmt)i.e5(s.get(t)||null)}cwt(){const t={};for(const[s,i]of this.Kmt)i.vwt()||!i.WQ()&&!i.qx()||(t[s.toString()]=i.Int());return t}gwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.zgt(t);e&&e.lrt(i)}}fwt(){return this.cgt.filter(t=>!t.bwt()).map(t=>t.i5())}ywt(t){this.i6();for(const s of t){const t=Jg.Dyt.Mwt(this,s);t&&this.cgt.push(t)}}Gwt(){return[...this.Nc.dB().F6()].map(t=>t.K5()).filter(t=>t).map(t=>t.xwt())}Twt(t){for(;t;){const s=t.Wgt();if(s instanceof Jg._wt)return s;t=s}return null}ggt(t,s){Array.isArray(s)||(s=[]);const i=this.aN(t.toLowerCase());if(!i)return null;if(!i._u())return i.lN();const e=i.Iwt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Egt())}while(s.length<e.length)}const n=i.cN();return n.mN(n.fN(),!1,i.yN(),i.lN(),...s)}}}{const qg=self._s;qg.ygt=class extends qg.Vn{constructor(t,s){super(),this.zpt=t,this.Nc=t.aW(),this.$n=s[0],this.Cwt=[],this.Pwt=new Map,this.Rwt=new Map,this.Awt=new Map,this.Ewt=!1,this.Fwt=[],this.Owt=[],this.Dwt=new Set;for(const t of s[1])this.kwt(t,null,this.Cwt);this.Lwt=this.Nc.sz()?{type:"sheet",name:this.$n,Nwt:0,children:[]}:null}zn(){this.zpt=null,this.Nc=null}kwt(t,s,i){switch(t[0]){case 0:case 3:this.Bwt(t,s,i);break;case 1:this.Wwt(t,s,i);break;case 2:this.jwt(t,s,i);break;case 4:this.Vwt(t,s);break;case 5:this.Uwt(t,s,i);break;case 6:this.Hwt(t,s);break;default:throw new Error("invalid event type")}}Bwt(t,s,i){const e=qg.zwt.HT(this,s,t);if(e.Upt()){i.push(e);const t=e.Jwt();for(let s=0,i=t.length;s<i;++s)t[s].qwt()&&this.$wt(e,s)}else e.qwt()?this.$wt(e,0):i.push(e)}Vwt(t,s){const i=qg._wt.Xwt(this,s,t);this.zpt._gt(i)}Hwt(t,s){const i=qg._wt.Ywt(this,s,t);this.zpt._gt(i)}Wwt(t,s,i){const e=qg.Kwt.HT(this,s,t);i.push(e)}jwt(t,s,i){const e=qg.Zwt.HT(this,s,t);i.push(e)}Uwt(t,s,i){const e=qg.Qwt.HT(this,s,t);i.push(e)}$wt(t,s){t.Upt()||this.zpt.wgt(t);const i=t.Dgt(s),e=i.tSt(),n=i.cH();if(i.sSt()){let r=this.Rwt.get(n);r||(r=new Map,this.Rwt.set(n,r));const h=i.iSt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Pwt.get(n);r||(r={eSt:new Map,nSt:new Map},this.Pwt.set(n,r));const h=i.cq();let o;h?(o=r.nSt.get(h),o||(o=new Map,r.nSt.set(h,o))):o=r.eSt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}Sgt(){const t=this.Cwt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof qg.zwt&&t[s+1].rSt();t[s].Sgt(e)}}hSt(t){this.Fwt.push(t)}T4(){qg.Sh(this.Owt),this.oSt(this),this.Dwt.clear()}oSt(t){const s=t.Owt,i=t.Dwt;for(const e of this.Fwt){const n=e.aSt();e.lSt()&&t!==n&&!i.has(n)&&(i.add(n),n.oSt(t),s.push(n))}}yyt(){return this.Owt}oN(){return this.zpt}aW(){return this.Nc}Pc(){return this.$n}uSt(t,s){this.Awt.set(s,t)}cSt(t){return this.Awt.get(t)||null}oyt(){this.Ewt=!1}mP(){if(this.Ewt)return;const t=this.Nc,s=t.fSt(),i=s?performance.now():0;this.Ewt=!0;const e=this.oN(),n=e.Fgt();for(const s of this.Cwt)s.mP(n),e.Ryt(s.QX()),e.$yt(),t.pV();n.Bf(null),s&&(this.Lwt.Nwt+=performance.now()-i)}*pyt(){if(this.Ewt)return;this.Ewt=!0;const t=this.Nc,s=this.oN(),i=s.Fgt();for(const e of this.Cwt)yield*e.pyt(i),s.Ryt(e.QX()),s.$yt(),t.pV();i.Bf(null)}myt(t,s,i){if(!s)return this.dSt(t,s,null,null);{const e=s.cH();let n=!1,r=this.dSt(t,s,e,i);n=n||r;for(const h of e.gV())r=this.dSt(t,s,h,i),n=n||r}}dSt(t,s,i,e){const n=this.Pwt.get(i);if(!n)return!1;const r=e?n.nSt.get(e):n.eSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.pSt(s,t,i);o=o||e}return o}*wyt(t,s,i){if(!s)return yield*this.mSt(t,s,null,null);{const e=s.cH();let n=!1,r=yield*this.mSt(t,s,e,i);n=n||r;for(const h of e.gV())r=yield*this.mSt(t,s,h,i),n=n||r}}*mSt(t,s,i,e){const n=this.Pwt.get(i);if(!n)return!1;const r=e?n.nSt.get(e):n.eSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.gSt()?this.pSt(s,t,i):yield*this.ySt(s,t,i),o=o||e}return o}Gyt(t,s,i){const e=s.cH(),n=this.Rwt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.pSt(null,s[0],s[1]);o=o||i}return o}*xyt(t,s,i){const e=s.cH(),n=this.Rwt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.gSt()?this.pSt(null,i,e):yield*this.ySt(null,i,e),o=o||n}return o}pSt(t,s,i){const e=this.Nc,n=this.zpt,r=n.dN(),h=n.vN(),o=n.Tyt();let a=!1;r&&n.Eyt(r.fN()),n.Eyt(s.fN());const l=o>1;l&&n.Ngt().sY();const u=h.sY(s);t&&(s.Jwt()[i].cH().eV().kpt(t),t.MH()&&t.wSt());let c=!0;if(s.rJ()){const t=s.SSt();for(let s=0,i=t.length;s<i;++s)if(!t[s].vSt(u)){c=!1;break}}return c&&(s.Upt()?s.bSt(u,i):s.mP(u),a=u.mmt()),h.fY(),l&&n.Ngt().fY(),n.aY(s.fN()),r&&n.aY(r.fN()),r||1!==o||(n.$yt(),n.wH()||e.pV()),a}*ySt(t,s,i){const e=this.Nc,n=this.zpt,r=n.dN(),h=n.vN(),o=n.Tyt();let a=!1;r&&n.Eyt(r.fN()),n.Eyt(s.fN());const l=o>1;l&&n.Ngt().sY();const u=h.sY(s);t&&(s.Jwt()[i].cH().eV().kpt(t),t.MH()&&t.wSt());let c=!0;if(s.rJ()){const t=s.SSt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].MSt(u))){c=!1;break}}return c&&(s.Upt()?yield*s.GSt(u,i):yield*s.pyt(u),a=u.mmt()),h.fY(),l&&n.Ngt().fY(),n.aY(s.fN()),r&&n.aY(r.fN()),r||1!==o||(n.$yt(),n.wH()||e.pV()),a}xwt(){return this.Lwt}}}{let $g=function(t,s){return!0};0;const Xg=self._s,Yg=[];function*Kg(t,s){return!0}Xg.zwt=class extends Xg.Vn{constructor(t,s,i){super(),this.g5=t,this.Nc=t.aW(),this.xSt=s,this.TSt=null,this.Mpt=this.Nc.oN().vN(),this._St=[],this.ISt=[],this.CSt=!1,this.PSt=!1,this.RSt=!1,this.ASt=!1,this.ESt=!!i[2],this.FSt=!1,this.OSt=null,this.DSt=[],this.rht=[],this.kSt=[],this.LSt=$g,this.NSt=Kg,this.BSt=!1,this.WSt=!1,this.jSt="",this.VSt=!1,this.USt=null,this.Lwt=null,this.JQ=i[4],this.HSt=i[5],this.g5.uSt(this,this.HSt),this.zSt=this.Nc.sz()?{JSt:i[3][0],qSt:i[3][1],$St:!1,XSt:!1,YSt:!1,KSt:!1}:null,this.oN().Ggt(this),3===i[0]&&this.ZSt(i[1]);let e=0;for(const t of i[6]){const s=Xg.QSt.HT(this,t,e++);this.DSt.push(s),this.tvt(s.cH())}e=0;for(const t of i[7]){const s=Xg.svt.HT(this,t,e++);this.rht.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.g5.kwt(s,this,this.kSt)}this.DSt.length&&(this.FSt=null===this.DSt[0].cH()&&this.DSt[0].tSt()===Xg.sW.tW.QB.ivt),0===this.DSt.length&&(this.DSt=Yg),0===this.rht.length&&(this.rht=Yg),0===this.kSt.length&&(this.kSt=Yg)}static HT(t,s,i){return Xg.Hn(Xg.zwt,t,s,i)}ZSt(t){this.BSt=!0,this.WSt=!!t[0],this.VSt=this.WSt,this.jSt=t[1].toLowerCase(),this.USt=[],this.oN().bgt(this),this.Nc.sz()&&(this.Lwt={type:"group",name:t[1],Nwt:0,children:[]})}evt(t){this.USt.push(t)}nvt(t,s){for(const i of t.u4().GV())s.includes(i)||s.push(i)}rvt(t,s){if(t)if(s.includes(t)||s.push(t),t.S1())for(const i of t.MV())i.MH()&&this.nvt(i,s);else t.MH()&&this.nvt(t,s)}tvt(t){this.rvt(t,this._St)}hvt(t){this.rvt(t,this.ISt)}ovt(){this._St=this.Nc.w1()}Sgt(t){this.ASt=!!t,this.avt(),this.lvt();for(const t of this.DSt)t.Sgt();if(this.rht.length>0){let t=!1;for(const s of this.rht)s.Sgt(),s.uvt()&&(t=!0);t?(this.LSt=this.cvt,this.NSt=this.fvt):(this.LSt=this.dvt,this.NSt=this.pvt)}const s=this.kSt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Xg.zwt&&s[t+1].rSt();s[t].Sgt(e)}this.zSt&&this.mvt(),this.Lwt&&this.gvt().xwt().children.push(this.Lwt)}xwt(){return this.Lwt}gvt(){let t=this.rJ();for(;t;){if(t.iyt())return t;t=t.rJ()}return this.g5}mvt(){const t=this.zSt;t.$St=this.DSt.every(t=>t.gSt()),t.XSt=this.rht.every(t=>t.gSt()),t.YSt=this.kSt.every(t=>t.gSt()),t.KSt=t.$St&&t.XSt&&t.YSt}yvt(){let t=this;do{t.mvt(),t=t.rJ()}while(t)}avt(){if(!this.iyt())return;let t=this.rJ();for(this.RSt=!0;t;){if(!t.iyt()){this.RSt=!1;break}t=t.rJ()}}wvt(){const t=this.Nc.w1();if(this._St===t)this.ISt=t;else{this.ISt=Xg.Eh(this._St);let t=this.rJ();for(;t;){for(const s of t._St)this.hvt(s);t=t.rJ()}const s=this.oN();this._St=s.Rgt(this._St),this.ISt=s.Rgt(this.ISt)}}lvt(){if(!this.Svt())return;this.OSt=[];let t=this.rJ();for(;t;)this.OSt.push(t),t=t.rJ();this.OSt.reverse()}vvt(){this.PSt=!0,this.xSt&&this.xSt.vvt()}Gmt(){return this.PSt}QX(){return this._St}fN(){return this.CSt||(this.CSt=!0,this.wvt()),this.ISt}bvt(t){return this._St.includes(t)}SSt(){return this.OSt}K5(){return this.g5}oN(){return this.g5.oN()}aW(){return this.Nc}rJ(){return this.xSt}Mvt(t){this.TSt=t}Wgt(){return this.TSt||this.xSt}Gvt(){return this.HSt}xvt(){return this.zSt&&this.zSt.qSt}Tvt(){return this.xvt()&&this.zSt.JSt}_vt(t){this.zSt.JSt=!!t,this.yvt()}iyt(){return this.BSt}Ivt(){return this.RSt}rSt(){return this.FSt}Cvt(){return this.ASt}Mgt(){return this.jSt}wwt(){return this.VSt}ryt(){this.Swt(this.WSt)}Swt(t){if(t=!!t,!this.BSt)throw new Error("not a group");if(this.VSt!==t){this.VSt=t;for(const t of this.USt)t.Pvt();if(this.USt.length){const t=this.Nc.EB().K5();t&&t.T4()}}}I1(){return this.JQ}Upt(){return this.ESt}qwt(){return this.DSt.length&&this.DSt[0].qwt()}Rvt(){return this.TSt&&this.TSt instanceof Xg._wt}Svt(){return this.Rvt()||this.DSt.some(t=>t.qwt())}Jwt(){return this.DSt}xmt(){return this.DSt.length}Dgt(t){if((t=Math.floor(t))<0||t>=this.DSt.length)throw new RangeError("invalid condition index");return this.DSt[t]}Avt(t){return this.Dgt(t)}Evt(t){let s=t.ML();if(0===s)return!0;--s;const i=t.Fvt()?t.Ovt():t.cH();for(;s>=0;--s){const t=this.DSt[s];if(i===t.cH()||t.Fvt()&&t.Ovt()===i)return!1}return!0}Dvt(){return this.rht}kvt(){return this.rht.length}Lgt(t){if((t=Math.floor(t))<0||t>=this.rht.length)throw new RangeError("invalid action index");return this.rht[t]}Lvt(t){t=Math.floor(t);const s=this.rht.find(s=>s.Nvt()===t);if(!s)throw new RangeError("invalid action debug index");return s}Bvt(t){return(t=Math.floor(t))>=0&&t<this.rht.length}Wvt(){return this.kSt}jgt(){return this.kSt.filter(t=>t instanceof Xg.Kwt)}vSt(t){t.lmt(this);const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.cmt(e),n._q())throw new Error("trigger cannot be used as sub-event to a loop");if(n.mP())i=!0;else if(!this.ESt)return!1}return!this.ESt||i}bSt(t,s){t.lmt(this),t.cmt(s),this.DSt[s].mP()&&(this.LSt(t,0)&&this.jvt(t),t.pmt(!0))}*MSt(t){t.lmt(this);const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.cmt(e),n._q())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.gSt()?n.mP():yield*n.pyt(),r)i=!0;else if(!this.ESt)return!1}return!this.ESt||i}*GSt(t,s){t.lmt(this),t.cmt(s);const i=this.DSt[s];let e;if(e=i.gSt()?i.mP():yield*i.pyt(),e){let s;s=this.Vvt()?this.LSt(t,0):yield*this.NSt(t,0),s&&(this.Uvt()?this.jvt():yield*this.Hvt()),t.pmt(!0)}}mP(t){t.lmt(this),this.FSt||t.gmt(!1),this.ESt?this.zvt(t):this.Jvt(t)}*pyt(t){(this.Tvt()||this.Nc.qvt())&&(yield this),t.lmt(this),this.FSt||t.gmt(!1),this.ESt?yield*this.$vt(t):yield*this.Xvt(t)}zvt(t){const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.qwt())continue;t.cmt(e);const r=n.mP();i=i||r}t.pmt(i),i&&(this.LSt(t,0)&&this.jvt(t),this.ASt&&t.gmt(!0))}*$vt(t){const s=this.DSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.qwt())continue;let r;t.cmt(e),r=n.gSt()?n.mP():yield*n.pyt(),i=i||r}if(t.pmt(i),i){let s;s=this.Vvt()?this.LSt(t,0):yield*this.NSt(t,0),s&&(this.Uvt()?this.jvt():yield*this.Hvt()),this.ASt&&t.gmt(!0)}}Jvt(t){const s=this.DSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.cmt(i),!e.mP())return void t.pmt(!1)}t.pmt(!0),this.LSt(t,0)&&this.jvt(t),t.mmt()&&this.ASt&&t.gmt(!0)}*Xvt(t){const s=this.DSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.cmt(i),n=e.gSt()?e.mP():yield*e.pyt(),!n)return void t.pmt(!1)}let i;t.pmt(!0),i=this.Vvt()?this.LSt(t,0):yield*this.NSt(t,0),i&&(this.Uvt()?this.jvt():yield*this.Hvt()),t.mmt()&&this.ASt&&t.gmt(!0)}dvt(t,s){const i=this.rht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.dmt(e),s.mP()}return!0}*pvt(t,s){const i=this.rht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.dmt(e),s.gSt()?s.mP():yield*s.pyt()}return!0}cvt(t,s){const i=this.oN(),e=this.rht;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.dmt(n);const r=s.mP();if(s.Yvt()&&!0===r)return!1;s.Kvt()&&r instanceof Promise&&i.Jyt(r)}return!0}*fvt(t,s){const i=this.oN(),e=this.rht;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.dmt(n),r=s.gSt()?s.mP():yield*s.pyt(),s.Yvt()&&!0===r)return!1;s.Kvt()&&r instanceof Promise&&i.Jyt(r)}return!0}Zvt(t){this.LSt(t,t.fmt())&&this.jvt()}*Qvt(t){(yield*this.NSt(t,t.fmt()))&&(yield*this.Hvt())}jvt(){if(!this.kSt.length)return;const t=this.iyt()&&this.Nc.fSt(),s=t?performance.now():0,i=this.Mpt,e=i.sY(this);this.PSt?this.tbt(e):this.sbt(e),i.fY(),t&&(this.Lwt.Nwt+=performance.now()-s)}tbt(t){const s=this.BSt,i=this.RSt,e=this.oN(),n=this.kSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.QX(),l=!i||!s&&r<o;l&&e.hY(a),h.mP(t),l?e.aY(a):e.Ryt(a)}}sbt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i)s[i].mP(t)}*Hvt(){if(!this.kSt.length)return;const t=this.Mpt,s=t.sY(this);this.PSt?yield*this.ibt(s):yield*this.ebt(s),t.fY()}*ibt(t){const s=this.BSt,i=this.RSt,e=this.oN(),n=this.kSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.QX(),l=!i||!s&&r<o;l&&e.hY(a),yield*h.pyt(t),l?e.aY(a):e.Ryt(a)}}*ebt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i)yield*s[i].pyt(t)}oY(t,s){s.amt();const i=this.DSt;if(!this.Upt())for(let e=t.umt()+1,n=i.length;e<n;++e){const t=i[e];if(s.cmt(e),!t.mP())return!1}return this.LSt(s,0)&&this.jvt(s),!0}*nbt(t,s){s.amt();const i=this.DSt;if(!this.Upt())for(let e=t.umt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.cmt(e),n=t.gSt()?t.mP():yield*t.pyt(),!n)return!1}let e;return e=this.Vvt()?this.LSt(s,0):yield*this.NSt(s,0),e&&(this.Uvt()?this.jvt():yield*this.Hvt()),!0}gSt(){return!this.Tvt()&&!this.Nc.qvt()&&this.zSt.KSt}Vvt(){return!this.Nc.qvt()&&this.zSt.XSt}Uvt(){return!this.Nc.qvt()&&this.zSt.YSt}rbt(t){if(this.rJ()){const s=this.SSt();for(let i=0,e=s.length;i<e;++i)if(!s[i].vSt(t))return!1}return!0}*hbt(t){if(this.rJ()){const s=this.SSt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].MSt(t)))return!1}return!0}obt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.zs(0));t.Ngt().sY(),this.TSt.abt(i)}else this.TSt.lbt(s);else i&&t.Ngt().sY()}ubt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.Mpt,u=a.oN(),c=this.TSt,f=c.Kvt(),d=u.Iyt()>1;if(this.obt(u,s,d),h&&(i?u.hY(t):u.Eyt(t)),null!==e){if(e.cbt){const t=i?e.cbt.eV():e.cbt.Ayt().wpt(),s=e.fbt.eV();s.Lpt(t.iV()),s.jpt(),i||e.fbt.dbt()}else if(e.pbt){const t=e.pbt.eV();t.Lpt(e.mbt),t.jpt()}e.gbt&&(o=u.Fyt(t))}const p=l.sY(this);return i&&p.Tmt(t),this.rbt(p)&&(p.lmt(this),f&&([r,n]=c.ybt()),this.Jvt(p),f&&c.wbt(r)),l.fY(),d&&u.Ngt().fY(),null!==o&&u.aY(o),h&&u.aY(t),u.Cyt(),n}*Sbt(t,s,i,e){let n,r;(this.Tvt()||this.Nc.qvt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.Mpt,u=a.oN(),c=this.TSt,f=c.Kvt(),d=u.Iyt()>1;if(this.obt(u,s,d),h&&(i?u.hY(t):u.Eyt(t)),null!==e){if(e.cbt){const t=i?e.cbt.eV():e.cbt.Ayt().wpt(),s=e.fbt.eV();s.Lpt(t.iV()),s.jpt(),i||e.fbt.dbt()}else if(e.pbt){const t=e.pbt.eV();t.Lpt(e.mbt),t.jpt()}e.gbt&&(o=u.Fyt(t))}const p=l.sY(this);return i&&p.Tmt(t),(yield*this.hbt(p))&&(p.lmt(this),f&&([r,n]=c.ybt()),yield*this.Xvt(p),f&&c.wbt(r)),l.fY(),d&&u.Ngt().fY(),null!==o&&u.aY(o),h&&u.aY(t),u.Cyt(),n}vbt(t,s){const i=this.fN(),e=i.length>0,n=this.Nc,r=this.Mpt,h=n.oN(),o=h.Iyt()>1;o&&h.Ngt().sY(),this.TSt.abt(t),e&&(s?h.hY(i):h.Eyt(i));const a=r.sY(this);this.rbt(a)&&(a.lmt(this),this.Jvt(a)),r.fY(),o&&h.Ngt().fY(),e&&h.aY(i),h.Cyt()}*bbt(t,s){(this.Tvt()||this.Nc.qvt())&&(yield this);const i=this.fN(),e=i.length>0,n=this.Nc,r=this.Mpt,h=n.oN(),o=h.Iyt()>1;o&&h.Ngt().sY(),this.TSt.abt(t),e&&(s?h.hY(i):h.Eyt(i));const a=r.sY(this);(yield*this.hbt(a))&&(a.lmt(this),yield*this.Xvt(a)),r.fY(),o&&h.Ngt().fY(),e&&h.aY(i),h.Cyt()}mN(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.Mpt,u=a.oN(),c=this.TSt,f=c.Kvt(),d=u.Iyt()>1;d&&u.Ngt().sY(),n.length>0&&this.TSt.abt(n),o&&(s?u.hY(t):u.Eyt(t));const p=l.sY(this);return p.vmt(i,e),l.Ypt(p),a.nY(!1),this.rbt(p)&&(p.lmt(this),f&&([h,r]=c.ybt()),this.Jvt(p),f&&c.wbt(h)),a.nY(!0),l.fY(),l.Kpt(),d&&u.Ngt().fY(),o&&u.aY(t),u.Cyt(),r||p.bmt()}}}{const Zg=self._s,Qg=[];let ty=!1;Zg.Qwt=class extends Zg.Vn{constructor(t,s,i){super();const e=t.aW(),n=t.oN();this.g5=t,this.zpt=n,this.Nc=t.aW(),this.xSt=s;const r=e.Mbt(i[1]);this.Gbt=r,this.HSt=i[2],this.g5.uSt(this,this.HSt),this.zSt=e.sz()?{JSt:i[3][0],qSt:i[3][1]}:null}static HT(t,s,i){return Zg.Hn(Zg.Qwt,t,s,i)}Sgt(){const t=this.Gbt,s=this.Nc.oN().Vgt(this);this.Gbt=t.bind(null,this.Nc.gj(),s)}rJ(){return this.xSt}Wgt(){return this.xSt}K5(){return this.g5}Gvt(){return this.HSt}xvt(){return this.zSt&&this.zSt.qSt}Tvt(){return this.xvt()&&this.zSt.JSt}_vt(t){this.zSt.JSt=!!t}rSt(){return!1}QX(){return Qg}fN(){return this.xSt?this.xSt.fN():Qg}mP(t){t.lmt(this),this.zpt.Jyt(this.xbt())}async xbt(){try{await this.Gbt()}catch(t){console.error(`Unhandled exception running script %c${this.K5().Pc()}, event ${this.Gvt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.iz&&self.iz.Tbt(this),ty||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),ty=!0)}}*pyt(t){t.lmt(this),(this.Tvt()||this.Nc.qvt())&&(yield this),this.mP(t)}gSt(){return!this.Tvt()&&!this.Nc.qvt()}static _bt(){return ty}static Ibt(){ty=!0}}}{const sy=self._s;self.assert;sy._wt=class extends sy.Vn{constructor(t,s,i){super(),this.g5=t,this.Nc=t.aW(),this.xSt=s,this.Cbt=0,this.Pbt="",this.Rbt=0,this.Abt=[],this.Ebt=!0,this.Fbt="",this.ppt=null,this.Obt=!1,this.Dbt=[],this.kbt=!1,this.Lbt=!1,this.Nbt=0,this.Bbt=-1,this.Wbt=new Map,this.jbt=sy.zwt.HT(t,s,i),this.jbt.Mvt(this)}Vbt(t){this.Cbt=0,this.Pbt=t[0],this.Rbt=t[1],this.Abt=t[2].map(t=>sy.Kwt.HT(this.g5,this,t)),this.Ebt=t[3],this.Lbt=t[4],this.kbt=t[5]}Ubt(t){this.Cbt=1,this.Fbt=t[1],this.ppt=this.Nc.q0(t[2]),this.jbt.tvt(this.ppt),this.Pbt=this.ppt.Pc()+"."+this.Fbt,this.Rbt=t[3],this.Abt=t[4].map(t=>sy.Kwt.HT(this.g5,this,t)),this.Ebt=t[5],this.Lbt=t[6],this.kbt=t[7],this.ppt.Hbt(this)}static Xwt(t,s,i){const e=sy.Hn(sy._wt,t,s,i),n=i[1];return e.Vbt(n),e}static Ywt(t,s,i){const e=sy.Hn(sy._wt,t,s,i),n=i[1];return e.Ubt(n),e}vgt(){if(this.ppt&&this.ppt.S1())for(const t of this.ppt.MV())if(t.zbt(this.Fbt)){this.Obt=!0;break}}Sgt(){for(const t of this.Abt)t.Sgt();this.jbt.Sgt(!1)}Igt(){return this.Cbt}jgt(){return this.Abt}Iwt(){return this.Abt}uN(){return this.Abt.length}Jbt(t){this.Dbt.push(t)}qbt(){return this.Dbt}lbt(t){const s=this.Abt;for(let i=0,e=s.length;i<e;++i)s[i].lrt(t[i].zs(0))}abt(t){const s=this.Abt;for(let i=0,e=s.length;i<e;++i)s[i].lrt(t[i])}$bt(){return this.Abt.map(t=>t.Int())}rJ(){return this.xSt}Wgt(){return this.xSt}Cgt(){return this.Pbt}Xbt(){return this.Fbt}Ybt(){return this.Obt}yN(){return this.Rbt}cH(){return this.ppt}_u(){return this.Ebt}lN(){switch(this.Rbt){case 0:return null;case 2:return"";default:return 0}}cN(){return this.jbt}gN(){return this.kbt}Kvt(){return this.Lbt}ybt(){const t=this.Nbt++;let s;this.Bbt=t;const i=new Promise(t=>s=t);return this.Wbt.set(t,{resolve:s,Kbt:0}),[t,i]}wbt(t){const s=this.Wbt.get(t);0===s.Kbt&&(s.resolve(),this.Wbt.delete(t)),this.Bbt=-1}Zbt(){return this.Wbt.get(this.Bbt).Kbt++,this.Bbt}Qbt(t){this.Bbt=t,this.Wbt.get(t).Kbt--}tMt(t,s){const i=new Map,e=[];for(const t of this.ppt.eV().iV()){const s=t.cH();if(s.zbt(this.Fbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.jbt.ubt(t,s,this.kbt,{pbt:this.ppt,mbt:e}),i.size>0)for(const[e,n]of i){const i=e.sMt(this.Fbt).cN(),r=[...new Set([...t,...i.QX()])];i.ubt(r,s,this.kbt,{pbt:e,mbt:n})}}*iMt(t,s){const i=new Map,e=[];for(const t of this.ppt.eV().iV()){const s=t.cH();if(s.zbt(this.Fbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.jbt.Sbt(t,s,this.kbt,{pbt:this.ppt,mbt:e})),i.size>0)for(const[e,n]of i){const i=e.sMt(this.Fbt).cN(),r=[...new Set([...t,...i.QX()])];yield*i.Sbt(r,s,this.kbt,{pbt:e,mbt:n})}}}}{const iy=self._s,ey=[];iy.Kwt=class extends iy.Vn{constructor(t,s,i){super();const e=t.oN();this.g5=t,this.zpt=e,this.Nc=t.aW(),this.xSt=s,this.ngt=e.Ngt(),this.$n=i[1],this.Jc=i[2],this.eMt=i[3],this.Sx=!!i[4],this.nMt=!!i[5],this.rMt=s instanceof iy._wt,this.JQ=i[6],this.hMt=this.Nc.Ugt(i[8]),this.oMt=t=>this.lrt(t),this.aMt=()=>this.Int(),this.lMt=!this.xSt||this.Sx||this.nMt,this.sht=this.eMt,this.uMt=-1,this.cMt()&&(this.sht=this.sht?1:0),!this.fMt()||this.qx()||this.vwt()||(this.uMt=e.Agt(this)),e.Pgt(this)}static HT(t,s,i){return iy.Hn(iy.Kwt,t,s,i)}Sgt(){if(this.fMt()&&!this.qx()&&!this.vwt()&&!this.dMt()){const t=this.zpt.Twt(this);t&&t.Jbt(this)}}Pc(){return this.$n}Ugt(){return this.hMt}rJ(){return this.xSt}Wgt(){return this.rJ()}WQ(){return!this.rJ()}fMt(){return!this.WQ()}dMt(){return this.rMt}qx(){return this.Sx}vwt(){return this.nMt}Zi(){return 0===this.Jc}ae(){return 1===this.Jc}cMt(){return 2===this.Jc}rSt(){return!1}I1(){return this.JQ}Egt(){return this.eMt}QX(){return ey}mP(t){!this.fMt()||this.qx()||this.vwt()||this.lrt(this.Egt())}gSt(){return!0}*pyt(t){this.mP(t)}lrt(t){this.Zi()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this.cMt()&&(t=t?1:0),this.lMt?this.sht=t:this.ngt.Rmt()[this.uMt]=t}Int(){return this.lMt?this.sht:this.ngt.Rmt()[this.uMt]}pMt(){let t=this.Int();return this.cMt()&&(t=!!t),t}Qgt(){this.sht=this.eMt}Hgt(){return{configurable:!1,enumerable:!0,get:this.aMt,set:this.oMt}}}}{const ny=self._s,ry=(self.assert,[]);ny.Zwt=class extends ny.Vn{constructor(t,s,i){super();const e=t.oN();this.g5=t,this.zpt=e,this.Nc=t.aW(),this.xSt=s,this.mMt=null,this.gMt=i[1],this.Nf=!0}static HT(t,s,i){return ny.Hn(ny.Zwt,t,s,i)}Sgt(){this.mMt=this.zpt.x4(this.gMt),this.g5.hSt(this);let t=this.rJ();for(;t;)t instanceof ny.zwt&&t.iyt()&&t.evt(this),t=t.rJ();this.Pvt(),this.Nc.sz()&&this.g5.xwt().children.push(this.mMt.xwt())}rJ(){return this.xSt}QX(){return ry}aSt(){return this.mMt}mP(t){const s=!!this.rJ(),i=this.Nc.w1();s&&this.zpt.Eyt(i),this.mMt.mP(),s&&this.zpt.aY(i)}*pyt(t){const s=!!this.rJ(),i=this.Nc.w1();s&&this.zpt.Eyt(i),yield*this.mMt.pyt(),s&&this.zpt.aY(i)}gSt(){return!1}lSt(){return this.Nf}Pvt(){let t=this.rJ();for(;t;){if(t instanceof ny.zwt&&t.iyt()&&!t.wwt())return void(this.Nf=!1);t=t.rJ()}this.Nf=!0}}}{let hy=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const oy=self._s;self.assert;oy.yMt=class extends oy.Vn{constructor(t){super(),this.mG=t,this.Nc=t.aW()}Sgt(){}static wMt(t,s){const i=s[0],e=[fy,uy,cy,dy,ay,ly];return oy.Hn(e[i],t,s)}};class ay extends oy.yMt{constructor(t,s){super(t),this.SMt=this.Nc.RZ(),this.Gbt=this.Nc.Mbt(s[1]),this.Gbt!==oy.sW.tW.wht.random&&this.Gbt!==oy.sW.tW.wht.vMt||this.mG.bMt()}MMt(){return this.SMt.GMt(this.Gbt,this.SMt)}}class ly extends oy.yMt{constructor(t,s){super(t),this.xMt=null,this.Pbt=s[1],this.mG.bMt()}Sgt(){const t=this.Nc.oN();this.xMt=t.aN(this.Pbt),this.Pbt=null;const s=this.mG.cN(),i=this.xMt.cN();this.TMt=[...new Set([...s.fN(),...i.fN()])],this.TMt=t.Rgt(this.TMt)}MMt(){const t=this.xMt;if(t._u()){const s=t.cN();return oy.zwt.prototype.mN.bind(s,this.TMt,t.gN(),t.yN(),t.lN())}{const s=t.lN();return()=>s}}}class uy extends oy.yMt{constructor(t,s){super(t),this.ppt=this.Nc.q0(s[1]),this.Gbt=this.Nc.Mbt(s[2]),this._Mt=!!s[3],this.Mpt=this.Nc.oN().vN(),this.mG.IMt(this.ppt)}MMt(){return this.ppt.zj().GMt(this.Gbt,this.ppt.Vj().sq())}CMt(...t){const s=this.ppt,i=s.eV().Rpt(),e=i.length;if(0===e)return this._Mt?"":0;const n=hy(this.mG.PMt(),e);return this.Mpt.tY().wmt(s),this.Gbt.apply(i[n].sq(),t)}RMt(t,...s){const i=this.ppt,e=i.iV(),n=e.length;if(0===n||"number"!=typeof t)return this._Mt?"":0;const r=hy(t,n);return this.Mpt.tY().wmt(i),this.Gbt.apply(e[r].sq(),s)}}class cy extends oy.yMt{constructor(t,s){super(t),this.ppt=this.Nc.q0(s[1]),this.AMt=s[3],this._Mt=!!s[2],this.mG.IMt(this.ppt)}EMt(){const t=this.ppt.eV().Rpt(),s=t.length;return 0===s?this._Mt?"":0:t[hy(this.mG.PMt(),s)].FMt(this.AMt)}OMt(){const t=this.ppt,s=t.eV().Rpt(),i=s.length;if(0===i)return this._Mt?"":0;const e=s[hy(this.mG.PMt(),i)],n=e.cH().DMt(t.kMt());return e.FMt(this.AMt+n)}LMt(t){const s=this.ppt,i=s.iV(),e=i.length;if(0===e||"number"!=typeof t)return this._Mt?"":0;const n=i[hy(t,e)];let r=0;return s.S1()&&(r=n.cH().DMt(s.kMt())),n.FMt(this.AMt+r)}}class fy extends oy.yMt{constructor(t,s){super(t),this.ppt=this.Nc.q0(s[1]),this.NMt=this.ppt.Frt(s[2]),this.BMt=this.ppt.eet(s[2]),this.Gbt=this.Nc.Mbt(s[3]),this._Mt=!!s[4],this.Mpt=this.Nc.oN().vN(),this.mG.IMt(this.ppt)}WMt(...t){const s=this.ppt,i=s.eV().Rpt(),e=i.length;if(0===e)return this._Mt?"":0;const n=hy(this.mG.PMt(),e);this.Mpt.tY().wmt(s);const r=i[n];let h=0;return s.S1()&&(h=r.cH().jMt(s.kMt())),this.Gbt.apply(r.Ert()[this.BMt+h].sq(),t)}VMt(t,...s){const i=this.ppt,e=i.iV(),n=e.length;if(0===n||"number"!=typeof t)return this._Mt?"":0;const r=hy(t,n);this.Mpt.tY().wmt(i);const h=e[r];let o=0;return i.S1()&&(o=h.cH().jMt(i.kMt())),this.Gbt.apply(h.Ert()[this.BMt+o].sq(),s)}}class dy extends oy.yMt{constructor(t,s){super(t),this.UMt=null,this.HMt=s[1]}Sgt(){this.UMt=this.Nc.oN().zgt(this.HMt)}zMt(){return this.UMt}}}{let py=function(t){const s=self.JMt[t];if(!s)throw new Error("invalid expression number");return s};0;const my=self._s;self.assert;my.qMt=class extends my.Vn{constructor(t,s,i){super(),this.mG=t,this.Rw=i,this.Jc=s,this.zs=null,this.$Mt=!1,this.nMt=!1}static HT(t,s,i){const e=s[0],n=[gy,yy,xy,Sy,by,wy,My,gy,Sy,Sy,Ty,_y,xy,Cy,yy,Gy,vy,Iy,Py,Ry,Ay,Ey];return my.Hn(n[e],t,e,i,s)}Sgt(){}bMt(){this.$Mt=!0}IMt(t){this.$Mt||t&&(t.zj().Sj()||(this.$Mt=!0))}XMt(){return this.$Mt}ML(){return this.Rw}aW(){return this.mG.aW()}cN(){return this.mG.cN()}vwt(){return this.nMt}YMt(){return 4===this.Jc}};class gy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.KMt=0;const n=e[1];this.ZMt=n[0],this.QMt=[],this.tGt=null;for(let t=1,s=n.length;t<s;++t)this.QMt.push(my.yMt.wMt(this,n[t]));this.QMt.length?this.zs=this.sGt:(this.zs=py(this.ZMt),this.nMt=!0)}iGt(t){if(t<0||t>=this.QMt.length)throw new RangeError("invalid numbered node");return this.QMt[t]}Sgt(){for(const t of this.QMt)t.Sgt();const t=py(this.ZMt);this.QMt.length?this.tGt=t(this):this.tGt=t}PMt(){return this.KMt}sGt(t){return this.KMt=t,this.tGt()}}class yy extends gy{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.eGt,14===s&&(this.cN().ovt(),this.mG instanceof my.svt&&this.cN().vvt())}eGt(t){this.KMt=t;const s=this.tGt();return"string"==typeof s?s:""}nGt(){return py(this.ZMt)()}}class wy extends gy{constructor(t,s,i,e){super(t,s,i,e),t.rGt()>=2?this.zs=this.VV:this.zs=this.kB,this.nMt=!1}kB(t){this.KMt=t;const s=this.tGt();return this.aW().EB().kB(s)}VV(t){const s=this.kB(t);return s?s.VV():null}}class Sy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.hGt=e[1],this.zs=this.oGt,this.nMt=!0}oGt(){return this.hGt}}class vy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.aGt=e[1],this.zs=this.lGt,this.nMt=!0}lGt(){return this.aGt}}class by extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.ppt=this.aW().q0(e[1]),t.rGt()>=2?this.zs=this.Bj:this.zs=this.cH;const n=this.cN();n.tvt(this.ppt),this.mG instanceof my.svt?n.vvt():n.rJ()&&n.rJ().vvt(),this.nMt=!0}cH(){return this.ppt}Bj(){return this.ppt?this.ppt.Bj():null}}class My extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.VQ=this.aW().dB().C6(e[1]),t.rGt()>=2?this.zs=this.cB:this.zs=this.pB,this.nMt=!0}pB(){return this.VQ}cB(){return this.VQ?this.VQ.cB():null}}class Gy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.O7=this.aW().Vtt().W8(e[1]),t.rGt()>=2?this.zs=this.vit:this.zs=this.jit,this.nMt=!0}jit(){return this.O7}vit(){return this.O7?this.O7.vit():null}}class xy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.uGt=e[1],this.zs=this.cGt,this.nMt=!0}cGt(){return this.uGt}}class Ty extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.fGt=e[1];const n=this.mG.cH();this.mG instanceof my.QSt&&this.mG.qx()?(this.zs=this.dGt,this.nMt=!0):n&&n.S1()?(this.zs=this.pGt,this.bMt()):(this.zs=this.dGt,this.nMt=!0)}dGt(){return this.fGt}pGt(t){t=t||0;const s=this.mG.cH(),i=s.eV(),e=i.iV();let n=null;if(e.length)n=e[t%e.length].cH();else if(i.Cpt()){const s=i.Ppt();n=s[t%s.length].cH()}else{if(!(s.hV()>0))return 0;{const i=s.iV();n=i[t%i.length].cH()}}return this.fGt+n.DMt(s.kMt())}}class _y extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.HMt=e[1],this.UMt=null,t.rGt()>=2?this.zs=this.mGt:this.zs=this.gGt,this.nMt=!0}Sgt(){this.UMt=this.aW().oN().zgt(this.HMt)}gGt(){return this.UMt}mGt(){return null}}class Iy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.yGt=e[1],this.xMt=null,t.rGt()>=2?this.zs=this.wGt:this.zs=this.SGt,this.nMt=!0}Sgt(){this.xMt=this.aW().oN().aN(this.yGt),this.yGt=null}SGt(){return this.xMt}wGt(){return null}}class Cy extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.vGt=[],this.bGt=[],this.nMt=!0;for(let t=1,s=e.length;t<s;++t){const s=my.qMt.HT(this.mG,e[t],0);this.vGt.push(s),this.bGt.push(0),s.vwt()||(this.nMt=!1)}this.zs=this.MGt}Sgt(){for(const t of this.vGt)t.Sgt()}MGt(){const t=this.vGt,s=this.bGt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0);return s}}class Py extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.GGt=e[1],this.zs=this.art,this.nMt=!0}art(){return this.GGt}}class Ry extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.xGt=e[1],this.zs=this.TGt,this.nMt=!0}TGt(){return this.xGt}}class Ay extends gy{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.CH,this.nMt=!1}CH(){return this.tGt()}}class Ey extends my.qMt{constructor(t,s,i,e){super(t,s,i),this.Rct=this.aW().$ct().xct(e[1]),this.zs=this._Gt,this.nMt=!0}_Gt(){return this.Rct.Pc()}}}{let Fy=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};0;const Oy=self._s,Dy=(self.assert,[]),ky=function(){};Oy.QSt=class extends Oy.Vn{constructor(t,s,i){if(super(),this.jbt=t,this.Nc=t.aW(),this.Rw=i,this.Gbt=this.Nc.Mbt(s[1]),this.IGt=s[3]>0,this.CGt=2===s[3],this.PGt=!!s[4],this.RGt=!!s[5],this.Sx=!!s[6],this.JQ=s[7],this.AGt=this.jbt.Upt(),this.ppt=null,this.NMt=null,this.BMt=-1,this.SMt=null,this.mP=ky,this.pyt=ky,this.Ws=[],this.EGt=[],this.FGt=!1,this.OGt=null,this.DGt=null,this.zSt=this.Nc.sz()?{JSt:s[8][0],kGt:s[8][1]}:null,-1===s[0]?this.SMt=this.Nc.RZ():(this.ppt=this.Nc.q0(s[0]),s[2]&&(this.NMt=this.ppt.Frt(s[2]),this.BMt=this.ppt.eet(s[2])),this.jbt.rJ()&&this.jbt.rJ().vvt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(Oy.qMt.HT(this,s,this.Ws.length)),this.EGt.push(0)}0===this.Ws.length&&(this.Ws=Dy,this.EGt=Dy),this.jbt.oN().xgt(this)}static HT(t,s,i){return Oy.Hn(Oy.QSt,t,s,i)}Sgt(){for(const t of this.Ws)t.Sgt(),t.XMt()&&(this.FGt=!0);this.CGt?(this.mP=this.LGt,this.pyt=this.NGt):this.SMt?(this.BGt(),this.pyt=this.WGt):this.ppt.zj().Sj()?(this.jGt(),this.pyt=this.VGt):this.Sx?(this.mP=this.UGt,this.pyt=this.HGt):(this.mP=this.zGt,this.pyt=this.JGt)}BGt(){const t=this.SMt,s=this.SMt;this.qGt(t,s,this.$Gt)}jGt(){const t=this.ppt.zj(),s=this.ppt.Vj().sq();this.qGt(t,s,this.XGt)}qGt(t,s,i){const e=this.Gbt,n=this.RGt,r=this.Ws;if(0===r.length){const i=t.GMt(e,s);this.mP=n?function(){return Oy.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.vwt())this.mP=t.YGt(e,s,i.zs(0));else{const r=t.GMt(e,s);this.mP=function(){return Oy.xor(r(i.zs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.vwt()&&h.vwt())this.mP=t.KGt(e,s,i.zs(0),h.zs(0));else{const r=t.GMt(e,s);this.mP=function(){return Oy.xor(r(i.zs(0),h.zs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.vwt()&&h.vwt()&&o.vwt())this.mP=t.ZGt(e,s,i.zs(0),h.zs(0),o.zs(0));else{const r=t.GMt(e,s);this.mP=function(){return Oy.xor(r(i.zs(0),h.zs(0),o.zs(0)),n)}}}else this.mP=i}I1(){return this.JQ}tSt(){return this.Gbt}cH(){return this.ppt}cq(){return this.NMt}QGt(){return this.NMt?this.NMt.aq():this.ppt?this.ppt.zj():null}rGt(){const t=this.QGt();return t?t.txt():1}cN(){return this.jbt}aW(){return this.Nc}ML(){return this.Rw}Nvt(){return this.ML()}qwt(){return this.IGt}sSt(){return this.CGt}sxt(){return this.RGt}_q(){return this.PGt}qx(){return this.Sx}ixt(){return this.zSt.JSt}nxt(){return!!this.SMt}Fvt(){return this.nxt()||this.ppt.zj().Sj()}Ovt(){for(const t of this.Ws)if(t.YMt())return t.cH();return null}rxt(t){this.zSt.JSt=!!t,this.jbt.yvt()}hxt(){return this.zSt.kGt}gSt(){return!this.ixt()&&!this.Nc.qvt()&&!this.hxt()}oxt(){return this.OGt||(this.OGt=new Map),this.OGt}axt(){return this.DGt||(this.DGt=new Map),this.DGt}$Gt(){const t=this.EGt;return Fy(this.Ws,t),Oy.xor(this.Gbt.apply(this.SMt,t),this.RGt)}*WGt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;Fy(this.Ws,t);let s=this.Gbt.apply(this.SMt,t);return Oy.bo(s)&&(s=yield*s),Oy.xor(s,this.RGt)}return this.mP()}XGt(){const t=this.EGt;Fy(this.Ws,t);const s=this.ppt.Vj().sq();return Oy.xor(this.Gbt.apply(s,t),this.RGt)}*VGt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;Fy(this.Ws,t);const s=this.ppt.Vj().sq();let i=this.Gbt.apply(s,t);return Oy.bo(i)&&(i=yield*i),Oy.xor(i,this.RGt)}return this.mP()}LGt(){return!0}*NGt(){return(this.ixt()||this.Nc.qvt())&&(yield this),!0}lxt(){return this.NMt?this.NMt.aq().txt()>=2?this.NMt.uq():this.NMt:this.ppt.zj().txt()>=2?this.ppt.Bj():this.ppt}UGt(){const t=this.EGt;Fy(this.Ws,t);const s=this.Gbt.apply(this.lxt(),t);return this.ppt.dbt(),s}*HGt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;Fy(this.Ws,t);let s=this.Gbt.apply(this.lxt(),t);return Oy.bo(s)&&(s=yield*s),this.ppt.dbt(),s}return this.mP()}zGt(){const t=this.Ws,s=this.EGt,i=this.ppt.eV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}return i._pt()?this.uxt(i):this.cxt(i)}*JGt(){return(this.ixt()||this.Nc.qvt())&&(yield this),this.zGt()}fxt(t){const s=this.Ws,i=this.EGt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.XMt()&&(i[e]=n.zs(t))}}uxt(t){const s=this.ppt,i=s.S1(),e=s.kMt(),n=this.BMt,r=n>=0,h=s.iV(),o=this.FGt,a=this.EGt,l=this.Gbt,u=this.RGt,c=this.AGt&&!this.IGt;t.Tpt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.fxt(s),r){const t=i?f.cH().jMt(e):0;d=l.apply(f.Ert()[n+t].sq(),a)}else d=l.apply(f.sq(),a);Oy.xor(d,u)?t.Apt(f):c&&t.Ept(f)}return s.dxt(!0),t.Fpt(!1),s.dbt(),t.Ipt()}cxt(t){const s=this.ppt,i=s.S1(),e=s.kMt(),n=s.MH(),r=this.BMt,h=r>=0,o=this.FGt,a=this.EGt,l=this.Gbt,u=this.RGt,c=this.AGt&&!this.IGt,f=t.Opt(),d=t.Dpt(),p=c&&!this.jbt.Evt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.fxt(t),h){const t=i?s.cH().jMt(e):0;w=l.apply(s.Ert()[r+t].sq(),a)}else w=l.apply(s.sq(),a);Oy.xor(w,u)?(y=!0,p?(f.push(s),n&&s.pxt()):(m[g]=s,n&&s.mxt(g),++g)):p?(m[g]=s,n&&s.gxt(g),++g):c&&(d.push(s),n&&s.yxt())}Oy.wh(m,g),n&&s.wxt(p,g);const w=y;return p&&!y&&(y=this.Sxt(f)),s.dxt(w||c),c?y:t.Ipt()}Sxt(t){const s=this.ppt,i=s.S1(),e=s.kMt(),n=this.FGt,r=this.BMt,h=r>=0,o=this.EGt,a=this.Gbt,l=this.RGt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.fxt(s),h){const t=i?u.cH().jMt(e):0;c=a.apply(u.Ert()[r+t].sq(),o)}else c=a.apply(u.sq(),o);if(Oy.xor(c,l))return!0}return!1}vxt(t,s){return this.Ws[t].zs(s)}iSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].nGt()}i5(){if(!this.OGt||!this.OGt.size)return null;const t={};for(const[s,i]of this.OGt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].xH(),t[1].xH(),t[2]])),t[s]=e}return{ex:t}}e5(t){if(this.OGt&&(this.OGt.clear(),this.OGt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.oxt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=Oy.Hn(Oy.Iu,n.map(t=>[s.PB(t[0]),s.PB(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let Ly=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};0;const Ny=self._s,By=(self.assert,[]),Wy=function(){},jy=function*(){};Ny.svt=class extends Ny.Vn{constructor(t,s,i){super(),this.jbt=t;const e=t.aW();this.Nc=e,this.Rw=i,this.JQ=s.length>=4?s[3]:-1,this.bxt=s.length>=5?255&s[4]:0,this.Mxt=s.length>=5?s[4]>>8:0,this.Gbt=null,this.ppt=null,this.NMt=null,this.BMt=-1,this.SMt=null,this.Gxt="",this.xxt=null,this.Txt=null,this.mP=Wy,this.pyt=Wy,this.Ws=[],this.EGt=[],this.FGt=!1,this.OGt=null,this.DGt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.zSt=e.sz()||n?{JSt:r[0],kGt:r[1],index:r[2]}:null,-1===s[0])this.SMt=e.RZ(),this.Gbt=e.Mbt(s[1]);else if(-2===s[0])this.Gxt=s[1];else if(n){const t=e.Mbt(s[1]);this.Gbt=t,this.mP=this._xt,this.pyt=this.Ixt,this.Mxt|=8}else this.ppt=e.q0(s[0]),4&this.Mxt?(this.Gxt=s[1],this.xxt=e.q0(s[2])):(s[2]&&(this.NMt=this.ppt.Frt(s[2]),this.BMt=this.ppt.eet(s[2])),this.Gbt=e.Mbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(Ny.qMt.HT(this,s,this.Ws.length)),this.EGt.push(0)}0===this.Ws.length&&(this.Ws=By,this.EGt=By),this.Cxt()&&(this.jbt.ovt(),this.jbt.vvt()),this.jbt.oN().Tgt(this)}static HT(t,s,i){return Ny.Hn(Ny.svt,t,s,i)}Sgt(){for(const t of this.Ws)t.Sgt(),t.XMt()&&(this.FGt=!0);if(this.SMt)this.BGt(),this.pyt=this.WGt;else if(this.Gxt)4&this.Mxt?this.Pxt():this.Rxt(),this.Gxt="",this.xxt=null;else if(this.mP===this._xt){const t=this.Gbt,s=this.Nc.oN().Vgt(this.jbt);this.Gbt=t.bind(null,this.Nc.gj(),s)}else this.NMt?this.Kvt()?(this.mP=this.Axt,this.pyt=this.Ext):(this.mP=this.Fxt,this.pyt=this.Oxt):this.ppt.zj().Sj()?(this.jGt(),this.pyt=this.VGt):this.qx()?(this.mP=this.Dxt,this.pyt=this.kxt):this.Kvt()?(this.mP=this.Lxt,this.pyt=this.Nxt):this.Bxt()?(this.mP=this.Wxt,this.pyt=this.jxt):this.Ws.length?this.Ws.every(t=>t.XMt())?(this.mP=this.Vxt,this.pyt=this.Uxt):this.FGt?(this.mP=this.Hxt,this.pyt=this.zxt):this.Ws.every(t=>t.vwt())?(Ly(this.Ws,this.EGt),this.mP=this.Jxt,this.pyt=this.qxt):(this.mP=this.$xt,this.pyt=this.Xxt):(this.mP=this.Jxt,this.pyt=this.qxt)}BGt(){const t=this.SMt,s=this.SMt;this.qGt(t,s,this.$Gt)}jGt(){const t=this.ppt.zj(),s=this.ppt.Vj().sq();this.qGt(t,s,this.XGt)}Rxt(){const t=this.jbt.oN(),s=t.aN(this.Gxt);if(s._u()){const i=!!(2&this.Mxt);this.Txt=s.cN();let e=[...new Set([...this.jbt.fN(),...this.Txt.fN()])];e=t.Rgt(e);const n=!s.gN()&&this.Yxt()?{gbt:!0}:null;if(this.mP=Ny.zwt.prototype.ubt.bind(this.Txt,e,this.Ws,i,n),this.Nc.sz()){const t=this;this.pyt=function*(){return(t.ixt()||t.Nc.qvt())&&(yield t),yield*t.Txt.Sbt(e,t.Ws,i,n)}}else this.pyt=jy}else this.mP=Wy,this.pyt=jy}Pxt(){const t=this.jbt.oN(),s=t.Xgt(this.xxt,this.Gxt);if(s._u()){const i=!!(2&this.Mxt);this.Txt=s.cN();let e=[...new Set([...this.jbt.fN(),...this.Txt.fN(),this.ppt,s.cH()])];e=t.Rgt(e);const n=!this.ppt.S1()&&!s.cH().S1(),r=!this.ppt.S1()&&s.cH().S1(),h=this.ppt.S1();let o=null;if(!s.gN()&&this.Yxt()&&(o=o||{},o.gbt=!0),!r&&i||(o=o||{},o.cbt=this.ppt,o.fbt=s.cH()),n||r||h&&!s.Ybt()?this.mP=Ny.zwt.prototype.ubt.bind(this.Txt,e,this.Ws,i,o):h&&(this.mP=Ny._wt.prototype.tMt.bind(s,e,this.Ws)),this.Nc.sz()){const t=this;n||r||h&&!s.Ybt()?this.pyt=function*(){return(t.ixt()||t.Nc.qvt())&&(yield t),yield*t.Txt.Sbt(e,t.Ws,i,o)}:h&&(this.pyt=function*(){return(t.ixt()||t.Nc.qvt())&&(yield t),yield*s.iMt(e,t.Ws)})}else this.pyt=jy}else this.mP=Wy,this.pyt=jy}qGt(t,s,i){const e=this.Gbt,n=this.Ws;if(0===n.length)this.mP=t.GMt(e,s);else if(1===n.length){const i=n[0];if(i.vwt())this.mP=t.YGt(e,s,i.zs(0));else{const n=t.GMt(e,s);this.mP=function(){return n(i.zs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.vwt()&&r.vwt())this.mP=t.KGt(e,s,i.zs(0),r.zs(0));else{const n=t.GMt(e,s);this.mP=function(){return n(i.zs(0),r.zs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.vwt()&&r.vwt()&&h.vwt())this.mP=t.ZGt(e,s,i.zs(0),r.zs(0),h.zs(0));else{const n=t.GMt(e,s);this.mP=function(){return n(i.zs(0),r.zs(0),h.zs(0))}}}else this.mP=i}I1(){return this.JQ}Kvt(){return!!(8&this.Mxt)}Yvt(){return!!(16&this.Mxt)}Bxt(){return 1===this.bxt}qx(){return 2===this.bxt}Cxt(){return!!(1&this.Mxt)}uvt(){return this.Kvt()||this.Yvt()}cH(){return this.ppt}QGt(){return this.NMt?this.NMt.aq():this.ppt?this.ppt.zj():null}rGt(){const t=this.QGt();return t?t.txt():1}cN(){return this.jbt}Yxt(){let t=this.jbt;do{if(t instanceof Ny._wt&&t.gN())return!0;t=t.Wgt()}while(t);return!1}aW(){return this.Nc}ML(){return this.Rw}Nvt(){return this.zSt.index}ixt(){return this.zSt.JSt}rxt(t){this.zSt.JSt=!!t,this.jbt.yvt()}hxt(){return this.zSt.kGt}gSt(){return!this.ixt()&&!this.Nc.qvt()&&!this.hxt()}oxt(){return this.OGt||(this.OGt=new Map),this.OGt}axt(){return this.DGt||(this.DGt=new Map),this.DGt}$Gt(){const t=this.EGt;return Ly(this.Ws,t),this.Gbt.apply(this.SMt,t)}*WGt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;return Ly(this.Ws,t),yield*this.Gbt.apply(this.SMt,t)}return this.mP()}XGt(){const t=this.EGt;return Ly(this.Ws,t),this.Gbt.apply(this.ppt.Vj().sq(),t)}*VGt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;return Ly(this.Ws,t),yield*this.Gbt.apply(this.ppt.Vj().sq(),t)}return this.mP()}Jxt(){const t=this.EGt,s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)this.Gbt.apply(s[i].sq(),t)}*qxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt,s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)yield*this.Gbt.apply(s[i].sq(),t)}else this.Jxt()}$xt(){const t=this.EGt;Ly(this.Ws,t);const s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)this.Gbt.apply(s[i].sq(),t)}*Xxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;Ly(this.Ws,t);const s=this.ppt.eV().iV();for(let i=0,e=s.length;i<e;++i)yield*this.Gbt.apply(s[i].sq(),t)}else this.$xt()}Vxt(){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt.eV().iV();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);i.apply(r.sq(),s)}}*Uxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt.eV().iV();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);yield*i.apply(r.sq(),s)}}else this.Vxt()}Hxt(){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt.eV().iV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.zs(n))}i.apply(r.sq(),s)}}*zxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt.eV().iV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.zs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.zs(n))}yield*i.apply(r.sq(),s)}}else this.Hxt()}Wxt(){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt,n=e.Kxt(),r=e.eV().iV();n.Zxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].zs(e);i.apply(n.sq(),s)}n.Qxt(i)}*jxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt,n=e.Kxt(),r=e.eV().iV();n.Zxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].zs(e);yield*i.apply(n.sq(),s)}n.Qxt(i)}else this.Wxt()}tTt(){return this.NMt?this.NMt.aq().txt()>=2?this.NMt.uq():this.NMt:this.ppt.zj().txt()>=2?this.ppt.Bj():this.ppt}Dxt(){const t=this.EGt;return Ly(this.Ws,t),this.Gbt.apply(this.tTt(),t)}*kxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.EGt;Ly(this.Ws,t);let s=this.Gbt.apply(this.tTt(),t);return Ny.bo(s)&&(s=yield*s),s}return this.Dxt()}Fxt(){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.FGt,r=this.EGt,h=this.Gbt,o=this.BMt,a=t.eV().iV();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.zs(t))}const u=s?l.cH().jMt(i):0;h.apply(l.Ert()[o+u].sq(),r)}}*Oxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.FGt,r=this.EGt,h=this.Gbt,o=this.BMt,a=t.eV().iV();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.zs(t))}const u=s?l.cH().jMt(i):0;yield*h.apply(l.Ert()[o+u].sq(),r)}}else this.Fxt()}Lxt(){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt.eV().iV(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(r);n.push(i.apply(h.sq(),s))}return Promise.all(n)}*Nxt(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.Ws,s=this.EGt,i=this.Gbt,e=this.ppt.eV().iV(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(r);n.push(yield*i.apply(h.sq(),s))}return Promise.all(n)}return this.Lxt()}Axt(){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.EGt,r=this.Gbt,h=this.BMt,o=t.eV().iV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].zs(t);const u=s?l.cH().jMt(i):0;a.push(r.apply(l.Ert()[h+u].sq(),n))}return Promise.all(a)}*Ext(){if((this.ixt()||this.Nc.qvt())&&(yield this),this.hxt()){const t=this.ppt,s=t.S1(),i=t.kMt(),e=this.Ws,n=this.EGt,r=this.Gbt,h=this.BMt,o=t.eV().iV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].zs(t);const u=s?l.cH().jMt(i):0;a.push(yield*r.apply(l.Ert()[h+u].sq(),n))}return Promise.all(a)}return this.Axt()}async _xt(){try{await this.Gbt()}catch(t){console.error(`Unhandled exception running script %c${this.jbt.K5().Pc()}, event ${this.jbt.Gvt()}, action ${this.Nvt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.iz&&self.iz.Tbt(this),Ny.Qwt._bt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Ny.Qwt.Ibt())}}*Ixt(){return(this.ixt()||this.Nc.qvt())&&(yield this),this._xt()}i5(){return this.OGt&&this.OGt.size?{ex:Ny.wo(this.OGt)}:null}e5(t){if(this.OGt&&(this.OGt.clear(),this.OGt=null),!t)return;const s=t.ex;s&&(this.OGt=Ny.So(s))}}}{let Vy=function(t){return t instanceof lw?aw.$V(t):t.C$()},Uy=function(t){return Vy(t).DB()},Hy=function(t){return aw.$V(t)},zy=function(t){return Hy(t).DB()},Jy=function(t){return t instanceof uw?aw.$V(t):t},qy=function(t){return t instanceof cw?aw.$V(t):t},$y=function(t,s,i,e){s.xH()<i.xH()?t.Set(s,i,e):t.Set(i,s,e)},Xy=function(t,s,i){s.xH()<i.xH()?t.Au(s,i):t.Au(i,s)},Yy=function(t,s){t.Eu(s)},Ky=function(t,s,i){return s.xH()<i.xH()?t.zs(s,i):t.zs(i,s)},Zy=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.DB(),h=aw.RL(),o=aw.Ogt(),a=o.cN().Upt(),l=o.cH(),u=o.sxt(),c=s.eV(),f=l!==s;let d;gw=s,mw=f&&!u,yw=!1;let p=0,m=0,g=!1;c._pt()?(fw.m(r.Nz()),fw.offset(i,e),h.sTt(r.kB(),s,fw,pw),d=pw):a?aw.iTt()&&!c.Dpt().length&&c.Opt().length?d=c.Opt():(d=c.Dpt(),yw=!0):d=c.Opt(),n&&(p=r.$M(),m=r.KM(),r.Tz(i,e),r.Mz());for(const s of d)if(h.RW(t,s)){if(g=!0,u)break;f&&ww.add(s)}return n&&(r.Gz(p,m),r.Mz()),ew.Sh(pw),g},Qy=function(t){const s=aw.dN().Upt(),i=gw.eV(),e=i.Opt(),n=i.Dpt();i._pt()?(i.Npt(ww),s&&(ew.Sh(n),i.Bpt(ww,gw.iV()))):s?yw?i.Wpt(ww):(i.Bpt(ww,e),i.Npt(ww)):i.Npt(ww),gw.dbt()},tw=function(t,s){mw&&(s&&Qy(t),ww.clear(),gw=null,mw=!1)},sw=function(t,s){const i=aw.PB(s);if(!i)return!1;const e=t.eV();if(!e._pt()&&!e.Opt().includes(i))return!1;if(t.S1()){if(i.cH().eTt(t))return e.Vpt(i),t.dbt(),!0}else if(i.cH()===t)return e.Vpt(i),t.dbt(),!0;return!1},iw=function(t,s){const i=t.eV();if(i._pt()){i.Fpt(!1),i.Tpt();const e=t.iV();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.xH()===s?i.Ept(n):i.Apt(n)}return t.dbt(),!!i.Opt().length}{const e=i.Opt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.xH()===s?i.Ept(r):++n}return ew.wh(e,n),t.dbt(),!!e.length}};0;const ew=self._s,nw=new ew.Go,rw={},hw={},ow={};let aw=null;ew.nTt=function(t){aw=t};const lw=self.uH,uw=self.Uj,cw=self.qV;hw.rTt=function(t,s){return ew.compare(this.DB().$M(),t,s)},ow.rTt=function(t,s){return ew.compare(this.x,t,s)},hw.hTt=function(t,s){return ew.compare(this.DB().KM(),t,s)},ow.hTt=function(t,s){return ew.compare(this.y,t,s)},hw.oTt=function(){return this.DB().Vz()},ow.oTt=function(){return this.jz()},rw.aTt=function(){const t=Uy(this),s=t.pB(),i=t.Nz();return i.tl()<0||i.sl()<0||i.Za()>s.Vg()||i.Qa()>s.Zg()},rw.lTt=function(t,s,i){const e=Jy(this).eV(),n=e.iV();if(!n.length)return!1;let r=n[0],h=r.DB(),o=r,a=ew.er(h.$M(),h.KM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.DB();const l=ew.er(h.$M(),h.KM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Vpt(o),!0},hw.XM=function(t){const s=this.DB();s.$M()!==t&&(s.XM(t),s.Mz())},ow.XM=function(t){this.x=+t},hw.ZM=function(t){const s=this.DB();s.KM()!==t&&(s.ZM(t),s.Mz())},ow.ZM=function(t){this.y=+t},hw.uTt=function(t,s){const i=this.DB();i.cTt(t,s)||(i.Gz(t,s),i.Mz())},ow.uTt=function(t,s){this.setPosition(t,s)},rw.fTt=function(t,s){if(!(t=Jy(t)))return;const i=Vy(this),e=t.tV(i);if(!e)return;const[n,r]=e.dTt(s),h=i.DB();h.$M()===n&&h.KM()===r||(h.Gz(n,r),h.Mz())},rw.pTt=function(t){if(0===t)return;const s=Uy(this);s.Tz(s.mTt()*t,s.gTt()*t),s.Mz()},hw.yTt=function(t,s){if(0===s)return;const i=this.DB();t=ew.Zn(t),i.Tz(Math.cos(t)*s,Math.sin(t)*s),i.Mz()},ow.yTt=function(t,s){0!==s&&(t=ew.Zn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},hw.$M=function(){return this.DB().$M()},ow.$M=function(){return this.x},hw.KM=function(){return this.DB().KM()},ow.KM=function(){return this.y},rw.RN=function(){return aw.RN(Vy(this))},hw.wTt=function(t,s){return ew.compare(this.DB().Vg(),t,s)},ow.wTt=function(t,s){return ew.compare(this.width,t,s)},hw.STt=function(t,s){return ew.compare(this.DB().Zg(),t,s)},ow.STt=function(t,s){return ew.compare(this.height,t,s)},hw.Xg=function(t){const s=this.DB();s.Vg()!==t&&(s.Xg(t),s.Mz())},ow.Xg=function(t){this.width=t},hw.Ug=function(t){const s=this.DB();s.Zg()!==t&&(s.Ug(t),s.Mz())},ow.Ug=function(t){this.height=t},hw.BR=function(t,s){const i=Uy(this);i.Vg()===t&&i.Zg()===s||(i.BR(t,s),i.Mz())},ow.BR=function(t,s){this.PV(t,s)},hw.Vg=function(){return this.DB().Vg()},ow.Vg=function(){return this.width},hw.Zg=function(){return this.DB().Zg()},ow.Zg=function(){return this.height},rw.vTt=function(){return Uy(this).Nz().Za()},rw.bTt=function(){return Uy(this).Nz().Qa()},rw.MTt=function(){return Uy(this).Nz().tl()},rw.GTt=function(){return Uy(this).Nz().sl()},rw.xTt=function(){const t=Uy(this).Nz();return(t.Za()+t.tl())/2},rw.TTt=function(){const t=Uy(this).Nz();return(t.Qa()+t.sl())/2},rw._Tt=function(t,s){return ew.rr(Uy(this).FV(),ew.Zn(s))<=ew.Zn(t)},rw.ITt=function(t){return ew.ar(Uy(this).FV(),ew.Zn(t))},rw.CTt=function(t,s){const i=ew.Zn(t),e=ew.Zn(s),n=Uy(this).FV();return ew.ar(e,i)?ew.ar(n,i)&&!ew.ar(n,e):!(!ew.ar(n,i)&&ew.ar(n,e))},hw.EV=function(t){const s=this.DB(),i=ew.Kn(ew.Zn(t));isNaN(i)||s.FV()===i||(s.EV(i),s.Mz())},ow.EV=function(t){this.kz=t},rw.PTt=function(t){if(isNaN(t)||0===t)return;const s=Uy(this);s.EV(s.FV()+ew.Zn(t)),s.Mz()},rw.RTt=function(t){if(isNaN(t)||0===t)return;const s=Uy(this);s.EV(s.FV()-ew.Zn(t)),s.Mz()},rw.ATt=function(t,s){const i=Uy(this),e=i.FV(),n=ew.hr(e,ew.Zn(s),ew.Zn(t));isNaN(n)||e===n||(i.EV(n),i.Mz())},rw.ETt=function(t,s,i){const e=Uy(this),n=e.FV(),r=s-e.$M(),h=i-e.KM(),o=Math.atan2(h,r),a=ew.hr(n,o,ew.Zn(t));isNaN(a)||n===a||(e.EV(a),e.Mz())},rw.FTt=function(t,s){const i=Uy(this),e=i.FV(),n=t-i.$M(),r=s-i.KM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.EV(h),i.Mz())},hw.FV=function(){return ew.Qn(this.DB().FV())},ow.FV=function(){return this.kz},rw.OTt=function(t,s){return ew.compare(ew.Gr(100*Uy(this).wF(),6),t,s)},hw.SU=function(){return this.DB().SU()},ow.SU=function(){return this.isVisible},rw.yU=function(t){const s=Uy(this);t=2===t?!s.SU():0!==t,s.SU()!==t&&(s.yU(t),aw.VB())},rw.vF=function(t){const s=ew.Yn(t/100,0,1),i=Uy(this);if(i.FJ()){if(i.Urt().DTt()===s)return}else if(i.wF()===s)return;i.vF(s),aw.VB()},rw.kTt=function(t){nw.Qo(t);const s=Uy(this);s.zz().zo(nw)||(s.Jz(nw),aw.VB())},rw.MF=function(){const t=Uy(this).zz();return ew.Ir(t.Lo(),t.No(),t.Bo(),t.Wo())},rw.wF=function(){return ew.Gr(100*Uy(this).wF(),6)},rw.LTt=function(t){return!!(t=qy(t))&&Uy(this).kB()===t},rw.NTt=function(t){const s=Jy(this).eV(),i=s.iV();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.DB(),h=e.DB(),o=r.kB().ML(),a=h.kB().ML();0===t?(o>a||o===a&&r.LB()>h.LB())&&(e=n):(o<a||o===a&&r.LB()<h.LB())&&(e=n)}return s.Vpt(e),!0},hw.BTt=function(t,s,i){const e=this.DB(),n=0===t?e.QM():e.Dz();return ew.compare(n,s,i)},ow.BTt=function(t,s,i){const e=0===t?this.WU:this.Oz;return ew.compare(e,s,i)},hw.WTt=function(){this.DB().$z()},ow.WTt=function(){this.qz()},hw.jTt=function(){this.DB().Yz()},ow.jTt=function(){this.Xz()},rw.VTt=function(t){(t=qy(t))&&Uy(this).Zz(t)},rw.UTt=function(t,s){const i=0===t;if(!(s=Jy(s)))return;const e=Vy(this),n=s.HTt(e);n&&e.DB().tJ(n,i)},hw.tG=function(t){const s=this.DB();s.QM()!==t&&(s.tG(t),aw.VB())},ow.tG=function(t){this.WU=t},rw.zTt=function(){return Uy(this).kB().ML()},rw.JTt=function(){return Uy(this).kB().Pc()},hw.qTt=function(){return this.DB().LB()},ow.qTt=function(){return this.zIndex},hw.$Tt=function(){return this.DB().QM()},ow.$Tt=function(){return this.WU},hw.XTt=function(){return this.DB().Dz()},ow.XTt=function(){return this.Oz},rw.YTt=function(t){const s=Vy(this),i=s.cH()._V().Drt(t);if(!i)return;const e=i.ML();return s.DB().vz().wq(e)},rw.KTt=function(t,s){const i=Vy(this),e=i.cH()._V().Drt(s);if(!e)return;const n=e.ML(),r=1===t,h=i.DB().vz();h.wq(n)!==r&&(h.Sq(n,r),h.vq(),aw.VB())},rw.ZTt=function(t,s,i){const e=Vy(this),n=e.cH()._V().Drt(t);if(!n)return;s=Math.floor(s);const r=n.z_().q_(s);if(!r)return;"color"===r?(nw.Qo(i),i=nw):"percent"===r&&(i/=100);const h=n.ML(),o=e.DB().vz();o.Mq(h,s,i)&&o.wq(h)&&aw.VB()};const fw=ew.Hn(ew.Rect),dw=[],pw=[];let mw=!1,gw=null,yw=!1;const ww=new Set;function*Sw(t){if(!t)return!1;const s=this.aW(),i=s.RL(),e=s.oN(),n=e.vN(),r=e.Ogt(),h=r.cH(),o=r.oxt(),a=r.axt(),l=n.tY(),u=s.kN(),c=u-1,f=l.dN(),d=n.sY(f);let p=o.get("collmemory");p||(p=ew.Hn(ew.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.wf().addEventListener("instancedestroy",t=>Yy(p,t.fq)));const m=h.eV(),g=t.eV(),y=m.iV();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g._pt()?(i.sTt(n.DB().kB(),t,n.DB().Nz(),dw),w=dw,i.QTt(n,t,w)):w=g.iV();for(let s=0;s<w.length;++s){const r=w[s];if(i.RW(n,r)||i.t_t(n,r)){const s=Ky(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if($y(p,n,r,u),a){const s=f.QX();e.hY(s);const i=h.eV(),o=t.eV();if(i.Fpt(!1),o.Fpt(!1),h===t){const t=i.Opt();ew.Sh(t),t.push(n),t.push(r),h.dbt()}else{const s=i.Opt(),e=o.Opt();ew.Sh(s),ew.Sh(e),s.push(n),e.push(r),h.dbt(),t.dbt()}yield*f.nbt(l,d),e.aY(s)}}else Xy(p,n,r)}ew.Sh(dw)}return n.fY(),!1}rw.s_t=function(t){const s=Jy(this);t=Jy(t);const i=s.aW();if(i.i_t())return Sw.call(s,t);if(!t)return!1;const e=i.RL(),n=i.oN(),r=n.vN(),h=n.Ogt(),o=h.cH(),a=h.oxt(),l=h.axt(),u=r.tY(),c=i.kN(),f=c-1,d=u.dN(),p=r.sY(d);let m=a.get("collmemory");m||(m=ew.Hn(ew.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.wf().addEventListener("instancedestroy",t=>Yy(m,t.fq)));const g=o.eV(),y=t.eV(),w=g.iV();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y._pt()?(e.sTt(i.DB().kB(),t,i.DB().Nz(),dw),S=dw,e.QTt(i,t,S)):S=y.iV();for(let s=0;s<S.length;++s){const r=S[s];if(e.RW(i,r)||e.t_t(i,r)){const s=Ky(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if($y(m,i,r,c),a){const s=d.QX();n.hY(s);const e=o.eV(),h=t.eV();if(e.Fpt(!1),h.Fpt(!1),o===t){const t=e.Opt();ew.Sh(t),t.push(i),t.push(r),o.dbt()}else{const s=e.Opt(),n=h.Opt();ew.Sh(s),ew.Sh(n),s.push(i),n.push(r),o.dbt(),t.dbt()}d.oY(u,p),n.aY(s)}}else Xy(m,i,r)}ew.Sh(dw)}return r.fY(),!1},rw.e_t=function(t){return t=Jy(t),Zy(Vy(this),t,0,0)},rw.n_t=function(t,s,i){return t=Jy(t),Zy(Vy(this),t,s,i)},rw.r_t=function(){return!0},rw.wJ=function(){return Uy(this).wJ()},rw.h5=function(){return Uy(this).h5()},rw.h_t=function(t,s){const i=Jy(this);t=Jy(t);const e=i.aW(),n=this.eV().iV();if(0===n.length)return!1;const r=t.eV();let h=r.iV();if(r._pt()){const s=[...e.o_t(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r._pt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.aJ())s.a_t(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.rJ(),null===i)continue}else i=e.oJ();i.a_t(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Npt(a),t.dbt(),!0)},rw.l_t=function(t,s){const i=Jy(this);t=Jy(t);const e=i.aW(),n=i.eV().iV();if(0===n.length)return!1;const r=t.eV();let h=r.iV();if(r._pt()){const s=[...e.o_t(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r._pt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.h5()||!e.a_t(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.dJ())2===s&&i.h5()||i.a_t(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Npt(a),t.dbt(),!0)},rw.u_t=function(t,s,i){const e=Jy(this);t=Jy(t);const n=e.aW(),r=e.eV().iV();if(0===r.length)return!1;const h=t.eV();let o=h.iV();if(h._pt()){const s=[...n.o_t(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h._pt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.fJ(i);null!==s&&s.a_t(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.a_t(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Lpt(l),t.dbt(),!0)},rw.c_t=function(t,s,i){const e=Vy(this);switch(t){case 0:default:return ew.compare(e.uJ(),s,i);case 1:return ew.compare(e.f_t(),s,i)}},rw.mJ=function(t,s,i,e,n,r,h,o,a,l){t=Jy(t);const u=Vy(this),c=aw.kgt().cH();for(const f of t.d_t(u,c)){if(!f.zj().Aj())return;u.mJ(f,{vJ:s,MJ:i,xJ:e,_J:n,CJ:r,EJ:h,RJ:o,OJ:a,kJ:l})}},rw.gJ=function(t){t=Jy(t);const s=Vy(this),i=aw.kgt().cH();for(const e of t.d_t(s,i))s.gJ(e)},rw.p_t=function(){const t=Vy(this);t.wJ()&&t.rJ().gJ(t)},rw.m_t=function(){const t=Vy(this).rJ();return t?t.xH():-1},rw.g_t=function(){return Vy(this).uJ()},rw.y_t=function(){return Vy(this).f_t()},rw.w_t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Uy(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.jJ(),i.Mz()):i.BJ(t,s)},rw.UJ=function(t,s,i,e,n,r,h,o){const a=Uy(this);a.UJ(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,WU:r,qJ:h,$J:o})&&a.Mz()},rw.S_t=function(){const t=Uy(this);return t.zJ()?t.JJ()._G():0},rw.v_t=function(){const t=Uy(this);return t.zJ()?t.JJ().IG():0},rw.b_t=function(t){const s=Uy(this);t=2===t?!s.SU():0!==t,s.SU()!==t&&s.yU(t)},rw.rq=function(t,s){this instanceof self.uH?this.GX(t,s):this.rq(t,s)},rw.M_t=function(t,s){this instanceof self.uH?this.TX(t,""+s):this.M_t(t,""+s)},rw.G_t=function(t){this instanceof self.uH?this._X(t):this.G_t(t)},rw.x_t=function(){this instanceof self.uH?this.vX():this.iq()},rw.T_t=function(){this instanceof self.uH?this.bX():this.eq()},rw.__t=function(){return this instanceof self.uH?this.MX():this.__t()},rw.I_t=function(t){this instanceof self.uH?this.C_t(0!==t):this.P_t(0!==t)},rw.R_t=function(){return this instanceof self.uH?this.Ebt():this.A_t()},hw.E_t=function(t,s,i){return ew.compare(this.C$().lot(t),s,i)},ow.E_t=function(t,s,i){return ew.compare(Hy(this).lot(t),s,i)},hw.F_t=function(t){return!!this.C$().lot(t)},ow.F_t=function(t){return!!Hy(this).lot(t)},rw.O_t=function(t,s){const i=Jy(this),e=i.eV(),n=e.iV();if(!n.length)return!1;const r=i.S1();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.cH().DMt(i.kMt()):0,u=a.lot(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Vpt(h),!0},rw.D_t=function(t){const s=Jy(this);return s.aW().Ogt().sxt()?iw(s,t):sw(s,t)},rw.h$=function(t){const s=new Set(ew.Dh(t)),i=Vy(this).FH();return s.isSubsetOf(i)},rw.k_t=function(){return Vy(this).L_t()},rw.N_t=function(){return Vy(this).FH().size},rw.B_t=function(t){return Vy(this).W_t(t)},rw.j_t=function(t,s){const i=ew.Dh(s);if(0===i.length)return;const e=Vy(this),n=new Set(e.FH());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.DH(n)},rw.V_t=function(){aw.yH(Vy(this))},rw.U_t=function(){return!0},rw.H_t=function(){return!0},hw.z_t=function(t,s){this.C$().uot(t,s)},ow.z_t=function(t,s){Hy(this).uot(t,s)},hw.J_t=function(t,s){const i=this.C$(),e=i.lot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.uot(t,e+s)},ow.J_t=function(t,s){const i=Hy(this),e=i.lot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.uot(t,e+s)},hw.q_t=function(t,s){const i=this.C$(),e=i.lot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.uot(t,e-s))},ow.q_t=function(t,s){const i=Hy(this),e=i.lot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.uot(t,e-s))},hw.$_t=function(t,s){this.C$().uot(t,s?1:0)},ow.$_t=function(t,s){Hy(this).uot(t,s?1:0)},hw.X_t=function(t){const s=this.C$();s.uot(t,0===s.lot(t)?1:0)},ow.X_t=function(t){const s=Hy(this);s.uot(t,0===s.lot(t)?1:0)},rw.Y_t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Vy(this),e="state";aw.K_t(),i.u8(e),i.aG(s,e),aw.Z_t(e,{Q_t:!0})},rw.tIt=function(){return JSON.stringify(Vy(this).oG("state"))},rw.sIt=function(){return Vy(this).cH().Pc()},rw.iIt=function(){const t=aw.Fgt().Smt();let s=t.hV();for(const i of aw.o_t(t))++s;return s},rw.eIt=function(){return aw.Fgt().Smt().eV().iV().length},hw._H=function(){return this.C$()._H()},ow._H=function(){return Hy(this)._H()},hw.xH=function(){return this.C$().xH()},ow.xH=function(){return Hy(this).xH()},rw.ewt=function(t){const s=Vy(this);return t.toLowerCase()===aw.oN().owt(s)},rw.LH=function(t){const s=Vy(this);aw.oN().LH(s,t)},rw.nIt=function(t){const s=Jy(this);return aw.oN().Oyt().rIt(s.eV().iV(),t),!0},rw.hIt=function(){return Vy(this).CH()},ew.oIt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.QB,w=s.yht,S=s.wht,v=Object.assign({},rw,i>=2?ow:hw);n&&(y.rTt=v.rTt,y.hTt=v.hTt,y.oTt=v.oTt,y.aTt=v.aTt,y.lTt=v.lTt,w.XM=v.XM,w.ZM=v.ZM,w.uTt=v.uTt,w.fTt=v.fTt,w.pTt=v.pTt,w.yTt=v.yTt,S.aIt=v.$M,S.lIt=v.KM,S.PN=v.RN),r&&(y.wTt=v.wTt,y.STt=v.STt,w.Xg=v.Xg,w.Ug=v.Ug,w.BR=v.BR,S.uIt=v.Vg,S.cIt=v.Zg,S.fIt=v.vTt,S.dIt=v.bTt,S.pIt=v.MTt,S.mIt=v.GTt,S.gIt=v.xTt,S.yIt=v.TTt),h&&(y.wIt=v._Tt,y.SIt=v.ITt,y.CTt=v.CTt,w.EV=v.EV,w.PTt=v.PTt,w.RTt=v.RTt,w.ATt=v.ATt,w.ETt=v.ETt,w.FTt=v.FTt,S.vIt=v.FV),o&&(y.SU=v.SU,y.OTt=v.OTt,w.yU=v.yU,w.vF=v.vF,w.kTt=v.kTt,S.Opacity=v.wF,S.ColorValue=v.MF),a&&(y.LTt=v.LTt,y.NTt=v.NTt,y.BTt=v.BTt,w.WTt=v.WTt,w.jTt=v.jTt,w.VTt=v.VTt,w.UTt=v.UTt,w.tG=v.tG,S.zTt=v.zTt,S.JTt=v.JTt,S.qTt=v.qTt,S.$Tt=v.$Tt,S.XTt=v.XTt),l&&(y.YTt=v.YTt,w.KTt=v.KTt,w.ZTt=v.ZTt),d&&(y.r_t=v.r_t,y.wJ=v.wJ,y.h5=v.h5,y.h_t=v.h_t,y.l_t=v.l_t,y.u_t=v.u_t,y.c_t=v.c_t,w.mJ=v.mJ,w.gJ=v.gJ,w.p_t=v.p_t,S.m_t=v.m_t,S.g_t=v.g_t,S.y_t=v.y_t),p&&(w.w_t=v.w_t,w.UJ=v.UJ,S.S_t=v.S_t,S.v_t=v.v_t),u&&(y.SU=v.SU,w.yU=v.b_t,w.bIt=v.rq,w.MIt=v.M_t,w.GIt=v.G_t),c&&(y.xIt=v.__t,w.TIt=v.x_t,w._It=v.T_t),f&&(y._u=v.R_t,w.IIt=v.I_t),m&&(y.s_t=v.s_t,y.e_t=v.e_t,y.n_t=v.n_t,s.CIt=tw),e||(y.E_t=v.E_t,y.F_t=v.F_t,y.O_t=v.O_t,y.D_t=v.D_t,y.h$=v.h$,w.z_t=v.z_t,w.J_t=v.J_t,w.q_t=v.q_t,w.$_t=v.$_t,w.X_t=v.X_t,w.j_t=v.j_t,y.U_t=v.U_t,y.H_t=v.H_t,w.V_t=v.V_t,w.Y_t||(w.Y_t=v.Y_t),S.tIt||(S.tIt=v.tIt),S.iIt=v.iIt,S.eIt=v.eIt,S.PIt=v._H,S.RIt=v.xH,S.sIt=v.sIt,S.k_t=v.k_t,S.N_t=v.N_t,S.B_t=v.B_t,y.ewt=v.ewt,w.LH=v.LH,w.nIt=v.nIt),g&&(S.hIt=v.hIt)}}{const vw=self._s;vw.Dyt=class extends vw.Vn{constructor(t){super(),this.zpt=t,this.Jc="",this.HD=-1,this.AIt="",this.EIt=!1,this.FIt=null,this.tmt=0,this._St=[],this.hmt=null,this.OIt=new Map,this.DIt=null,this.kIt=null,this.LIt=-1,this.Abt=null,this.NIt=null,this.BIt=!1}zn(){this.Jc="",this.HD=-1,this.AIt="",this.FIt=null,this.kIt=null,this.Abt=null,this.NIt=null,this.LIt=-1,vw.Sh(this._St),this.hmt&&(this.hmt.clear(),this.hmt=null);for(const t of this.OIt.values())t.zn();this.OIt.clear(),this.DIt=null}qM(){const t=this.zpt,s=t.aW().w1(),i=t.Fgt();this.FIt=i.dN(),this.tmt=i.fmt()+1;const e=t.Twt(this.FIt);e&&(this.kIt=e,this.Abt=e.$bt(),this.NIt=e.qbt().map(t=>t.Int()),e.Kvt()&&(this.LIt=e.Zbt()));for(const t of s){const s=t.eV();s._pt()&&!this.FIt.bvt(t)||(this._St.push(t),this.OIt.set(t,vw.Hn(vw.WIt,s)))}const n=t.pN();this.hmt=n.size>0?n:null}jIt(t){this.Jc="timer",this.qM(),this.HD=this.zpt.aW().ON()+t}VIt(t){this.Jc="walltimer",this.qM(),this.HD=this.zpt.aW().NN()+t}UIt(t){this.Jc="signal",this.qM(),this.AIt=t.toLowerCase()}rIt(t,s){this.Jc="instance-signals",this.qM(),this.AIt=s.toLowerCase(),this.DIt=new Set(t)}HIt(t){this.Jc="promise",this.qM(),t.then(()=>this.Qyt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Qyt()})}zIt(){return"timer"===this.Jc}JIt(){return"walltimer"===this.Jc}Kyt(){return"signal"===this.Jc}rwt(){return"instance-signals"===this.Jc}bwt(){return"promise"===this.Jc}Zyt(){return this.AIt}qIt(){return this.EIt}Qyt(){this.EIt=!0}hwt(t){this.DIt.delete(t),0===this.DIt.size&&this.Qyt()}Nyt(){return this.zIt()?this.HD<=this.zpt.aW().ON():this.JIt()?this.HD<=this.zpt.aW().NN():this.qIt()}$It(t){t.omt(this.FIt,this.tmt);for(const[t,s]of this.OIt.entries()){const i=t.eV();s.omt(i)}this.hmt&&t.Tmt([...this.hmt]);const s=this.kIt;s&&(s.abt(this.Abt),s.qbt().map((t,s)=>t.lrt(this.NIt[s])),s.Kvt()&&s.Qbt(this.LIt))}Byt(t){this.$It(t),this.FIt.Zvt(t),this.kIt&&this.kIt.Kvt()&&this.kIt.wbt(this.LIt),this.zpt.Ryt(this._St),this.BIt=!0}async Uyt(t){this.$It(t);for(const s of this.FIt.Qvt(t))await this.zpt.aW().dyt(s);this.kIt&&this.kIt.Kvt()&&this.kIt.wbt(this.LIt),this.zpt.Ryt(this._St),this.BIt=!0}Wyt(){return this.BIt}bpt(t){for(const s of this.OIt.values())s.bpt(t);if("instance-signals"===this.Jc){for(const s of t)this.DIt.delete(s);0===this.DIt.size&&this.Qyt()}}i5(){const t={},s={wt:this.Jc,t:this.HD,st:this.AIt,s:this.EIt,ev:this.FIt.I1(),sm:this._St.map(t=>t.I1()),dsm:this.hmt?[...this.hmt].map(t=>t.I1()):null,sols:t};this.FIt.Bvt(this.tmt)&&(s.act=this.FIt.Lgt(this.tmt).I1());for(const[s,i]of this.OIt)t[s.I1().toString()]=i.i5();return"instance-signals"===this.Jc&&(s.pi=[...this.DIt].map(t=>t.xH())),s}static Mwt(t,s){const i=t.aW(),e=t.Jgt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.$gt(s.act);if(!i)return null;n=i.ML()}const r=vw.Hn(vw.Dyt,t);r.HD=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.HD?"signal":"timer",r.AIt=s.st,r.EIt=s.s,r.FIt=e,r.tmt=n;for(const t of s.sm){const s=i.ZX(t);s&&r._St.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.ZX(t);s&&(r.hmt||(r.hmt=new Set),r.hmt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.ZX(s);if(!h)continue;const o=vw.Hn(vw.WIt,null);o.e5(t,n),r.OIt.set(h,o)}if("instance-signals"===r.Jc){r.DIt=new Set;for(const t of s.pi){const s=i.PB(t);s&&r.DIt.add(s)}}return r}}}{const bw=self._s;bw.WIt=class extends bw.Vn{constructor(t){super(),this.ppt=null,this.XIt=!0,this.fQ=[],t&&(this.ppt=t.cH(),this.XIt=t._pt(),bw.xh(this.fQ,t.Opt()))}zn(){this.ppt=null,bw.Sh(this.fQ)}omt(t){t.Fpt(this.XIt),bw.xh(t.Opt(),this.fQ)}bpt(t){bw.Ph(this.fQ,t)}i5(){return{sa:this.XIt,insts:this.fQ.map(t=>t.xH())}}e5(t,s){const i=t.aW();this.XIt=!!s.sa,bw.Sh(this.fQ);for(const t of s.insts){const s=i.PB(t);s&&this.fQ.push(s)}}}}{let Mw=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const Gw=self._s;Gw.YIt=class extends Gw.Vn{constructor(t){super(),this.Nc=t.runtime,this.Wc=t.id,this.$n=t.name??"",this.KIt=!!t.wj,this.ZIt=!!t.QIt,this.tCt=!!t.xj,this.sCt=!!t.iCt,this.eCt=!!t._j,this.nCt=!!t.rCt,this.hCt=!!t.Ej,this.oCt=!!t.Mj,this.aCt=!!t.Cj,this.lCt=t.uCt,this.cCt=null,this.fCt=new Map,this.dCt=new Map,this.pCt=new Map,this.mCt=new Map,this.gCt=t.yCt,this.wCt=null}zn(){this.Nc=null}aW(){return this.Nc}yj(){return this.Wc}Pc(){return this.$n}SCt(){}nwt(){return this.txt()>=2?this.wCt.constructor:this.constructor}txt(){return this.lCt}vCt(t=!1){let s=this.gCt;return t&&"function"!=typeof s&&this.txt()>=2&&(s=globalThis.D$),s}Sj(){return this.KIt}bj(){return this.ZIt}Gj(){return this.oCt}Pj(){return this.aCt}Tj(){return this.tCt}vM(){return this.sCt}Ij(){return this.eCt}Aj(){return this.nCt}Fj(){return this.hCt}GMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.fCt.get(t);return i||(i=t.bind(s),this.fCt.set(t,i),i)}YGt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=Mw(this.dCt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}KGt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=Mw(this.pCt,t),r=Mw(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}ZGt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=Mw(this.mCt,t),h=Mw(r,i),o=Mw(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}bCt(t){if(!this.Sj())throw new Error("must be single-global plugin");this.cCt=t}Wj(){if(!this.Sj())throw new Error("must be single-global plugin");return this.cCt}Vj(){if(!this.Sj())throw new Error("must be single-global plugin");return this.cCt.Vj()}MCt(){const t=this.txt();Gw.mj.GCt(this,t);const s=this.vCt(!0);if(s){if(this.wCt=new s,!(this.wCt instanceof self.dj))throw new TypeError("plugin class must derive from IPlugin")}else this.wCt=new self.dj;Gw.mj.xCt(t)}Lj(){return this.wCt}}}{const xw=self._s;xw.TCt=class extends xw.YIt{constructor(t,s){super(t),this._Ct=s,this.ICt=0,this.CCt=new Map,this.PCt("elem-focused",t=>t.RCt()),this.PCt("elem-blurred",t=>{t&&t.ACt()})}zn(){super.zn()}ECt(t){const s=this.ICt++;return this.CCt.set(s,t),s}FCt(t){this.CCt.delete(t)}PCt(t,s){this.Nc.YH(this._Ct,t,t=>{const i=this.CCt.get(t.elementId);s(i,t)})}}}{const Tw=self._s;Tw.OCt=class extends Tw.Vn{constructor(t){super(),this.ppt=t,this.Nc=t.aW(),this.DCt=t.zj()}zn(){this.ppt=null,this.Nc=null,this.DCt=null}cH(){return this.ppt}aW(){return this.Nc}zj(){return this.DCt}jq(){return this.ppt.jq()}SCt(){}dxt(t){}Zxt(t){}Qxt(t){}d4(t){}v4(){}y4(){}V4(t){}kCt(){}vCt(){return null}LCt(t,s,i){const e=Tw.Hn(Tw.Event,t,s);e.NCt=this,i&&Object.assign(e,i),this.cH().CZ(e)}}}{const _w=self._s;_w.BCt=class extends _w.Vn{constructor(t,s){super(),this.fi=t,this._Ct=s,this.WCt=null,this.Nc=t.aW(),this.ppt=this.fi.cH(),this.jCt=this.ppt.Kxt(),this.Q6=null,this.s8=null,this.rz=!1,this.oz=!1,this.Yf=null,this.uR=!1}zn(){this.uR=!0,this.VCt(),this.UCt(),this.Q6=null,this.s8=null,this.Yf&&(this.Yf.zn(),this.Yf=null),this.fi=null,this.Nc=null,this.ppt=null,this.jCt=null}Jn(){return this.uR}C$(){return this.fi}aW(){return this.Nc}cH(){return this.ppt}zj(){return this.jCt.zj()}Kxt(){return this.jCt}HCt(){return this.fi.RB()}qH(t){return this.Nc.qH(t,this.fi,null)}zCt(t){return this.Nc.zCt(t,this.fi,null)}KB(t){return this.Nc.KB(t,this.fi,null)}JCt(t,s){return this.Nc.JCt(t,this.fi,s)}qCt(t,s){return this.Nc.qCt(t,this.fi,s)}$Ct(t){return this.Nc.$Ct(t)}XCt(t,s){this.Nc.YH(this._Ct,t,s)}YCt(t){for(const[s,i]of t)this.XCt(s,i)}KCt(t,s){this.Nc.jc(this._Ct,t,s)}ZCt(t,s){return this.Nc.HB(this._Ct,t,s)}QCt(t,s){if(!this.Nc.zL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this._Ct,handler:t,data:s,responseId:null});this.KCt(t,s)}tPt(t){if(!t)throw new Error("cannot set empty component id");this.WCt=t}sPt(){if(!this.WCt)throw new Error("wrapper extension component id not set");return this.Nc.fz(this.WCt)}pz(t,s){if(!this.WCt)throw new Error("wrapper extension component id not set");this.Nc.pz(this.WCt,t,s)}iPt(t){for(const[s,i]of t)this.pz(s,i)}VX(t,s){if(!this.WCt)throw new Error("wrapper extension component id not set");this.Nc.VX(this.WCt,t,s)}UX(t,s){if(!this.WCt)throw new Error("wrapper extension component id not set");return this.Nc.UX(this.WCt,t,s)}u7(){}ePt(){}nPt(){if(!this.rz){if(!this.Q6)if(this.Nc.sz()){const t=globalThis.iz,s=this.zj();this.Q6=()=>{const i=performance.now();this.u7(),t.nz(s,performance.now()-i)}}else this.Q6=()=>this.u7();this.Nc.wf().addEventListener("tick",this.Q6),this.rz=!0}}VCt(){this.rz&&(this.Nc.wf().removeEventListener("tick",this.Q6),this.rz=!1)}rPt(){return this.rz}hPt(){if(!this.oz){if(!this.s8)if(this.Nc.sz()){const t=globalThis.iz,s=this.zj();this.s8=()=>{const i=performance.now();this.ePt(),t.nz(s,performance.now()-i)}}else this.s8=()=>this.ePt();this.Nc.wf().addEventListener("tick2",this.s8),this.oz=!0}}UCt(){this.oz&&(this.Nc.wf().removeEventListener("tick2",this.s8),this.oz=!1)}oPt(){return this.oz}aPt(){return[]}oG(){return null}aG(t){}tot(t){}hot(t,s){}Qot(t,s,i){if(0===s)return;const e=this.tot(t);if("number"!=typeof e)throw new Error("expected number");this.hot(t,e+s,i)}lPt(t,s,i,e){}uPt(t,...s){t.call(this,...s)}cPt(t,...s){return t.call(this,...s)}vCt(){return null}LCt(t,s,i){if(!this.fi.fPt())return;const e=this.HCt(),n=_w.Hn(_w.Event,t,s);n.fq=e,i&&Object.assign(n,i),e.dispatchEvent(n)}vM(){return!1}}}{const Iw=self._s;Iw.dPt=class extends Iw.BCt{constructor(t,s){super(t,s),this._it=t.DB(),this.pPt=null,this.mPt=null}zn(){if(this.pPt){const t=this.Nc.wf();t.removeEventListener("renderercontextlost",this.pPt),t.removeEventListener("renderercontextrestored",this.mPt),this.pPt=null,this.mPt=null}this._it=null,super.zn()}gPt(){this.yPt()}wPt(){}SPt(){}yPt(){if(this.pPt)return;this.pPt=()=>this.nQ(),this.mPt=()=>this.vPt();const t=this.Nc.wf();t.addEventListener("renderercontextlost",this.pPt),t.addEventListener("renderercontextrestored",this.mPt)}nQ(){this.wPt()}vPt(){this.SPt()}DB(){return this._it}yet(){return!1}met(){if(!this.yet())throw new Error("original size not known");const t=this.bPt();if(t)return t.Vg()}vet(){if(!this.yet())throw new Error("original size not known");const t=this.bPt();if(t)return t.Zg()}bPt(){return null}MPt(){const t=this.bPt();if(t){const s=t.xT();if(s)return[s.Vg(),s.Zg()]}return[100,100]}GPt(){const t=this.bPt();return t?t.gA():null}xPt(){const t=this.bPt();return t?t.TPt():null}_Pt(){const t=this.bPt();return!!t&&t.IPt()}dTt(t){const s=this.fi.DB();return[s.$M(),s.KM(),s.Dz()]}kCt(t,s,i){}CPt(t,s){}A3(){return!0}}}{const Cw=self._s,Pw=Cw.Hn(Cw.Rect);Cw.PPt=class extends Cw.dPt{constructor(t,s){super(t,s),this.RPt=this.zj().ECt(this),this.APt=!0,this.EPt=!1,this.FPt=!1,this.OPt=-.2,this.DPt=Cw.Hn(Cw.Rect,0,0,-1,-1);const i=this.Nc.TB();this.kPt=i.nX(),this.LPt=i.rX(),this.NPt=-1,this.BPt=-1,this.WPt=!1,this.nPt()}zn(){this.zj().FCt(this.RPt),this.jPt("destroy"),this.RPt=-1,super.zn()}tq(){if(this.Nc.zL())throw new Error("not valid in worker mode");return this.VPt("get-element")}jPt(t,s){s||(s={}),s.elementId=this.RPt,this.KCt(t,s)}VPt(t,s){return s||(s={}),s.elementId=this.RPt,this.QCt(t,s)}UPt(t,s){return s||(s={}),s.elementId=this.RPt,this.ZCt(t,s)}HPt(t){t||(t={});const s=this.DB();t.elementId=this.RPt,t.isVisible=s.SU(),t.htmlIndex=s.kB().cX(),t.htmlZIndex=s.fX(),Object.assign(t,this.zPt()),this.APt=!!t.isVisible,this.QCt("create",t),this.JPt(!0)}b_t(t){t=!!t,this.APt!==t&&(this.APt=t,this.jPt("set-visible",{isVisible:t}))}u7(){this.JPt(!1)}qPt(){const t=this.Nc.TB().yX();return"Android"===Cw.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}JPt(t){if(this.C$().wX())return;const s=this.DB(),i=s.kB(),e=s.Nz();let[n,r]=i.eH(e.Za(),e.Qa()),[h,o]=i.eH(e.tl(),e.sl());const a=this.Nc.TB(),l=a.ej(),u=a.rj();if(!s.SU()||!i.SU())return void this.b_t(!1);if(!this.qPt()&&(h<=0||o<=0||n>=l||r>=u))return void this.b_t(!1);Pw.set(n,r,h,o);const c=a.nX(),f=a.rX(),d=i.cX(),p=s.fX();if(!t&&Pw.equals(this.DPt)&&this.kPt===c&&this.LPt===f&&this.NPt===d&&this.BPt===p)return void this.b_t(!0);this.DPt.m(Pw),this.kPt=c,this.LPt=f,this.NPt=d,this.BPt=p,this.b_t(!0);let m=null;this.FPt&&(m=i.SX()+this.OPt),this.VPt("update-position",{left:Math.round(this.DPt.Za()),top:Math.round(this.DPt.Qa()),width:Math.round(this.DPt.width()),height:Math.round(this.DPt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}iq(){this.VPt("focus",{focus:!0})}eq(){this.VPt("focus",{focus:!1})}RCt(){this.EPt=!0}ACt(){this.EPt=!1}__t(){return this.EPt}rq(t,s){this.jPt("set-css-style",{prop:Cw.vo(t),val:s})}M_t(t,s){this.jPt("set-attribute",{name:t,val:s})}G_t(t){this.jPt("remove-attribute",{name:t})}$Pt(){this.WPt||(this.WPt=!0,Promise.resolve().then(()=>{this.WPt=!1,this.jPt("update-state",this.zPt())}))}zPt(){}XPt(){return this.RPt}}}{const Rw=self._s,Aw=self.gq;Rw.YPt=class extends Rw.Vn{constructor(t){super(),this.Nc=t.runtime,this.Wc=t.id,this.$n=t.name??"",this.KPt=Rw.Hn(Rw.Du),this.ZPt=Rw.Hn(Rw.Du),this.lCt=t.uCt,this.gCt=t.yCt,this.QPt=null}zn(){this.ZPt.zn(),this.KPt.zn(),this.Nc=null}aW(){return this.Nc}yj(){return this.Wc}Pc(){return this.$n}SCt(){}txt(){return this.lCt}vCt(t=!1){let s=this.gCt;return t&&"function"!=typeof s&&this.txt()>=2&&(s=globalThis.PX),s}tRt(t){this.KPt.Bu(t)}k8(){return this.KPt.Wu()}e1(t){this.ZPt.Bu(t)}o1(t){this.ZPt.Au(t)}iV(){return this.ZPt.Wu()}MCt(){const t=this.txt();Rw.mj.GCt(this,t);const s=this.vCt(!0);if(s){if(this.QPt=new s,!(this.QPt instanceof Aw))throw new TypeError("behavior class must derive from IBehavior")}else this.QPt=new Aw;Rw.mj.xCt(t)}oq(){return this.QPt}}}{const Ew=self._s;Ew.sRt=class extends Ew.Vn{constructor(t){super(),this.Nc=t.aW(),this.NMt=t,this.ppt=t.cH(),this.iRt=t.aq(),this.iRt.tRt(this.ppt)}zn(){this.Nc=null,this.NMt=null,this.ppt=null,this.iRt=null}SCt(){}cq(){return this.NMt}cH(){return this.ppt}aW(){return this.Nc}aq(){return this.iRt}}}{const Fw=self._s;Fw.eRt=class extends Fw.Vn{constructor(t,s){super(),this.qlt=t,this._Ct=s,this.fi=t.pq(),this.Nc=t.aW(),this.NMt=t.cq(),this.jCt=this.NMt.Kxt(),this.rz=!1,this.oz=!1,this.WX=!1,this.Yf=null}zn(){this.VCt(),this.UCt(),this.nRt(),this.Yf&&(this.Yf.zn(),this.Yf=null),this.qlt=null,this.fi=null,this.Nc=null,this.NMt=null,this.jCt=null}aq(){return this.NMt.aq()}rRt(){return this.qlt}pq(){return this.fi}cH(){return this.fi.cH()}DB(){return this.fi.DB()}aW(){return this.Nc}cq(){return this.NMt}Kxt(){return this.jCt}HCt(){return this.qlt.HCt()}qH(t){return this.Nc.qH(t,this.fi,this.NMt)}zCt(t){return this.Nc.zCt(t,this.fi,this.NMt)}KB(t){return this.Nc.KB(t,this.fi,this.NMt)}hRt(){}u7(){}ePt(){}oRt(){}nPt(){this.rz||(this.Nc.OX(this),this.rz=!0)}VCt(){this.rz&&(this.Nc.DX(this),this.rz=!1)}rPt(){return this.rz}hPt(){this.oz||(this.Nc.kX(this),this.oz=!0)}UCt(){this.oz&&(this.Nc.LX(this),this.oz=!1)}oPt(){return this.oz}aRt(){this.WX||(this.Nc.NX(this),this.WX=!0)}nRt(){this.WX&&(this.Nc.BX(this),this.WX=!1)}lRt(){return this.WX}aPt(){return[]}XCt(t,s){this.Nc.YH(this._Ct,t,s)}uRt(t,s){}oG(){return null}aG(t){}tot(t){}hot(t,s){}Qot(t,s){if(0===s)return;const i=this.tot(t);if("number"!=typeof i)throw new Error("expected number");this.hot(t,i+s)}lPt(t,s,i,e){}uPt(t,...s){t.call(this,...s)}cPt(t,...s){return t.call(this,...s)}vCt(){return null}LCt(t,s,i){if(!this.qlt.fPt())return;const e=this.HCt(),n=Fw.Hn(Fw.Event,t,s);n.cRt=e,n.fq=e.fq,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let Ow=function(t){if(t!==kw)throw new Error("invalid internal API token")};0;const Dw=self._s;Dw.sW={},Dw.gut={};const kw=Dw.Is();let Lw=[],Nw=[],Bw=[],Ww=null,jw=null,Vw=null,Uw=null;const Hw=new Map,zw=new Map;Dw.mj=class extends Dw.Vn{constructor(t,s){super(),this.Nc=t,this.fRt=[],this.SMt=null,this.dRt=[],this.pRt=new Map,this.mRt=null,this.gRt=null,this.yRt=new Set(s)}wRt(t){const s=t[19],i=this.Nc.Mbt(t[0]);if(!i)throw new Error("missing plugin");Dw.oIt(t,i,s);const e=s>=2?Dw.YIt:i,n=Dw.Hn(e,{runtime:this.Nc,wj:t[1],QIt:t[2],xj:t[5],_j:t[8],iCt:t[9],rCt:t[13],Ej:t[14],Mj:t[17],Cj:t[18],uCt:s,id:t[20],name:t[21],yCt:s>=2?i:null});n.SCt(),this.fRt.push(n),Hw.set(i,n)}SRt(){this.SMt=Dw.Hn(Dw.sW.tW,{runtime:this.Nc,wj:!0}),this.SMt.SCt()}vRt(t){const s=t[1],i=t[2],e=t[3],n=this.Nc.Mbt(t[0]);if(!n)throw new Error("missing behavior");this.pRt.set(n,()=>{const t=s>=2?Dw.YPt:n,r=Dw.Hn(t,{runtime:this.Nc,id:i,name:e,uCt:s,yCt:s>=2?n:null});r.SCt(),this.dRt.push(r),zw.set(n,r),!this.mRt&&Dw.gut.bRt&&r instanceof Dw.gut.bRt?this.mRt=r:!this.gRt&&Dw.gut.MRt&&r instanceof Dw.gut.MRt&&(this.gRt=r),r.MCt()})}GRt(t){const s=this.pRt.get(t);s&&(s(),this.pRt.delete(t))}static GCt(t,s=1){if(Dw.mj.GCt!==Ww)throw new Error("invalid method");1===s&&Lw.push(t),Nw.push(t)}static xCt(t=1){if(Dw.mj.xCt!==jw)throw new Error("invalid method");1===t&&Lw.pop(),Nw.pop()}static mH(){if(Dw.mj.mH!==Vw)throw new Error("invalid method");if(0===Lw.length)throw new Error("no init object set");return Lw.at(-1)}static pj(t){if(Dw.mj.pj!==Uw)throw new Error("invalid method");if(Ow(t),0===Nw.length)throw new Error("no init object set");return Nw.at(-1)}static xRt(t){Bw.push(t)}static TRt(){Bw.pop()}static zH(){if(0===Bw.length)throw new Error("no init properties set");return Bw.at(-1)}_Rt(){for(const t of this.fRt)t.MCt()}static kj(t){return Hw.get(t)||null}static yq(t){return zw.get(t)||null}RZ(){return this.SMt}IRt(){return this.mRt}CRt(){return this.gRt}fz(t){return this.yRt.has(t)}},Ww=Dw.mj.GCt,jw=Dw.mj.xCt,Vw=Dw.mj.mH,Uw=Dw.mj.pj}{const Jw=self._s,qw=new Set;Jw.PRt=class extends Jw.Vn{constructor(){super(),this.RRt=0,this.JZ="",this.qZ=0,this.ARt=0,this.ERt=0,this.Py=0,this.Ry=0,this.FRt=!1,this.ORt=!1,this.DRt=null,this.kRt="",this.nR=Jw.Hn(Jw.Rect),this.LRt=Jw.Hn(Jw.Cl),this.NRt="",this.BRt=new self.hW(this),qw.add(this)}zn(){this.oR(),this.DRt&&0===this.DRt.oQ()&&this.DRt.zn(),this.DRt=null,qw.delete(this),this.WRt()}static nQ(){for(const t of qw)t.kRt="",t.nR.set(0,0,0,0),t.LRt.Xl(t.nR)}jRt(t){this.JZ=t[0],this.qZ=t[1],this.ARt=t[2],this.ERt=t[3],this.Py=t[4],this.Ry=t[5],this.FRt=t[6],this.ORt=!0}VRt(t,s,i){if(i=!!i,this.DRt)throw new Error("already loaded asset");this.JZ=s;const e={yZ:i};return Jw.Yh(s)&&(e.wZ="remote"),this.oW(t,e),this.DRt.vZ()}URt(t,s){if(this.DRt)throw new Error("already loaded asset");this.JZ="",this.qZ=s.size,this.DRt=Jw.Hn(Jw.SZ,t.IL(),{blob:s,size:this.qZ,wZ:"local"})}HRt(t){if(t===this)throw new Error("cannot replace with self");this.RRt++,this.oR(),this.JZ=t.JZ,this.qZ=t.qZ,this.ARt=t.ARt,this.ERt=t.ERt,this.Py=t.Py,this.Ry=t.Ry,this.FRt=t.FRt,this.ORt=t.ORt,this.DRt=t.DRt,this.kRt=t.kRt,this.nR=t.nR,this.LRt=t.LRt,this.WRt()}GZ(){return this.JZ}Fu(){return this.qZ}zRt(){return this.ARt}JRt(){return this.ERt}IPt(){return this.FRt}Vg(){return this.Py}Zg(){return this.Ry}qRt(){return this.DRt.Vg()}$Rt(){return this.DRt.Zg()}oW(t,s){if(this.DRt)throw new Error("already got asset");s=Object.assign({},s,{url:this.GZ(),size:this.Fu()}),this.DRt=t.gZ(s)}KZ(){return this.DRt&&this.DRt.KZ()}async YY(t,s){if(!this.DRt)throw new Error("no asset");if(this.kRt)throw new Error("already loaded texture");const i=this.RRt;this.kRt="loading";const e=await this.DRt.YY(t,s);if(this.RRt!==i)return null;if(!e)return this.kRt="",null;this.kRt="loaded",this.ORt||(this.Py=e.Vg(),this.Ry=e.Zg(),this.ORt=!0);const n=this.FRt?this.Ry:this.Py,r=this.FRt?this.Py:this.Ry;return this.nR.set(this.ARt,this.ERt,this.ARt+n,this.ERt+r),this.nR.wt(e.Vg(),e.Zg()),this.LRt.Xl(this.nR),this.FRt&&this.LRt.su(),e}oR(){this.kRt&&(this.DRt&&this.DRt.oR(),this.kRt="",this.nR.set(0,0,0,0),this.LRt.Xl(this.nR))}xT(){return this.DRt&&"loaded"===this.kRt?this.DRt.xT():null}gA(){return this.nR}TPt(){return this.LRt}J$(){return this.BRt}XRt(){return this.DRt}async YRt(t){t||(t=await this.DRt.aQ());const s=Jw.uo(this.Py,this.Ry),i=s.getContext("2d");return this.FRt?(i.rotate(Math.PI/-2),i.translate(-this.Ry,0),i.drawImage(t,this.ARt,this.ERt,this.Ry,this.Py,0,0,this.Ry,this.Py)):i.drawImage(t,this.ARt,this.ERt,this.Py,this.Ry,0,0,this.Py,this.Ry),s}async KRt(t){if(this.NRt)return this.NRt;const s=await this.YRt(t),i=await Jw.co(s);return this.NRt=URL.createObjectURL(i),this.NRt}WRt(){this.NRt&&(URL.revokeObjectURL(this.NRt),this.NRt="")}}}{const $w=self._s;$w.ZRt=class extends $w.Vn{constructor(t){super(),this.$n=t[0],this.QRt=t[1],this.PGt=!!t[2],this.Rat=t[3],this.tAt=t[4],this.sAt=!!t[5],this.JQ=t[6],this.iAt=t[7].map(t=>$w.Hn($w.eAt,t)),this.nAt=new self.Gq(this)}static rAt(t,s){const i=$w.Hn($w.ZRt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.iAt.push($w.eAt.rAt(t)),i}zn(){for(const t of this.iAt)t.zn();$w.Sh(this.iAt)}hAt(t){for(const s of this.iAt)s.jq().oW(t)}oAt(t,s){return Promise.all(this.iAt.map(i=>i.jq().YY(t,s)))}aAt(){for(const t of this.iAt)t.jq().oR()}Pc(){return this.$n}I1(){return this.JQ}Fq(){return this.iAt.length}Dq(){return this.iAt}lAt(t){if((t=Math.floor(t))<0||t>=this.iAt.length)throw new RangeError("invalid frame");return this.iAt[t]}uAt(t,s){(s=Math.floor(s))<0?this.iAt.unshift(t):s>=this.iAt.length?this.iAt.push(t):this.iAt.splice(s,0,t)}cAt(t){if((t=Math.floor(t))<0||t>=this.iAt.length)throw new RangeError("invalid frame");this.iAt[t].zn(),this.iAt.splice(t,1)}fAt(t){for(let s=0,i=this.iAt.length;s<i;++s)if($w.Ke(this.iAt[s].s$(),t))return s;return-1}dAt(t){if("string"==typeof t){const s=this.fAt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}xq(){return this.QRt}_q(){return this.PGt}Cq(){return this.Rat}Rq(){return this.tAt}Eq(){return this.sAt}pAt(){return this.nAt}}}{const Xw=self._s,Yw=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();Xw.eAt=class extends Xw.Vn{constructor(t){super(),this.mAt=Xw.Hn(Xw.PRt),this.mAt.jRt(t),this.gAt=t[7],this.yAt=Xw.Hn(Xw.Ca,t[8],t[9]),this.wAt=t[10].map(t=>Xw.Hn(Xw.SAt,this,t)),this.vAt=new Map;for(const t of this.wAt)this.vAt.set(t.Pc().toLowerCase(),t);this.bAt=null;const s=t[11];s.length>=6&&(this.bAt=Xw.Hn(Xw.au,s)),this.Aw=t[12]?t[12]:"",this.MAt=new self.Wq(this)}static rAt(t){const s=Xw.Hn(Xw.eAt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.mAt.URt(t,Yw),s}zn(){this.bAt&&(this.bAt.zn(),this.bAt=null),this.mAt.zn(),this.mAt=null}jq(){return this.mAt}Vq(){return this.gAt}Iz(){return this.yAt.Fa()}Rz(){return this.yAt.Da()}Kq(){return this.bAt}Xq(t){return this.vAt.get(t.toLowerCase())||null}$q(t){return(t=Math.floor(t))<0||t>=this.wAt.length?null:this.wAt[t]}Hq(){return this.wAt.length}s$(){return this.Aw}kq(){return this.MAt}}}{const Kw=self._s;Kw.SAt=class extends Kw.Vn{constructor(t,s){super(),this.GAt=t,this.$n=s[0],this.xAt=Kw.Hn(Kw.Ca,s[1],s[2])}zn(){}Pc(){return this.$n}$M(){return this.xAt.Fa()}KM(){return this.xAt.Da()}TAt(){return this.xAt}}}{const Zw=globalThis._s,Qw=globalThis.iz,tS=(globalThis.Uj,globalThis.nV),sS=globalThis.SV;globalThis.assert;Zw.wct=class extends Zw.Vn{constructor(t,s,i){super();const e=t.Mbt(i[1]);this.Nc=t,this.DCt=Zw.mj.kj(e),this.jCt=null,this._At=e.Instance,this.Rw=s,this.JQ=i[11],this.$n=i[0],this.hMt=this.Nc.Ugt(i[14]),this.IAt=!!i[9],this.CAt=!!i[2],this.PAt=!!i[10],this.RAt=i[3].map(s=>({AQ:s[0],type:s[1],name:s[2],AAt:t.Ugt(s[3])})),this.EAt=i[4],this.FAt=i[5],this.ZIt=this.DCt.bj(),this.OAt=Zw.Hn(Zw.Event.wf),this.I0=null;const[n,r]=t.RL().LW();if(this.DAt=Zw.Hn(Zw.kAt,n,r),this.LAt=!0,this.NAt=null,this.BAt=null,this.WAt=-1,this.jAt=null,this.VAt=null,this.UAt=null,this.HAt=null,this.zAt=null,this.JAt=!1,this.qAt=null,this.$At=i[8].map(t=>Zw.XAt.HT(this,t)),this.YAt=[],this.KAt=new Map,this.ZAt=new Map,this.QAt=new Set,this.tEt=new Map,this.sEt=Zw.Hn(Zw.dpt,this),this.iEt=null,this.eEt=0,this.nEt=!1,this.qAt=null,this.mAt=null,this.rEt=null,this.hEt=null,this.oEt=null,this.aEt=0,this.OGt=new Map,this.DGt=new Map,this.fQ=[],this.lEt=new Map,this.uEt=!0,this.DCt.Ij()&&(this.I0=Zw.Hn(Zw.C0,this,i[12])),i[6]&&(this.mAt=Zw.Hn(Zw.PRt),this.mAt.jRt(i[6])),i[7]){this.rEt=i[7].map(t=>Zw.Hn(Zw.ZRt,t)),this.hEt=new Map,this.oEt=new Map;for(const t of this.rEt)this.hEt.set(t.Pc().toLowerCase(),t),this.oEt.set(t.I1(),t)}this.CAt?(this.NAt=[],this.BAt=new Set,this.WAt=this.Nc.cEt()):(this.jAt=[],this.VAt=new Set,this.UAt=[],this.HAt=[],this.zAt=[]);const h=this.DCt.txt();if(h<2&&(this.jCt=Zw.Hn(e.fEt,this,i[15]),!(this.jCt instanceof Zw.OCt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.dEt=null,this.pEt=null,this.j0=Zw.Hn(Zw.Event.wf),Zw.mj.GCt(this,h),h>=2?(o=e.fEt,o||(o=globalThis.U$)):o=this.jCt.vCt(),o&&!this.CAt){if(this.dEt=new o(h<2?this:null),h<2&&!(this.dEt instanceof tS))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.dEt instanceof globalThis.U$))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.CAt?sS:tS;this.dEt=new t}if(Zw.mj.xCt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.jCt.kCt(s,i,e)}}this.Nc.mEt()&&!this.CAt&&!this.PAt&&this.ZIt||this.SCt(),this.DCt.Sj()&&(this.DCt.bCt(this),this.gEt(i)),this.yEt=null}static HT(t,s,i){return Zw.Hn(Zw.wct,t,s,i)}zn(){if(this.OAt.zn(),this.OAt=null,this.mAt&&(this.mAt.zn(),this.mAt=null),this.rEt){for(const t of this.rEt)t.zn();Zw.Sh(this.rEt),this.hEt.clear(),this.oEt.clear()}this.yEt=null,this.sEt.zn(),this.sEt=null,this.OGt.clear(),this.DGt.clear(),this.qAt=null,this.Nc=null}wEt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.q0(t[s]);this.NAt.push(i),this.BAt.add(i),i.jAt.push(this),i.VAt.add(this)}}SEt(t){this.JAt=!0,this.qAt=t}MH(){return this.JAt}u4(){return this.qAt}vEt(){let t=0;if(!this.CAt)for(const s of this.jAt)for(const i of s.bEt()){const s=i.Pc().toLowerCase();this.KAt.set(s,i),this.ZAt.set(s,t),this.YAt.push(i),++t}for(const s of this.bEt()){const i=s.Pc().toLowerCase();this.KAt.set(i,s),this.ZAt.set(i,t),this.YAt.push(s),++t}for(const t of this.YAt)this.QAt.add(t.aq().constructor);if(!this.CAt&&this.jAt.length){const t=this.Nc.MEt();Zw.Mh(this.UAt,t,0),Zw.Mh(this.HAt,t,0),Zw.Mh(this.zAt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.jAt){const r=t.kMt();this.UAt[r]=i,i+=t.GEt(),this.HAt[r]=e,e+=t.xEt(),this.zAt[r]=n,n+=t.TEt();const h=t._V();if(h&&this.I0)for(const t of h.IV())s.push(t._Et(this.I0))}this.I0&&this.I0.IEt(s)}}gEt(t){const s=Zw.Qi(t[17])?t[17]:this.Nc.CEt(),i=Zw.Hn(Zw.Instance,{runtime:this.Nc,objectType:this,uid:s});i.PEt(t[16],[]),this.Nc.REt(s,i),this.fQ.push(i)}Kxt(){return this.jCt}AEt(){return this.PAt}wf(){return this.OAt}SCt(){this.CAt||(this.jCt?this.jCt.SCt():this.dEt.H$())}EEt(){return this.aEt>0}async d4(t){this.CAt||(this.aEt++,1===this.aEt&&(this.jCt?await this.jCt.d4(t):await this.dEt.q$(this.Nc.TB().xB())))}v4(){if(!this.CAt){if(this.aEt--,this.aEt<0)throw new Error("released textures too many times");0===this.aEt&&(this.jCt?this.jCt.v4():this.dEt.$$(this.Nc.TB().xB()))}}y4(){if(this.CAt)throw new Error("not applicable to family");this.jCt?this.jCt.y4():this.dEt.X$()}async V4(t){this.CAt||(this.jCt?await this.jCt.V4(t):await this.dEt.Y$(this.Nc.TB().xB()))}aW(){return this.Nc}zj(){return this.DCt}FEt(){return this._At}Pc(){return this.$n}Ugt(){return this.hMt}ML(){return this.Rw}I1(){return this.JQ}S1(){return this.CAt}WQ(){return this.IAt}bj(){return this.ZIt}kMt(){return this.WAt}bEt(){return this.$At}xEt(){return this.EAt}OEt(t){return t&&this.QAt.has(t)}GEt(){return this.RAt.length}DEt(){return this.RAt.map(t=>t.AQ)}kEt(t){return this.RAt.findIndex(s=>s.AQ===t)}Zit(t){return this.RAt.findIndex(s=>s.name===t)}LEt(){return this.RAt.map(t=>t.name)}NEt(){return this.RAt.map(t=>t.AAt)}tet(t){if((t=Math.floor(t))<0||t>=this.RAt.length)throw new RangeError("invalid instance variable index");return this.RAt[t].type}Qit(t){if((t=Math.floor(t))<0||t>=this.RAt.length)throw new RangeError("invalid instance variable index");return this.RAt[t].name}TEt(){return this.FAt}BEt(){return this.YAt}Frt(t){return this.KAt.get(t.toLowerCase())||null}eet(t){const s=this.ZAt.get(t.toLowerCase());return void 0===s?-1:s}_V(){return this.I0}Ij(){return this.DCt.Ij()}WEt(){return this.I0&&this.I0.jEt()}Ayt(){return this.sEt}eV(){return this.sEt.eV()}jq(){return this.mAt}Y0(t){this.iEt=t}X0(){return this.iEt}K0(t){this.eEt=t}VEt(){return this.eEt}UEt(){return this.rEt}HEt(){return this.rEt.length}gV(){return this.jAt}eTt(t){return this.VAt.has(t)}MV(){return this.NAt}xV(t){return this.BAt.has(t)}jMt(t){return this.HAt[t]}DMt(t){return this.UAt[t]}Hbt(t){this.tEt.set(t.Xbt().toLowerCase(),t)}zbt(t){return!!this.sMt(t)}sMt(t){const s=this.tEt.get(t.toLowerCase());return s&&s._u()?s:null}zEt(){return this.rEt}JEt(t){if(!this.rEt)throw new Error("no animations");return this.hEt.get(t.toLowerCase())||null}qEt(t){if(!this.rEt)throw new Error("no animations");return this.oEt.get(t)||null}$Et(t){if(this.JEt(t))throw new Error(`animation name '${t}' already exists`);const s=Zw.ZRt.rAt(this.aW(),t);return this.rEt.push(s),this.hEt.set(s.Pc().toLowerCase(),s),this.oEt.set(s.I1(),s),s}XEt(t){const s=this.JEt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.rEt.length)throw new Error("cannot remove last animation");const i=this.rEt.indexOf(s);this.rEt.splice(i,1),this.hEt.delete(s.Pc().toLowerCase()),this.oEt.delete(s.I1()),s.zn()}YEt(){if(!this.rEt)throw new Error("no animations");return this.rEt[0]}KEt(){return this.YEt().lAt(0)}ZEt(){if(this.rEt){const t=this.KEt().jq();return[t.Vg(),t.Zg()]}return this.mAt?[this.mAt.Vg(),this.mAt.Zg()]:[100,100]}Vj(){if(!this.DCt.Sj())throw new Error("not a single-global plugin");return this.fQ[0]}iV(){return this.fQ}*qj(){yield*this.fQ}*sV(){yield*this.fQ,yield*this.Nc.o_t(this)}hV(){return this.fQ.length}e1(t){this.fQ.push(t)}QEt(){this.uEt=!0}Y4(){if(!this.uEt||this.CAt)return;const t=this.fQ;let s=0;for(let i=t.length;s<i;++s)t[s].tFt(s);const i=this.Nc.sFt();for(const t of i)t.cH()===this&&t.tFt(s++);this.uEt=!1}iFt(t){const s=this.fQ;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.sFt();for(const s of i)if(s.cH()===this){if(0===t)return s;--t}return null}HTt(t){if(t&&t.MH()&&t.cH()!==this)for(const s of t.GH())if(s.cH()===this)return s;const s=this.eV().iV();return s.length?s[0]:null}tV(t){const s=this.eV().iV();return s.length>0?s[t._H()%s.length]:null}*d_t(t,s){const i=this.eV().iV(),e=i.length,n=s.eV(),r=s.eV().iV(),h=r.length;let o=t._H();!s.S1()&&n._pt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}dxt(t){this.jCt?.dxt(t)}dbt(){if(!this.JAt||this.CAt)return;this.Y4();const t=this.eV(),s=t.Opt(),i=t._pt(),e=this.Nc.Fgt(),n=e&&e.dN()&&e.dN().Upt();for(const e of this.qAt.GV()){if(e===this)continue;e.Y4();const r=e.eV();if(r.Fpt(i),!i){const i=r.Opt();Zw.Sh(i);for(const t of s)i.push(e.iFt(t._H()));if(n){const s=t.Dpt(),i=r.Dpt();Zw.Sh(i);for(const t of s)i.push(e.iFt(t._H()))}}}}wxt(t,s){for(const i of this.u4().GV()){const e=i.eV();t?Zw.wh(e.Dpt(),s):Zw.wh(e.Opt(),s)}}eFt(){return this.DAt}nFt(t){this.LAt=!!t}rFt(){if(this.LAt&&this.ZIt){for(const t of this.fQ)t.DB().hFt();for(const t of this.Nc.sFt())t.cH()===this&&t.DB().hFt();this.LAt=!1}}oFt(t,s,i){if(s){const i=this.lEt.get(s);i&&(i.delete(t),0===i.size&&this.lEt.delete(s))}if(i){let s=this.lEt.get(i);s||(s=new Set,this.lEt.set(i,s)),s.add(t)}}*aFt(){if(this.S1()){const t=new Set;for(const s of this.NAt)for(const i of s.aFt())t.add(i);yield*t.values()}else for(const t of this.lEt.keys())t.Jn()||(yield t)}oxt(){return this.OGt||(this.OGt=new Map),this.OGt}axt(){return this.DGt||(this.DGt=new Map),this.DGt}lFt(){return this.OEt(Zw.gut.bRt)}uFt(){return this.OEt(Zw.gut.MRt)}cFt(){return this.OEt(Zw.gut.fFt)}s1(){return this.OEt(Zw.gut.dFt)}i5(){const t={instances:this.fQ.map(t=>t.oG())};return this.OGt&&this.OGt.size&&(t.ex=Zw.wo(this.OGt)),t}e5(t,s){this.OGt&&(this.OGt.clear(),this.OGt=null);const i=t.ex;i&&(this.OGt=Zw.So(i));const e=this.fQ,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].aG(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Nc.yH(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.bj()&&(e=this.Nc.uB().t4(i.w.l),!e))continue;const r=this.Nc.i1(this.iEt||this,e,!1,0,0,!0);r.aG(i),s&&s.add(r)}this.yEt=n,this.QEt()}pFt(){return this.yEt}mFt(){this.yEt=null}gFt(){for(let t=0,s=this.fQ;t<s;++t)this.fQ[t].gFt()}Bj(){return this.dEt}eN(){return this.j0}yFt(){return this.pEt}oV(t){this.pEt=t}CZ(t){const s=this.Nc,i=s.sz()&&!s.oN().fV();i&&Qw.b6(),this.j0.dispatchEvent(t),i&&Qw.M6()}}}{const iS=self._s;iS.wFt=class extends iS.Vn{constructor(t,s){super(),this.Nc=t,this.SFt=s;for(const t of this.SFt)t.SEt(this)}zn(){this.Nc=null}aW(){return this.Nc}l4(){return this.SFt}GV(){return this.SFt}Z4(){return this.SFt.some(t=>t.bj())}}}{const eS=self._s,nS=self.iz,rS=(self.uH,eS.mj),hS=[];let oS=0;const aS=new WeakMap,lS=new WeakMap;eS.Instance=class extends eS.Vn{constructor(t){if(eS.mj!==rS)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.vFt=t.objectType,this._it=null,this.bFt=null,this.MFt=null,this.GFt=0,this.xFt=t.uid,this.TFt=oS++,this.Mxt=0,this._Ft=null;const s=eS.Dh(t.tags);s.length>0&&(this._Ft=new Set(s)),this.IFt=hS,this.CFt=hS;const i=this.vFt.BEt();i.length>0&&(this.CFt=i.map((t,s)=>eS.Hn(eS.PFt,{runtime:this.Nc,lq:t,fq:this,index:s}))),this.RFt=this.vFt.MH()?[]:null,this.AFt=-1,this.OAt=null;const e=this.zj();if(e.vM()&&(this.Mxt|=4),e.bj())if(this._it=eS.Hn(eS.EFt,this,t.bz),t.FFt)this._it.OFt(t.FFt);else{this._it.DFt();const[t,s]=this.vFt.ZEt();this._it.BR(t,s),this.cH().WEt()&&this._it.vz().kFt()}t.LFt?this.NFt(t.LFt):this.BFt()}zn(){if(this.MFt&&(this.MFt.gH(),this.MFt=null),this.CFt.length>0){for(const t of this.CFt)t.zn();eS.Sh(this.CFt)}this.bFt&&(this.bFt.zn(),this.bFt=null);const t=aS.get(this);t&&(t.clear(),aS.delete(this));const s=lS.get(this);s&&(s.clear(),lS.delete(this)),this.RFt&&eS.Sh(this.RFt),this.OAt&&(this.OAt.zn(),this.OAt=null),this._Ft&&this._Ft.clear(),this._Ft=null,this.Nc=null,this.vFt=null,this.IFt.length>0&&eS.Sh(this.IFt),this._it&&(this._it.zn(),this._it=null)}NFt(t){t.length>0&&(this.IFt=[],eS.xh(this.IFt,t))}BFt(){const t=this.vFt.GEt();if(0===t)return;this.IFt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.IFt.push(s[this.vFt.tet(i)])}PEt(t,s){if(this.bFt)throw new Error("already got sdk instance");for(let t=0,i=this.CFt.length;t<i;++t)this.CFt[t].PEt(s?s[t]:null);if(this.zj().txt()<2){if(this.bFt=eS.Hn(this.vFt.FEt(),this,t),!(this.bFt instanceof eS.BCt))throw new Error("sdk type must derive from SDKInstanceBase");!this.zj().bj()&&this.vFt.yFt()&&this.RB()}else{const s=this.zj().vCt();this.WFt(s.Instance,t)}}sq(){return this.bFt??this.MFt}DB(){return this._it}aW(){return this.Nc}WN(){return this.AFt}PH(){const t=this.AFt;return-1===t?this.aW().WN():t}jN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.AFt=t,this.cH().WEt()&&this.Nc.jFt(this,!0)}AH(){this.AFt=-1,this.cH().WEt()&&this.Nc.jFt(this,!1)}U3(){return this.Nc.VFt(this)}wf(){return this.OAt||(this.OAt=eS.Hn(eS.Event.wf)),this.OAt}zG(t){this.bFt?this.bFt.zG(t):this.MFt.sX(this.Nc.TB().xB())}SCt(t){this.bFt.SCt(t)}UFt(){this.Mxt|=2}HFt(){return!!(2&this.Mxt)}zFt(){this.Mxt|=1}wX(){return!!(1&this.Mxt)}vM(){return!!(4&this.Mxt)||(this.bFt?this.bFt.vM():this.MFt.iM())}JFt(){this.Mxt|=32}F3(){return!!(32&this.Mxt)}qFt(){return!!(8&this.Mxt)}$Ft(t){t?this.Mxt|=8:this.Mxt&=-9}XFt(){return!!(16&this.Mxt)}YFt(t){t?this.Mxt|=16:this.Mxt&=-17}KFt(){return!!(64&this.Mxt)}ZFt(t){t?this.Mxt|=64:this.Mxt&=-65}QFt(t,s){t<<=16,s?this.Mxt|=t:this.Mxt&=~t}tOt(t){return!!(this.Mxt&t<<16)}bPt(){return this.bFt?this.bFt.bPt():null}MPt(){return this.bFt?this.bFt.MPt():null}GPt(){return this.bFt?this.bFt.GPt():null}xPt(){return this.bFt?this.bFt.xPt():null}_Pt(){return!!this.bFt&&this.bFt._Pt()}dTt(t){return this.bFt?this.bFt.dTt(t):[this.MFt.x,this.MFt.y,this.MFt.Oz]}cH(){return this.vFt}A3(){return this.bFt?this.bFt.A3():this.MFt.iX()}a_t(t){return t.S1()?t.xV(this.cH()):this.cH()===t}sOt(t,s,i){const e=(s,i)=>{const e=i||s.cH(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.MH())for(const t of this.GH())e(t);if(i)for(const t of this.dJ())e(t)}iOt(){if(!this.zj().Aj())throw new Error("object does not support scene graph")}wJ(){return null!==this.rJ()}rJ(){const t=this.DB();if(!t)return null;const s=t.rJ();return s?s.C$():null}oJ(){const t=this.DB();if(!t)return null;const s=t.oJ();return s?s.C$():null}*aJ(){const t=this.DB();if(t)for(const s of t.aJ())yield s.C$()}eOt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}h5(){const t=this.DB();return!!t&&t.h5()}nOt(t){const s=this.DB();if(!s)return[];const i=t.Pc();return s.h6().map(t=>t.C$()).filter(t=>t.cH().Pc()===i)}h6(){const t=this.DB();return t?t.h6().map(t=>t.C$()):[]}*children(){const t=this.DB();if(t)for(const s of t.children())yield s.C$()}*dJ(){const t=this.DB();if(t)for(const s of t.dJ())yield s.C$()}uJ(){const t=this.DB();return t?t.uJ():0}rOt(){return[...this.aJ()].length}f_t(){const t=this.DB();return t?t.f_t():0}fJ(t){const s=this.DB();if(!s)return null;const i=s.fJ(t);return i?i.C$():null}hOt(){const t=this.DB();if(!t)return NaN;const s=t.rJ();return s?s.oOt(t):NaN}aOt(t){for(const s of this.DB().h6())if(s.C$().xH()===t)return!0;return!1}mJ(t,s){this.iOt(),t.iOt(),this.DB().mJ(t.DB(),s||{})}gJ(t){const s=this.DB();s&&s.gJ(t.DB())}LJ(){const t=this.DB();return!!t&&t.LJ()}N4(){const t=this.DB();if(!t)return;const s=t.lOt();if(s)for(const t of s){const s=this.Nc.PB(t[2]);if(s){const i=t[3];this.mJ(s,{vJ:!!(1&i),MJ:!!(i>>1&1),xJ:!!(i>>2&1),_J:!!(i>>3&1),CJ:!!(i>>4&1),kJ:!!(i>>5&1),RJ:!!(i>>6&1),EJ:!!(i>>7&1),OJ:!!(i>>8&1)})}}}B4(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.mJ(i,{vJ:!!(1&e),MJ:!!(e>>1&1),xJ:!!(e>>2&1),_J:!!(e>>3&1),CJ:!!(e>>4&1),kJ:!!(e>>5&1),RJ:!!(e>>6&1),EJ:!!(e>>7&1),OJ:!!(e>>8&1)})}}CH(){const t=this.Nc.uOt();return t?t.vct(this):""}MH(){return null!==this.RFt}cOt(){eS.Sh(this.RFt)}X4(t){this.RFt.push(t)}vH(){return this.RFt}fOt(t){return!!this.dOt(t)}dOt(t){const s=this.GH();if(null===s||0===s.length)return!1;for(const i of s)if(i.cH()===t)return i;return null}GH(){return this.RFt}wSt(){for(const t of this.GH())t.cH().eV().kpt(t)}pxt(){for(const t of this.GH())t.cH().eV().Apt(t)}mxt(t){for(const s of this.GH())s.cH().eV().Opt()[t]=s}yxt(){for(const t of this.GH())t.cH().eV().Ept(t)}gxt(t){for(const s of this.GH())s.cH().eV().Dpt()[t]=s}zj(){return this.vFt.zj()}tFt(t){this.GFt=t}_H(){return this.vFt.Y4(),this.GFt}xH(){return this.xFt}pOt(t){this.xFt=t}mOt(){return this.TFt}gOt(t){t?this.DH(new Set(t)):this._Ft=null}DH(t){if(0===t.size)this._Ft=null;else{this._Ft?this._Ft.clear():this._Ft=new Set;for(const s of t)this._Ft.add(s)}}FH(){return this._Ft??new Set}L_t(){return Array.from(this.FH()).join(" ")}W_t(t){t=Math.floor(t);for(const s of this.FH()){if(0===t)return s;--t}return""}Ert(){return this.CFt}yOt(t){if(!t)return null;for(const s of this.CFt)if(s.aq()instanceof t)return s;return null}wOt(t){if(!t)return null;const s=this.yOt(t);return s?s.sq():null}Art(t){const s=this.CFt;for(let i=0,e=s.length;i<e;++i)if(s[i].cq().I1()===t)return i;return-1}SOt(){return this.IFt}LEt(){return this.vFt.LEt()}vOt(){return this.IFt.length}lot(t){t|=0;const s=this.IFt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}FMt(t){return this.IFt[t]}bOt(t){const s=this.IFt[t];return 0===this.vFt.tet(t)?!!s:s}uot(t,s){t|=0;const i=this.IFt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.vFt.tet(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}tat(t,s){if(0===s)return;t|=0;const i=this.IFt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}oxt(){let t=aS.get(this);return t||(t=new Map,aS.set(this,t),t)}axt(){let t=lS.get(this);return t||(t=new Map,lS.set(this,t),t)}MOt(t){const s=this.cH();if(s.eN().Gf(t))return!0;for(const i of s.gV())if(i.eN().Gf(t))return!0;return!!this.Nc.eN().Gf(t)}cV(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.DB();if(i&&i.h5())for(const t of this.dJ())if(s.add(t),t.MH())for(const i of t.GH())s.add(i);if(this.MH())for(const t of this.GH())t.cV(s);if(!t){for(const t of s.values())t.W4();this.j4()}}GOt(){this.vFt.yFt()&&this.RB();for(const t of this.CFt)t.hRt()}xOt(){this.GOt()}W4(){if(this.GOt(),this.MOt("instancecreate")){const t=this.cH(),s=new eS.Event("instancecreate");s.fq=this.RB(),t.CZ(s);for(const i of t.gV())i.CZ(s);this.Nc.CZ(s)}this.Nc.qH(this.zj().nwt().QB.U_t,this,null)}j4(){if(this.zj().Aj()){if(this.CZ(new eS.Event("hierarchyready")),this.MOt("hierarchyready")){const t=this.cH(),s=new eS.Event("hierarchyready");s.fq=this.RB(),t.CZ(s);for(const i of t.gV())i.CZ(s);this.Nc.CZ(s)}this.Nc.qH(this.zj().nwt().QB.r_t,this,null)}}TOt(){this.Nc.qH(this.zj().nwt().QB.H_t,this,null)}_Ot(t){if(this.MFt){const s=new eS.Event("destroy");s.IOt=t,this.CZ(s)}if(!this.MOt("instancedestroy"))return;const s=this.cH(),i=new eS.Event("instancedestroy");i.fq=this.RB(),i.IOt=t,s.CZ(i);for(const t of s.gV())t.CZ(i);this.Nc.CZ(i)}COt(){return this.bFt?this.bFt.aPt():this.MFt.az()}oG(t="full",s=null){const i={};"full"===t?i.uid=this.xH():i.c3=!0;const e=this.FH();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=aS.get(this);if(s&&s.size&&(i.ex=eS.wo(s)),-1!==this.WN()&&(i.mts=this.WN()),this.vFt.GEt()>0){const t={},s=this.vFt.DEt();for(let i=0,e=this.IFt.length;i<e;++i)t[s[i].toString()]=this.IFt[i];i.ivs=t}if(this.CFt.length){const s={};for(const i of this.CFt){const e=i.oG(t);e&&(s[i.cq().I1().toString()]=e)}i.behs=s}}this._it&&(i.w=this._it.i5(t,s));const n=this.bFt?this.bFt.oG():this.MFt.lz();return n&&(i.data=n),i}u8(t="full",s=null){this._it&&this._it.u8(t)}f8(t,s="full",i=null){this._it&&this._it.f8(t,s,i)}POt(t,s="full",i=null){this._it&&this._it.POt(t,s,i)}gFt(){this.zj().bj()&&this._it.gFt()}aG(t,s="full",i=null){if("full"===s)this.xFt=t.uid;else if(!t.c3)return;if(this.gOt(t.tags),"visual-state"!==s){let s=aS.get(this);s&&(s.clear(),aS.delete(this));const i=t.ex;i&&(s=eS.So(i),aS.set(this,s)),this.AFt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.vFt.kEt(i);if(e<0||e>=this.IFt.length)continue;let n=s;null===n&&(n=NaN),this.IFt[e]=n}}if(this.zj().bj()){const e=t.w;if(e){const t=e.l;if(this._it.kB().I1()!==t){const i=this._it.kB(),e=i.pB().t4(t);e?(this._it.WB(e),i.o1(this,!0),e.e1(this,!0),e.jB(this),this._it.Mz()):"full"===s&&this.Nc.yH(this)}this._it.e5(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Art(i);n<0||n>=this.CFt.length||this.CFt[n].aG(e,s)}}const e=t.data;e&&(this.bFt?this.bFt.aG(e,s):this.MFt.uz(e))}ROt(t){if(this._it.kB().I1()===t)return;const s=this._it.kB(),i=s.pB().t4(t);i&&(this._it.WB(i),s.o1(this,!0),i.e1(this,!0),i.jB(this),this._it.Mz())}RB(){return this.MFt||this.WFt()}fPt(){return!!this.MFt}WFt(t,s){const i=this._it?t?self.K$:self.YJ:t?self.BH:self.uH,e=t||this.bFt.vCt(),n=this.vFt.yFt(),r=n||e||i,h=this.zj().txt();if(eS.mj.GCt(this,h),eS.mj.xRt(s),this.MFt=new r,eS.mj.TRt(),eS.mj.xCt(h),e&&!(this.MFt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.MFt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.MFt}fH(t){if(0===this.IFt.length)return;const s={},i=this.vFt.NEt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:eS.Instance.prototype.bOt.bind(this,t),set:eS.Instance.prototype.uot.bind(this,t)};const e=Object.create(Object.prototype,s);t.AOt={value:e,writable:!1}}dH(t){const s=this.CFt;if(0===s.length)return;const i={};for(const t of s)i[t.cq().Ugt()]={value:t.HCt(),writable:!1};const e=Object.create(Object.prototype,i);t.nSt={value:e,writable:!1}}CZ(t){if(!this.fPt())return;const s=this.RB();t.fq=s;const i=this.Nc,e=i.sz()&&!i.oN().fV();e&&nS.b6(),s.dispatchEvent(t),e&&nS.M6()}}}{const uS=self._s,cS=new Map;uS.a6=class extends uS.Vn{constructor(t){super(),this.mG=t,this.xSt=null,this.EOt=[],this.FOt=t.Vg(),this.OOt=t.Zg(),this.DOt=1,this.kOt=1,this.LOt=0,this.NOt=1,this.BOt=t.wF(),this.WOt=null,this.jOt=null,this.VOt=NaN,this.UOt=!1,this.l5=NaN,this.u5=NaN,this.HOt=s=>{if(s.fq!==this.xSt.C$())return;t.aW().wf().removeEventListener("instancecreate",this.HOt);const i=this.xSt.C$().sq();this.UOt=!!i.yet(),this.l5=this.UOt?i.met():NaN,this.u5=this.UOt?i.vet():NaN}}zn(){this.xSt=null,this.WOt=null,this.jOt=null,this.VOt=NaN,this.UOt=!1,this.l5=NaN,this.u5=NaN,uS.Sh(this.EOt)}zOt(t){if(this.NOt=this.mG.wF(),this.BOt=this.NOt,this.xSt=t,this.LOt=t?t.FV():0,this.xSt){const t=this.mG.aW();if(this.xSt.C$().zj().txt()<2){const s=this.xSt.C$().sq();s?(this.UOt=!!s.yet(),this.l5=this.UOt?s.met():NaN,this.u5=this.UOt?s.vet():NaN):this.xSt.C$().wX()||t.wf().addEventListener("instancecreate",this.HOt)}else this.UOt=!1,this.l5=NaN,this.u5=NaN}else this.UOt=!1,this.l5=NaN,this.u5=NaN}rJ(){return this.xSt}h5(){return this.EOt.length>0}h6(){return this.EOt}JOt(){this.h5()&&1!==this.EOt.length&&(this.jOt?this.EOt.sort((t,s)=>{const i=this.jOt.get(t.C$()),e=this.jOt.get(s.C$());return uS.Qi(i)&&uS.Qi(e)?i-e:0}):this.EOt.sort((t,s)=>{const i=t.Urt().qOt(),e=s.Urt().qOt();return uS.Qi(i)&&uS.Qi(e)?i-e:0}))}qOt(){return this.VOt}$Ot(){return this.DOt}XOt(t){this.DOt=t}YOt(){return this.kOt}KOt(t){this.kOt=t}Pot(){return this.BOt}DTt(){return this.NOt}ZOt(t){this.NOt=t}Vrt(){return 0===this.FOt?Number.EPSILON:this.FOt}qrt(){return 0===this.OOt?Number.EPSILON:this.OOt}QOt(){if(this.mG.TJ()){const t=this.xSt;let s=t.Vg(),i=t.Urt().Vrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.UOt?1+s/this.l5:s/i}return 1}tDt(){if(this.mG.IJ()){const t=this.xSt;let s=t.Zg(),i=t.Urt().qrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.UOt?1+s/this.u5:s/i}return 1}sDt(){return 0}iDt(){return{sw:this.FOt,sh:this.OOt,sx:this.DOt,sy:this.kOt,psa:this.LOt,oo:this.NOt,so:this.BOt,pi:this.mG.C$().hOt()}}i5(t,s=null){const i=this.iDt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.eDt(t),c:this.nDt(t)})}rDt(t){let s="";return t.bJ()&&(s+="x"),t.GJ()&&(s+="y"),t.TJ()&&(s+="w"),t.IJ()&&(s+="h"),t.PJ()&&(s+="a"),t.AJ()&&(s+="z"),t.LJ()&&(s+="d"),t.FJ()&&(s+="o"),t.DJ()&&(s+="v"),s}eDt(t){return this.xSt?!this.xSt.C$()||this.xSt.C$().wX()?null:this.hDt(this.xSt,this.mG,t):null}nDt(t){return this.EOt.map(s=>this.hDt(s,s,t)).filter(t=>t)}hDt(t,s,i){const e=t.C$();if(e&&e.wX())return null;const n={};return n.uid=e.xH(),n.f=this.rDt(s),n.offsets=s.oDt(),n.data=uS.a6.aDt(e),n.oci=e.cH().ML(),"state"===i?(n.inst=e.oG("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.cH().iV().indexOf(e),n.inst=null),n}e5(t){this.FOt=t.sw,this.OOt=t.sh,this.DOt=t.sx,this.kOt=t.sy,this.LOt=t.psa,this.NOt=t.oo,this.BOt=t.so,this.VOt=uS.Qi(t.pi)?t.pi:NaN}lDt(t,s,i,e){if(!t&&!s)if(e?.Q_t){if(this.WOt)for(const t of this.WOt)t.wX()||t.wJ()||t.aW().yH(t)}else if(this.WOt)for(const t of this.WOt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.xH()))continue;t.wX()||t.wJ()||t.aW().yH(t)}this.WOt=t,this.jOt=s}uDt(t){const s=this.mG.aW();return cS.has(t)?cS.get(t):s.PB(t)}f8(t,s){const i=this.mG,e=i.aW(),n=s?.cDt??new Set;if(t.p&&!this.xSt){const r=t.p.uid,h=this.uDt(r);if(h){const r=h.DB();h.eOt(i.C$())?this.xSt=r:(h.aOt(i.C$().xH())?(e.yH(i.C$()),e.fDt(i.C$().xH()),cS.delete(i.C$().xH())):h.mJ(i.C$(),this.dDt(t.p.f)),n.has(i)||(i.pDt(t.p.offsets),this.mDt(h,t.p,s),this.gDt(h,h.xH(),i.aW(),s)),n.add(i),h.DB().Urt().JOt())}else if(uS.Qi(t.p.oci)){const n=e.aV(e.q0(t.p.oci),i.kB(),0,0,!0);if(n){const r=this.yDt(t.p,e);r&&n.aG(r);const h=n.DB(),o=!!s?.Q_t;h.kB().lV(n,!1,o),n.mJ(i.C$(),this.dDt(t.p.f)),cS.set(n.xH(),n),this.gDt(n,n.xH(),e,s),n.DB().Urt().JOt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.uDt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.uDt(a);if(l){if(this.WOt){if(this.WOt.includes(l)){const e=l;if(e.cH()!==l.cH()){h++;continue}if(e.wX()){h++;continue}const o=t.c[h];if(!s?.Q_t&&this.wDt(e,r,i)){if(i.C$().fJ(h)){const r=e.cH().ML(),a=o.oci,l=i.C$().fJ(h).cH().ML();if(r!==a||a!==l){this.SDt(t.c,i,n,s);break}this.vDt(h,o,i,n,s)}else this.vDt(h,o,i,n,s);h++;continue}if(e.wJ()&&e.rJ()!==i.C$()){const t=this.bDt(o,s);this.MDt(t,o,n,s),h++;continue}this.MDt(e.DB(),o,n,s,!0),h++;continue}if(this.WOt[h]){const e=this.WOt[h];if(e.cH()!==l.cH()){h++;continue}if(e.wX()){h++;continue}const o=t.c[h];if(!s?.Q_t&&this.wDt(e,r,i)){if(i.C$().fJ(h)){const r=e.cH().ML(),a=o.oci,l=i.C$().fJ(h).cH().ML();if(r!==a||a!==l){this.SDt(t.c,i,n,s);break}this.vDt(h,o,i,n,s)}else this.vDt(h,o,i,n,s);h++;continue}if(e.wJ()&&e.rJ()!==i.C$()){const t=this.bDt(o,s);this.MDt(t,o,n,s),h++;continue}this.MDt(e.DB(),o,n,s,!0),h++;continue}}const e=l.cH();if(this.GDt(r,e)===i.C$().nOt(e).length){for(const t of i.C$().h6()){if(t.cH()!==e)continue;const i=t.DB();if(i&&!n.has(i)){n.add(i),i.pDt(o.offsets),this.mDt(t,o,s);break}}h++;continue}if(l.wJ()&&l.rJ()!==i.C$()){const t=this.bDt(o,s);this.MDt(t,o,n,s),h++;continue}this.MDt(l.DB(),o,n,s)}else if(this.WOt&&this.WOt[h]){const a=this.WOt[h],l=e.q0(this.xDt(o));if(a.cH()!==l){h++;continue}if(a.wX()){h++;continue}const u=t.c[h];if(!s?.Q_t&&this.wDt(a,r,i)){if(i.C$().fJ(h)){const e=a.cH().ML(),r=u.oci,o=i.C$().fJ(h).cH().ML();if(e!==r||r!==o){this.SDt(t.c,i,n,s);break}this.vDt(h,u,i,n,s)}else this.vDt(h,u,i,n,s);h++;continue}if(a.wJ()&&a.rJ()!==i.C$()){const t=this.bDt(u,s);this.MDt(t,u,n,s),h++;continue}this.MDt(a.DB(),u,n,s)}else{const t=this.bDt(o,s);this.MDt(t,o,n,s)}h++}}SDt(t,s,i,e){const n=s.aW();for(const t of s.C$().children())t&&!t.wX()&&(n.yH(t),n.fDt(t.xH()),cS.delete(t.xH()));this.WOt&&(this.WOt=[]),this.jOt&&(this.jOt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.bDt(s,e);this.MDt(t,s,i,e),this.WOt.push(t.C$()),this.jOt.set(t.C$(),this.WOt.length-1)}s.Urt().JOt()}wDt(t,s,i){const e=t.cH();return this.GDt(s,e)===i.C$().nOt(e).length}vDt(t,s,i,e,n){const r=i.C$().fJ(t);if(!r)return;const h=r.DB();h&&(e.has(h)||(h.pDt(s.offsets),this.mDt(r,s,n)),e.add(h))}dDt(t){const s={};return s.vJ=t.includes("x"),s.MJ=t.includes("y"),s.xJ=t.includes("w"),s._J=t.includes("h"),s.CJ=t.includes("a"),s.RJ=t.includes("z"),s.kJ=t.includes("d"),s.EJ=t.includes("o"),s.OJ=t.includes("v"),s}xDt(t){return uS.Qi(t.oci)?t.oci:t[1]}bDt(t,s){if(!uS.Qi(t.oci))return;const i=this.mG,e=i.aW();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.i1(t.data,i.kB(),!1,0,0,!1,r):e.aV(e.q0(t.oci),i.kB(),0,0,r),!n)return;const h=this.yDt(t,e);h&&n.aG(h);const o=n.DB(),a=!!s?.Q_t;return o.kB().lV(n,!0,a),o}gDt(t,s,i,e){if(this.uDt(s)&&!e?.Q_t){const e=this.uDt(s);e!==t&&i.yH(e)}i.fDt(s),i.REt(s,t)}MDt(t,s,i,e,n=!0){const r=this.mG,h=r.mJ(t,this.dDt(s.f));h&&n?(i.has(t)||(t.pDt(s.offsets),this.mDt(t.C$(),s,e)),i.add(t)):h&&(cS.set(t.C$().xH(),t.C$()),this.gDt(t.C$(),s.uid,r.aW(),e)),this.JOt()}mDt(t,s,i){let e=this.yDt(s,this.mG.aW());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.aW();if(cS.set(t.xH(),t),e=JSON.parse(JSON.stringify(e)),n&&t.xH()!==e.uid){for(const s of t.children())s&&!s.wX()&&(h.yH(s),h.fDt(s.xH()),cS.delete(s.xH()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.bDt(s,e);cS.set(n.C$().xH(),n.C$()),t.mJ(n.C$(),this.dDt(s.f)),n.pDt(s.offsets),this.mDt(n.C$(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.aG(e),i?.Q_t||(uS.Qi(o)&&r&&t.DB().f1(o),uS.Qi(a)&&t.ROt(a)),this.gDt(t,e.uid,h,i)}GDt(t,s){return t.filter(t=>t.cH().Pc()===s.Pc()).length}yDt(t,s){if(uS.Qi(t.instIndex)){const i=s.q0(t.oci).pFt();return i?i[t.instIndex]:null}return uS.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static aDt(t){let s=t.DB().kB().Z0(t.xH());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.h6()]){const t=s.DB();i.push([t.pB().I1(),t.kB().ML(),s.xH(),uS.a6.o6(t),s.cH().MH()?1:0,t.LB(),uS.a6.aDt(s)])}return uS.Ge(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=uS.a6.TDt(),s[0][14][1]=i,s[0][14][2]=t.DB().LB()),s}static o6(t){let s=0;return s|=Number(t.DJ())<<8,s|=Number(t.FJ())<<7,s|=Number(t.AJ())<<6,s|=Number(t.LJ())<<5,s|=Number(t.PJ())<<4,s|=Number(t.IJ())<<3,s|=Number(t.TJ())<<2,s|=Number(t.GJ())<<1,s|=0|Number(t.bJ()),s}static TDt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static _Dt(){cS.clear()}}}{const fS=self._s,dS=self.hs,pS=(dS.ys,dS.ws,fS.Hn(fS.Rect)),mS=fS.Hn(fS.Cl),gS=fS.Hn(fS.Event,"bboxchange",!1),yS=fS.Hn(fS.Go,0,0,0,0),wS=fS.Hn(fS.au),SS=fS.Hn(fS.Go,1,1,1,1),vS=fS.Hn(fS.Rect,0,0,-1,-1),bS=fS.Hn(fS.Rect,0,0,-1,-1),MS=new Set(["absolute","relative"]),GS=[];let xS=!0;const TS=new WeakMap,_S=new WeakMap;fS.EFt=class extends fS.Vn{constructor(t,s){super(),this.fi=t,this.ppt=t.cH(),this.Nc=t.aW(),this.IDt=s,this.ppt.oFt(this,null,s),this.CDt=-1,this.PDt=-1,this.Mxt=196635,this.ppt.zj().Tj()&&(this.Mxt|=128),this.Pa=NaN,this.Ra=NaN,this.FM=NaN,this.RDt=NaN,this.ADt=NaN,this.rT=NaN,this.Io=NaN,this.EDt=NaN,this.FDt=NaN,this.ODt=NaN,this.DDt=NaN,this.kDt=fS.Hn(fS.Rect),this.LDt=fS.Hn(fS.Cl),this.NDt=bS,this.BDt=vS,this.WDt=null,this.jDt=null,this.VDt=null,this.EM=SS,this.UDt=SS,this.HDt=null,this.zDt=null,this.fi.cH().WEt()&&(this.zDt=fS.Hn(fS.JDt,this.fi,this)),this.qDt=null,this.WOt=null,this.jOt=null,this.$Dt=-1,this.XDt=null}zFt(){this.Mxt|=256}zn(){if(this.ppt.oFt(this,this.IDt,null),this.HDt&&(this.Nc.mM().Pv(this.HDt),this.HDt=null),this.WDt=null,this.jDt&&(this.jDt.YDt.zn(),this.jDt=null),this.VDt&&(this.VDt.clear(),this.VDt=null),this.jJ(),this.zDt&&this.zDt.zn(),this.wJ()&&this.rJ().gJ(this),this.h5()){const t=[...this.h6()];for(const s of t)this.gJ(s)}this.KDt(),this.ZDt(),TS.delete(this),_S.delete(this),this.fi=null,this.ppt=null,this.Nc=null,this.IDt=null}OFt(t){if(xS=!1,this.Gz(t[0],t[1]),this.tG(t[2]),this.BR(t[3],t[4]),this.rT=0,this.Tj()?this.EV(t[6]):this.Io=0,yS.wa(t[7]),this.QDt(yS),this.Cz(t[8]),this.Az(t[9]),this.LM(t[10]),this.zDt&&this.zDt.tkt(t[12]),t[14]&&TS.set(this,{skt:t[14][1],ikt:t[14][2]}),t[15]){const s=t[15];this.BJ(s[0],s[1]);const i=this.JJ(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.NG(e,t);r.XM(n[0]),r.ZM(n[1]),r.tG(n[2]),r.iG(n[3]),r.nG(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Nc.uOt();e&&r&&r.Sct(this.C$(),i),n&&r&&r.Sct(this.C$(),s)}xS=!0,this.ekt()}DFt(){this.Pa=0,this.Ra=0,this.FM=0,this.RDt=0,this.ADt=0,this.rT=0,this.Io=0,this.EDt=0,this.FDt=1,this.ODt=0,this.DDt=0,this.ekt()}aW(){return this.Nc}cH(){return this.ppt}C$(){return this.fi}nkt(){return this.PJ()?this.rkt(this.rJ().hkt()-this.qDt.sDt()):0}XM(t){if(t=+t,this.bJ()){const s=this.qDt,i=t-this.$M(),e=-this.nkt();0===e?this.Pa+=i/s.QOt():(this.Pa+=Math.cos(e)*i/s.QOt(),this.GJ()&&(this.Ra+=Math.sin(e)*i/s.tDt()))}else this.Pa=t}mot(t,s=!1){t=+t,s?this.Pa+=t:this.bJ()?this.XM(this.$M()+t):this.Pa+=t}$M(){if(this.bJ()){let t=this.Pa;const s=this.qDt,i=this.rJ(),e=this.nkt();return 0===e?t*=s.QOt():(t=t*s.QOt()*Math.cos(e),this.GJ()&&(t-=this.Ra*s.tDt()*Math.sin(e))),i.$M()+t}return this.Pa}ZM(t){if(t=+t,this.GJ()){const s=this.qDt,i=t-this.KM(),e=-this.nkt();0===e?this.Ra+=i/s.tDt():(this.bJ()&&(this.Pa-=Math.sin(e)*i/s.QOt()),this.Ra+=Math.cos(e)*i/s.tDt())}else this.Ra=t}got(t,s=!1){t=+t,s?this.Ra+=t:this.GJ()?this.ZM(this.KM()+t):this.Ra+=t}KM(){if(this.GJ()){let t=this.Ra;const s=this.qDt,i=this.rJ(),e=this.nkt();return 0===e?t*=s.tDt():(t=t*s.tDt()*Math.cos(e),this.bJ()&&(t+=this.Pa*s.QOt()*Math.sin(e))),i.KM()+t}return this.Ra}Gz(t,s){if(t=+t,s=+s,this.okt()){const i=this.bJ(),e=this.GJ(),n=this.qDt,r=t-this.$M(),h=s-this.KM(),o=-this.nkt();if(0===o)i?this.Pa+=r/n.QOt():this.Pa=t,e?this.Ra+=h/n.tDt():this.Ra=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Pa+=e?(l*r-a*h)/n.QOt():l*r/n.QOt():this.Pa=t,e?this.Ra+=i?(a*r+l*h)/n.tDt():l*h/n.tDt():this.Ra=s}}else this.Pa=t,this.Ra=s}akt(){return[this.$M(),this.KM()]}Tz(t,s){t=+t,s=+s,this.okt()?this.Gz(this.$M()+t,this.KM()+s):(this.Pa+=t,this.Ra+=s)}cTt(t,s){return this.$M()===t&&this.KM()===s}tG(t){if(t=+t,this.AJ()&&(t-=this.rJ().QM()),this.FM===t)return;this.FM=t,this.lkt();const s=this.kB();0!==this.FM&&s.u1(),s.jB(this)}lkt(){if(this.ekt(),this.h5()){const t=this.h6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.AJ()&&i.lkt()}}}Eot(t){this.tG(this.QM()+t)}QM(){return this.AJ()?this.rJ().QM()+this.FM:this.FM}Dz(){return this.kB().QM()+this.QM()}yet(){return this.C$().zj().txt()<2&&this.C$().sq().yet()}Xg(t){if(t=+t,this.TJ()){const s=this.Vg();0===s?this.RDt=Number.EPSILON:this.RDt*=t/s}else this.RDt=t;this.ukt()}Ty(t,s){t=+t,s?this.RDt+=t:this.TJ()?this.Xg(this.Vg()+t):this.RDt+=t,this.ukt()}Vg(){if(this.TJ()){const t=this.rJ(),s=t.Vg();return t.Urt().Vrt()===Number.EPSILON?(this.Urt().Vrt()+s)*this.RDt:s*this.RDt}return this.RDt}Ug(t){if(t=+t,this.IJ()){const s=this.Zg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;this.ukt()}Mot(t,s){t=+t,s?this.ADt+=t:this.IJ()?this.Ug(this.Zg()+t):this.ADt+=t,this.ukt()}Zg(){if(this.IJ()){const t=this.rJ(),s=t.Zg();return t.Urt().qrt()===Number.EPSILON?(this.Urt().qrt()+s)*this.ADt:s*this.ADt}return this.ADt}BR(t,s){if(t=+t,s=+s,this.TJ()){const s=this.Vg();0===s?this.RDt=Number.EPSILON:this.RDt*=t/s}else this.RDt=t;if(this.IJ()){const t=this.Zg();0===t?this.ADt=Number.EPSILON:this.ADt*=s/t}else this.ADt=s;this.ukt()}Fu(){return[this.Vg(),this.Zg()]}E3(){return this.rT}ckt(t){if(t<0)throw new RangeError("invalid depth");this.rT=t}fkt(){if(this.wJ()){const t=this.qDt;return Math.min(t.QOt(),t.tDt())}return 1}Tj(){return!!(128&this.Mxt)}EV(t){t=+t,this.Tj()&&(this.PJ()&&(t-=this.rJ().FV()),t=fS.Kn(t),this.Io!==t&&(this.Io=t,this.ukt()))}Got(t){0!==(t=+t)&&this.Tj()&&(this.Io=fS.Kn(this.Io+t),this.ukt())}ukt(){if(this.Mxt|=262144,this.h5()){const t=this.h6();for(let s=0,i=t.length;s<i;s++)t[s].ukt()}}FV(){return this.PJ()&&this.Tj()?this.rkt(fS.Kn(this.rJ().hkt()+this.Io)):this.Io}hkt(){return this.PJ()&&this.Tj()?fS.Kn(this.rJ().hkt()+this.Io):this.Io}rkt(t){return this.TJ()&&this.oJ().Vg()<0&&(t=fS.Kn(fS.dr(t,this.oJ().FV()+Math.PI))),this.IJ()&&this.oJ().Zg()<0&&(t=fS.dr(t,this.oJ().FV())),t}dkt(){const t=this.rJ();return!!(this.TJ()&&t.Vg()<0)||!!(this.IJ()&&t.Zg()<0)}pkt(){const t=this.rJ();return!!(this.TJ()&&t.Vg()<0&&this.IJ()&&t.Zg()<0)}mkt(){const t=this.Mxt;if(!(262144&t))return;const s=this.FV();this.EDt=Math.sin(s),this.FDt=Math.cos(s),this.Mxt=-262145&t}gTt(){return this.mkt(),this.EDt}mTt(){return this.mkt(),this.FDt}Cz(t){this.ODt=+t}Rot(t){this.ODt+=+t}Iz(){return this.ODt}Az(t){this.DDt=+t}Aot(t){this.DDt+=+t}Rz(){return this.DDt}QDt(t){this.EM.equals(t)||(this.EM===SS?(this.EM=fS.Hn(fS.Go,t),this.UDt=fS.Hn(fS.Go,t),this.UDt.Ko()):t.qo(1,1,1,1)?(this.EM=SS,this.UDt=SS):(this.EM.set(t),this.UDt.set(t),this.UDt.Ko()),this.ekt())}vF(t){if(t=fS.Yn(+t,0,1),this.FJ()){if(this.Urt().DTt()===t)return;this.Urt().ZOt(t),t=this.wF()}else if(this.EM.a===t)return;this.gkt(t)}ykt(){if(!this.h5())return;const t=this.h6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.gkt(i.wF())}}gkt(t){yS.ko(this.EM),yS.a=t,this.QDt(yS),this.ykt()}_ot(t){this.FJ()?this.vF(this.Urt().DTt()+t):this.vF(this.wF()+t)}wF(){return this.FJ()?this.rJ().wF()*this.Urt().DTt():this.EM.a}Jz(t){this.EM.zo(t)||(yS.ko(t),yS.a=this.wF(),this.QDt(yS))}oot(t,s,i){yS.Po(t,s,i),this.Jz(yS)}wkt(t,s,i){0===t&&0===s&&0===i||(yS.ko(this.EM),yS.r+=t,yS.g+=s,yS.b+=i,this.Jz(yS))}zz(){return this.EM}R0(){return this.UDt}LJ(){return!!(512&this.Mxt)}Skt(t){this.vkt(512,t)}bJ(){return!!(1024&this.Mxt)}bkt(t){this.vkt(1024,t)}GJ(){return!!(2048&this.Mxt)}okt(){return!!(3072&this.Mxt)}Mkt(t){this.vkt(2048,t)}TJ(){return!!(4096&this.Mxt)}Gkt(t){this.vkt(4096,t)}IJ(){return!!(8192&this.Mxt)}xkt(t){this.vkt(8192,t)}PJ(){return!!(16384&this.Mxt)}Tkt(t){this.vkt(16384,t)}AJ(){return!!(32768&this.Mxt)}_kt(t){this.vkt(32768,t)}FJ(){return!!(4194304&this.Mxt)}Ikt(t){this.vkt(4194304,t)}DJ(){return!!(8388608&this.Mxt)}Ckt(t){this.vkt(8388608,t)}Pkt(){this.Mxt&=-12647937}mJ(t,s){if(t===this)return!1;if(t.wJ())return!1;if(this.Rkt(t))return!1;if(this.Akt(t))return!1;const i=t.$M(),e=t.KM(),n=t.Vg(),r=t.Zg(),h=t.FV(),o=t.QM(),a=t.wF();t.Ekt(this),t.bkt(s.vJ),t.Mkt(s.MJ),t.Gkt(s.xJ),t.xkt(s._J),t.Tkt(s.CJ),t._kt(s.RJ),t.Ikt(s.EJ),t.Ckt(s.OJ),t.Skt(s.kJ);const l=i-this.$M(),u=e-this.KM(),c=-this.FV(),f=Math.cos(c),d=Math.sin(c);if(s.vJ&&(s.CJ?t.Pa=l*f-u*d:t.Pa=l,s.xJ)){const s=this.Vg()/this.qDt.Vrt();0!==s&&(t.Pa/=s)}if(s.MJ&&(s.CJ?t.Ra=l*d+u*f:t.Ra=u,s._J)){const s=this.Zg()/this.qDt.qrt();0!==s&&(t.Ra/=s)}if(s.xJ){const s=this.Vg();0===s||s===Number.EPSILON?(t.RDt=1,t.qDt.XOt(1)):(t.RDt=n/this.Vg(),t.qDt.XOt(t.RDt))}if(s._J){const s=this.Zg();0===s||s===Number.EPSILON?(t.ADt=1,t.qDt.KOt(1)):(t.ADt=r/this.Zg(),t.qDt.KOt(t.ADt))}return s.CJ&&(t.Io=h-this.FV()),s.RJ&&(t.FM=o-this.QM()),s.EJ&&t.qDt.ZOt(a),s.OJ&&t.yU(this.SU()),this.Fkt(t),this.Mz(),this.ykt(),!0}gJ(t){if(t.rJ()!==this)return;const s=t.$M(),i=t.KM(),e=t.Vg(),n=t.Zg(),r=t.FV(),h=t.QM(),o=t.wF();t.Ekt(null),t.Pkt(),t.Gz(s,i),t.BR(e,n),t.EV(r),t.tG(h),t.vF(o),this.Okt(t),this.Mz()}Dkt(){return this.$Dt}kkt(){this.Lkt();const t=[...this.children()];for(const s of t)this.gJ(s);const s=this.rJ();s&&s.gJ(this),this.Pkt()}Lkt(){if(this.Nkt(),!this.WOt){const t=[...this.children()];t.length&&(this.WOt=[],this.jOt=new WeakMap);let s=0;for(const i of t){const t=i.C$();this.WOt.push(t),this.jOt.set(t,s),s++}}const t=this.rJ();t&&t.Lkt()}Nkt(){if(-1!==this.$Dt)return;const t=[...this.aJ()];this.$Dt=t.length;for(const s of t)s.Nkt();const s=[...this.children()];for(const t of s)t.Nkt()}ZDt(){this.WOt&&(this.WOt.length=0),this.WOt=null,this.jOt=null;const t=this.rJ();t&&t.ZDt(),this.$Dt=-1}wJ(){return null!==this.rJ()}rJ(){const t=this.qDt;return null!==t?t.rJ():null}oJ(){let t=this;for(;t.wJ();)t=t.rJ();return t}*aJ(){let t=this.rJ();for(;t;)yield t,t=t.rJ()}eOt(t){return this.h6().includes(t)}h5(){const t=this.qDt;return null!==t&&t.h5()}h6(){const t=this.qDt;return null!==t?t.h6():GS}children(){return this.h6()}*dJ(){for(const t of this.children())yield t,yield*t.dJ()}uJ(){return this.h6().length}f_t(){return[...this.dJ()].length}fJ(t){const s=this.h6();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}oOt(t){if(!t)return NaN;const s=this.h6();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}Bkt(t){this.qDt||(this.qDt=fS.Hn(fS.a6,this)),t&&this.qDt.zOt(t)}Urt(){return this.qDt}KDt(){this.qDt&&(this.qDt.zn(),this.qDt=null)}Ekt(t){t?(t.Bkt(null),this.Bkt(t)):(this.qDt&&this.qDt.zOt(null),this.h5()||this.KDt())}Akt(t){if(!this.wJ())return!1;const s=this.rJ();return s===t||s.Akt(t)}Rkt(t){if(this.eOt(t))return!0;for(const s of this.h6())if(s.Rkt(t))return!0;return!1}Fkt(t){this.qDt.h6().push(t)}Okt(t){const s=this.qDt.h6(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.wJ()||this.KDt(),t.h5()||t.KDt()}lOt(){const t=TS.get(this);return t?t.skt:null}Wkt(){const t=TS.get(this);return t?t.ikt:NaN}r5(){const t=_S.get(this);return fS.Qi(t)?t:NaN}jkt(t){_S.set(this,t)}Vkt(){this.vkt(524288,!0),this.ekt()}ekt(){if(!xS)return;const t=this.Nc.mM();let s;this.HDt&&t.Pv(this.HDt),s=524288&this.Mxt?t.cv()||"<point>":t.av()||"<default>",this.HDt=t.Tv(s,this.XU(),this.UDt,this.QM(),this.Ukt()?1:0,0)}W3(){return this.HDt}A1(){return this.EM===SS}LM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.XU()!==t&&(this.Mxt=-2080374785&this.Mxt|t<<26,this.ekt())}XU(){return(2080374784&this.Mxt)>>26}WB(t,s){const i=s&&this.IDt!==t;i&&this.a1(),this.ppt.oFt(this,this.IDt,t),this.IDt=t,i&&this.Hkt(),0!==this.QM()&&this.IDt.u1()}kB(){return this.IDt}pB(){return this.kB().pB()}f1(t){this.CDt=0|t}LB(){return this.IDt.C2(),this.CDt}E2(t){this.PDt=0|t}fX(){return this.IDt.R2(),this.PDt}lQ(){return this.CDt}vkt(t,s){s?this.Mxt|=t:this.Mxt&=~t}SU(){return!!(1&this.Mxt)}yU(t){if(this.vkt(1,t),this.h5())for(const s of this.h6())s.DJ()&&s.yU(t)}iJ(){return!!(8&this.Mxt)}eJ(t){t=!!t,this.iJ()!==t&&(this.vkt(8,t),t?this.Mz():this.zkt())}Jkt(t,s){if(this.vkt(32,t),this.VDt&&this.VDt.clear(),s.trim()){this.VDt||(this.VDt=new Set);for(const t of s.split(" "))t&&this.VDt.add(t.toLowerCase())}else this.VDt=null}qkt(t){const s=!!(32&this.Mxt),i=this.VDt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}Mz(){if(this.Mxt|=65554,this.ppt.nFt(!0),this.Nc.VB(),this.IDt.U0()&&(this.Lz(this.kDt,this.LDt,!0),this.Mxt&=-3,this.Hkt()),4&this.Mxt&&this.fi.wf().dispatchEvent(gS),null!==this.qDt){const t=this.qDt.h6();for(let s=0,i=t.length;s<i;++s)t[s].Mz()}}Lz(t,s,i){const e=this.$M(),n=this.KM(),r=this.Vg(),h=this.Zg(),o=this.FV();t.Ha(e-this.ODt*r,n-this.DDt*h,r,h),i&&this.zJ()&&this.$kt(t),0===o?s.Xl(t):(t.offset(-e,-n),s.Kl(t,this.gTt(),this.mTt()),s.offset(e,n),s.Zl(t)),t.normalize()}Xkt(){const t=this.Mxt;2&t&&(this.Lz(this.kDt,this.LDt,!0),this.Mxt=-3&t)}Nz(){return this.Xkt(),this.kDt}Wz(){return this.Xkt(),this.LDt}Ykt(t){const s=this.$M(),i=this.KM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(mS.m(t),mS.offset(e,n),mS)}Kkt(t){this.kDt.m(t),this.LDt.Xl(this.kDt),this.Mxt&=-3,this.hFt(),this.Hkt()}Zkt(t){this.vkt(4,t)}Qkt(){return!!(4&this.Mxt)}I3(t,s,i){return s&&0!==this.E3()?this.R3(this.kB().P3()):0===this.QM()||i?t.Ml(this.Nz()):this.tLt()}tLt(){const t=this.kB(),s=this.Dz();return!(s>=t.Y1())&&(t.q1(s,pS),pS.Ml(this.Nz()))}R3(t){const s=this.Nz(),i=s.Za(),e=s.tl(),n=s.Qa(),r=s.sl(),h=this.Dz(),o=h+this.E3();return t.Xw(i,n,h,e,r,o)}Vz(){const t=this.kB();if(t.l2())return this.R3(t.P3());{const s=t.pB();return this.I3(t.QU(),s._3(),s.aU())}}L3(t){this.vkt(1048576,t)}D3(t){this.vkt(2097152,t)}sLt(){return!!(1048576&this.Mxt)}iLt(){return!!(2097152&this.Mxt)}eLt(t){(t=!!t)!==this.Ukt()&&(this.vkt(16777216,t),this.ekt())}Ukt(){return!!(16777216&this.Mxt)}nLt(t){this.WDt=t,this.rLt(),this.zJ()&&(this.XDt.hLt=null)}oLt(){return this.WDt}aLt(){return null!==this.WDt||this.zJ()}lLt(){return this.uLt(this.Vg(),this.Zg(),this.FV(),this.gTt(),this.mTt())}cLt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.uLt(t,s,i,e,n)}uLt(t,s,i,e,n){let r=this.jDt;null===r&&(r={YDt:fS.Hn(fS.au),width:NaN,height:NaN,angle:NaN},this.jDt=r);const h=r.YDt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.WDt;if(this.zJ()){const i=this.Iz(),r=this.Rz(),a=this.JJ();let l=this.XDt.hLt;l||(o?(wS.m(o),wS.offset(i,r)):wS.gu(),l=a.$G(wS),this.XDt.hLt=l),a.XG(l,h),h.offset(-i,-r),h.vu(t,s,e,n)}else o?(h.m(o),h.vu(t,s,e,n)):h.Su(this.Wz(),-this.$M(),-this.KM());return r.width=t,r.height=s,r.angle=i,h}rLt(){this.fLt(!0);const t=this.jDt;null!==t&&(t.width=NaN)}BJ(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.C$().zj().Fj())throw new Error("object does not support mesh");this.jJ(),this.XDt={dLt:fS.Hn(fS.Lw.fG,t,s),pLt:fS.Hn(fS.Lw.fG,t,s),hLt:null}}zJ(){return null!==this.XDt}JJ(){if(!this.zJ())throw new Error("no mesh");return this.XDt.dLt}mLt(){if(!this.zJ())throw new Error("no mesh");return this.XDt.pLt}gLt(t){this.vkt(65536,t)}yLt(){return!!(65536&this.Mxt)}fLt(t){this.vkt(131072,t)}wLt(){return!!(131072&this.Mxt)}$kt(t){const s=this.XDt.dLt,i=Math.min(s.EG(),0),e=Math.min(s.FG(),0),n=Math.max(s.OG(),1),r=Math.max(s.DG(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((n-1)*h),t.ll((r-1)*o),this.rT=s.kG()}jJ(){this.XDt&&(this.XDt.dLt.zn(),this.XDt.pLt.zn(),this.XDt=null,this.rLt())}UJ(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!MS.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.WU;let a="number"==typeof i.qJ?i.qJ:n?0:-1,l="number"==typeof i.$J?i.$J:n?0:-1;if(!this.zJ())return!1;const u=this.JJ(),c=u.NG(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.QM()!==o&&(c.tG(o),f=!0),n&&(r+=t/(u._G()-1),h+=s/(u.IG()-1)),-1!==a||n?(n&&(a+=t/(u._G()-1)),a=fS.Yn(a,0,1)):a=c.sG(),-1!==l||n?(n&&(l+=s/(u.IG()-1)),l=fS.Yn(l,0,1)):l=c.eG(),c.$M()===r&&c.KM()===h&&c.sG()===a&&c.eG()===l?f:(c.XM(r),c.ZM(h),c.iG(a),c.nG(l),this.rLt(),!0)}HFt(){return this.fi.HFt()}nJ(t,s){return!!this.Nz().xl(t,s)&&!!this.Wz().xl(t,s)&&(this.HFt()?this.fi.sq().CPt(t,s):!this.aLt()||this.lLt().xl(t-this.$M(),s-this.KM()))}SLt(){return!!(16&this.Mxt)}hFt(){if(!this.SLt()||!this.iJ()||256&this.Mxt)return;const t=this.Nz(),s=this.ppt.eFt(),i=this.NDt;if(pS.set(s._Q(t.Za()),s.IQ(t.Qa()),s._Q(t.tl()),s.IQ(t.sl())),i.equals(pS))return;const e=this.fi;i===bS?(s.CQ(e,null,pS),this.NDt=fS.Hn(fS.Rect,pS)):(s.CQ(e,i,pS),i.m(pS)),this.Mxt&=-17}vLt(){this.Mxt|=16}zkt(){const t=this.NDt;t!==bS&&(this.ppt.eFt().CQ(this.fi,t,null),this.NDt=bS)}Hkt(){const t=this.kB();if(!t.U0()||256&this.Mxt)return;const s=t.F1(),i=this.Nz(),e=this.BDt;if(pS.set(s._Q(i.Za()),s.IQ(i.Qa()),s._Q(i.tl()),s.IQ(i.sl())),e.equals(pS))return;const n=this.fi;e===vS?(s.CQ(n,null,pS),this.BDt=fS.Hn(fS.Rect,pS)):(s.CQ(n,e,pS),e.m(pS)),t.O1()}a1(){const t=this.BDt;t!==vS&&(this.kB().F1().CQ(this.fi,t,null),this.BDt=vS)}P2(){return this.BDt}$z(){const t=this.fi,s=this.IDt,i=s.BB();i.length&&i.at(-1)===t||(s.o1(t,!1),s.e1(t,!1),this.Nc.VB())}Yz(){const t=this.fi,s=this.IDt,i=s.BB();i.length&&i[0]===t||(s.o1(t,!1),s.h1(t,!1),this.Nc.VB())}Zz(t){const s=this.fi,i=this.IDt;if(i.pB()!==t.pB())throw new Error("layer from different layout");t!==i&&(i.o1(s,!0),this.WB(t),t.e1(s,!0),this.Nc.VB())}tJ(t,s){const i=this.fi;let e=!1;const n=this.IDt;if(t.xH()===i.xH())return;const r=t.DB();if(!r)throw new Error("expected world instance");const h=r.kB();n.ML()!==h.ML()&&(n.o1(i,!0),this.WB(h),h.e1(i,!0),e=!0);const o=h.D2(i,t,!!s);(e||o)&&this.Nc.VB()}vz(){return this.zDt}bLt(t){this.vkt(64,t)}U2(){return!!(64&this.Mxt)}i5(t,s=null){const i={x:this.$M(),y:this.KM(),w:this.Vg(),h:this.Zg(),l:this.kB().I1(),zi:this.LB()};0!==this.QM()&&(i.ze=this.QM()),0!==this.FV()&&(i.a=this.hkt()),this.A1()||(i.c=this.EM.toJSON()),.5!==this.Iz()&&(i.oX=this.Iz()),.5!==this.Rz()&&(i.oY=this.Rz()),0!==this.XU()&&(i.bm=this.XU()),this.SU()||(i.v=this.SU()),this.iJ()||(i.ce=this.iJ()),this.Qkt()&&(i.be=this.Qkt()),this.zDt&&(i.fx=this.zDt.i5());const e=!!(32&this.Mxt);return e&&(i.sfi=e),this.VDt&&(i.sft=[...this.VDt].join(" ")),this.qDt&&"visual-state"!==t&&(i.sgi=this.qDt.i5(t,s),TS.has(this)&&(i.sgcd=TS.get(this).skt,i.sgzid=TS.get(this).ikt)),this.zJ()&&(i.mesh=this.JJ().oG()),i}oDt(){return{x:this.Pa,y:this.Ra,z:this.FM,w:this.RDt,h:this.ADt,a:this.Io,sgi:this.Urt()?this.Urt().iDt():null}}pDt(t){t&&(this.Pa=t.x,this.Ra=t.y,this.FM=t.z,this.RDt=t.w,this.ADt=t.h,this.Io=t.a,t.sgi&&this.Urt()&&this.Urt().e5(t.sgi),this.ukt(),this.Mz())}gFt(){this.ZDt(),this.kkt(),this.Bkt(null),this.qDt&&this.qDt.lDt(this.WOt,this.jOt)}u8(t){"visual-state"!==t&&this.kkt()}f8(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.Mxt)return;this.qDt.f8(t.sgi,i)}}POt(t,s="full",i=null){if("visual-state"!==s)if(256&this.Mxt)this.ZDt();else{if(t.hasOwnProperty("sgi"))this.qDt.lDt(null,null,t.sgi,i);else if(i?.Q_t&&this.WOt)for(const t of this.WOt)t.wX()||this.Nc.yH(t);this.ZDt(),this.Mz()}}e5(t,s,i=null){if(xS=!1,this.XM(t.x),this.ZM(t.y),this.Xg(t.w),this.Ug(t.h),this.f1(t.zi),this.tG(t.hasOwnProperty("ze")?t.ze:0),this.EV(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?yS.wa(t.c):t.hasOwnProperty("o")?(yS.ko(this.EM),yS.a=t.o):yS.Co(1,1,1,1),this.QDt(yS),this.Cz(t.hasOwnProperty("oX")?t.oX:.5),this.Az(t.hasOwnProperty("oY")?t.oY:.5),this.LM(t.hasOwnProperty("bm")?t.bm:0),this.yU(!t.hasOwnProperty("v")||t.v),this.eJ(!t.hasOwnProperty("ce")||t.ce),this.Zkt(!!t.hasOwnProperty("be")&&t.be),this.Jkt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.zDt&&t.hasOwnProperty("fx")&&this.zDt.e5(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.Bkt(null);const s=this.qDt,i=t.sgi;s.e5(i),s.lDt(this.WOt,this.jOt),this.MLt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.BJ(s.cols,s.rows),this.JJ().aG(s)}else this.jJ();this.Mz(),xS=!0,this.ekt(),"visual-state"!==s&&this.Nc.GLt(this.C$(),t)}MLt(t,s){t&&fS.Qi(s)&&TS.set(this,{skt:t,ikt:s})}}}{const IS=self._s;IS.XAt=class extends IS.Vn{constructor(t,s){super();const i=t.aW(),e=i.Mbt(s[1]);i.xLt().GRt(e),this.Nc=i,this.ppt=t,this.iRt=IS.mj.yq(e),this.jCt=null,this.TLt=null,this._At=e.Instance,this.JQ=s[2],this.$n=s[0],this.hMt=this.Nc.Ugt(s[3]);const n=this.iRt.txt();if(n<2&&(this.jCt=IS.Hn(e.fEt,this),!(this.jCt instanceof IS.sRt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(IS.mj.GCt(this,n),n>=2){const t=e.fEt??globalThis.RX;if(this.TLt=new t,!(this.TLt instanceof globalThis.RX))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.TLt=new globalThis.mq;IS.mj.xCt(n),this.SCt()}static HT(t,s){return IS.Hn(IS.XAt,t,s)}zn(){this.Nc=null,this.iRt=null,this.jCt&&(this.jCt.zn(),this.jCt=null),this._At=null}Kxt(){return this.jCt}SCt(){this.jCt?this.jCt.SCt():this.TLt&&this.TLt.H$()}aW(){return this.Nc}cH(){return this.ppt}aq(){return this.iRt}FEt(){return this._At}Pc(){return this.$n}I1(){return this.JQ}uq(){return this.TLt}Ugt(){return this.hMt}}}{const CS=self._s,PS=self.hq;CS.PFt=class extends CS.Vn{constructor(t){super(),this.Nc=t.runtime,this.NMt=t.lq,this.iRt=this.NMt.aq(),this.fi=t.fq,this.Rw=t.index,this.bFt=null,this.MFt=null,this.iRt.e1(this.fi)}zn(){this.MFt&&(this.MFt.gH(),this.MFt=null),this.iRt.o1(this.fi),this.bFt&&(this.bFt.zn(),this.bFt=null),this.Nc=null,this.NMt=null,this.iRt=null,this.fi=null}PEt(t){if(this.bFt)throw new Error("already got sdk instance");if(this.aq().txt()<2){if(this.bFt=CS.Hn(this.NMt.FEt(),this,t),!(this.bFt instanceof CS.eRt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.aq().vCt();this.MCt(s.Instance,t)}}sq(){return this.bFt??this.MFt}pq(){return this.fi}aW(){return this.Nc}cq(){return this.NMt}aq(){return this.iRt}qht(){return this.Rw}hRt(){this.bFt?this.bFt.hRt():this.MFt.FX()}uRt(t,s){this.bFt&&this.bFt.uRt(t,s)}COt(){return this.bFt?this.bFt.aPt():this.MFt.az()}oG(t="full"){return this.bFt?this.bFt.oG(t):this.MFt.lz(t)}aG(t,s="full"){if(this.bFt)return this.bFt.aG(t,s);this.MFt.uz(t,s)}static _Lt(t,s,i){const e=globalThis.AX;let n,r;n=s instanceof e?t.$V(s):s.rRt(),r=i instanceof e?t.$V(i):i.rRt();const h=n.pq(),o=r.pq(),a=h.cH().ML(),l=o.cH().ML();if(a!==l)return a-l;const u=h.mOt(),c=o.mOt();return u!==c?u-c:n.qht()-r.qht()}MCt(t,s){const i=PS,e=t??this.bFt.vCt(),n=e||i,r=this.aq().txt();if(CS.mj.GCt(this,r),CS.mj.xRt(s),this.MFt=new n,CS.mj.TRt(),CS.mj.xCt(r),e&&!(this.MFt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.MFt}HCt(){return this.MFt||this.MCt()}fPt(){return!!this.MFt}}}{const RS=self._s;RS.C0=class extends RS.Vn{constructor(t,s){super(),this.mG=t,this.ILt=[],this.CLt=[],this.PLt=new Map,this.RLt=[],this.ALt=[],this.ELt=new Set,this.nM=!0;for(const t of s){const s=RS.Hn(RS.FLt,this,t,this.ILt.length);this.ILt.push(s),this.PLt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.RLt.push(this.OLt(s,t[2]))}this.aW().DLt(this)}zn(){this.aW().kLt(this);for(const t of this.ALt)t.zn();RS.Sh(this.ALt),RS.Sh(this.ILt),RS.Sh(this.CLt),this.PLt.clear(),RS.Sh(this.RLt),this.mG=null}LLt(t){this.ELt.add(t)}NLt(t){this.ELt.delete(t)}BLt(t){t.tv()&&(this.ALt=this.ILt.map(t=>{const s=t.z_();return s.WLt()>0?RS.Hn(RS.Lw.jLt,s):null}),this.VLt());for(const s of this.ELt)s.BLt(t)}IEt(t){if(t.length){this.ILt=t.concat(this.ILt);for(const s of t)this.PLt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this.ILt.length;t<s;++t)this.ILt[t].b1(t)}}OLt(t,s){t.ULt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=RS.Hn(RS.Go);e.wa(s),i[t]=e}}return i}CG(){return this.mG}aW(){return this.mG.aW()}vq(){RS.Sh(this.CLt);let t=!0;for(const s of this.ILt)s.lSt()&&(this.CLt.push(s),s.z_().bM()||(t=!1));this.nM=t}IV(){return this.ILt}jEt(){return this.ILt.length>0}Drt(t){return this.PLt.get(t.toLowerCase())||null}HLt(t){if((t=Math.floor(+t))<0||t>=this.ILt.length)throw new RangeError("invalid effect type index");return this.ILt[t]}wq(t){return this.HLt(t).lSt()}Sq(t,s){this.HLt(t).ULt(s)}E1(){return this.CLt}U2(){return this.CLt.length>0}bM(){return this.nM}Ort(t){return this.RLt[t]}E0(t){return t<this.ALt.length?this.ALt[t]:this.RLt[t]}bq(t,s){if(t<0||t>=this.RLt.length)return null;const i=this.RLt[t];return s<0||s>=i.length?null:i[s]}Mq(t,s,i){if(t<0||t>=this.RLt.length)return!1;const e=this.RLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof RS.Go){if(n.zo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.ALt.length&&this.ALt[t].zLt(s,i),!0}VLt(){const t=this.RLt,s=this.ALt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.zLt(t,n[t])}}static JLt(t){return t&&t instanceof RS.Go?{t:"color",v:t.toJSON()}:t}static qLt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=RS.Hn(RS.Go);return s.wa(t.v),s}throw new Error("invalid effect parameter type")}return t}static $Lt(t){return t.map(RS.C0.JLt)}static XLt(t){return t.map(RS.C0.qLt)}oG(){return this.ILt.map(t=>({name:t.Pc(),active:t.lSt(),params:RS.C0.$Lt(this.RLt[t.ML()])}))}aG(t){for(const s of t){const t=this.Drt(s.name);t&&(t.ULt(s.active),this.RLt[t.ML()]=RS.C0.XLt(s.params))}this.vq(),this.VLt()}}}{const AS=self._s;AS.FLt=class extends AS.Vn{constructor(t,s,i){super(),this.I0=t,this.Wc=s[0],this.$n=s[1],this.Rw=i,this.PM=null,this.Nf=!0}zn(){this.I0=null,this.PM=null}_Et(t){const s=AS.Hn(AS.FLt,t,[this.Wc,this.$n],-1);return s.PM=this.PM,s.Nf=this.Nf,s}BLt(t){const s=t.ov(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.PM=s}_V(){return this.I0}Pc(){return this.$n}b1(t){this.Rw=t}ML(){return this.Rw}CG(){return this.I0.CG()}aW(){return this.I0.aW()}ULt(t){this.Nf=!!t}lSt(){return this.Nf}z_(){return this.PM}YLt(){const t=[];for(let s=0,i=this.PM.J_();s<i;++s){const i=this.PM.q_(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(AS.Hn(AS.Go,1,1,1,1))}}return t}}}{const ES=self._s;ES.JDt=class extends ES.Vn{constructor(t,s){super(),this.fi=t,this.KLt=s,this.I0=t.cH()._V(),this.ZLt=!0,this.O0=!0,this.QLt=!1,this.tNt=!1,this.sNt=!1,this.iNt=!1,this.wL=ES.Hn(ES.Lw.oD,t.aW().TB().P0(),{YO:(t,s)=>{const i=s.uL(),e=i.DB();t.NM(e.R0()),t.Uv(e.Dz()),i.zG(t),t.Uv(0)},KO:t=>{const s=t.GPt(),[i,e]=t.MPt();return{iL:s,eL:i,nL:e}},ZO:t=>this.E0(t)}),this.eNt=[],this.CLt=[],this.nM=!0,this.RLt=[],this.ALt=[],this.BLt(t.aW().mM());for(let t=0,s=this.I0.IV().length;t<s;++t)this.eNt.push(!0);this.vq(),this.I0.LLt(this)}zn(){this.I0.NLt(this);for(const t of this.ALt)t&&t.zn();ES.Sh(this.ALt),this.wL.zn(),this.wL=null,ES.Sh(this.eNt),ES.Sh(this.CLt),ES.Sh(this.RLt),this.fi=null,this.I0=null}BLt(t){t.tv()&&(this.ALt=this.I0.IV().map(t=>{const s=t.z_();return s.WLt()>0?ES.Hn(ES.Lw.jLt,s):null}))}tkt(t){let s=0;for(const i of t)this.RLt.push(this.OLt(s,i)),++s;this.VLt(),this.vq()}OLt(t,s){this.eNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=ES.Hn(ES.Go);e.wa(s),i[t]=e}}return i}kFt(){for(const t of this.I0.IV())this.RLt.push(t.YLt());this.VLt()}CG(){return this.mG}_V(){return this.I0}bL(){return this.R1(),this.wL}aW(){return this.fi.aW()}vq(){ES.Sh(this.CLt);const t=this.KLt,s=this.I0.IV(),i=this.CLt,e=this.eNt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.z_().bM()||(n=!1)}this.nM=n,t.bLt(!!i.length),this.ZLt=!0}R1(){const t=this.fi,s=this.KLt,i=s.A1(),e=t.zj().Pj(),n=0!==s.FV()||0!==s.kB().FV()||s.Vg()<0||s.Zg()<0,r=t._Pt(),h=t.vM();(this.ZLt||i!==this.O0||e!==this.QLt||n!==this.tNt||r!==this.sNt||h!==this.iNt||this.wL.QD())&&(this.wL.tk(this.CLt.map(t=>t.z_()),{tD:this.CLt.map(t=>t.ML()),sD:!i||h,eD:e,nD:r,rD:n}),this.ZLt=!1,this.O0=i,this.QLt=e,this.tNt=n,this.sNt=r,this.iNt=h)}E1(){return this.CLt}Ort(t){return this.RLt[t]}E0(t){return t<this.ALt.length?this.ALt[t]:this.RLt[t]}bq(t,s){if(t<0||t>=this.RLt.length)return null;const i=this.RLt[t];return s<0||s>=i.length?null:i[s]}Mq(t,s,i){if(t<0||t>=this.RLt.length)return!1;const e=this.RLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof ES.Go){if(n.zo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.ALt.length&&this.ALt[t].zLt(s,i),!0}VLt(){const t=this.RLt,s=this.ALt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.zLt(t,n[t])}}bM(){return this.nM}nNt(){return this.CLt.some(t=>t.z_().xM())}wq(t){return this.eNt[t]}Sq(t,s){this.eNt[t]=!!s}IV(){return this.I0.IV()}i5(){return this.I0.IV().map(t=>({name:t.Pc(),active:this.eNt[t.ML()],params:ES.C0.$Lt(this.RLt[t.ML()])}))}e5(t){for(const s of t){const t=this.I0.Drt(s.name);t&&(this.eNt[t.ML()]=s.active,this.RLt[t.ML()]=ES.C0.XLt(s.params))}this.vq(),this.VLt()}}}{const FS=self._s,OS=[],DS=[],kS=[],LS=FS.Hn(FS.au),NS=FS.Hn(FS.au),BS=FS.Hn(FS.Cl),WS=FS.Hn(FS.Rect),jS=FS.Hn(FS.Rect);let VS=null,US=null,HS=null;FS.rNt=class extends FS.Vn{constructor(t){super(),this.Nc=t,this.hNt=0,this.oNt=0,this.aNt=[],this.lNt=0,this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=new self.IW(this)}zn(){this.Nc=null}aW(){return this.Nc}PL(){return this.dNt}pNt(){this.uNt=this.lNt,this.lNt=0,this.fNt=this.cNt,this.cNt=0}mNt(){return this.uNt}gNt(){return this.fNt}yNt(t,s){const i=t.DB(),e=s.DB();i&&e&&i.iJ()&&e.iJ()&&this.aNt.push([t,s])}QTt(t,s,i){for(const[e,n]of this.aNt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.a_t(s)&&(i.includes(r)||i.push(r))}}t_t(t,s){if(!this.aNt.length)return!1;for(const[i,e]of this.aNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}wNt(){FS.Sh(this.aNt)}RW(t,s){if(!t||!s||t===s)return!1;const i=t.DB(),e=s.DB();if(!i.iJ()||!e.iJ())return!1;this.lNt++;const n=i.kB(),r=e.kB();return n.G2(r)?this.SNt(i,e):this.vNt(i,e)}SNt(t,s){if(!t.Nz().Ml(s.Nz()))return!1;if(this.cNt++,!t.Wz().tu(s.Wz()))return!1;if(t.HFt()&&s.HFt())return!1;if(t.HFt())return this.bNt(t,s);if(s.HFt())return this.bNt(s,t);if(!t.aLt()&&!s.aLt())return!0;const i=t.lLt(),e=s.lLt();return i.bu(e,s.$M()-t.$M(),s.KM()-t.KM())}vNt(t,s){const i=t.HFt(),e=s.HFt();if(i&&!e)return this.MNt(t,s);if(e&&!i)return this.MNt(s,t);if(e||i)return!1;{const i=t.kB(),e=s.kB();LS.m(t.lLt()),NS.m(s.lLt());const n=LS.du();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.eH(r+t.$M(),h+t.KM());n[s]=o,n[e]=a}const r=NS.du();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.eH(n+s.$M(),h+s.KM());r[t]=o,r[i]=a}return LS.yu(),NS.yu(),this.cNt++,LS.bu(NS,0,0)}}MNt(t,s){const i=t.kB(),e=s.kB();VS||(VS=FS.Hn(FS.au)),US||(US=FS.Hn(FS.Rect)),HS||(HS=FS.Hn(FS.Cl));const n=s.$M(),r=s.KM(),[h,o]=e.eH(n,r),[a,l]=i.sH(h,o),u=a-n,c=l-r;if(US.m(s.Nz()),US.offset(u,c),!t.Nz().Ml(US))return!1;if(HS.m(s.Wz()),HS.offset(u,c),this.cNt++,!t.Wz().tu(HS))return!1;VS.m(s.lLt());const f=VS.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return VS.yu(),this.bNt(t,s,a,l,VS,US,HS)}bNt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.Nz(),a=t.$M(),l=t.KM(),u=t.C$().sq(),c=void 0!==i?i:s.$M(),f=void 0!==e?e:s.KM(),d=s.aLt(),p=void 0!==h?h:s.Wz(),m=DS;u.GNt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.xNt();if(this.lNt++,o.Gl(e,a,l)&&(BS.Xl(e),BS.offset(a,l),BS.tu(p)))if(d){const t=void 0!==n?n:s.lLt();let r=c,h=f;void 0!==n&&(r=s.$M(),h=s.KM());const o=i.TNt();if(o){if(this.cNt++,o.bu(t,r-(a+e.Za()),h-(l+e.Qa())))return FS.Sh(m),!0}else if(LS.Su(BS,0,0),LS.bu(t,r,h))return FS.Sh(m),!0}else{const t=i.TNt();if(!t)return FS.Sh(m),!0;if(LS.Su(p,0,0),t.bu(LS,-(a+e.Za()),-(l+e.Qa())))return FS.Sh(m),!0}}return FS.Sh(m),!1}_Nt(t,s,i){const e=t.eV(),n=this.Nc.dN();if(!n)throw new Error("cannot call outside event");const r=n.Upt(),h=new FS.INt;if(e._pt()){i||(e.Fpt(!1),FS.Sh(e.Opt())),r&&FS.Sh(e.Dpt());for(const n of t.iV()){const t=n.DB(),o=t.kB();let a=!1;if(h.bU(o)&&t.Vz()&&(a=s.some(([s,i])=>{const[e,n]=h.sH(o,s,i,t.Dz());return t.nJ(e,n)})),a){if(i)return!1;e.Apt(n)}else r&&e.Ept(n)}}else{let t,o=!1;r&&!n.Evt(this.Nc.Ogt())?this.Nc.iTt()&&!e.Dpt().length&&e.Opt().length?t=e.Opt():(t=e.Dpt(),o=!0):t=e.Opt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.DB(),c=u.kB();let f=!1;if(h.bU(c)&&u.Vz()&&(f=s.some(([t,s])=>{const[i,e]=h.sH(c,t,s,u.Dz());return u.nJ(i,e)})),f){if(i)return!1;o?e.Apt(l):t[a++]=l}else o?t[a++]=l:r&&e.Ept(l)}i||(t.length=a)}return t.dbt(),h.zn(),!!i||e.Ipt()}CNt(t,s){if(!t)return!0;for(const i of s.aFt())if(!t.G2(i))return!1;return!0}sTt(t,s,i,e){if(s.S1())for(const n of s.MV())this.CNt(t,n)?(n.rFt(),n.eFt().PQ(i,e)):FS.En(e,n.iV());else this.CNt(t,s)?(s.rFt(),s.eFt().PQ(i,e)):FS.En(e,s.iV())}WW(t,s,i,e){for(const n of s)this.sTt(t,n,i,e)}PNt(t,s,i){const e=this.Nc.IRt();e&&this.WW(t,e.k8(),s,i)}RNt(t,s,i){const e=this.Nc.CRt();e&&this.WW(t,e.k8(),s,i)}qkt(t,s){return t.qFt()&&(!s||s.DB().qkt(t.oxt().get("solidTags")))}FW(t){const s=t.DB();this.PNt(s.kB(),s.Nz(),OS);for(const s of OS)if(this.qkt(s,t)&&this.RW(t,s))return FS.Sh(OS),s;return FS.Sh(OS),null}ANt(t,s){this.PNt(null,t,OS);for(const i of OS)if(this.qkt(i,s)&&this.ENt(t,i))return FS.Sh(OS),i;return FS.Sh(OS),null}FNt(t,s){let i=null;s&&(i=kS,FS.Sh(i));const e=t.DB();this.RNt(e.kB(),e.Nz(),OS);for(const e of OS)if(e.XFt()&&this.RW(t,e)){if(!s)return FS.Sh(OS),e;i.push(e)}return FS.Sh(OS),i}ONt(t,s,i,e,n){e=e||50;const r=t.DB(),h=r.$M(),o=r.KM();for(let a=0;a<e;++a)if(r.Gz(h+s*a,o+i*a),r.Mz(),!this.RW(t,n))return!0;return r.Gz(h,o),r.Mz(),!1}DNt(t,s,i,e,n,r){e=e||50;const h=t.DB(),o=h.$M(),a=h.KM();let l=null,u=null;for(let c=0;c<e;++c)if(h.Gz(o+s*c,a+i*c),h.Mz(),!this.RW(t,l))if(l=this.FW(t),l)u=l;else if(n&&(l=r?this.RW(t,r)?r:null:this.FNt(t),l&&(u=l)),!l)return u&&this.kNt(t,s,i,u,16,!0),!0;return h.Gz(o,a),h.Mz(),!1}LNt(t,s,i,e){e=e||50;const n=t.DB(),r=n.$M(),h=n.KM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.Gz(r+s*l*u,h+i*l*u),n.Mz(),!this.RW(t,o)){if(o=this.FW(t),!o)return a&&this.kNt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.Gz(r,h),n.Mz(),!1}kNt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.DB();let u=l.$M(),c=l.KM();for(;h<=n;){const n=1/h;h*=2,l.Tz(s*n*(o?1:-1),i*n*(o?1:-1)),l.Mz(),this.RW(t,e)||r&&this.FW(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.$M(),c=l.KM())}a&&(l.Gz(u,c),l.Mz())}NNt(t,s=100){let i=0;const e=t.DB(),n=e.$M(),r=e.KM();let h=0,o=this.FW(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.Gz(Math.floor(n+s*i),Math.floor(r+a*i)),e.Mz(),!this.RW(t,o)&&(o=this.FW(t),!o))return!0}return e.Gz(n,r),e.Mz(),!1}BNt(t,s,i,e){const n=t.DB(),r=n.$M(),h=n.KM(),o=Math.max(10,FS.ir(s,i,r,h)),a=FS.nr(s,i,r,h),l=e||this.FW(t);if(!l)return FS.Kn(a+Math.PI);let u=l,c=0,f=0;const d=FS.Zn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.Gz(s+Math.cos(r)*o,i+Math.sin(r)*o),n.Mz(),!this.RW(t,u)&&(u=e?null:this.FW(t),!u)){c=r;break}}for(36===p&&(c=FS.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.Gz(s+Math.cos(r)*o,i+Math.sin(r)*o),n.Mz(),!this.RW(t,u)&&(u=e?null:this.FW(t),!u)){f=r;break}}if(36===p&&(f=FS.Kn(a+Math.PI)),n.Gz(r,h),n.Mz(),f===c)return f;const m=FS.rr(f,c)/2;let g;g=FS.ar(f,c)?FS.Kn(c+m+Math.PI):FS.Kn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,M=y-2*b*S,G=w-2*b*v;return FS.nr(0,0,M,G)}WNt(t,s,i,e,n){if(!n)return!1;const r=n.DB();return!!r.iJ()&&(this.lNt++,WS.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.Nz().Ml(WS)&&(n.HFt()?this.jNt(t,s,i,e,n,r):(this.cNt++,!!r.Wz().Ql(t,s,i,e)&&(!r.aLt()||r.lLt().Ql(r.$M(),r.KM(),t,s,i,e)))))}jNt(t,s,i,e,n,r){const h=r.$M(),o=r.KM(),a=n.sq(),l=DS;jS.set(t,s,i,e),jS.normalize(),a.GNt(jS,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.xNt();if(this.lNt++,WS.Gl(a,h,o)&&(BS.Xl(a),BS.offset(h,o),BS.Ql(t,s,i,e))){const n=r.TNt();if(!n)return FS.Sh(l),!0;if(this.cNt++,n.Ql(h+a.Za(),o+a.Qa(),t,s,i,e))return FS.Sh(l),!0}}return FS.Sh(l),!1}ENt(t,s){if(!s)return!1;const i=s.DB();if(!i.iJ())return!1;if(this.lNt++,!i.Nz().Ml(t))return!1;if(s.HFt())return this.VNt(t,s,i);if(this.cNt++,BS.Xl(t),!i.Wz().tu(BS))return!1;if(!i.aLt())return!0;const e=LS;e.Xl(t,i.$M(),i.KM());const n=i.lLt();return e.bu(n,0,0)}VNt(t,s,i){const e=i.$M(),n=i.KM(),r=s.sq(),h=DS;r.GNt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.xNt();if(this.lNt++,t.Gl(r,e,n)){const s=i.TNt();if(!s)return FS.Sh(h),!0;if(this.cNt++,LS.Xl(t,0,0),s.bu(LS,-(e+r.Za()),-(n+r.Qa())))return FS.Sh(h),!0}}return FS.Sh(h),!1}UNt(t,s){if(!t)return;const i=t.DB();i.iJ()&&(this.lNt++,i.Nz().Ml(s.rect)&&(t.HFt()?this.HNt(t,i,s):(this.cNt++,i.aLt()?s.zNt(t,i.$M(),i.KM(),i.lLt()):s.JNt(t,i.Wz()))))}HNt(t,s,i){const e=s.$M(),n=s.KM(),r=DS;t.sq().GNt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.xNt();if(this.lNt++,i.rect.Gl(a,e,n)){const r=o.TNt();this.cNt++,r?i.zNt(t,e+a.Za(),n+a.Qa(),r):i.qNt(t,s.$M(),s.KM(),a)}}FS.Sh(r)}DW(t,s){if(t===this.hNt&&s===this.oNt)return;this.hNt=t,this.oNt=s;const i=this.Nc.w1();for(const e of i)if(e.bj()){for(const t of e.sV())t.DB().zkt();e.eFt().$Nt(t,s),e.nFt();for(const t of e.sV()){const s=t.DB();s.vLt(),s.hFt()}}}LW(){return[this.hNt,this.oNt]}XNt(t,s){this.hNt=t,this.oNt=s}}}{const zS=self._s;zS.kAt=class extends zS.Vn{constructor(t,s){super(),this.MQ=t,this.GQ=s,this.xQ=zS.Hn(zS.Iu)}zn(){this.xQ.zn(),this.xQ=null}$Nt(t,s){if(!this.xQ.Ru())throw new Error("grid not empty");this.MQ=t,this.GQ=s}TQ(t,s,i){let e=this.xQ.zs(t,s);return e||(i?(e=zS.Hn(zS.YNt,this,t,s),this.xQ.Set(t,s,e),e):null)}_Q(t){const s=Math.floor(t/this.MQ);return isFinite(s)?s:0}IQ(t){const s=Math.floor(t/this.GQ);return isFinite(s)?s:0}CQ(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.xl(e,n))continue;const s=this.TQ(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.xQ.Au(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.xl(e,n)||this.TQ(e,n,!0).wQ(t)}PQ(t,s){let i=this._Q(t.Za());const e=this.IQ(t.Qa()),n=this._Q(t.tl()),r=this.IQ(t.sl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.TQ(i,t,!1);e&&e.vQ(s)}}}}{const JS=self._s;JS.YNt=class extends JS.Vn{constructor(t,s,i){super(),this.cQ=t,this.Pa=s,this.Ra=i,this.fQ=JS.Hn(JS.Du)}zn(){this.fQ.zn(),this.fQ=null,this.cQ=null}Ru(){return this.fQ.Ru()}wQ(t){this.fQ.Bu(t)}Kf(t){this.fQ.Au(t)}vQ(t){JS.En(t,this.fQ.Wu())}}}{const qS=self._s,$S=1e-6;qS.KNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new qS.Rect,this.ZNt=2,this.QNt=null,this.tBt=0,this.sBt=0,this.iBt=0,this.eBt=0,this.nBt=0,this.vt=0,this.rBt=1,this.hBt=0,this.oBt=1,this.aBt=0}lBt(){return this.ZNt<1.000001}Bf(){this.ZNt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.ZNt=2,this.QNt=null,this.tBt=0,this.sBt=0,this.iBt=0,this.eBt=0,this.nBt=0,this.vt=0,this.rBt=1,this.hBt=0,this.oBt=1,this.aBt=0,this}uBt(){if(!1===this.lBt())return;const t=this.dx*this.ZNt,s=this.dy*this.ZNt,i=qS.tr(t,s),e=t/i,n=s/i;this.vt=i-$S,this.eBt=this.x1+e*this.vt,this.nBt=this.y1+n*this.vt,this.tBt=Math.atan2(this.iBt,this.sBt)+Math.PI/2,this.rBt=Math.cos(this.tBt),this.hBt=Math.sin(this.tBt);const r=e*this.rBt+n*this.hBt;if(this.oBt=e-2*this.rBt*r,this.aBt=n-2*this.hBt*r,r>0){const t=Math.PI;this.tBt=qS.Kn(this.tBt+t),this.rBt=-this.rBt,this.hBt=-this.hBt}}cBt(t,s,i,e,n){const r=qS.qr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.ZNt&&(this.ZNt=r,this.QNt=t.xH(),this.sBt=s-e,this.iBt=i-n)}qNt(t,s,i,e){const n=s+e.Za(),r=s+e.tl(),h=i+e.Qa(),o=i+e.sl();this.cBt(t,n,h,r,h),this.cBt(t,r,h,r,o),this.cBt(t,r,o,n,o),this.cBt(t,n,o,n,h)}JNt(t,s){const i=s.Nr(),e=s.Br(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Ur(),a=s.Hr(),l=s.zr();this.cBt(t,i,e,n,r),this.cBt(t,n,r,h,o),this.cBt(t,h,o,a,l),this.cBt(t,a,l,i,e)}zNt(t,s,i,e){const n=e.du();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.cBt(t,o,a,l,u)}}}}{const XS=self._s;XS.INt=class{constructor(){this.fBt=new Map}zn(){for(const t of this.fBt.values())t.dBt.Pu();this.fBt.clear()}pBt(t){let s=this.fBt.get(t);return void 0===s&&(s={vU:null,dBt:new XS.Iu},this.fBt.set(t,s)),s}bU(t){const s=this.pBt(t);return null===s.vU&&(s.vU=t.IU()),s.vU}sH(t,s,i,e){if(0!==e)return t.sH(s,i,e);const n=this.pBt(t);let r=n.dBt.zs(s,i);return void 0===r&&(r=t.sH(s,i,e),n.dBt.Set(s,i,r)),r}}}{const YS=self._s,KS=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),ZS=new Set(["high","low"]),QS=self.hs,tv=QS.fs,sv=(QS.ys,tv.create()),iv=YS.Hn(YS.Cl),ev=YS.Hn(YS.Rect);YS.mBt=class extends YS.Vn{constructor(t){super(),this.Nc=t,this.gBt=[],this.yBt=!1,this.wBt=null,this.SBt=null,this.vBt=null,this.bBt="high-performance",this.MBt=!1,this.GBt="auto",this.xBt=0,this.TBt=0,this._Bt="",this.IBt=0,this.CBt=0,this.PBt=0,this.RBt=0,this.ABt=0,this.EBt=0,this.nS="normalized",this.FBt=0,this.OBt=1,this.DBt=1e4,this.OS=!0,this.kBt=0,this.ED=0,this.FD=0,this.LBt="letterbox-scale",this.NBt="letterbox-scale",this.BBt=0,this.WBt=0,this.jBt=tv.create(),this.VBt="high",this.UBt=this.VBt,this.HBt=!1,this.zBt=[],this.JBt=new Set,this.qBt=self.C3_Shaders,this.$Bt=YS.Hn(YS.Lw.kO,{EO:()=>[this.h3(),this.o3()],FO:()=>this.XBt(),OO:t=>this.YBt(t),getTime:()=>this.aW().ON(),DO:()=>this.aW().VB()}),this.KBt=0,this.ZBt=0,this.QBt=NaN,this.tWt=null,this.sWt=new Map,this.iWt=NaN,this.eWt=new Map,this.nWt="",this.rWt=1,this.hWt=YS.Hn(YS.Rect),this.oWt="",this.aWt=null,this.lWt=null,this.uWt=0,this.cWt=0,this.fWt=-1,this.dWt=0,this.pWt=t=>this.dWt=t.progress,this.mWt=null,this.gWt={yWt:null,wWt:null,SWt:null},this.vWt=0,this.bWt=0,this.MWt=0,this.GWt="fade-in",this.xWt=null,this.TWt=new Promise(t=>this.xWt=t)}_Wt(t){this.bBt=t}IWt(t){this.yBt=!!t}CWt(t){this.nS=t}PWt(){return this.nS}RWt(t){this.FBt=t}AWt(t,s){this.OBt=t,this.DBt=s}EWt(t){this.MBt=!!t}FWt(t){this.GBt=t}async uo(t){let s=t.canvas;this.gBt.push({canvas:s,OWt:null}),this.Nc.YH("runtime","window-resize",t=>this.DWt(t)),this.Nc.YH("runtime","fullscreenchange",t=>this.kWt(t)),this.Nc.YH("runtime","fullscreenerror",t=>this.LWt(t)),s.addEventListener("webglcontextlost",t=>this.NWt(t)),s.addEventListener("webglcontextrestored",t=>this.BWt(t)),this.HBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode;const i=navigator.gpu&&this.yBt;let e=!1;if(i)try{await this.WWt(!0)}catch(t){this.jWt("WebGPU",t),this.SBt=null}if(!this.mM())try{await this.VWt(!0)}catch(t){this.jWt("WebGL",t),this.wBt=null}if(this.mM()||(e=!0),!this.mM()&&i)try{await this.WWt(!1)}catch(t){this.jWt("WebGPU",t),this.SBt=null}if(!this.mM())try{await this.VWt(!1)}catch(t){this.jWt("WebGL",t),this.wBt=null}const n=this.mM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Bb(e),this.SBt&&(this.SBt.UWt=()=>this.HWt(),this.SBt.zWt=()=>this.JWt()),"normalized"===this.nS?n.YS():(n.KS(),n.$S(this.FBt)),this.BR(t.windowInnerWidth,t.windowInnerHeight,!0),await this.BLt()}jWt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async WWt(t){const s={Kw:this.OBt,Zw:this.DBt};let i=!0;"no"===this.GBt?i=!1:"auto"===this.GBt&&(i=YS.Ks.ri);const e={powerPreference:this.bBt,depth:this.Nc.a2(),failIfMajorPerformanceCaveat:t,qWt:this.Nc.w3(),$Wt:this.Nc.XWt(),$A:this.Nc.YWt(),KWt:i};this.SBt=YS.Hn(YS.Lw.ZWt,s),await this.SBt.HT(this.gBt[0].canvas,e)}async VWt(t){const s={alpha:!0,powerPreference:this.bBt,qA:"xbox-uwp-webview2"!==this.Nc.JW(),depth:this.Nc.a2(),$A:this.Nc.YWt(),failIfMajorPerformanceCaveat:t,Kw:this.OBt,Zw:this.DBt};this.MBt&&(s.XA=1),this.wBt=YS.Hn(YS.Lw.ZA,this.gBt[0].canvas,s),await this.wBt.NS()}async QWt(){if(this.qBt){const t=[];for(const[s,i]of Object.entries(this.qBt)){i.src=i.tjt;const e=YS.Lw.sjt.dI(this.SBt.KT());t.push(this.SBt.nF(Object.assign({jT:e,name:s},i)))}await Promise.all(t)}}async ijt(){if(this.qBt){const t=[];for(const[s,i]of Object.entries(this.qBt)){let e;if(i.ejt&&this.wBt.Rx()>=2)i.src=i.ejt,e=YS.Lw.BT.pI();else{if(!i.njt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.njt,e=YS.Lw.BT.dI()}t.push(this.wBt.nF(Object.assign({jT:e,name:s},i)))}await Promise.all(t),this.wBt.rF(),this.wBt.lv()}this.wBt.bO()&&(this.tWt=YS.Hn(YS.Lw.LA,this.wBt))}async BLt(){this.SBt?await this.QWt():this.wBt&&await this.ijt();const t=this.mM();t.Lb(this.OS),t.bO()&&(this.QBt=0);for(const s of this.Nc.rjt()){for(const i of s.IV())i.BLt(t);s.BLt(t),s.vq()}this.vBt=new self.dY(this.Nc,t)}zn(){this.Nc=null,this.wBt=null,this.gBt.length=0}zL(){return this.Nc.zL()}DWt(t){const s=this.Nc;if(s.hjt())return;const i=t.devicePixelRatio;this.zL()&&(self.devicePixelRatio=i),s.ojt(i),this.HBt=!!t.isFullscreen,this._Bt=t.cssDisplayMode,this.BR(t.innerWidth,t.innerHeight),s.VB();const e=new YS.Event("window-resize");e.data=t,s.wf().Cf(e);const n=new YS.Event("resize");n.ajt=this.ej(),n.ljt=this.rj(),n.ujt=this.oj(),n.cjt=this.lj(),s.CZ(n),this.Nc.EB()?.J3(),s.sz()&&(s.byt()||self.iz.fjt())&&s.ck()}kWt(t){this.HBt=!!t.isFullscreen,this.BR(t.innerWidth,t.innerHeight,!0),this.Nc.VB()}LWt(t){this.HBt=!!t.isFullscreen,this.BR(t.innerWidth,t.innerHeight,!0),this.Nc.VB()}BR(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.xBt===t&&this.TBt===s&&!i)return;this.xBt=t,this.TBt=s;const e=this.djt();"letterbox-scale"===e?this.pjt(t,s):"letterbox-integer-scale"===e?this.mjt(t,s):"off"===e?this.gjt(t,s):this.yjt(t,s),this.wjt(e);for(const{canvas:t}of this.gBt)t.width=this.PBt,t.height=this.RBt;this.Nc.jc("canvas","update-size",{marginLeft:this.ABt,marginTop:this.EBt,styleWidth:this.IBt,styleHeight:this.CBt,displayScale:this.SX()});const n=this.mM();n.BR(this.PBt,this.RBt,!0);for(const t of this.zBt)n.mO(t);YS.Sh(this.zBt),this.Sjt();const r=this.Nc.dB();r.k6(),r.L6()}Sjt(){this.mM().QS(this.jBt,this.h3()/this.o3())}a3(){return this.jBt}pjt(t,s){const i=this.Nc.uj(),e=this.Nc.qL(),n=this.Nc.XL(),r=e/n;if(t/s>r){const i=s*r;this.IBt=Math.round(i),this.CBt=s,this.ABt=Math.floor((t-this.IBt)/2),this.EBt=0}else{const i=t/r;this.IBt=t,this.CBt=Math.round(i),this.ABt=0,this.EBt=Math.floor((s-this.CBt)/2)}this.PBt=Math.round(this.IBt*i),this.RBt=Math.round(this.CBt*i),this.Nc.vjt(e,n)}mjt(t,s){const i=this.Nc.uj();1!==i&&(t+=1,s+=1);const e=this.Nc.qL(),n=this.Nc.XL(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.PBt=Math.round(e*h),this.RBt=Math.round(n*h),this.IBt=this.PBt/i,this.CBt=this.RBt/i,this.ABt=Math.max(Math.floor((t-this.IBt)/2),0),this.EBt=Math.max(Math.floor((s-this.CBt)/2),0),this.Nc.vjt(e,n)}yjt(t,s){const i=this.Nc.uj();this.IBt=t,this.CBt=s,this.PBt=Math.round(this.IBt*i),this.RBt=Math.round(this.CBt*i),this.ABt=0,this.EBt=0;const e=this.SX();this.Nc.vjt(this.IBt/e,this.CBt/e)}gjt(t,s){const i=this.Nc.uj();this.IBt=this.Nc.K1(),this.CBt=this.Nc.Z1(),this.PBt=Math.round(this.IBt*i),this.RBt=Math.round(this.CBt*i),this.bjt()?(this.ABt=Math.floor((t-this.IBt)/2),this.EBt=Math.floor((s-this.CBt)/2)):(this.ABt=0,this.EBt=0),this.Nc.vjt(this.Nc.K1(),this.Nc.Z1())}wjt(t){if("high"===this.VBt)this.ED=this.PBt,this.FD=this.RBt,this.UBt="high";else{let s,i;if("off"===this.djt()?(s=this.Nc.K1(),i=this.Nc.Z1()):(s=this.Nc.qL(),i=this.Nc.XL()),this.PBt<s||this.RBt<i)this.ED=this.PBt,this.FD=this.RBt,this.UBt="high";else if(this.ED=s,this.FD=i,this.UBt="low","scale-inner"===t){const t=s/i,e=this.xBt/this.TBt;e<t?this.ED=this.FD*e:e>t&&(this.FD=this.ED/e)}else if("scale-outer"===t){const t=s/i,e=this.xBt/this.TBt;e>t?this.ED=this.FD*e:e<t&&(this.FD=this.ED/e)}}}aW(){return this.Nc}Mjt(){return this.gBt[0].canvas}P0(){return this.$Bt}bjt(){return this.HBt}Gjt(){return this._Bt}xjt(t){if(!KS.has(t))throw new Error("invalid fullscreen mode");this.LBt=t;const s=this.Nc.dB();s.k6(),s.L6()}yX(){return this.LBt}Tjt(t){if(!KS.has(t))throw new Error("invalid fullscreen mode");this.NBt=t;const s=this.Nc.dB();s.k6(),s.L6()}_jt(){return this.NBt}djt(){return this.bjt()?this._jt():this.yX()}Ijt(t){if(!ZS.has(t))throw new Error("invalid fullscreen scaling quality");this.VBt=t,this.Nc.dB().k6()}Cjt(){return this.VBt}S3(){return this.UBt}static Pjt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}nX(){return this.xBt}rX(){return this.TBt}h3(){return this.ED}o3(){return this.FD}Lb(t){this.OS=!!t}Rjt(t){this.kBt=t}rQ(){return this.kBt}Ajt(){return this.mM().pA()}NWt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.zBt=[],this.JBt.clear(),this.$Bt.BM(),this.wBt.BM(),this.Nc.M4()}HWt(){console.log("[Construct] WebGPU device lost"),this.zBt=[],this.JBt.clear(),this.$Bt.BM(),this.Nc.M4()}async BWt(t){await this.wBt.WM(),await this.BLt(),await this.Nc.Ejt(),console.log("[Construct] WebGL context restored")}async JWt(){await this.BLt(),await this.Nc.Ejt(),console.log("[Construct] WebGPU device restored")}Fjt(){return this.wBt}Ojt(){return this.SBt}mM(){return this.SBt||this.wBt}xB(){return this.vBt}XW(){let t="";return t=this.Nc.Ojt()?"webgpu":"webgl"+this.Nc.Fjt().Rx(),this.Nc.mM().Wb()&&(t+="-software"),t}KW(){return this.Nc.Ojt()?this.Nc.Ojt().Djt():this.Nc.Fjt().CO()}lH(){return"low"===this.UBt?1/this.Nc.uj():this.SX()}SX(){const t=this.djt();if("off"===t||"crop"===t)return 1;const s=this.Nc.qL(),i=this.Nc.XL(),e=s/i,n=this.PBt/this.RBt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.CBt/i:this.IBt/s}H3(){return"low"===this.S3()?1:this.SX()}V3(){return"low"===this.S3()?1:this.Nc.uj()}kjt(t,s){this.BBt=t,this.WBt=s}rK(t,s,i,e=!0){s=s||this.ED,i=i||this.FD;const n=s/2+this.BBt,r=i/2+this.WBt;if(e){let e=this.a3();s===this.ED&&i===this.FD||(t.QS(sv,s/i),e=sv),t.oF(e)}const h=t.nv(n,r,t.WS(i),n,r,0,i);t.dF(h)}Ljt(t,s=!0){const i=this.ej(),e=this.rj(),n=i/2,r=e/2;s&&t.oF(this.a3());const h=t.nv(n,r,t.WS(e),n,r,0,e);t.dF(h)}oj(){return this.PBt}lj(){return this.RBt}ej(){return this.IBt}rj(){return this.CBt}QW(){return this.ABt}sj(){return this.EBt}n4(){return this.gBt.length}Njt(){return"undefined"!=typeof OffscreenCanvas&&this.Mjt()instanceof OffscreenCanvas&&("Chromium"!==YS.Ks.ei||YS.Ks.ii>=124)}async I4(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.gBt.length===t)return;const i={count:t,layersDomState:this.Nc.dB().uB()._1().filter(t=>t.xU()).map(t=>t.O2()),immediate:s,marginLeft:this.ABt,marginTop:this.EBt,styleWidth:this.IBt,styleHeight:this.CBt};let e;if(e=this.zL()?await this.Nc.HB("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.gBt.length)this.gBt.length=t;else for(const t of e.addedCanvases){t.width=this.PBt,t.height=this.RBt;const s=this.Njt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.gBt.push({canvas:t,OWt:i})}this.Nc.VB()}y6(t){if(t>=this.gBt.length)return;const s=this.Mjt(),i=this.gBt[t].OWt;this.Njt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}v3(t){t.depth=this.Nc.a2();const s=this.zBt,i=s.findIndex(s=>s.FT(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.mM().uO(t),this.JBt.add(e),e}A0(t){if(!this.JBt.has(t))throw new Error("render target not in use");this.JBt.delete(t),this.zBt.push(t)}XBt(){const t={nx:this.Nc.YL()};return"low"===this.S3()&&(t.width=this.h3(),t.height=this.o3()),this.v3(t)}YBt(t){this.A0(t)}*Bjt(){for(const t of this.Nc.dB().F6())for(const s of t.HV()){const t=this.sWt.get(s);t&&(yield t)}}f3(t){if(!this.mM().bO())return null;let s=this.sWt.get(t);return s||(s={bz:t,name:t.Pc(),Wjt:YS.Hn(YS.Lw.LA,this.wBt),jjt:0,Vjt:0,Ujt:0},this.sWt.set(t,s)),s.Wjt}Hjt(){const t=this.mM();if(t.bO()&&0===this.ZBt){this.ZBt=t.Db(),this.iWt=NaN;for(const t of this.Bjt())t.jjt=NaN}}zjt(){this.wBt&&this.wBt.bO()&&this.Jjt(),this.SBt&&this.SBt.bO()&&this.qjt()}Jjt(){if(isNaN(this.iWt)&&(this.iWt=this.tWt.HA(this.KBt,this.ZBt),!isNaN(this.iWt))){if(this.Nc.sz())for(const t of this.Bjt())if(t.jjt=t.Wjt.HA(this.KBt,this.ZBt),isNaN(t.jjt))return;if(this.tWt.zA(this.ZBt),this.QBt=Math.min(this.iWt,1),this.Nc.sz()){const t=new Map;for(const s of this.Bjt())s.Wjt.zA(this.ZBt),s.Vjt=Math.min(s.jjt,1),t.set(s.bz,s.Vjt);for(const s of this.Bjt()){const i=s.bz,e=(t.get(i)||0)-i.dU().reduce((s,i)=>s+(t.get(i)||0),0);s.Ujt=YS.Yn(e,0,1)}const s=this.Nc.uB(),i=this.QBt-s._1().reduce((s,i)=>s+(t.get(i)||0),0);self.iz.$jt(YS.Yn(i,0,1),this.QBt,[...this.Bjt()])}this.KBt=this.ZBt,this.ZBt=0}}Xjt(){return this.tWt}qjt(){if(0===this.ZBt)return;for(let t=this.KBt;t<this.ZBt;++t){const s=this.eWt.get(t);if(s&&!s._A())return}const t=this.Nc.uB(),s=YS.Mo(t.Z5()+1,0);let i=0;for(let t=this.KBt;t<this.ZBt;++t){const e=this.eWt.get(t);if(!e)continue;const n=e.IA();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.QBt=YS.Yn(i,0,1),this.Nc.sz()){const i=t.HV(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.mU()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Pc(),Ujt:YS.Yn(s,0,1),Vjt:YS.Yn(i,0,1)})}const h=this.QBt-t._1().reduce((t,s)=>t+(r.get(s)||0),0);self.iz.$jt(YS.Yn(h,0,1),this.QBt,n)}for(let t=this.KBt;t<this.ZBt;++t)this.eWt.delete(t);this.KBt=this.ZBt,this.ZBt=0}Yjt(t){this.eWt.set(this.SBt.Db(),t)}XN(){return this.QBt}YB(t,s,i,e,n,r){return this.nWt=t,this.rWt=s,this.hWt.Ha(i,e,n,r),this.aWt||(this.aWt=new Promise(t=>{this.lWt=t})),this.aWt}Kjt(){if(!this.nWt)return;let t=this.Mjt();const s=this.hWt,i=YS.Yn(Math.floor(s.Za()),0,t.width),e=YS.Yn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-i:YS.Yn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:YS.Yn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=YS.uo(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}YS.co(t,this.nWt,this.rWt).then(t=>{this.oWt&&URL.revokeObjectURL(this.oWt),this.oWt=URL.createObjectURL(t),this.aWt=null,this.lWt(t)}),this.nWt="",this.rWt=1}Zjt(){return this.oWt}Qjt(t){t?this.uWt++:this.uWt--}tVt(){return this.uWt>0}sVt(t){const s=this.mM();if(2===t)this.mWt=YS.Hn(YS.Lw.qb,this.mM()),this.mWt.mR("Arial"),this.mWt.gR(16),this.mWt.RR("center"),this.mWt.ER("center"),this.mWt.BR(300,200);else if(0===t){const t=this.Nc.iVt();t&&t.YY(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.eVt("splash-images/splash-logo.svg").then(t=>{"done"===this.GWt?s.wT(t):this.gWt.yWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nVt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.GWt?s.wT(t):this.gWt.wWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nVt("splash-images/splash-website-512.png").then(t=>{"done"===this.GWt?s.wT(t):this.gWt.SWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async eVt(t){t=new URL(t,this.Nc.rVt()).toString();const s=await YS.eo(t),i=await this.Nc.hVt(s,2048,2048);return await this.mM().lO(i,{ux:"high"})}async nVt(t){t=new URL(t,this.Nc.rVt()).toString();const s=await YS.eo(t);return await this.mM().lO(s,{ux:"high"})}oVt(){this.Nc.jc("runtime","hide-cordova-splash")}aVt(){this.cWt=Date.now(),this.Nc.wf().addEventListener("loadingprogress",this.pWt),this.fWt=requestAnimationFrame(()=>this.lVt()),3!==this.Nc.uVt()&&this.oVt()}async cVt(){const t=this.mM();this.dWt=1;const s=this.Nc.uVt();4===s&&await this.TWt,this.xWt=null,this.TWt=null,-1!==this.fWt&&(cancelAnimationFrame(this.fWt),this.fWt=-1),this.Nc.wf().removeEventListener("loadingprogress",this.pWt),this.pWt=null,this.mWt&&(this.mWt.zn(),this.mWt=null),this.Nc.fVt(),t.QF(),this.gWt.yWt&&(t.wT(this.gWt.yWt),this.gWt.yWt=null),this.gWt.wWt&&(t.wT(this.gWt.wWt),this.gWt.wWt=null),this.gWt.SWt&&(t.wT(this.gWt.SWt),this.gWt.SWt=null),t.ZF(0,0,0,0),t.Fb(),this.GWt="done",this.KBt=t.Db(),3===s&&this.oVt()}lVt(){if(-1===this.fWt)return;const t=this.mM();t.QF(),this.fWt=-1;const s=this.Nc.IL().IZ(),i=this.Nc.uVt();if(3!==i&&(this.Ljt(t),t.ZF(0,0,0,0),t.bF(),t.lv(),t.GF(null)),0===i)this.dVt(s);else if(1===i)this.pVt(s,120,0);else if(2===i)this.mVt(s);else if(3===i)YS.mh();else{if(4!==i)throw new Error("invalid loader style");this.gVt(s)}t.Fb(),this.fWt=requestAnimationFrame(()=>this.lVt())}mVt(t){t?this.mWt.PR(1,0,0):this.mWt.PR(.6,.6,.6),this.mWt.Vc(Math.round(100*this.dWt)+"%");const s=this.IBt/2,i=this.CBt/2;iv.Ll(s-150,i-100,s+150,i+100);const e=this.mM();e.GF(this.mWt.xT()),e.tb(iv,this.mWt.gA())}pVt(t,s,i){const e=this.mM();e.mv(),t?e.SF(1,0,0,1):e.SF(.118,.565,1,1);const n=this.IBt/2,r=this.CBt/2,h=s/2;ev.Ha(n-h,r-4+i,Math.floor(s*this.dWt),8),e.Rect(ev),ev.Ha(n-h,r-4+i,s,8),ev.offset(-.5,-.5),ev.cl(.5,.5),e.SF(0,0,0,1),e.rb(ev),ev.cl(1,1),e.SF(1,1,1,1),e.rb(ev)}dVt(t){const s=this.mM(),i=this.Nc.iVt();if(!i)return void this.pVt(t,120,0);const e=i.xT();if(!e)return void this.pVt(t,120,0);const n=e.Vg(),r=e.Zg(),h=this.IBt/2,o=this.CBt/2,a=n/2,l=r/2;iv.Ll(h-a,o-l,h+a,o+l),s.GF(e),s.Cl(iv),this.pVt(t,n,l+16)}gVt(t){const s=this.mM(),i=this.gWt.yWt,e=this.gWt.wWt,n=this.gWt.SWt,r=Date.now();0===this.vWt&&(this.cWt=r);const h=this.Nc.yVt()||this.Nc.wVt()&&!this.Nc.SVt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.GWt?l=Math.min((r-this.cWt)/300,1):"fade-out"===this.GWt&&(l=Math.max(1-(r-this.MWt)/300,0)),s.mv(),s.SF(.231*l,.251*l,.271*l,l),ev.set(0,0,this.IBt,this.CBt),s.Rect(ev);const u=Math.ceil(this.IBt),c=Math.ceil(this.CBt);let f,d;this.CBt>256?(s.SF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),ev.Ha(0,.8*c-d/2,f,d),s.Rect(ev),t?s.SF(l,0,0,l):s.SF(.161*l,.953*l,.816*l,l),f=u*this.dWt,ev.Ha(.5*u-f/2,.8*c-d/2,f,d),s.Rect(ev),s.SF(l,l,l,l),s.lv(),e&&(f=1.5*YS.Yn(.22*c,105,.6*u),d=f/8,ev.Ha(.5*u-f/2,.2*c-d/2,f,d),s.GF(e),s.Rect(ev)),i&&(f=Math.min(.395*c,.95*u),d=f,ev.Ha(.5*u-f/2,.485*c-d/2,f,d),s.GF(i),s.Rect(ev)),n&&(f=1.5*YS.Yn(.22*c,105,.6*u),d=f/8,ev.Ha(.5*u-f/2,.868*c-d/2,f,d),s.GF(n),s.Rect(ev))):(s.SF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),ev.Ha(0,.85*c-d/2,f,d),s.Rect(ev),t?s.SF(l,0,0,l):s.SF(.161*l,.953*l,.816*l,l),f=u*this.dWt,ev.Ha(.5*u-f/2,.85*c-d/2,f,d),s.Rect(ev),s.SF(l,l,l,l),s.lv(),i&&(f=.55*c,d=f,ev.Ha(.5*u-f/2,.45*c-d/2,f,d),s.GF(i),s.Rect(ev))),this.vWt++,"fade-in"===this.GWt&&r-this.cWt>=300&&this.vWt>=2&&(this.GWt="wait",this.bWt=r),"wait"===this.GWt&&r-this.bWt>=a&&this.dWt>=1&&(this.GWt="fade-out",this.MWt=r),("fade-out"===this.GWt&&r-this.MWt>=300+o||h&&this.dWt>=1&&r-this.cWt<500)&&this.xWt()}}}{const nv=self._s,rv=self.iz,hv=(self.assert,self.AX),ov={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let av=!0;nv.vVt=class extends nv.Vn{constructor(t){t=Object.assign({},ov,t),super(),this.bVt=t.messagePort,this.MVt=t.runtimeBaseUrl,this.GVt=t.previewUrl,this.xVt=!!t.headless,this.TVt=!!t.hasDom,this._Vt=!!t.isInWorker,av=t.ife,this.IVt=!!t.useAudio,this.CVt=t.exportType,this.PVt=t.isNWjs,this._K=!!t.isiOSCordova,this.RVt=!!t.isiOSWebView,this.AVt=!!t.isWindowsWebView2,this.EVt=!!t.isAnyWebView2Wrapper,this.FVt=!!t.isFBInstantAvailable,this.OVt=!("preview"!==this.CVt||!t.isDebug),this.DVt=this.OVt,this.kVt=this.OVt,this.LVt=0,this.NVt=[],this.BVt=[],this.WVt=!1,this.jVt="",this.VVt="",this.UVt="",this.HVt="",this.zVt=0,this.JVt=0,this.qVt=0,this.jD=self.devicePixelRatio,this.$Vt=0,this.XVt=0,this.YVt=0,this.KVt=0,this.ZVt=0,this.QVt=!1,this.ww=!0,this.tUt=!1,this.sUt=!1,this.iUt=!1,this.eUt=null,this.zZ=nv.Hn(nv.MK,this,t),this.a5=nv.Hn(nv.T6,this),this.zpt=nv.Hn(nv.Vmt,this),this.nUt=nv.Hn(nv.mj,this,t.wrapperComponentIds),this.rUt=nv.Hn(nv.rNt,this),this.stt=nv.Hn(nv.N6,this),this.hUt=nv.Hn(nv.cct,this),this.oUt=nv.Hn(nv.dct,this),this.Ict=nv.Hn(nv.bct,this),this.dw=nv.Hn(nv.tw,{ew:t=>this.aUt(t),hw:t=>this.lUt(t)}),this.uUt=new Map,this.cUt=[],this.fUt=new Map,this.dUt=new Map,this.pUt=0,this.mUt=[],this.gUt=new Set,this.yUt=[],this.wUt=[],this.SUt=new Map,this.vUt=!1,this.bUt=!1,this.MUt=0,this.GUt=0,this.xUt=new Map,this.TUt=new Set,this._Ut=new Set,this.IUt=[],this.CUt=[],this.PUt=null,this.RUt=!1,this.AUt="vsync",this.Mx="trilinear",this.EUt=!1,this.FUt=!0,this.OUt=!1,this.DUt=!1,this.kUt=null,this.LUt={NUt:t=>{this.fWt=-1,this.BUt=-1,this.u7(t)},WUt:t=>{this.BUt=-1,this.u7(t,!1,"skip-render")},jUt:()=>{this.fWt=-1,this.ck()}},this.fWt=-1,this.BUt=-1,this.VUt=0,this.UUt=0,this.HUt=!1,this.zUt=!1,this.JUt=!1,this.qUt=!0,this.$Ut=!0,this.XUt=!1,this.YUt=0,this.KUt=new nv.Hd(1),this.ZUt=()=>Math.random(),this.QUt=0,this.tHt=0,this.sHt=0,this.iHt=0,this.eHt=0,this.AFt=1,this.nHt=1/30,this.rHt=0,this.hHt=nv.Hn(nv.Qf),this.oHt=nv.Hn(nv.Qf),this.aHt=nv.Hn(nv.Qf),this.lHt=new Map,this.uHt=-1,this.cHt=0,this.fHt=0,this.dHt=-1,this.pHt=0,this.mHt=0,this.gHt=0,this.yHt=!1,this.wHt="",this.SHt=!1,this.vHt="",this.uz=null,this.bHt="",this.MHt=null,this.GHt=null,this.OAt=nv.Hn(nv.Event.wf),this.xHt=new Map,this.THt=new Map,this._Ht=0,this.IHt=!1,this.CHt=!1,this.PHt=!1,this.RHt=[],this.AHt={pretick:nv.Hn(nv.Event,"pretick",!1),tick:nv.Hn(nv.Event,"tick",!1),tick2:nv.Hn(nv.Event,"tick2",!1),instancecreate:nv.Hn(nv.Event,"instancecreate",!1),instancedestroy:nv.Hn(nv.Event,"instancedestroy",!1),beforelayoutchange:nv.Hn(nv.Event,"beforelayoutchange",!1),layoutchange:nv.Hn(nv.Event,"layoutchange",!1)},this.AHt.instancecreate.fq=null,this.AHt.instancedestroy.fq=null,this.j0=nv.Hn(nv.Event.wf),this.EHt=null;const s=(t,s)=>nv.PFt._Lt(this,t,s);this.FHt=nv.Hn(nv.ld,s),this.OHt=nv.Hn(nv.ld,s),this.DHt=nv.Hn(nv.ld,s),this.kHt=nv.Hn(nv.LHt,this,t.jobScheduler),t.canvas&&(this.PUt=nv.Hn(nv.mBt,this)),this.bVt.onmessage=t=>this._OnMessageFromDOM(t.data),this.YH("runtime","visibilitychange",t=>this.NHt(t)),this.YH("runtime","wrapper-extension-message",t=>this.BHt(t)),this.YH("runtime","get-remote-preview-status-info",()=>this.WHt()),this.YH("runtime","js-invoke-function",t=>this.ggt(t)),this.YH("runtime","go-to-last-error-script",self.goToLastErrorScript),this.YH("runtime","offline-audio-render-completed",t=>this.jHt(t)),this.OAt.addEventListener("window-blur",t=>this.VHt(t)),this.OAt.addEventListener("window-focus",()=>this.UHt()),this.stt.w8(),this.oUt.w8(),this.HHt=null,this.zHt=new WeakMap,this.JHt={keyboard:null,bB:null,MB:null,GB:null},this.qHt=new WeakMap,this.$Ht=[]}static HT(t){return nv.Hn(nv.vVt,t)}zn(){nv.Sh(this.cUt),this.fUt.clear(),this.dUt.clear(),this.a5.zn(),this.a5=null,this.zpt.zn(),this.zpt=null,this.nUt.zn(),this.nUt=null,this.zZ.zn(),this.zZ=null,this.rUt.zn(),this.rUt=null,this.stt.zn(),this.stt=null,this.hUt.zn(),this.hUt=null,this.oUt.zn(),this.oUt=null,this.Ict.zn(),this.Ict=null,this.dw.zn(),this.dw=null,this.PUt&&(this.PUt.zn(),this.PUt=null),this.OAt.zn(),this.OAt=null,this.XHt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.YHt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.KHt(t)}}YHt(t){if(!this.PHt)return void this.RHt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new nv.Event(i);t.data=e,this.OAt.Cf(t)}if(h){const t=new nv.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.CZ(t)}}const a=this.xHt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.ZHt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.ZHt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.ZHt(o,!1,""+t)}):this.ZHt(o,!0,u))}ZHt(t,s,i){this.bVt.postMessage({type:"result",responseId:t,isOk:s,result:i})}KHt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.THt.get(s);i?n.resolve(e):n.reject(e),this.THt.delete(s)}YH(t,s,i){let e=this.xHt.get(t);if(e||(e=new Map,this.xHt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}jc(t,s,i,e){this.bVt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}HB(t,s,i,e){const n=this._Ht++,r=new Promise((t,s)=>{this.THt.set(n,{resolve:t,reject:s})});return this.bVt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}VX(t,s,i,e=-1){this.jc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}UX(t,s,i){const e=this._Ht++,n=new Promise((t,s)=>{this.THt.set(e,{resolve:t,reject:s})});return this.VX(t,s,i,e),n}BHt(t){if(-1!==t.asyncId){const s=t.asyncId;this.THt.get(s).resolve(t.params),this.THt.delete(s)}else this.YHt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}pz(t,s,i){this.YH("wrapper-extension:"+t,s,i)}fz(t){return this.nUt.fz(t)}QHt(t){if(!this.sz())throw new Error("not in debug mode");this.jc("runtime","post-to-debugger",t)}async OFt(t){nv.nTt(this),this.sz()?await rv.OFt(this):self.iz&&self.iz.tzt(this);const s=await this.zZ.io("data.json");if(await this.szt(s),await this.izt(t),this.yVt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.Fjt()){const t=this.Fjt();console.info(`[C3 runtime] Hosted in ${this.zL()?"worker":"DOM"}, rendering with WebGL ${t.Rx()} [${t.CO()}]`)}else this.Ojt()&&console.info(`[C3 runtime] Hosted in ${this.zL()?"worker":"DOM"}, rendering with WebGPU [${this.Ojt().Djt()}]`);this.mM().Wb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.PHt=!0;for(const t of this.RHt)this.YHt(t);nv.Sh(this.RHt),this.PUt&&this.PUt.aVt();for(const s of t.runOnStartupFunctions)this.NVt.push(this.ezt(s));if(await Promise.all([this.zZ.TZ(),...this.NVt]),nv.Sh(this.NVt),!this.zZ.IZ())return this.PUt&&await this.PUt.cVt(),await this.OAt._f(new nv.Event("beforeruntimestart")),await this.QF(),this.bVt.postMessage({type:"runtime-ready"}),this;this.PUt&&this.PUt.oVt()}async ezt(t){try{await t(this.HHt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async szt(t){const s=t.project;this.jVt=s[0],this.VVt=s[16],this.UVt=s[31],this.HVt=s[38],this.zVt=s[36];const i=s[39]||"loading-logo.png";this.EUt=!!s[9],this.JVt=this.YVt=s[10],this.qVt=this.KVt=s[11],this.rUt.XNt(this.JVt,this.qVt),this.$Vt=this.JVt/2,this.XVt=this.qVt/2,this.AUt=s[37],this.RUt=!!s[40],this.Mx=s[14],this.tUt=s[15],this.sUt=s[42],this.iUt=s[17],this.QVt=!!s[18],this.ZVt=s[19],this.GUt=s[21],this.OUt=s[22];const e=this.zZ;if(e.QK(s[45]),e.DZ(s[7],s[25]),e.sZ(s[8]),e.iZ(s[32]),e.nZ(s[28]),e.AZ(s[29]),0===this.ZVt){let t="";t="flat"===e.gW()?e.rZ()+i:i,t&&(this.eUt=e.gZ({url:t}))}this.PUt&&(this.PUt.xjt(nv.mBt.Pjt(s[12])),this.PUt.Ijt(s[23]?"high":"low"),this.PUt.Lb(0!==s[24]),this.PUt._Wt(s[34]),this.PUt.Rjt(s[41]),this.PUt.IWt(s[13]),this.PUt.CWt(s[30]),this.PUt.AWt(s[46],s[47]),this.PUt.RWt(s[26]),this.PUt.EWt(s[48]),this.PUt.FWt(s[50]));const n=s[43];n&&await this.nzt(n),this.rzt(),this.nUt.SRt(),this.IUt=self.hzt();const r=s[2];for(const t of r[1])this.nUt.vRt(t);for(const t of r[0])this.nUt.wRt(t);this.IUt=self.hzt(),this.ozt(),this.nUt._Rt();for(const t of s[3]){const s=nv.wct.HT(this,this.cUt.length,t);this.cUt.push(s),this.fUt.set(s.Pc().toLowerCase(),s),this.dUt.set(s.I1(),s)}for(const t of s[4])this.cUt[t[0]].wEt(t);for(const t of s[27]){const s=t.map(t=>this.cUt[t]);this.mUt.push(nv.Hn(nv.wFt,this,s))}this.azt();for(const t of this.cUt)t.vEt();for(const t of s[5])this.a5.HT(t);const h=s[1];if(h){const t=this.a5.C6(h);t&&this.a5._6(t)}for(const t of s[35])this.hUt.HT(t);for(const t of s[33])this.stt.HT(t);for(const t of s[44])this.oUt.HT(t);this.oUt.gct()||(this.oUt.zn(),this.oUt=null);for(const t of s[49])this.Ict.HT(t);this.Ict.Tct()||(this.Ict.zn(),this.Ict=null);for(const t of s[6])this.zpt.HT(t);this.zpt.Sgt(),this.lzt(),nv.Sh(this.IUt),this.pV();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.jc("runtime","set-target-orientation",{targetOrientation:o})}async nzt(t){const s=t.format;"image-sequence"===s?this.kUt=new self.uzt(this,t):"image-sequence-gif"===s?this.kUt=new self.czt(this,t):"webm"===s?this.kUt=new self.fzt(this,t):"mp4"===s&&(this.kUt=new self.dzt(this,t)),this.AUt="unlimited-frame",this.PUt.xjt("off"),this.jD=1,self.devicePixelRatio=1,await this.HB("runtime","set-exporting-to-video",{message:this.kUt.pzt(0),duration:this.kUt.Vq()})}uVt(){return this.ZVt}hjt(){return null!==this.kUt}mzt(){return this.kUt.Vq()}gzt(){return this.kUt.yzt()}wzt(){return this.kUt.OFt({width:this.PUt.oj(),height:this.PUt.lj()})}Szt(){const t=this.VUt/this.gzt();return this.kUt.vzt(this.PUt.Mjt(),t)}bzt(){this.kUt&&this.kUt.Net()}jHt(t){this.kUt.Mzt(t)}Gzt(){return this.kUt.Fb()}wVt(){return this.FVt}xw(){return this.ww}$B(t){this.NVt.push(t)}P4(t){this.WVt=!!t}xzt(t){this.WVt&&this.BVt.push(t)}D4(){return this.BVt}cEt(){return this.pUt++}MEt(){return this.pUt}DLt(t){this.gUt.add(t)}kLt(t){this.gUt.delete(t)}rjt(){return this.gUt}async izt(t){this.PUt&&(await this.PUt.uo(t),this.PUt.sVt(this.ZVt))}async QF(){this.HUt=!0,this.QUt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.QVt){for(const t of this.cUt)t.S1()||t.AEt()||!t.bj()||t.SCt();(async()=>{await this.zZ.TZ(),await s,this.ww=!1,this.Tzt()})()}else this.ww=!1;this.zZ._Z(),this.sz()&&rv._zt(av);for(const t of this.a5.gB())t.K4();this.hjt()&&await this.wzt();const i=this.a5.I6();await i.f4(null,this.mM()),await i.G4(!0),this.cHt=performance.now(),t(),this.QVt||this.Tzt(),(await this.HB("runtime","before-start-ticking")).isSuspended&&!this.hjt()?(this.YUt++,this.XUt=!0):this.u7()}Tzt(){this.qH(nv.sW.tW.QB.Izt,null,null),this.jc("runtime","register-sw")}Mbt(t){t=Math.floor(t);const s=this.IUt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}ozt(){for(const t of self.Czt){const s=nv.Bh(Object.keys(t));this.CUt.push(s)}}Ugt(t){t=Math.floor(t);const s=this.CUt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}Pzt(){return this.TVt}Rzt(){return this.xVt}zL(){return this._Vt}rVt(){return this.MVt}Azt(){return this.GVt}oN(){return this.zpt}vN(){return this.zpt.vN()}Fgt(){return this.zpt.Fgt()}dN(){return this.zpt.dN()}Ogt(){return this.zpt.Ogt()}iTt(){return 0===this.Fgt().umt()}kgt(){return this.zpt.kgt()}xLt(){return this.nUt}RZ(){return this.nUt.RZ()}q0(t){if((t=Math.floor(t))<0||t>=this.cUt.length)throw new RangeError("invalid index");return this.cUt[t]}Ezt(t){return this.fUt.get(t.toLowerCase())||null}ZX(t){return this.dUt.get(t)||null}ght(t){const s=nv.mj.kj(t);return s?s.Wj():null}w1(){return this.cUt}*Fzt(){for(const t of this.cUt)t.S1()||(yield*t.qj())}wf(){return this.OAt}eN(){return this.j0}CZ(t){t.runtime=this.gj();const s=this.sz()&&!this.zpt.fV();s&&rv.b6(),this.j0.dispatchEvent(t),s&&rv.M6()}U4(t){return t.runtime=this.gj(),this.j0._f(t)}qL(){return this.JVt}XL(){return this.qVt}Ozt(t,s){if(this.JVt===t&&this.qVt===s)return;this.JVt=t,this.qVt=s;const i=this.dB();i.k6(),i.L6()}K1(){return this.YVt}Z1(){return this.KVt}vjt(t,s){if(this.YVt===t&&this.KVt===s)return;this.YVt=t,this.KVt=s;const i=this.dB();i.k6(),i.L6()}ojt(t){this.hjt()||(this.jD=t)}uj(){return this.jD}Q2(){return this.$Vt}t3(){return this.XVt}TB(){return this.PUt}h3(){return this.PUt?this.PUt.h3():this.YVt}o3(){return this.PUt?this.PUt.o3():this.KVt}lH(){return this.PUt?this.PUt.lH():1}SX(){return this.PUt?this.PUt.SX():1}H3(){return this.PUt?this.PUt.H3():1}V3(){return this.PUt?this.PUt.V3():1}QW(){return this.PUt?this.PUt.QW():0}sj(){return this.PUt?this.PUt.sj():0}Dzt(){return this.PUt?this.PUt.ej():0}kzt(){return this.PUt?this.PUt.rj():0}yX(){return this.PUt?this.PUt.yX():"off"}v3(t){return this.PUt?this.PUt.v3(t):null}A0(t){this.PUt&&this.PUt.A0(t)}w3(){return this.tUt}XWt(){return this.sUt}YWt(){return this.iUt}XN(){return this.PUt?this.PUt.XN():NaN}_T(){return"nearest"!==this.YL()}KN(){return this.AUt}ZN(t){this.AUt!==t&&(this.AUt=t,-1===this.fWt&&-1===this.BUt||(this.Lzt(),this.Nzt()))}YL(){return this.Mx}mEt(){return this.QVt}iVt(){return this.eUt}fVt(){this.eUt&&(this.eUt.oR(),this.eUt.zn(),this.eUt=null)}dB(){return this.a5}uB(){return this.a5.uB()}Vtt(){return this.stt}Bzt(){return this.hUt}uOt(){return this.oUt}$ct(){return this.Ict}IL(){return this.zZ}gZ(t){return this.zZ.gZ(t)}aV(t,s,i,e,n,r){if(r&&this.oUt){if(t instanceof nv.wct&&t.S1()){const h=t.MV(),o=Math.floor(this.lB()*h.length);return this.aV(h[o],s,i,e,n,r)}const h=this.oUt.yct(t,r);if(h){const t=this.i1(h,s,!1,i,e,!1,n,void 0,n);return this.oUt.Sct(t,r),t}}return this.i1(t,s,!1,i,e,!1,n,void 0,n)}i1(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof nv.wct){if(u=t,u.S1()){const t=u.MV();u=t[Math.floor(this.lB()*t.length)]}l=u.X0()}else l=t,u=this.q0(l[1]);const c=u.zj().bj();if(this.ww&&c&&!u.AEt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.xUt.has(l[2])?l[2]:this.GUt++;const p=l?l[0]:null,m=nv.Hn(nv.Instance,{runtime:this,objectType:u,bz:s,FFt:p,LFt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.xUt.set(d,m);let g=null;if(c&&(g=m.DB(),void 0!==e&&void 0!==n&&(g.XM(e),g.ZM(n)),u.nFt(!0)),s&&(a||s.e1(m,!0),s.pB().m4(u)),this.MUt++,u.MH()&&!i&&!r){const t=new Set;for(const s of u.u4().GV()){if(s===u)continue;const i=this.Wzt(s,g,t);if(i){const t=this.i1(i,f,!1,g?g.$M():e,g?g.KM():n,!0,!1,void 0,a);m.X4(t)}else{const t=this.i1(s,f,!1,g?g.$M():e,g?g.KM():n,!0,!1,void 0,a);m.X4(t)}}for(const t of m.GH()){t.X4(m);for(const s of m.GH())t!==s&&t.X4(s)}}if(c&&!i&&h&&this.jzt(m,p,g,s,e,n,a),u.MH()&&!i&&!r&&h)for(const t of m.GH()){const i=t.DB();if(!i)continue;const e=t.zj(),n=t.cH().X0()[0];e.bj()?this.jzt(t,n,i,s,i.$M(),i.KM(),a):this.jzt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.oJ(),s=e-g.$M()+t.$M(),i=n-g.KM()+t.KM();t.Gz(s,i)}u.QEt();const y=l?nv.Eh(l[5]):null,w=l?l[4].map(t=>nv.Eh(t)):null,S=c&&p&&p[13];if(S&&m.UFt(),m.PEt(y,w),S){const t=p[13];m.sq().kCt(t[2],t[0],t[1])}this.wUt.push(m),this.vUt=!0,this.sz()&&rv.Vzt(m);const v=this.AHt.instancecreate;return v.fq=m,this.OAt.dispatchEvent(v),m}yDt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.a5.P6(s).kB(i).Z0(e)}Wzt(t,s,i){const e=s?.lOt()??[];for(const s of e){const e=this.yDt(s),n=!!s[4],r=this.q0(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}jzt(t,s,i,e,n,r,h){const o=i.Wkt(),a=i.lOt();if(t.DB().jkt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.a5.P6(i).kB(o).Z0(a);const y=this.q0(g[1]),w=t.fOt(y),S=l.has(y);if(w&&!S&&d){const s=t.dOt(y);s.DB().OFt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.DB().Gz(i,e),s.DB().jkt(p),t.mJ(s,{vJ:!!(1&f),MJ:!!(f>>1&1),xJ:!!(f>>2&1),_J:!!(f>>3&1),CJ:!!(f>>4&1),kJ:!!(f>>5&1),RJ:!!(f>>6&1),EJ:!!(f>>7&1),OJ:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.i1(g,e,!1,s,i,!1,!0,t,h);o.DB().jkt(p),t.mJ(o,{vJ:!!(1&f),MJ:!!(f>>1&1),xJ:!!(f>>2&1),_J:!!(f>>3&1),CJ:!!(f>>4&1),kJ:!!(f>>5&1),RJ:!!(f>>6&1),EJ:!!(f>>7&1),OJ:!!(f>>8&1)})}}}yH(t){if(this.TUt.has(t))return;const s=t.cH();let i=this.SUt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.SUt.set(s,i);if(this.sz()&&rv.Uzt(t),t.zFt(),this.vUt=!0,t.MH())for(const s of t.GH())this.yH(s);for(const s of t.children())s.LJ()&&this.yH(s);if(!this.a5.dV()&&!this.yHt){const s=this.oN();s.uV(!0),t.TOt(),s.uV(!1)}t._Ot(this.a5.dV())}pV(){this.vUt&&(this.bUt=!0,this.Hzt(),this.zzt(),this.bUt=!1,this.vUt=!1,this.VB())}Hzt(){for(const t of this.wUt){const s=t.cH();s.e1(t);for(const i of s.gV())i.e1(t),i.QEt()}nv.Sh(this.wUt)}zzt(){this.OAt.cf(!0);for(const[t,s]of this.SUt.entries())this.Jzt(t,s),s.clear();this.SUt.clear(),this.OAt.cf(!1)}Jzt(t,s){for(const t of s){const s=this.AHt.instancedestroy;s.fq=t,this.OAt.dispatchEvent(s),this.xUt.delete(t.xH()),this.lHt.delete(t);const i=t.DB();i&&(i.zkt(),i.a1(),i.zFt()),this.TUt.add(t),this.MUt--}nv.Ph(t.iV(),s),t.QEt(),this._Ut.add(t);for(const i of t.gV())nv.Ph(i.iV(),s),i.QEt(),this._Ut.add(i);if(t.zj().bj()){const t=new Set([...s].map(t=>t.DB().kB()));for(const i of t)i.I2(s)}}sFt(){return this.wUt}*o_t(t){for(const s of this.sFt())t.S1()?s.cH().eTt(t)&&(yield s):s.cH()===t&&(yield s)}CEt(){return this.GUt++}REt(t,s){this.xUt.set(t,s)}qX(t){t=!!t,this.$Ut!==t&&(this.$Ut=!!t,this.$Ut&&this.XUt&&(this.YX(!1),this.XUt=!1))}$X(){return this.$Ut}M4(){this.OAt.dispatchEvent(nv.Hn(nv.Event,"renderercontextlost")),this.YX(!0);for(const t of this.cUt)!t.S1()&&t.EEt()&&t.v4();const t=this.uB();t&&t.M4(),nv.PRt.nQ(),nv.SZ.nQ()}async Ejt(){await this.uB().f4(null,this.mM()),this.OAt.dispatchEvent(nv.Hn(nv.Event,"renderercontextrestored")),this.YX(!1),this.VB()}NHt(t){if(!this.$Ut)return;const s=t.hidden;this.YX(s),this.XUt=s,s||this.VB()}VHt(t){this.yVt()&&this.OUt&&!nv.Ks.hi&&(t.data.parentHasFocus||(this.YX(!0),this.DUt=!0))}UHt(){this.DUt&&(this.YX(!1),this.DUt=!1)}Nzt(){const t=this.LUt;"vsync"===this.AUt?-1===this.fWt&&(this.fWt=self.requestAnimationFrame(t.NUt)):"unlimited-tick"===this.AUt?(-1===this.BUt&&(this.BUt=nv.Hh(t.WUt)),-1===this.fWt&&(this.fWt=self.requestAnimationFrame(t.jUt))):-1===this.BUt&&(this.BUt=nv.Hh(t.NUt))}Lzt(){-1!==this.fWt&&(self.cancelAnimationFrame(this.fWt),this.fWt=-1),-1!==this.BUt&&(nv.zh(this.BUt),this.BUt=-1)}CN(){return this.YUt>0}YX(t){if(this.hjt())return;const s=this.CN();this.YUt+=t?1:-1,this.YUt<0&&(this.YUt=0);const i=this.CN();if(!s&&i)console.log("[Construct] Suspending"),this.Lzt(),this.OAt.dispatchEvent(nv.Hn(nv.Event,"suspend")),this.CZ(nv.Hn(nv.Event,"suspend")),this.qH(nv.sW.tW.QB.qzt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.tHt=t,this.cHt=t,this.uHt=0,this.fHt=0,this.dHt=0,this.pHt=0,this.gHt=0,this.mHt=0,this.OAt.dispatchEvent(nv.Hn(nv.Event,"resume")),this.CZ(nv.Hn(nv.Event,"resume")),this.qH(nv.sW.tW.QB.$zt,null,null),this.byt()||this.u7(t)}}OX(t){this.FHt.Bu(t)}NX(t){this.OHt.Bu(t)}kX(t){this.DHt.Bu(t)}DX(t){this.FHt.Kf(t)}BX(t){this.OHt.Kf(t)}LX(t){this.DHt.Kf(t)}Xzt(t,s){const i=s?performance.now():0;let e;return t instanceof hv?(e=t.ez(),s&&rv.Yzt(t.behavior,performance.now()-i)):(e=t.u7(),s&&rv.Yzt(t.aq(),performance.now()-i)),e}Kzt(){const t=this.sz();this.FHt.Vd(!0);for(const s of this.FHt)this.Xzt(s,t);this.FHt.Vd(!1)}Zzt(t,s){const i=s?performance.now():0;let e;return t instanceof hv?(e=t.jX(),s&&rv.Yzt(t.behavior,performance.now()-i)):(e=t.oRt(),s&&rv.Yzt(t.aq(),performance.now()-i)),e}Qzt(){const t=this.sz();this.OHt.Vd(!0);for(const s of this.OHt)this.Zzt(s,t);this.OHt.Vd(!1)}tJt(t,s){const i=s?performance.now():0;let e;return t instanceof hv?(e=t.hz(),s&&rv.Yzt(t.behavior,performance.now()-i)):(e=t.ePt(),s&&rv.Yzt(t.aq(),performance.now()-i)),e}sJt(){const t=this.sz();this.DHt.Vd(!0);for(const s of this.DHt)this.tJt(s,t);this.DHt.Vd(!1)}*iJt(){const t=this.sz();this.FHt.Vd(!0);for(const s of this.FHt){const i=this.Xzt(s,t);nv.bo(i)&&(yield*i)}this.FHt.Vd(!1)}*eJt(){const t=this.sz();this.OHt.Vd(!0);for(const s of this.OHt){const i=this.Zzt(s,t);nv.bo(i)&&(yield*i)}this.OHt.Vd(!1)}*nJt(){const t=this.sz();this.DHt.Vd(!0);for(const s of this.DHt){const i=this.tJt(s,t);nv.bo(i)&&(yield*i)}this.DHt.Vd(!1)}async u7(t,s,i){this.JUt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.dB(),h=this.TB();if(!this.HUt||this.CN()&&!s&&!e)return;const o=performance.now();this.zUt=!0,this.rJt(t||0),this.dHt++,this.hJt();const a=this.oJt();this.i_t()&&await a;const l=this.OAt.If(this.AHt.pretick);l instanceof Promise&&await l,this.CZ(this.EHt.pretick);const u=this.aJt();this.i_t()&&await u,this.lJt()&&await this.uJt(),r.wB()&&await this.cJt();const c=this.fJt();this.i_t()&&await c;const f=r.uB(),d=f.r4();let p=!1;if(-1!==d&&(f.h4(),h.n4()!==d)){const t=this.TB().I4(d);this.zL()&&(p=!0,await t)}this.jc("canvas","update-html-layer-dom-state",{layersDomState:f._1().filter(t=>t.xU()).map(t=>t.O2())}),n&&this.ck(),p&&this.jc("canvas","cleanup-html-layers"),this.hjt()&&(await this.Szt(),this.ON()>=this.mzt())?this.Gzt():(this.CN()||e||this.Nzt(),this.VUt++,this.UUt++,this.zUt=!1,this.mHt+=performance.now()-o)}async oJt(){const t=this.zpt,s=this.sz();this.pV(),t.uV(!0),this.lyt(this.uB()),s&&rv.dJt(),this.i_t()?await t.Vyt():t.Lyt(),s&&rv.pJt(),this.uyt(),t.uV(!1),this.pV(),t.uV(!0)}async aJt(){const t=this.zpt,s=this.sz(),i=this.i_t(),e=this.OAt,n=this.AHt,r=this.EHt;s&&rv.dJt(),i?await this.mJt(this.iJt()):this.Kzt(),i?await this.mJt(this.eJt()):this.Qzt(),s&&rv.gJt(),s&&rv.dJt(),i?await this.yJt(n.tick):e.dispatchEvent(n.tick),s&&rv.wJt(),t.uV(!1),this.CZ(r.tick)}async fJt(){const t=this.zpt,s=this.OAt,i=this.AHt,e=this.EHt,n=this.sz(),r=this.i_t();n&&rv.dJt(),r?await t.cyt(this.a5):t.ayt(this.a5),n&&rv.pJt(),this.rUt.wNt(),this.hJt(),this.qUt=!1,t.uV(!0),n&&rv.dJt(),r?await this.mJt(this.nJt()):this.sJt(),n&&rv.gJt(),n&&rv.dJt(),r?await this.yJt(i.tick2):s.dispatchEvent(i.tick2),n&&rv.wJt(),t.uV(!1),this.CZ(e.tick2),r&&await t.Myt(),this.pV(),this.hJt()}hJt(){if(0===this.TUt.size)return;const t=this.OAt;t.cf(!0);for(const t of this._Ut)t.Ayt().bpt(this.TUt);this._Ut.clear(),this.zpt.Hyt(this.TUt);for(const t of this.TUt)t.zn();this.TUt.clear(),t.cf(!1)}async cJt(){const t=this.dB();let s=0;for(;t.wB()&&s++<10;)await this.SJt(t.D6())}rJt(t){let s=0;this.hjt()?(s=1/this.gzt(),this.sHt=s,this.iHt=s):0!==this.tHt&&(s=Math.max(t-this.tHt,0)/1e3,s>.5&&(s=0),this.sHt=s,this.iHt=nv.Yn(s,this.rHt,this.nHt)),this.tHt=t,this.eHt=this.iHt*this.AFt,this.hHt.Bu(this.eHt),this.oHt.Bu(s*this.AFt),this.aHt.Bu(this.iHt);for(const[t,s]of this.lHt)s.Bu(this.iHt*t.WN());this.PUt&&this.PUt.zjt(),t-this.cHt>=1e3&&(this.cHt+=1e3,t-this.cHt>=1e3&&(this.cHt=t),this.fHt=this.uHt,this.uHt=0,this.pHt=this.dHt,this.dHt=0,this.gHt=Math.min(this.mHt/1e3,1),this.mHt=0,this.PUt&&this.PUt.Hjt(),this.rUt.pNt(),this.sz()&&rv.vJt())}jFt(t,s){if(s){if(!this.lHt.has(t)){const s=nv.Hn(nv.Qf);s.rd(this.hHt),this.lHt.set(t,s)}}else this.lHt.delete(t)}VFt(t){const s=this.lHt.get(t);return s?s.zs():this.ON()}async SJt(t){const s=this.OAt,i=this.dB().uB();await i.Q4(),i.b4(t,this.mM()),i===t&&this.zpt.i6(),this.rUt.wNt(),this.hJt(),s.dispatchEvent(this.AHt.beforelayoutchange),nv.df.Rf(!0),await t.f4(i,this.mM()),nv.df.Rf(!1),await t.G4(!1),s.dispatchEvent(this.AHt.layoutchange),this.VB(),this.qUt=!0,this.pV(),this.bzt()}VB(){this.FUt=!0}Fjt(){return this.PUt?this.PUt.Fjt():null}Ojt(){return this.PUt?this.PUt.Ojt():null}mM(){return this.PUt?this.PUt.mM():null}ck(){const t=this.PUt;if(!t||t.Ajt())return;const s=this.mM(),i=s.bO(),e=i&&s.jb(),n=i&&s.tv();if(e&&s.oO(),!this.FUt&&!this.hjt())return void s.kb();const r=this.a5.uB();this.uHt++,s.QF();const h=this.sz();h&&rv.dJt(),this.FUt=!1;let o=null;e&&(o=t.Xjt().VA(),s.vO(o));let a=null;n&&(a=s.bJt(2*(1+r.Z5())),s.m3(0,1)),this.a2()&&"low"===t.S3()?s.lF(t.h3(),t.o3()):s.uF(),this.MJt(this.mM(),r),o&&s.MO(o),n&&(s.GJt(),this.PUt.Yjt(a)),s.Fb(),h&&(rv.xJt(),rv.TJt()),t&&t.Kjt()}f6(t){return"low"===this.TB().S3()||t.jb()&&(this.w3()||this.a2())}MJt(t,s){t.lv(),t.IF(),t.Cb(),t.SF(1,1,1,1),t.cO(null),t.GF(null),t.sO(this.a2()),this.f6(t)&&s.u6(t);const i=s.n4();for(let e=1;e<i;++e)s.g6(t,e),t.tv()&&t._Jt();this.f6(t)||s.u6(t),s.m6(t)}qH(t,s,i){if(!this.HUt)return!1;const e=!this.zUt&&!this.zpt._yt();let n=0;e&&(n=performance.now());const r=this.sz();r&&this.nY(!1);const h=this.zpt.myt(this.a5,t,s,i);if(e){const t=performance.now()-n;this.mHt+=t,r&&rv.IJt(t)}return r&&this.nY(!0),h}zCt(t,s,i){if(!this.i_t())return this.qH(t,s,i);if(this.byt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.zUt&&!this.zpt._yt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.zpt.wyt(this.a5,t,s,i)}async KB(t,s,i){if(!this.i_t())return this.qH(t,s,i);if(!this.HUt)return!1;if(this.byt())return this.zpt.Syt(t,s,i);if(!this.uB())return this.zpt.gyt(t,s,i);const e=performance.now(),n=this.zpt.wyt(this.a5,t,s,i);let r=n.next();for(;!r.done;)await this.dyt(r.value),r=n.next();return this.CN()||this.zpt._yt()||(await this.zpt.Myt(),this.JUt&&!this.zUt&&this.Nzt()),this.mHt+=performance.now()-e,r.value}JCt(t,s,i){const e=this.sz();e&&this.nY(!1);const n=this.zpt.Gyt(this.a5,t,s,i);return e&&this.nY(!0),n}qCt(t,s,i){return this.zpt.xyt(this.a5,t,s,i)}$Ct(t){return this.KUt.Bu(t)}lyt(t){this.yUt.push(t)}uyt(){if(!this.yUt.length)throw new Error("layout stack empty");this.yUt.pop()}EB(){return this.yUt.length?this.yUt.at(-1):this.uB()}RN(t){return t&&-1!==t.WN()?this.iHt*t.WN():this.eHt}a7(){return this.eHt}l7(){return this.iHt}EN(){return this.sHt}WN(){return this.AFt}jN(t){(isNaN(t)||t<0)&&(t=0),this.AFt=t}sB(t){this.rHt=Math.max(t,0)}tB(){return this.rHt}nB(t){this.nHt=Math.max(t,0)}eB(){return this.nHt}UN(){return this.fHt}zN(){return this.pHt}qN(){return this.gHt}CJt(){return this.QUt}ON(){return this.hHt.zs()}PJt(){return this.oHt.zs()}NN(){return this.aHt.zs()}kN(){return this.VUt}RJt(){return this.UUt}AJt(){return this.MUt}OL(){return this.jVt}kL(){return this.VVt}WL(){return this.UVt}NL(){return this.HVt}VL(){return this.zVt}PB(t){if(this.yHt)throw new Error("cannot call while loading state - wait until afterload event");return this.xUt.get(t)||null}fDt(t){if(this.yHt)throw new Error("cannot call while loading state - wait until afterload event");this.xUt.delete(t)}q4(){this.xUt.clear();for(const t of this.cUt)if(!t.S1())for(const s of t.iV())this.xUt.set(s.xH(),s)}yVt(){return"preview"===this.CVt}sz(){return this.OVt}JW(){return this.CVt}qW(){return"nwjs"===this.JW()||this.PVt}SVt(){return"cordova"===this.CVt}EJt(){return"Android"===nv.Ks.Zs&&("cordova"===this.CVt||"playable-ad-single-file"===this.CVt||"playable-ad-zip"===this.CVt||"instant-games"===this.CVt)}FJt(){return this._K}OJt(){return this.RVt}$W(){return this.AVt}DJt(){return this.EVt}RL(){return this.rUt}IRt(){return this.nUt.IRt()}CRt(){return this.nUt.CRt()}a2(){return this.RUt}kJt(){return this.mM().US(this.Z1())}WS(t){return this.mM().WS(t||this.Z1())}LJt(){return this.qUt}NJt(t){t=!!t,this.EUt!==t&&(this.EUt=t,this.dB().L6(),this.VB())}ZL(){return this.EUt}BJt(t){if(!this.uUt.has(t)){const s=()=>this.WJt(t);this.uUt.set(t,s),t.wf().addEventListener("animationframeimagechange",s)}const s=this.dw.ow(t);return s.Gw()||s.Tw().then(()=>this.VB()),s}WJt(t){this.dw.cw(t)}aUt(t){const s=[];for(const i of t.UEt())for(const t of i.Dq()){const i=t.jq();s.push({source:t,width:i.Vg(),height:i.Zg(),tag:t.s$()})}return{bw:s}}async lUt(t){const s=nv.Hn(nv.Hd),i=[],e=new Map;for(const n of t.UEt())for(const t of n.Dq()){const n=t.jq().XRt();e.has(n)||(e.set(n,null),i.push(s.Bu(async()=>{const t=await n.aQ();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.UEt())for(const t of i.Dq())n.push(s.Bu(async()=>{const s=t.jq(),i=e.get(s.XRt()),n=await s.YRt(i);return{Iw:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{bw:r}}jJt(t){this.wHt=t,this.SHt=!1}VJt(){this.wHt="",this.SHt=!0}UJt(t){this.vHt=t}Y_t(t){this.uz=t}HJt(){return this.bHt}lJt(){return!!(this.wHt||this.SHt||this.vHt||null!==this.uz)}async uJt(){if(this.wHt&&(this.pV(),await this.zJt(this.wHt),this.JJt()),this.vHt&&(await this.qJt(this.vHt),this.JJt(),this.sz()&&rv.$Jt()),this.SHt){const t=await this.XJt();this.bHt=t,await this.KB(nv.sW.tW.QB.YJt,null),this.bHt="",this.JJt()}if(null!==this.uz){this.pV();try{await this.KJt(this.uz),this.bHt=this.uz,await this.KB(nv.sW.tW.QB.ZJt,null),this.bHt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.KB(nv.sW.tW.QB.QJt,null)}this.JJt()}}JJt(){this.wHt="",this.SHt=!1,this.vHt="",this.uz=null}fj(){return this.MHt||(this.MHt=localforage.Ti({name:"c3-localstorage-"+this.WL(),description:this.OL()})),this.MHt}tqt(){return this.GHt||(this.GHt=localforage.Ti({name:"c3-savegames-"+this.WL(),description:this.OL()})),this.GHt}async zJt(t){const s=await this.XJt();try{await this.tqt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.bHt=s,await this.KB(nv.sW.tW.QB.YJt,null),this.bHt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.KB(nv.sW.tW.QB.sqt,null)}}async qJt(t){try{const s=await this.tqt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.KJt(s),this.bHt=s,await this.KB(nv.sW.tW.QB.ZJt,null),this.bHt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.KB(nv.sW.tW.QB.QJt,null)}}async XJt(){const t={c3save:!0,version:1,rt:{time:this.ON(),timeRaw:this.PJt(),walltime:this.NN(),timescale:this.WN(),tickcount:this.kN(),next_uid:this.GUt,running_layout:this.uB().I1(),start_time_offset:Date.now()-this.QUt},types:{},layouts:{},events:this.zpt.i5(),timelines:this.stt.i5(),user_script_data:null};for(const s of this.cUt)s.S1()||s.cFt()||(t.types[s.I1().toString()]=s.i5());for(const s of this.a5.gB())t.layouts[s.I1().toString()]=s.i5();const s=this.iqt("save");return s.saveData=null,await this.U4(s),t.user_script_data=s.saveData,JSON.stringify(t)}L4(){return this.yHt}async KJt(t){const s=this.dB(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.K_t(),this.OAt.dispatchEvent(nv.Hn(nv.Event,"beforeload"));for(const t of this.Fzt())t.cH().cFt()||t.u8();const e=i.rt;this.hHt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.oHt.Set(e.timeRaw),this.aHt.Set(e.walltime),this.AFt=e.timescale,this.VUt=e.tickcount,this.QUt=Date.now()-e.start_time_offset;const n=e.running_layout;this.yHt=!0;let r=!1;if(n!==this.uB().I1()){const t=s.P6(n);if(!t)return;await this.SJt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.P6(i);n&&n.e5(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.ZX(i);!e||e.S1()||e.cFt()||e.e5(s,h)}for(const t of this.a5.gB())for(const s of t.zV())s.n5();if(this.pV(),this.q4(),this.yHt=!1,r){for(const t of this.Fzt())t.N4();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.ZX(i);!e||e.S1()||e.cFt()||e.gFt(s)}}this.GUt=e.next_uid,this.zpt.e5(i.events);for(const t of this.cUt)if(!t.S1()&&t.MH())for(const s of t.iV()){const i=s._H();s.cOt();for(const e of t.u4().GV()){if(e===t)continue;const n=e.iV();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.X4(n[i])}}this.stt.e5(i.timelines),s.k6(),s.L6();for(const t of h)t.xOt();this.Z_t(),this.OAt.dispatchEvent(nv.Hn(nv.Event,"afterload")),this.CZ(this.iqt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.ZX(s);i&&i.mFt()}const o=this.iqt("load");o.saveData=i.user_script_data,await this.U4(o),this.VB()}eqt(t,s){return s.DB().Dkt()-t.DB().Dkt()}GLt(t,s){t.DB()&&(this.qHt.has(t)||(this.qHt.set(t,s),this.$Ht.push(t)))}K_t(){this.qHt=new WeakMap,nv.Sh(this.$Ht),nv.a6._Dt()}Z_t(t="full",s=null){this.$Ht.sort(this.eqt),s||(s={}),s.cDt=new Set;const i=this.$Ht.length;for(const i of this.$Ht)i.f8(this.qHt.get(i),t,s);for(const i of this.$Ht)i.POt(this.qHt.get(i),t,s);if(this.K_t(),i){this.pV(),this.q4();for(const t of this.a5.gB())for(const s of t.zV())s.c1(),s.jB()}}async nqt(t){const s=await Promise.all(t.map(async t=>{if(this.SVt()&&this.zZ.hZ()||"playable-ad-single-file"===this.JW()){const s=await this.zZ.eo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.kHt.rqt(s)}hqt(t,s){this.kHt.oqt(t,s)}aqt(t,s){this.kHt.lqt(t,s)}uqt(t,s,i,e){return this.kHt.uqt(t,s,i,null,null,e)}cqt(t,s,i,e){return this.kHt.cqt(t,s,i,e)}fqt(){return this.kHt.dqt()}IB(t,s){this.jc("runtime","invoke-download",{url:t,filename:s})}async hVt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.zL())return(await this.HB("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async pqt(t){return this.zL()?await this.HB("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}mqt(){this.IHt||(this.IHt=!0,this.jc("runtime","enable-device-orientation"))}gqt(){this.CHt||(this.CHt=!0,this.jc("runtime","enable-device-motion"))}lB(){return this.ZUt()}yqt(t){this.ZUt=t}WHt(){const t=this.mM();return{fps:this.UN(),tps:this.zN(),cpu:this.qN(),gpu:this.XN(),layout:this.uB()?this.uB().Pc():"",renderer:t.jb()?t.CO():t.Djt()}}byt(){return!!this.sz()&&rv.byt()}dyt(t){return this.i_t()?rv.dyt(t):Promise.resolve()}qvt(){return!!this.i_t()&&rv.wqt()}Sqt(t){this.DVt=!!t,this.vqt()}bqt(){return this.DVt}i_t(){return this.kVt}nY(t){t?this.LVt--:this.LVt++,this.vqt()}vqt(){this.kVt=this.sz()&&this.DVt&&0===this.LVt}fSt(){return this.sz()&&rv.fSt()}c3(){return this.sz()&&this.mM().bO()&&rv.c3()}async mJt(t){if(t)for(const s of t)await this.dyt(s)}yJt(t){return this.mJt(this.OAt.Pf(t))}ggt(t){return this.zpt.ggt(t.name,t.params)}JB(t){if(this.zL())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}gj(){return this.HHt}iqt(t){const s=nv.Hn(nv.Event,t,!1);return s.runtime=this.HHt,s}rzt(){this.HHt=new self.xL(this),this.EHt={pretick:this.iqt("pretick"),tick:this.iqt("tick"),tick2:this.iqt("tick2")}}azt(){const t={};for(const s of this.cUt)t[s.Ugt()]={value:s.Bj(),enumerable:!0,writable:!1};this.HHt.nN(t)}lzt(){const t={};for(const s of this.oN().Ygt())t[s.Ugt()]=s.Hgt();this.HHt.rN(t)}vB(){return this.JHt}Oj(t,s){this.zHt.set(t,s)}$V(t){return this.zHt.get(t)}BW(t){if(!(t instanceof self.Uj))throw new TypeError("expected IObjectClass");const s=this.$V(t);if(!(s&&s instanceof nv.wct))throw new Error("invalid IObjectClass");return s}Qj(t){if(!(t instanceof self.uH))throw new TypeError("expected IInstance");const s=this.$V(t);if(!(s&&s instanceof nv.Instance))throw new Error("invalid IInstance");return s}OB(t){if(!(t instanceof self.YJ))throw new TypeError("expected IWorldInstance");const s=this.$V(t);if(!(s&&s instanceof nv.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=nv.vVt.HT,self.C3_InitRuntime=(t,s)=>t.OFt(s)}{const lv=self._s;lv.LHt=class extends lv.Vn{constructor(t,s){super(),this.Nc=t,this.Mqt=new Map,this.Gqt=0,this.xqt=s.inputPort,s.outputPort.onmessage=t=>this.Tqt(t),this._qt=s.maxNumWorkers,this.Iqt=1,this.Cqt=!1,this.Pqt=!1}dqt(){return this._qt}rqt(t){this.xqt.postMessage({type:"_import_scripts",scripts:t})}oqt(t,s){this.xqt.postMessage({type:"_send_blob",blob:t,id:s})}lqt(t,s){this.xqt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}uqt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.Gqt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.Mqt.set(h,{resolve:t,progress:e,reject:s,Rqt:!1,Aqt:r})});return n&&n.Xf(()=>this.Eqt(h)),this.xqt.postMessage(o,i),this.Fqt(),a}cqt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.Gqt++,params:s,transferables:i};this.xqt.postMessage(n,i)}Eqt(t){const s=this.Mqt.get(t);s&&(s.Rqt=!0,s.resolve=null,s.progress=null,s.reject=null,this.xqt.postMessage({type:"_cancel",jobId:t}))}Tqt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.Oqt(e,s.result);break;case"progress":this.Dqt(e,s.progress);break;case"error":this.kqt(e,s.error);break;case"ready":this.Lqt();break;default:throw new Error(`unknown message from worker '${i}'`)}}Oqt(t,s){const i=this.Mqt.get(t);if(!i)throw new Error("invalid job ID");i.Rqt||i.resolve(s),this.Mqt.delete(t)}Dqt(t,s){const i=this.Mqt.get(t);if(!i)throw new Error("invalid job ID");!i.Rqt&&i.progress&&i.progress(s)}kqt(t,s){const i=this.Mqt.get(t);if(!i)throw new Error("invalid job ID");i.Rqt||i.reject(s),this.Mqt.delete(t)}Lqt(){this.Cqt&&(this.Cqt=!1,this.Iqt++,this.Iqt<this._qt?this.Fqt():this.xqt.postMessage({type:"_no_more_workers"}))}Nqt(){let t=0;const s=[...this.Mqt.values()].sort((t,s)=>(t.Aqt||1/0)-(s.Aqt||1/0));for(const i of s)t<(i.Aqt||1/0)&&t++;return t}async Fqt(){if(!(this.Iqt>=this._qt||this.Cqt||this.Pqt||this.Nqt()<=this.Iqt))try{this.Cqt=!0,(await this.Nc.HB("runtime","create-job-worker")).outputPort.onmessage=t=>this.Tqt(t)}catch(t){this.Pqt=!0,this.Cqt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.Iqt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.setcolor={njt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 setColor;\nvoid main(void)\n{\nlowp float a = texture2D(samplerFront, vTex).a;\ngl_FragColor = vec4(setColor.r * a, setColor.g * a, setColor.b * a, a);\n}",ejt:"",tjt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nsetColor : vec3<f32>\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar a : f32 = textureSample(textureFront, samplerFront, input.fragUV).a;\nvar output : FragmentOutput;\noutput.color = vec4<f32>(shaderParams.setColor * a, a);\nreturn output;\n}",uM:!1,fM:!1,Kb:0,Qb:0,sM:!1,eM:!1,rM:!0,oM:!1,animated:!1,parameters:[["setColor",0,"color"]]},self.C3_Shaders.hsladjust={njt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nprecision mediump float;\nuniform float huerotate;\nuniform float satadjust;\nuniform float lumadjust;\nvec3 rgb_to_hsl(vec3 color)\n{\nvec3 hsl = vec3(0.0, 0.0, 0.0);\nfloat fmin = min(min(color.r, color.g), color.b);\nfloat fmax = max(max(color.r, color.g), color.b);\nfloat delta = fmax - fmin;\nhsl.z = (fmax + fmin) / 2.0;\nif (delta == 0.0)\n{\nhsl.x = 0.0;\nhsl.y = 0.0;\n}\nelse\n{\nif (hsl.z < 0.5)\nhsl.y = delta / (fmax + fmin);\nelse\nhsl.y = delta / (2.0 - fmax - fmin);\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\nif (color.r == fmax)\nhsl.x = dB - dG;\nelse if (color.g == fmax)\nhsl.x = (1.0 / 3.0) + dR - dB;\nelse if (color.b == fmax)\nhsl.x = (2.0 / 3.0) + dG - dR;\nif (hsl.x < 0.0)\nhsl.x += 1.0;\nelse if (hsl.x > 1.0)\nhsl.x -= 1.0;\n}\nreturn hsl;\n}\nfloat hue_to_rgb(float f1, float f2, float hue)\n{\nif (hue < 0.0)\nhue += 1.0;\nelse if (hue > 1.0)\nhue -= 1.0;\nfloat ret;\nif ((6.0 * hue) < 1.0)\nret = f1 + (f2 - f1) * 6.0 * hue;\nelse if ((2.0 * hue) < 1.0)\nret = f2;\nelse if ((3.0 * hue) < 2.0)\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\nelse\nret = f1;\nreturn ret;\n}\nvec3 hsl_to_rgb(vec3 hsl)\n{\nvec3 rgb = vec3(hsl.z);\nif (hsl.y != 0.0)\n{\nfloat f2;\nif (hsl.z < 0.5)\nf2 = hsl.z * (1.0 + hsl.y);\nelse\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\nfloat f1 = 2.0 * hsl.z - f2;\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\n}\nreturn rgb;\n}\nvoid main(void)\n{\nvec4 front = texture2D(samplerFront, vTex);\nvec3 rgb = rgb_to_hsl(front.rgb) + vec3((huerotate > 0.5 ? huerotate - 1.0 : huerotate), 0, (lumadjust - 1.0) * front.a);\nrgb.y *= satadjust;\nrgb = hsl_to_rgb(rgb);\ngl_FragColor = vec4(rgb, front.a);\n}",ejt:"",tjt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nhuerotate : f32,\nsatadjust : f32,\nlumadjust : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar huerotate : f32 = shaderParams.huerotate;\nif (huerotate > 0.5)\n{\nhuerotate = huerotate - 1.0;\n}\nvar rgb : vec3<f32> = c3_RGBtoHSL(front.rgb) + vec3<f32>(huerotate, 0.0, (shaderParams.lumadjust - 1.0) * front.a);\nrgb.y = rgb.y * shaderParams.satadjust;\nrgb = c3_HSLtoRGB(rgb);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb, front.a);\nreturn output;\n}",uM:!1,fM:!1,Kb:0,Qb:0,sM:!1,eM:!1,rM:!0,oM:!1,animated:!1,parameters:[["huerotate",0,"percent"],["satadjust",0,"percent"],["lumadjust",0,"percent"]]};{let uv=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const cv=self._s;let fv=null,dv="",pv="",mv=[],gv="",yv="",wv="";const Sv=cv.Hn(cv.jmt);cv.sW.tW=class extends cv.YIt{constructor(t){super(t),this.kmt=this.Nc.oN().iY(),this.Mpt=this.Nc.oN().vN(),this.Bqt=0,this.Wqt=0,this.jqt=new Map}zn(){super.zn()}VB(){this.Nc.VB()}qH(t){this.Nc.qH(t,null,null)}Vqt(t,s){return fv&&t===dv&&s===pv||(fv=new RegExp(t,s),dv=t,pv=s),fv.lastIndex=0,fv}Uqt(t,s,i){if(t===gv&&s===yv&&i===wv)return mv;const e=this.Vqt(s,i);return mv=t.match(e),gv=t,yv=s,wv=i,mv}async Hqt(t,s){if(!s.length)return;this.Bqt+=s.length;const i=[];for(const e of s)i.push(t.m4(e));await cv.jh(i,()=>{this.Wqt++}),this.Wqt++,this.Wqt===this.Bqt&&(this.Wqt=0,this.Bqt=0,this.Nc.qH(cv.sW.tW.QB.zqt,null,null))}PZ(){return 0===this.Bqt?1:this.Wqt/this.Bqt}Jqt(t,s){for(const i of s)0===i.hV()&&t.S4(i)}qqt(){return Sv}$qt(t){const s=this.Nc.oN(),i=s.vN(),e=i.tY(),n=e.dN(),r=n.QX(),h=e.Mmt(),o=i.sY(n),a=s.iY(),l=a.sY();if(l.Bmt(t),h)for(let i=0;i<t&&!l.cY();++i)s.hY(r),l.lY(i),n.oY(e,o),s.aY(r);else for(let s=0;s<t&&!l.cY();++s)l.lY(s),n.oY(e,o);return i.fY(),a.fY(),!1}*Xqt(t){const s=this.Nc.oN(),i=s.vN(),e=i.tY(),n=e.dN(),r=n.QX(),h=e.Mmt(),o=i.sY(n),a=s.iY(),l=a.sY();if(l.Bmt(t),h)for(let i=0;i<t&&!l.cY();++i)s.hY(r),l.lY(i),yield*n.nbt(e,o),s.aY(r);else for(let s=0;s<t&&!l.cY();++s)l.lY(s),yield*n.nbt(e,o);return i.fY(),a.fY(),!1}Yqt(){const t=this.Nc.oN(),s=t.vN(),i=s.tY(),e=i.dN(),n=e.QX(),r=i.Mmt(),h=s.sY(e),o=t.iY(),a=o.sY();if(r)for(let s=0;!a.cY();++s)t.hY(n),a.lY(s),e.oY(i,h)||a.n$(),t.aY(n);else for(let t=0;!a.cY();++t)a.lY(t),e.oY(i,h)||a.n$();return s.fY(),o.fY(),!1}*Kqt(){const t=this.Nc.oN(),s=t.vN(),i=s.tY(),e=i.dN(),n=e.QX(),r=i.Mmt(),h=s.sY(e),o=t.iY(),a=o.sY();if(r)for(let s=0;!a.cY();++s)t.hY(n),a.lY(s),(yield*e.nbt(i,h))||a.n$(),t.aY(n);else for(let t=0;!a.cY();++t)a.lY(t),(yield*e.nbt(i,h))||a.n$();return s.fY(),o.fY(),!1}Zqt(t,s,i){const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY();if(c.eY(t),c.Bmt(i),i<s)if(a)for(let t=s;t>=i&&!c.cY();--t)e.hY(o),c.lY(t),h.oY(r,l),e.aY(o);else for(let t=s;t>=i&&!c.cY();--t)c.lY(t),h.oY(r,l);else if(a)for(let t=s;t<=i&&!c.cY();++t)e.hY(o),c.lY(t),h.oY(r,l),e.aY(o);else for(let t=s;t<=i&&!c.cY();++t)c.lY(t),h.oY(r,l);return n.fY(),u.fY(),!1}*Qqt(t,s,i){const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY();if(c.eY(t),c.Bmt(i),i<s)if(a)for(let t=s;t>=i&&!c.cY();--t)e.hY(o),c.lY(t),yield*h.nbt(r,l),e.aY(o);else for(let t=s;t>=i&&!c.cY();--t)c.lY(t),yield*h.nbt(r,l);else if(a)for(let t=s;t<=i&&!c.cY();++t)e.hY(o),c.lY(t),yield*h.nbt(r,l),e.aY(o);else for(let t=s;t<=i&&!c.cY();++t)c.lY(t),yield*h.nbt(r,l);return n.fY(),u.fY(),!1}t$t(t){const s=t.eV(),i=s.iV();if(0===i.length)return!1;const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY(),f=t.MH(),d=Sv.sY();if(cv.xh(d,i),c.Bmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.cY();++s){e.hY(o);const i=d[s];t.eV().kpt(i),f&&i.wSt(),c.lY(s),h.oY(r,l),e.aY(o)}else{s.Fpt(!1);const t=s.Opt();cv.Sh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.cY();++s){const i=d[s];t[0]=i,f&&i.wSt(),c.lY(s),h.oY(r,l)}}return n.fY(),u.fY(),cv.Sh(d),Sv.fY(),!1}*s$t(t){const s=t.eV(),i=s.iV();if(0===i.length)return!1;const e=this.Nc.oN(),n=e.vN(),r=n.tY(),h=r.dN(),o=h.QX(),a=r.Mmt(),l=n.sY(h),u=e.iY(),c=u.sY(),f=t.MH(),d=Sv.sY();if(cv.xh(d,i),c.Bmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.cY();++s){e.hY(o);const i=d[s];t.eV().kpt(i),f&&i.wSt(),c.lY(s),yield*h.nbt(r,l),e.aY(o)}else{s.Fpt(!1);const t=s.Opt();cv.Sh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.cY();++s){const i=d[s];t[0]=i,f&&i.wSt(),c.lY(s),yield*h.nbt(r,l)}}return n.fY(),u.fY(),cv.Sh(d),Sv.fY(),!1}i$t(t,s){const i=t.eV(),e=i.iV();if(0===e.length)return!1;const n=this.Nc.oN(),r=n.vN(),h=n.Ogt(),o=r.tY(),a=o.dN(),l=a.QX(),u=o.Mmt(),c=r.sY(a),f=n.iY(),d=f.sY(),p=t.MH(),m=Sv.sY();cv.Sh(m),d.Bmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.vxt(1,t)]);if(m.sort(uv),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.cY();++s){n.hY(l);const i=m[s][0];t.eV().kpt(i),p&&i.wSt(),d.lY(s),a.oY(o,c),n.aY(l)}else{i.Fpt(!1);const t=i.Opt();cv.Sh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.cY();++s){const i=m[s][0];t[0]=i,p&&i.wSt(),d.lY(s),a.oY(o,c)}}return r.fY(),f.fY(),cv.Sh(m),Sv.fY(),!1}*e$t(t,s){const i=t.eV(),e=i.iV();if(0===e.length)return!1;const n=this.Nc.oN(),r=n.vN(),h=n.Ogt(),o=r.tY(),a=o.dN(),l=a.QX(),u=o.Mmt(),c=r.sY(a),f=n.iY(),d=f.sY(),p=t.MH(),m=Sv.sY();cv.Sh(m),d.Bmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.vxt(1,t)]);if(m.sort(uv),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.cY();++s){n.hY(l);const i=m[s][0];t.eV().kpt(i),p&&i.wSt(),d.lY(s),yield*a.nbt(o,c),n.aY(l)}else{i.Fpt(!1);const t=i.Opt();cv.Sh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.cY();++s){const i=m[s][0];t[0]=i,p&&i.wSt(),d.lY(s),yield*a.nbt(o,c)}}return r.fY(),f.fY(),cv.Sh(m),Sv.fY(),!1}n$t(t,s){let i=this.jqt.get(t);return i||(s?(i={r$t:null,h$t:new Map},this.jqt.set(t,i),i):null)}o$t(t,s,i,e,n){s.cN().vbt(i,s.gN()),e&&t.aY(n)}*a$t(t,s,i,e,n){yield*s.cN().bbt(i,s.gN()),e&&t.aY(n)}}}{const vv=self._s;vv.sW.tW.fEt=class extends vv.Vn{constructor(t){super(),this.ppt=t,this.Nc=t.aW(),this.DCt=t.zj()}SCt(){}zn(){this.ppt=null,this.Nc=null,this.DCt=null}}}{const bv=self._s;bv.sW.tW.Instance=class extends bv.Vn{constructor(t,s){super(),this.fi=t,this.ppt=this.fi.cH(),this.jCt=this.ppt.Kxt(),this.Nc=this.fi.aW()}zn(){this.fi=null,this.ppt=null,this.jCt=null,this.Nc=null}}}{const Mv=self._s,Gv=[];Mv.sW.tW.QB={l$t:()=>!0,z4:()=>!0,t6:()=>!0,qzt:()=>!0,$zt:()=>!0,CN(){return this.Nc.CN()},ivt(){const t=this.Nc.Fgt();return!t.ymt()&&!t.mmt()},u$t(){const t=this.Nc.Ogt().oxt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.kN();return t.set("TriggerOnce_lastTick",i),this.Nc.LJt()||s!==i-1},c$t(t){const s=this.Nc.Ogt().oxt(),i=s.get("Every_lastTime")||0,e=this.Nc.ON();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},wwt(t){const s=this.Nc.oN().tyt(t);return s&&s.wwt()},yVt(){return this.Nc.yVt()},hi:()=>Mv.Ks.hi,Izt:()=>!0,ZB:()=>!0,f$t:()=>!0,YJt:()=>!0,sqt:()=>!0,ZJt:()=>!0,QJt:()=>!0,d$t(t){return!!this.Nc.PB(t)},p$t(t){switch(t){case 0:return"browser"===Mv.Ks.ni;case 1:return"iOS"===Mv.Ks.Zs;case 2:return"Android"===Mv.Ks.Zs;case 8:return"cordova"===Mv.Ks.ni;case 9:return"scirra-arcade"===this.Nc.JW();case 10:return"nwjs"===Mv.Ks.ni;case 13:return"windows-uwp"===this.Nc.JW();default:return!1}},m$t(t,s,i){return this.Vqt(s,i).test(t)},g$t:(t,s,i)=>Mv.compare(t,s,i),y$t:(t,s,i)=>t>=s&&t<=i,w$t:(t,s,i)=>Mv.compare(t.Int(),s,i),S$t:t=>!!t.Int(),v$t(t,s){const i=this.Nc.ON();if(0===t){const t=this.Nc.Ogt().oxt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return Mv.compare(i,t,s)},b$t:t=>isNaN(t),wIt:(t,s,i)=>Mv.rr(Mv.Zn(t),Mv.Zn(i))<=Mv.Zn(s),SIt:(t,s)=>Mv.ar(Mv.Zn(t),Mv.Zn(s)),CTt(t,s,i){let e=Mv.Zn(t),n=Mv.Zn(s),r=Mv.Zn(i);return Mv.ar(r,n)?Mv.ar(e,n)&&!Mv.ar(e,r):!(!Mv.ar(e,n)&&Mv.ar(e,r))},M$t:(t,s)=>"number"==typeof t?0===s:1===s,G$t:t=>!!t,Yyt(t){return t.toLowerCase()===this.Nc.oN().twt()},x$t(t,s,i,e){if(!t)return!1;const n=this.qqt(),r=n.sY(),h=t.eV();Mv.xh(r,h.iV()),h._pt()&&Mv.Sh(h.Dpt());const o=this.Nc.Ogt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.vxt(1,t),e=o.vxt(3,t),Mv.compare(s,i,e)?++a:h.Ept(n)}Mv.wh(r,a),h.Lpt(r);const l=!!r.length;return Mv.Sh(r),n.fY(),t.dbt(),l},T$t(t,s){if(!t)return!1;const i=this.qqt(),e=i.sY(),n=t.eV();Mv.xh(e,n.iV()),n._pt()&&Mv.Sh(n.Dpt());const r=this.Nc.Ogt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.vxt(1,t)?++h:n.Ept(s)}Mv.wh(e,h),n.Lpt(e);const o=!!e.length;return Mv.Sh(e),i.fY(),t.dbt(),o},_$t(t,s,i){if(!t)return!1;const e=t.eV(),n=e.iV();if(0===n.length)return!1;const r=this.Nc.Ogt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.vxt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Vpt(h),t.dbt(),!0},I$t(t,s){if(!t)return!1;const i=t.eV(),e=i.iV();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Vpt(n),t.dbt(),!0},C$t(t){if(!t)return!1;const s=t.eV(),i=s.iV(),e=Math.floor(this.Nc.lB()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Vpt(n),t.dbt(),!0},P$t:t=>!!t&&(!!t.hV()&&(t.eV().Fpt(!0),t.dbt(),!0)),R$t(t,s,i){if(!t)return!1;const e=t.eV(),n=e.iV(),r=this.Nc.dN().Upt(),h=this.Nc.Ogt().sxt();e._pt()?(Mv.xh(Gv,n),e.Tpt(),e.Fpt(!1)):r?(Mv.xh(Gv,e.Dpt()),Mv.Sh(e.Dpt())):(Mv.xh(Gv,e.Opt()),Mv.Sh(e.Opt()));for(let t=0,n=Gv.length;t<n;++t){const n=Gv[t];Mv.xor(n.DB().nJ(s,i),h)?e.Apt(n):e.Ept(n)}return t.dbt(),Mv.xor(!!e.Opt().length,h)},A$t(t){if(!t)return!1;const s=t.S1();let i=null;const e=this.Nc.sFt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.cH().eTt(t)){i=r;break}}else if(r.cH()===t){i=r;break}}if(!i){const s=t.iV();s.length&&(i=s.at(-1))}return!!i&&(t.eV().Vpt(i),t.dbt(),!0)},E$t(t){return this.Nc.i_t()?this.Xqt(t):this.$qt(t)},F$t(){return this.Nc.i_t()?this.Kqt():this.Yqt()},O$t(t,s,i){return this.Nc.i_t()?this.Qqt(t,s,i):this.Zqt(t,s,i)},Ud(t){return this.Nc.i_t()?this.s$t(t):this.t$t(t)},D$t(t,s,i){return this.Nc.i_t()?this.e$t(t,i):this.i$t(t,i)},k$t:t=>!!t&&t.SU(),L$t:t=>!!t&&t.IU(),N$t:t=>!!t&&t.xU(),B$t:t=>!!t&&!t.hV(),W$t:(t,s,i)=>!!t&&Mv.compare(100*t.wF(),s,i),j$t(t){const s=this.Nc.uB();return!!s&&s.Q5(t)},zqt:()=>!0,V$t(){return this.Bqt>0},U$t(t,s){const i=this.Nc.uOt();return!!i&&!!s&&!!i.yct(t,s)}}}{let xv=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},Tv=function(t,s){return t[1]-s[1]};0;const _v=self._s,Iv=[],Cv=[],Pv=_v.Hn(_v.Rect),Rv=_v.Hn(_v.Go),Av=[];_v.sW.tW.yht={H$t(t,s){t.lrt(s)},z$t(t,s){t.Zi()&&"number"!=typeof s&&(s=parseFloat(s)),t.lrt(t.Int()+s)},J$t(t,s){t.Zi()&&t.lrt(t.Int()-s)},q$t(t,s){t.lrt(!!s)},$$t(t){t.lrt(!t.Int())},X$t(t){t.lrt(t.Egt())},Y$t(t){this.Nc.oN().Zgt(t)},K$t(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.aV(t,s,i,e,n,r);if(!h)return;n&&s.lV(h);const o=this.Nc.oN();o.uV(!0),h.cV(),o.uV(!1);const a=new Map;h.sOt(a,t,n);for(const[t,s]of a)t.eV().Npt(s)},Z$t(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.Ezt(t);h&&_v.sW.tW.yht.K$t.call(this,h,s,i,e,n,r)},g1(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.EB();let f=c;if(r){const t=this.Nc.dB().C6(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.kB(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.kB(o),!p))return;Pv.set(s,i,e,n);const m=f.g1(t,Pv,d,p,a,l,u);t.eV().Lpt(m),t.dbt()},Q$t(){const t=this.kmt;t.Emt()&&t.Rmt().n$()},Swt(t,s){const i=this.Nc.oN().tyt(t);i&&(0===s?i.Swt(!1):1===s?i.Swt(!0):i.Swt(!i.wwt()))},tXt(t){this.Nc.jN(t)},sXt(t,s){if(s<0&&(s=0),!t)return;const i=t.eV().iV();for(const t of i)t.jN(s)},iXt(t){if(!t)return;const s=t.eV().iV();for(const t of s)t.AH()},dh(t,s){if(t<0)return;const i=this.Nc.oN().Oyt();return s?i.jIt(t):i.VIt(t),!0},TN(t){return this.Nc.oN().Oyt().UIt(t),!0},eXt(){const t=this.Nc.oN();return t.Oyt().HIt(t.Xyt()),!0},GN(t){this.Nc.oN().GN(t)},async YB(t,s,i,e,n,r){const h=this.Nc.TB();h&&(this.VB(),await h.YB(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Nc.KB(_v.sW.tW.QB.ZB,null))},nXt(t,s){if(t<=0||s<=0)return;this.Nc.vjt(t,s),this.Nc.EB().J3();const i=this.Nc.TB();i&&("off"===i.djt()||this.Nc.Ozt(t,s),i.BR(i.nX(),i.rX(),!0),this.Nc.VB())},rXt(t){const s=this.Nc.TB();s&&"off"!==s.djt()&&(s.Ijt(0!==t?"high":"low"),s.BR(s.nX(),s.rX(),!0))},zet(t){this.Nc.jJt(t)},hXt(){this.Nc.VJt()},oXt(t){this.Nc.UJt(t)},aXt(t){this.Nc.Y_t(t)},lXt(t){},uXt(){for(const t of this.Nc.dB().gB())t.l6()},cXt(t){this.Nc.NJt(0!==t)},fXt(t,s){this.Nc.nB(1/t),this.Nc.sB(1/s)},dXt(t,s){this.Nc.sB(t),this.Nc.nB(s)},pXt(t){this.Nc.ZN(["vsync","unlimited-tick","unlimited-frame"][t])},mXt(t,s){if(!t)return;const i=t.eV().iV(),e=Iv,n=Cv,r=this.Nc.EB(),h=t.S1(),o=t.kMt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.DB();if(!a)continue;let l;l=h?r.lot(s+r.cH().DMt(o)):r.lot(s),e.push([a.kB().ML(),a.LB()]),n.push([r,l])}if(!e.length)return;e.sort(xv),n.sort(Tv);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.NB(e[t][0]),h=e[t][1],o=i.BB();o[h]!==s&&(o[h]=s,s.DB().WB(i,!0),i.jB(s),a=!0)}a&&this.Nc.VB(),_v.Sh(Iv),_v.Sh(Cv)},DW(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.RL().DW(t,s)},gXt(t){if(this.Nc.xw())return;const s=this.Nc.dB();s.wB()||s.SB(t)},yXt(t){if(this.Nc.xw())return;const s=this.Nc.dB();if(s.wB())return;const i=s.C6(t);i&&s.SB(i)},wXt(t){if(this.Nc.xw())return;const s=this.Nc.dB();if(s.wB())return;const i=s.gB(),e=i.indexOf(s.uB());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.SB(n)},SXt(){if(this.Nc.xw())return;const t=this.Nc.dB();t.wB()||(t.SB(t.uB()),this.Nc.oN().nyt())},vXt(t,s){t&&t.yU(s)},bXt(t,s){t&&t.MU(s)},MXt(t,s){t&&t.TU(s)},GXt(t,s){t&&t.vF(s/100)},xXt(t,s){t&&t.CU(s)},TXt(t,s){t&&t.AU(s)},_Xt(t,s){t&&t.EV(_v.Zn(+s))},IXt(t,s,i){t&&(t.KU(!0),t.OV(s),t.kV(i))},CXt(t){t&&t.KU(!1)},PXt(t,s,i){t&&t.Q1(s/100,i/100)},RXt(t,s){t&&t.tG(+s)},AXt(t,s){t&&t.jU(1===s)},EXt(t,s){if(!t)return;Rv.Qo(s),Rv.Yn();const i=t.YU();i.zo(Rv)||(i.ko(Rv),this.VB())},FXt(t,s){t&&t.HU(s)},OXt(t,s){t&&t.LM(s)},DXt(t,s,i){if(!t)return;const e=t._V().Drt(i);if(!e)return;const n=1===s;e.lSt()!==n&&(e.ULt(n),t.vq(),this.Nc.VB())},kXt(t,s,i,e){if(!t)return;const n=t._V(),r=n.Drt(s);if(!r)return;i=Math.floor(i);const h=r.z_().q_(i);h&&("color"===h?(Rv.Qo(e),e=Rv):"percent"===h&&(e/=100),n.Mq(r.ML(),i,e)&&r.lSt()&&this.Nc.VB())},LXt(t,s){t&&t.qU(s)},NXt(t){this.Nc.EB().RV(+t)},BXt(t){this.Nc.EB().EV(_v.Zn(+t))},WXt(t,s){const i=this.Nc.EB(),e=i._V().Drt(s);if(!e)return;const n=1===t;e.lSt()!==n&&(e.ULt(n),i.vq(),this.Nc.VB())},jXt(t,s,i){const e=this.Nc.EB()._V(),n=e.Drt(t);if(!n)return;s=Math.floor(s);const r=n.z_().q_(s);r&&("color"===r?(Rv.Qo(i),i=Rv):"percent"===r&&(i/=100),e.Mq(n.ML(),s,i)&&n.lSt()&&this.Nc.VB())},VXt(t,s){this.Nc.EB().eU(t/100,s/100)},UXt(t){const s=this.Nc.EB();0===t?s.hU():s.oU()},HXt(t){this.Nc.EB().OV(t)},zXt(t){this.Nc.EB().kV(t)},JXt(t,s){const i=this.Nc.EB();i.OV(t),i.kV(s)},qXt(t){if(!t)return;const s=t.HTt();if(!s)return;const i=s.DB();if(!i)return;const e=this.Nc.EB();e.OV(i.$M()),e.kV(i.KM())},XV(t,s,i){const e=this.Nc.EB();try{e.XV(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},KV(t,s,i){if(!t)return;const e=this.Nc.EB();try{e.KV(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},QV(t){t&&this.Nc.EB().QV(t)},sU(){this.Nc.EB().sU()},async $Xt(t){const s=this.Nc.uB();if(!s||!t||this.Nc.xw())return;const i=t.S1()?t.MV():[t];await this.Hqt(s,i)},async XXt(t){await _v.sW.tW.yht.$Xt.call(this,this.Nc.Ezt(t))},YXt(t){const s=this.Nc.uB();if(!s||!t)return;const i=t.S1()?t.MV():[t];this.Jqt(s,i)},KXt(t){_v.sW.tW.yht.YXt.call(this,this.Nc.Ezt(t))},ZXt(){const t=this.Nc.uB();if(!t)return;const s=t.c4();this.Jqt(t,s)},async QXt(t){const s=this.Nc.uB();t&&s&&!this.Nc.xw()&&await this.Hqt(s,t.a4())},async tYt(t){const s=this.Nc.uB(),i=this.Nc.dB().C6(t);i&&s&&!this.Nc.xw()&&await this.Hqt(s,i.a4())},MN(t){const s=this.Mpt.SN();if(s)switch(s.bN()){case 1:"number"==typeof t&&s.MN(t);break;case 2:"string"==typeof t&&s.MN(t);break;case 3:s.MN(t)}},sYt(t,s,i){const e=this.n$t(t.toLowerCase(),!0),n=e.h$t,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=_v.Bh(n.values())||e.r$t;h&&0!==h.yN()!=(0!==i.yN())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},iYt(t,s){const i=this.n$t(t.toLowerCase(),!0);i.r$t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=_v.Bh(i.h$t.values())||i.r$t;e&&0!==e.yN()!=(0!==s.yN())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.r$t=s},eYt(t,s,i){const e=this.Nc,n=e.i_t()?Av:null;i=Math.floor(i);const r=this.n$t(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.h$t.get(s.toLowerCase());if(!h){if(!r.r$t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.r$t,i=0}if(!h._u())return n;if(0!==h.yN())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.oN(),a=o.dN(),l=a.fN(),u=l.length>0;u&&(h.gN()?o.hY(l):o.Eyt(l));const c=[],f=o.Twt(a);if(f){const t=f.Iwt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Int())}const d=h.Iwt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Egt());return e.i_t()?this.a$t(o,h,c,u,l):this.o$t(o,h,c,u,l)}}}{const Ev=self._s;Ev.sW.tW.wht={nYt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},C:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.lB()*t:this.Nc.lB()*(s-t)+t},vMt(...t){return t[Math.floor(this.Nc.lB()*t.length)]},rYt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=Ev.Yn(Math.floor(t),0,s.length-1)]),hYt:()=>Math.PI,oYt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),aYt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(Ev.Zn(t)),cos:t=>Math.cos(Ev.Zn(t)),tan:t=>Math.tan(Ev.Zn(t)),asin:t=>Ev.Qn(Math.asin(t)),acos:t=>Ev.Qn(Math.acos(t)),atan:t=>Ev.Qn(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Yn:(t,s,i)=>Ev.Yn(t,s,i),vt:(t,s,i,e)=>Ev.ir(t,s,i,e),angle:(t,s,i,e)=>Ev.Qn(Ev.nr(t,s,i,e)),_t:(t,s,i)=>Ev._t(t,s,i),pr:(t,s,i)=>Ev.pr(t,s,i),gr:(t,s,i,e)=>Ev.gr(t,s,i,e),yr:(t,s,i,e,n)=>Ev.yr(t,s,i,e,n),wr:(t,s,i)=>Ev.wr(t,s,i),lYt:(t,s)=>Ev.Qn(Ev.rr(Ev.Zn(t),Ev.Zn(s))),uYt:(t,s,i)=>Ev.Qn(Ev.lr(Ev.Zn(t),Ev.Zn(s),i)),cYt:(t,s,i)=>Ev.Qn(Ev.hr(Ev.Zn(t),Ev.Zn(s),Ev.Zn(i))),fYt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,dYt:(t,s)=>(t|=0)^1<<s,pYt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,mYt:()=>"\n",gYt:t=>"string"==typeof t?t.toUpperCase():"",yYt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",wYt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},SYt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Ev.Yi(s),"i")):-1,vYt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Ev.Yi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(Ev.Yi(s),"gi"),i):"string"==typeof t?t:"",bYt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},MYt(t,s,i){const e=this.Vqt(s,i);return t?t.search(e):-1},GYt(t,s,i,e){const n=this.Vqt(s,i);return t?t.replace(n,e):""},xYt(t,s,i){const e=this.Uqt(t.toString(),s,i);return e?e.length:0},TYt(t,s,i,e){e=Math.floor(e);const n=this.Uqt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},_Yt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},IYt:t=>encodeURIComponent(t),CYt:t=>decodeURIComponent(t),PN(){return this.Nc.a7()},PYt(){return this.Nc.l7()},RYt(){return this.Nc.WN()},AYt(){return(Date.now()-this.Nc.CJt())/1e3},EYt:()=>Date.now(),time(){return this.Nc.ON()},FYt(){return this.Nc.kN()},OYt(){return this.Nc.AJt()},VN(){return this.Nc.UN()},DYt(){return this.Nc.qN()},kYt(){return this.Nc.XN()},LYt(){return this.Nc.TB().oj()},NYt(){return this.Nc.TB().lj()},BYt(){return this.Nc.qL()},WYt(){return this.Nc.XL()},jYt(){return this.Nc.qL()},VYt(){return this.Nc.XL()},UYt(){return this.Nc.EB().DV()},HYt(){return this.Nc.EB().LV()},zYt(){return this.Nc.EB().Pc()},JYt(){return this.Nc.EB().AV()},qYt(){return Ev.Qn(this.Nc.EB().FV())},$Yt(){return this.Nc.EB().Vg()},XYt(){return this.Nc.EB().Zg()},YYt(){return 100*this.Nc.EB().J5()},KYt(){return 100*this.Nc.EB().q5()},ZYt(t){const s=this.Nc.EB().kB(t);return s?s.z1().Za():0},QYt(t){const s=this.Nc.EB().kB(t);return s?s.z1().Qa():0},tKt(t){const s=this.Nc.EB().kB(t);return s?s.z1().tl():0},sKt(t){const s=this.Nc.EB().kB(t);return s?s.z1().sl():0},iKt(t){const s=this.Nc.EB().kB(t);return s?s.z1().width():0},eKt(t){const s=this.Nc.EB().kB(t);return s?s.z1().height():0},nKt(t){const s=this.Nc.EB().kB(t);if(s){const t=s.z1();return(t.Za()+t.tl())/2}return 0},rKt(t){const s=this.Nc.EB().kB(t);if(s){const t=s.z1();return(t.Qa()+t.sl())/2}return 0},hKt(t,s,i){const e=this.Nc.EB().kB(t);return e?e.sH(s,i)[0]:0},oKt(t,s,i){const e=this.Nc.EB().kB(t);return e?e.sH(s,i)[1]:0},aKt(t,s,i){const e=this.Nc.EB().kB(t);return e?e.eH(s,i)[0]:0},lKt(t,s,i){const e=this.Nc.EB().kB(t);return e?e.eH(s,i)[1]:0},uKt(t,s,i,e){const n=this.Nc.EB(),r=n.kB(t),h=n.kB(s);if(!r||!h||r===h)return i;const[o,a]=r.eH(i,e);return h.sH(o,a)[0]},cKt(t,s,i,e){const n=this.Nc.EB(),r=n.kB(t),h=n.kB(s);if(!r||!h||r===h)return e;const[o,a]=r.eH(i,e);return h.sH(o,a)[1]},fKt(t){const s=this.Nc.EB().kB(t);return s?s.PU():0},dKt(t){const s=this.Nc.EB().kB(t);return s?Ev.Qn(s.FU()):0},pKt(t){const s=this.Nc.EB().kB(t);return s?100*s.wF():0},mKt(t){const s=this.Nc.EB().kB(t);return s?s.EU():0},gKt(t){const s=this.Nc.EB().kB(t);return s?s.DV():0},yKt(t){const s=this.Nc.EB().kB(t);return s?s.LV():0},wKt(t){const s=this.Nc.EB().kB(t);return s?100*s.kU():0},SKt(t){const s=this.Nc.EB().kB(t);return s?100*s.BU():0},vKt(t){const s=this.Nc.EB().kB(t);return s?s.QM():0},bKt(t){const s=this.Nc.EB().kB(t);return s?s.ML():-1},MKt(){const t=this.Nc.TB();return t?t.Zjt():""},GKt(t){const s=this.kmt;if(!s.Emt())return 0;if(t){const i=s.Omt(t);return i?i.ML():0}return s.Rmt().ML()},xKt(){return this.Nc.HJt()},TKt(t,s,...i){const e=this.n$t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.h$t.get(s.toLowerCase());if(!n){if(!e.r$t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.r$t}const r=n.yN(),h=n.lN();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n._u())return h;const o=this.Nc.oN(),a=o.dN().fN(),l=a.length>0;l&&(n.gN()?o.hY(a):o.Eyt(a));const u=n.Iwt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].Egt());const c=n.cN(),f=c.mN(c.fN(),n.gN(),r,h,...i);return l&&o.aY(a),f},_Kt(){return this.Nc.IL().hB()},IKt(){return this.PZ()},qI(){return this.Nc.Ojt()?"webgpu":"webgl"},CKt(){return this.Nc.Ojt()?this.Nc.Ojt().Djt():this.Nc.Fjt().CO()},PKt(){let t=this.Nc.mM().Hb();return Math.round(100*t/1048576)/100},RKt:(t,s,i)=>Ev._r(t,s,i),AKt:(t,s,i)=>Ev.Cr(t/100,s/100,i/100),EKt:(t,s,i,e)=>Ev.Ir(t/100,s/100,i/100,e/100),FKt:(t,s,i)=>Ev.Cr(t/255,s/255,i/255),OKt:(t,s,i,e)=>Ev.Ir(t/255,s/255,i/255,e/255),DKt(){return this.Nc.OL()},kKt(){return this.Nc.kL()},LKt(){return this.Nc.NL()},NKt(){return this.Nc.WL()},BKt(){return this.Nc.dN().K5().Pc()},WKt(){return this.Nc.dN().Gvt()}}}{const Fv=self._s;Fv.sW.Nrt=class extends Fv.YIt{constructor(t){super(t)}zn(){super.zn()}}}{const Ov=self._s,Dv=self.Ls,kv=[];Ov.sW.Nrt.fEt=class extends Ov.OCt{constructor(t){super(t),this.rEt=t.UEt()}zn(){Ov.Sh(this.rEt),super.zn()}SCt(){for(const t of this.rEt)t.hAt(this.Nc)}d4(t){const s={nx:this.Nc.YL()};return Promise.all(this.rEt.map(i=>i.oAt(t,s)))}v4(){for(const t of this.rEt)t.aAt()}y4(){this.jKt()}jKt(){for(const t of this.ppt.sV())t.sq().VKt()}dxt(t){Ov.sW.Nrt.CIt(this,t)}Zxt(t){kv.push({NCt:null,UKt:!1,qj:[]})}HKt(t,s,i){const e=kv.at(-1);e.NCt=t,e.UKt=i,e.qj.push(s)}Qxt(t){const s=kv.pop(),i=s.NCt,e=s.UKt;if(!i)return;const n=new Map;for(const t of s.qj)t.sOt(n,i,e);for(const[t,s]of n)t.eV().Npt(s)}zKt(t){const s=this.cH().$Et(t),i=this.aW();return s.lAt(0).jq().YY(i.mM(),{nx:i.YL()}).then(()=>this.jKt()),s}JKt(t){for(const s of this.ppt.sV())s.sq().qKt(t);this.cH().XEt(t)}$Kt(t,s){const i=this.ppt.JEt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.dAt(s);e<0&&(e+=i.Fq()+1);const n=Ov.eAt.rAt(this.aW());i.uAt(n,e);const r=this.aW();n.jq().YY(r.mM(),{nx:r.YL()}).then(()=>this.jKt());for(const t of this.ppt.sV())t.sq().XKt();return n}YKt(t,s){const i=this.ppt.JEt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Fq())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.dAt(s);e<0&&(e+=i.Fq()),i.cAt(e);for(const t of this.ppt.sV())t.sq().XKt()}vCt(){return self.KKt}};const Lv=new WeakMap;self.KKt=class extends self.nV{constructor(t){super(t),Lv.set(this,t.Kxt())}ZKt(t){Dv.le(t);const s=Lv.get(this).cH().JEt(t);return s?s.pAt():null}QKt(){return Lv.get(this).cH().zEt().map(t=>t.pAt())}tZt(t){return Dv.le(t),Lv.get(this).zKt(t).pAt()}sZt(t){Dv.le(t),Lv.get(this).JKt(t)}iZt(t,s){if(Dv.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Lv.get(this).$Kt(t,s).kq()}eZt(t,s){if(Dv.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Lv.get(this).YKt(t,s)}}}{const Nv=self._s,Bv=self.Ls,Wv=0,jv=1,Vv=2,Uv=3,Hv=Nv.Hn(Nv.Rect),zv=Nv.Hn(Nv.Cl),Jv=Nv.Hn(Nv.Ca),qv=1,$v=2,Xv=4;Nv.sW.Nrt.Instance=class extends Nv.dPt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[Wv],e=s[jv],n=s[Vv],r=s[Uv]),this.nZt=this.ppt.JEt(e)||this.ppt.UEt()[0],this.rZt=Nv.Yn(n,0,this.nZt.Fq()-1),this.hZt=this.nZt.lAt(this.rZt);const h=this.hZt.jq();this.oZt=h.xT(),this.aZt=h.gA(),this.lZt=h.TPt(),this.yPt(),t.QFt($v,!0),t.QFt(qv,this.nZt.xq()>=0),this.uZt=Math.abs(this.nZt.xq()),this.cZt=this.nZt.Rq(),this.fZt=Nv.Hn(Nv.Qf),this.dZt=0,this.pZt=0,this.mZt="",this.gZt=-1,this.yZt="",this.wZt=0;const o=this.DB();this.SZt=o.Wz(),o.yU(i),o.eJ(r),o.Cz(this.hZt.Iz()),o.Az(this.hZt.Rz()),o.nLt(this.hZt.Kq()),o.Mz(),1===this.ppt.HEt()&&1===this.ppt.UEt()[0].Fq()||0===this.uZt||this.nPt()}zn(){this.nZt=null,this.hZt=null,this.oZt=null,this.fZt=null,super.zn()}bPt(){return this.hZt.jq()}yet(){return!0}nQ(){this.oZt=null}vPt(){this.VKt()}zG(t){const s=this.oZt;if(null===s)return;t.GF(s);const i=this.DB();i.zJ()?this.vZt(i,t):this.bZt(i,t)}bZt(t,s){let i=this.SZt;this.Nc.ZL()&&(i=t.Ykt(i)),s.DF(i,this.lZt)}vZt(t,s){const i=t.mLt();if(t.yLt()){t.Lz(Hv,zv,!1);let s=zv;this.Nc.ZL()&&(s=t.Ykt(s)),i.BG(t.JJ(),s,this.lZt),t.gLt(!1)}i.zG(s,t.Dz())}MZt(){return this.fZt.zs()}GZt(){return this.fi.tOt($v)}xZt(t){this.fi.QFt($v,t)}TZt(){return this.fi.tOt(qv)}_Zt(t){this.fi.QFt(qv,t)}IZt(){return this.fi.tOt(Xv)}CZt(t){this.fi.QFt(Xv,t)}u7(){this.yZt&&this.PZt(),this.gZt>=0&&this.RZt();const t=this.uZt;if(!this.GZt()||0===t)return void this.VCt();const s=this.Nc.RN(this.fi);this.fZt.Bu(s);const i=this.MZt(),e=this.hZt,n=e.Vq()/t;if(i<this.dZt+n)return;const r=this.nZt,h=this.cZt,o=r.Fq(),a=r.Cq(),l=r._q(),u=r.Eq();this.TZt()?this.rZt++:this.rZt--,this.dZt+=n,this.rZt>=o&&(u?(this._Zt(!1),this.rZt=o-2):l?this.rZt=h:(this.pZt++,this.pZt>=a?this.AZt(!1):this.rZt=h)),this.rZt<0&&(u?(this.rZt=1,this._Zt(!0),l||(this.pZt++,this.pZt>=a&&this.AZt(!0))):l?this.rZt=h:(this.pZt++,this.pZt>=a?this.AZt(!0):this.rZt=h)),this.rZt=Nv.Yn(this.rZt,0,o-1);const c=r.lAt(this.rZt);i>this.dZt+c.Vq()/t&&(this.dZt=i),this.EZt(e,c)}AZt(t){this.rZt=t?0:this.nZt.Fq()-1,this.xZt(!1),this.mZt=this.nZt.Pc(),this.CZt(!0),this.LCt("animationend",!1,{animationName:this.mZt}),this.qH(Nv.sW.Nrt.QB.FZt),this.qH(Nv.sW.Nrt.QB.OZt),this.CZt(!1),this.pZt=0}EZt(t,s,i){if(t===s)return;const e=this.DB(),n=t.jq(),r=s.jq(),h=n.Vg(),o=n.Zg(),a=r.Vg(),l=r.Zg();i&&i.Brt?i.Brt(e,h,o,a,l):(h!==a&&e.Xg(e.Vg()*(a/h)),o!==l&&e.Ug(e.Zg()*(l/o))),e.Cz(s.Iz()),e.Az(s.Rz()),e.nLt(s.Kq()),e.Mz(),this.hZt=s,this.oZt=r.xT(),this.aZt=r.gA(),this.lZt=r.TPt();const u=this.C$().Ert();for(let i=0,e=u.length;i<e;++i)u[i].uRt(t,s);this.LCt("framechange",!1,{animationName:this.nZt.Pc(),DZt:this.rZt}),this.qH(Nv.sW.Nrt.QB.kZt),this.Nc.VB()}LZt(t){this.xZt(!0),this.dZt=this.MZt(),1===t&&0!==this.rZt&&(this.gZt=0,this.IZt()||this.RZt()),this.nPt()}NZt(t,s,i){this.yZt=t,this.wZt=s,this.nPt(),!i&&this.IZt()||this.PZt()}BZt(){return this.nZt}WZt(){return this.yZt?this.yZt:this.nZt.Pc()}qKt(t){Nv.Ke(t,this.WZt())&&this.NZt(this.ppt.YEt().Pc(),1,!0)}jZt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.ppt.JEt(this.WZt());if(!s)return;if(-1===(t=s.fAt(t)))return}isFinite(t)&&(this.gZt=t,this.IZt()||this.RZt())}XKt(){if(this.yZt||-1!==this.gZt)return;const t=this.hZt,s=this.nZt.lAt(Nv.Yn(this.rZt,0,this.nZt.Fq()-1));t!==s&&this.EZt(t,s),this.nZt.Fq()>1&&this.uZt>0&&this.nPt()}VZt(){return this.rZt}UZt(){return this.hZt.s$()}HZt(t){this.uZt=Math.abs(t),this._Zt(t>=0),this.uZt>0&&this.nPt()}zZt(){return this.TZt()?this.uZt:-this.uZt}JZt(t){"string"==typeof t&&-1===(t=this.nZt.fAt(t))||(t=Nv.Yn(Math.floor(t),0,this.nZt.Fq()-1),this.cZt=t)}qZt(){return this.cZt}PZt(t){const s=this.hZt,i=this.ppt.JEt(this.yZt);if(this.yZt="",!i)return;if(i===this.nZt&&this.GZt())return;this.nZt=i,this._Zt(i.xq()>=0),this.uZt=Math.abs(i.xq()),this.cZt=i.Rq(),this.rZt=Nv.Yn(this.rZt,0,this.nZt.Fq()-1),1===this.wZt&&(this.rZt=0),this.xZt(!0),this.dZt=this.MZt();const e=this.nZt.lAt(this.rZt);this.EZt(s,e,t)}RZt(t){const s=this.hZt,i=this.rZt;if(this.rZt=Nv.Yn(Math.floor(this.gZt),0,this.nZt.Fq()-1),this.gZt=-1,!t&&i===this.rZt)return;const e=this.nZt.lAt(this.rZt);this.EZt(s,e),this.dZt=this.MZt()}VKt(){const t=this.hZt.jq();this.oZt=t.xT(),this.aZt=t.gA(),this.lZt=t.TPt(),this.DB().gLt(!0)}xT(){return this.oZt}gA(){return this.aZt}TPt(){return this.lZt}Hq(){return this.hZt.Hq()}dTt(t){const s=this.hZt,i=this.DB();let e=null;if("string"==typeof t)e=s.Xq(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.$q(t-1)}let n=i.Dz();if(!e)return[i.$M(),i.KM(),n];if(Jv.m(e.TAt()),i.zJ()){const[t,s,e]=i.JJ().ZG(Jv.Fa(),Jv.Da());Jv.set(t,s),n+=e}return Jv.offset(-s.Iz(),-s.Rz()),Jv.scale(i.Vg(),i.Zg()),Jv.rotate(i.FV()),Jv.offset(i.$M(),i.KM()),[Jv.Fa(),Jv.Da(),n]}$Zt(){return this.DB().lLt().pu()}XZt(t){t=Math.floor(t);const s=this.DB(),i=s.lLt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.du();return[n[2*t+0]+s.$M(),n[2*t+1]+s.KM()]}aPt(){const t=Nv.sW.Nrt.yht,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.nZt.Pc(),YZt:s=>this.uPt(t.KZt,s,0)},{name:s+".current-frame",value:this.rZt,YZt:s=>this.uPt(t.ZZt,s)},{name:s+".is-playing",value:this.GZt(),YZt:s=>s?this.uPt(t.QZt,0):this.uPt(t.tQt)},{name:s+".speed",value:this.uZt,YZt:s=>this.uPt(t.sQt,s)},{name:s+".repeats",value:this.pZt,YZt:t=>this.pZt=t}]}]}oG(){const t={a:this.nZt.I1()};0!==this.dZt&&(t.fs=this.dZt);const s=this.MZt();0!==s&&(t.at=s),0!==this.rZt&&(t.f=this.rZt),0!==this.uZt&&(t.cas=this.uZt),1!==this.pZt&&(t.ar=this.pZt),0!==this.cZt&&(t.rt=this.cZt),this.GZt()||(t.ap=this.GZt()),this.TZt()||(t.af=this.TZt());const i=this.DB();return i.iJ()&&(t.ce=i.iJ()),t}aG(t){const s=this.cH().qEt(t.a);s&&(this.nZt=s),this.dZt=t.hasOwnProperty("fs")?t.fs:0,this.fZt.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.rZt=Nv.Yn(i,0,this.nZt.Fq()-1),this.uZt=t.hasOwnProperty("cas")?t.cas:0,this.pZt=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.cZt=Nv.Yn(e,0,this.nZt.Fq()-1),this.xZt(!t.hasOwnProperty("ap")||!!t.ap),this._Zt(!t.hasOwnProperty("af")||!!t.af);const n=this.nZt.lAt(this.rZt);this.hZt=n,this.VKt();const r=this.DB();r.Cz(n.Iz()),r.Az(n.Rz()),r.nLt(n.Kq()),r.eJ(!!t.ce),this.GZt()&&this.nPt()}tot(t){const s=this.DB();switch(t){case Uv:return s.iJ();case Vv:return Nv.Yn(this.rZt,0,this.nZt.Fq()-1);case jv:return this.nZt.Pc()}}hot(t,s,i){const e=this.DB();switch(t){case Uv:e.eJ(!!s);break;case Vv:{this.xZt(!1);const t=this.nZt.Fq()-1,e=s=Nv.Yn(s,0,t),n=this.nZt.lAt(this.rZt),r=this.nZt.lAt(e);this.EZt(n,r,i),this.rZt=Nv.Yn(e,0,t);break}case jv:this.yZt=s,this.PZt(i),this.nZt.Fq()>1&&this.nZt.xq()>0?this.nPt():this.VCt()}}vCt(){return self.iQt}};const Yv=new WeakMap,Kv=new Map([["current-frame",0],["beginning",1]]);self.iQt=class extends self.YJ{constructor(){super(),Yv.set(this,self.uH.pH().sq())}Uq(){return Yv.get(this).Hq()}zq(t){return this.Jq(t)[0]}qq(t){return this.Jq(t)[1]}eQt(t){return this.Jq(t)[2]}Jq(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return Yv.get(this).dTt(t)}Yq(){return Yv.get(this).$Zt()}Zq(t){return Bv.re(t),Yv.get(this).XZt(t)[0]}t$(t){return Bv.re(t),Yv.get(this).XZt(t)[1]}Qq(t){return Bv.re(t),Yv.get(this).XZt(t)}nQt(){Yv.get(this).xZt(!1)}rQt(t="current-frame"){Bv.le(t);const s=Kv.get(t);if(void 0===s)throw new Error("invalid mode");Yv.get(this).LZt(s)}hQt(t,s="beginning"){Bv.le(t),Bv.le(s);const i=Kv.get(s);if(void 0===i)throw new Error("invalid mode");const e=Yv.get(this);if(!e.cH().JEt(t))throw new Error(`animation name "${t}" does not exist`);e.NZt(t,i)}ZKt(t){Bv.le(t);const s=Yv.get(this).cH().JEt(t);return s?s.pAt():null}get animation(){return Yv.get(this).BZt().pAt()}get animationName(){return Yv.get(this).WZt()}set DZt(t){Bv.re(t),Yv.get(this).jZt(t)}get DZt(){return Yv.get(this).VZt()}set oQt(t){Bv.le(t),Yv.get(this).jZt(t)}get oQt(){return Yv.get(this).UZt()}set aQt(t){Bv.re(t),Yv.get(this).HZt(t)}get aQt(){return Yv.get(this).zZt()}set lQt(t){Bv.re(t),Yv.get(this).JZt(t)}get lQt(){return Yv.get(this).qZt()}get imageWidth(){return Yv.get(this).bPt().Vg()}get imageHeight(){return Yv.get(this).bPt().Zg()}uQt(){const t=Yv.get(this).bPt();return[t.Vg(),t.Zg()]}async cQt(t){Bv.Ne(t,Blob);const s=Yv.get(this),i=s.aW(),e=s.bPt(),n=Nv.Hn(Nv.PRt);if(n.URt(i,t),await n.YY(i.mM(),{nx:i.YL()}),s.Jn())return void n.zn();e.HRt(n);const r=s.Kxt();r.jKt(),r.cH().wf().dispatchEvent(new Nv.Event("animationframeimagechange")),i.VB()}fQt(t,s){Bv.le(s),Yv.get(this).DB().Jkt(!!t,s)}}}{const Zv=self._s;Zv.sW.Nrt.QB={dQt(t){return Zv.Ke(this.WZt(),t)},pQt(t,s){return Zv.compare(this.rZt,t,s)},mQt(t,s){if("string"!=typeof s)return!1;const i=this.hZt.s$();return Zv.compare(i.toLowerCase(),t,s.toLowerCase())},gQt(t,s){return Zv.compare(this.zZt(),t,s)},OZt(t){return Zv.Ke(this.mZt,t)},FZt:()=>!0,kZt:()=>!0,yQt(){return this.DB().Vg()<0},wQt(){return this.DB().Zg()<0},SQt:()=>!0,vQt:()=>!0,iJ(){return this.DB().iJ()}}}{const Qv=self._s;Qv.sW.Nrt.yht={bQt(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.dTt(i),o=this.Nc.aV(t,s,r,h,e,n);if(!o)return;if(e&&s.lV(o),t.zj().Tj()){const t=o.DB();t.EV(this.DB().FV()),t.Mz()}const a=this.Nc.oN();a.uV(!0),o.cV(),a.uV(!1),t!==this.Nc.kgt().cH()&&this.jCt.HKt(t,o,e)},tQt(){this.xZt(!1)},QZt(t){this.LZt(t)},KZt(t,s){this.NZt(t,s)},ZZt(t){this.jZt(t)},sQt(t){this.HZt(t)},MQt(t){this.JZt(t)},GQt(t,s){try{0===t?this.Kxt().zKt(s):this.Kxt().JKt(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},xQt(t,s,i){try{0===t?this.Kxt().$Kt(s,i):this.Kxt().YKt(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},TQt(t){const s=this.DB(),i=s.Vg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Xg(e),s.Mz())},_Qt(t){const s=this.DB(),i=s.Zg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Ug(e),s.Mz())},RV(t){const s=this.hZt.jq(),i=this.DB(),e=i.Vg()<0?-1:1,n=i.Zg()<0?-1:1,r=s.Vg()*t*e,h=s.Zg()*t*n;i.Vg()===r&&i.Zg()===h||(i.BR(r,h),i.Mz())},async IQt(t,s,i){const e=this.hZt.jq(),n=this.DB(),r=this.Nc,h=this.jCt;if(e.GZ()===t)return 0===s&&(n.BR(e.Vg(),e.Zg()),n.Mz()),void this.qH(Qv.sW.Nrt.QB.SQt);const o=Qv.Hn(Qv.PRt);try{if(await o.VRt(r,t),!o.KZ())throw new Error("image failed to load");if(this.Jn())return void o.zn();await o.YY(r.mM(),{nx:r.YL()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.qH(Qv.sW.Nrt.QB.vQt))}this.Jn()?o.zn():(e.HRt(o),h.jKt(),h.cH().wf().dispatchEvent(new Qv.Event("animationframeimagechange")),r.VB(),0===s&&(n.BR(e.Vg(),e.Zg()),n.Mz()),await this.KB(Qv.sW.Nrt.QB.SQt))},CQt(t){this.DB().eJ(t)},Jkt(t,s){this.DB().Jkt(0===t,s)},PQt(t){this.DB().LM(t),this.Nc.VB()}}}self._s.sW.Nrt.wht={RQt(){return this.VZt()},AQt(){return this.UZt()},EQt(){return this.nZt.Fq()},FQt(){return this.nZt.Pc()},OQt(){return this.zZt()},DQt(){return this.nZt.xq()},kQt(t){return this.dTt(t)[0]},LQt(t){return this.dTt(t)[1]},NQt(t){return this.dTt(t)[2]},BQt(){return this.Hq()},WQt(){return this.bPt().Vg()},jQt(){return this.bPt().Zg()},VQt(t){return this.XZt(t)[0]},UQt(t){return this.XZt(t)[1]},HQt(){return this.$Zt()}};{const tb=self._s;tb.sW.zQt=class extends tb.YIt{constructor(t){super(t)}zn(){super.zn()}}}{const sb=self._s;sb.sW.zQt.fEt=class extends sb.OCt{constructor(t){super(t)}zn(){super.zn()}SCt(){this.jq().oW(this.Nc)}d4(t){return this.jq().YY(t,{nx:this.Nc.YL()})}v4(){this.jq().oR()}}}{let ib=function(t){return Pb.get(t).JQt()};0;const eb=self._s,nb=self.Ls,rb=0,hb=1,ob=2,ab=3,lb=4,ub=5,cb=6,fb=7,db=8,pb=9,mb=10,gb=11,yb=12,wb=13,Sb=14,vb=15,bb=16,Mb=17,Gb=18,xb=19,Tb=20,_b=0,Ib=1,Cb=eb.Hn(eb.Rect);eb.sW.zQt.Instance=class extends eb.dPt{constructor(t,s){super(t),this.qQt=!0;const i=eb.Hn(self.$Qt);this.XQt=i,i.YQt=()=>this.KQt(),this.ZQt=null,this.QQt=(t,s,i,e,n,r)=>this.t0t(t,s,i,e,n,r),this.s0t=t=>this.i0t(t),this.e0t=!0;let e=!0;s&&(i.n0t(s[rb]),i.r0t(eb.Zn(s[hb])),i.h0t(s[ob]?"one-shot":"continuous-spray"),this.o0t(this.Nc.ZX(s[ab])),e=s[lb],i.a0t(s[ub]),i.l0t(s[cb]),i.u0t(s[fb]/100),i.c0t(s[db]),i.f0t(s[pb]),i.d0t(s[mb]),i.p0t(s[gb]),i.m0t(s[yb]),i.g0t(s[wb]),i.y0t(s[Sb]),i.w0t(s[vb]),i.S0t(s[bb]),i.v0t(s[Mb]),i.b0t(s[Gb]),i.M0t(s[xb]),i.G0t(s[Tb])),this.x0t(),this.ZQt&&(this.e0t=!1),"one-shot"===i.T0t()?i._0t():i.I0t(!0);const n=this.DB();n.yU(e),n.Zkt(!0),this.fi.wf().addEventListener("bboxchange",()=>{n.Kkt(this.XQt.Nz())}),this.aW().mM().tv()&&n.Vkt(),this.c8=t=>this.f8(t),this.aW().wf().addEventListener("afterload",this.c8),this.nPt()}zn(){this.aW().wf().removeEventListener("afterload",this.c8),this.c8=null,this.XQt.zn(),this.XQt=null,this.QQt=null,this.s0t=null,super.zn()}JQt(){return this.XQt}C0t(t){this.XQt.n0t(t),"one-shot"===this.XQt.T0t()&&this.qQt&&this.XQt.P0t(t)}o0t(t){t===this.cH()&&(t=null),t!==this.ZQt&&(this.ZQt=t,this.XQt.R0t=t?t=>this.A0t(t):null,this.ZQt||(this.e0t=!0))}x0t(){const t=this.XQt,s=this.DB();t.E0t(s.wF()),t.cXt(this.Nc.ZL()),t.F0t(s.$M()),t.O0t(s.KM()),t.D0t(s.FV()),t.k0t(Math.abs(s.fkt()))}KQt(){this.Nc.yH(this.fi)}zG(t){if(!this.e0t)return;const s=this.ppt.jq(),i=s.xT();if(!i)return;const e=this.DB(),n=e.kB(),r=Cb;this.Nc.TB().tVt()?r.set(-1/0,-1/0,1/0,1/0):n.l2()?n.q3(e.Dz(),r):n.q1(e.Dz(),r),t.GF(i);const h=n.X1(e.Dz());this.XQt.L0t(n.lH()*h),this.XQt.zG(t,s.TPt(),r,n.l2())}oG(){const t=this.XQt;return{r:t.N0t(),sc:t.B0t(),st:t.T0t(),isp:t.W0t(),isz:t.j0t(),io:t.V0t(),gr:t.U0t(),xr:t.H0t(),yr:t.z0t(),spr:t.J0t(),szr:t.q0t(),grnd:t.$0t(),acc:t.X0t(),g:t.Y0t(),lar:t.K0t(),lsr:t.Z0t(),lor:t.Q0t(),dm:t.t1t(),to:t.s1t(),s:t.i1t(),pcc:t.e1t(),ft:this.qQt,soc:this.ZQt?this.ZQt.I1():null,p:t.n1t().map(t=>t.toJSON())}}aG(t,s){const i=this.XQt;if(i.n0t(t.r),i.r0t(t.sc),i.h0t(t.st),i.a0t(t.isp),i.l0t(t.isz),i.u0t(t.io),i.c0t(t.gr),i.f0t(t.xr),i.d0t(t.yr),i.p0t(t.spr),i.m0t(t.szr),i.g0t(t.grnd),i.y0t(t.acc),i.w0t(t.g),i.S0t(t.lar),i.v0t(t.lsr),i.b0t(t.lor),i.M0t(t.dm),i.G0t(t.to),i.I0t(t.s),i.r1t(t.pcc),this.qQt=t.ft,t.hasOwnProperty("soc")){const s=this.aW().ZX(t.soc);s&&this.o0t(s)}const e=t.p;i.P0t(e.length,!1);const n=i.n1t();for(let t=0,s=n.length;t<s;++t)n[t].wa(e[t]);"state"===s&&this.ZQt&&(i.h1t(),i.o1t(this))}f8(){const t=this.XQt;t.h1t(),t.o1t(this);const s=t.n1t();for(let t=0,i=s.length;t<i;++t){const i=s[t],e=i.a1t();if(!e)continue;const n=e.DB();if(!n)continue;const r=n.C$();if(!r)continue;const h=i.l1t(),o=r.xH();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.aW(),s=t.PB(h);s&&t.yH(s)}}}u7(){const t=this.Nc.RN(this.fi);this.x0t(),this.qQt&&"one-shot"===this.XQt.T0t()&&this.XQt.u1t(),this.XQt.u7(t),this.XQt.i1t()&&this.Nc.VB(),this.DB().Mz(),this.qQt=!1}c1t(t){const s=1/60;for(this.qQt&&"one-shot"===this.XQt.T0t()&&this.XQt.u1t();t>0;)this.XQt.u7(s),t-=s;this.XQt.i1t()&&this.Nc.VB(),this.DB().Mz(),this.qQt=!1}A0t(t,s){let i;"number"==typeof s&&(i=this.Nc.PB(s)),i&&i.cH()!==this.ZQt&&(i=null),i||(i=this.Nc.aV(this.ZQt,this.DB().kB(),t.$M(),t.KM()));const e=i.DB();return e.BR(t.Fu(),t.Fu()),e.EV(t.FV()),e.vF(t.wF()),e.Jz(this.DB().zz()),e.Mz(),e.tJ(this.C$(),!0),i.W4(),t.f1t(this.QQt),t.d1t(this.s0t),i}t0t(t,s,i,e,n,r){if(t.wX())return;const h=t.DB();h.Tz(s,i),h.BR(h.Vg()+e,h.Zg()+e),h.EV(h.FV()+n),h.vF(h.wF()+r),h.Mz()}i0t(t){t.wX()||this.Nc.yH(t)}tot(t){const s=this.XQt;switch(t){case rb:return s.N0t();case hb:return eb.Qn(s.B0t());case ob:return"one-shot"===s.T0t()?Ib:_b;case ub:return s.W0t();case cb:return s.j0t();case fb:return 100*s.V0t();case db:return s.U0t();case pb:return s.H0t();case mb:return s.z0t();case gb:return s.J0t();case yb:return s.q0t();case wb:return s.$0t();case Sb:return s.X0t();case vb:return s.Y0t();case bb:return s.K0t();case Mb:return s.Z0t();case Gb:return s.Q0t();case xb:return s.t1t();case Tb:return s.s1t()}}hot(t,s){const i=this.XQt;switch(t){case rb:i.n0t(s);break;case hb:i.r0t(eb.Zn(s));break;case ob:i.h0t(s?"one-shot":"continuous-spray");break;case ub:i.a0t(s);break;case cb:i.l0t(s);break;case fb:i.u0t(s/100);break;case db:i.c0t(s);break;case pb:i.f0t(s);break;case mb:i.d0t(s);break;case gb:i.p0t(s);break;case yb:i.m0t(s);break;case wb:i.g0t(s);break;case Sb:i.y0t(s);break;case vb:i.w0t(s);break;case bb:i.S0t(s);break;case Mb:i.v0t(s);break;case Gb:i.b0t(s);break;case xb:i.M0t(s);break;case Tb:i.G0t(s)}}aPt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.XQt;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.p1t()},{name:s+".type.name",value:[s+".type.items."+e.T0t()]},{name:i+".is-spraying",value:e.i1t(),YZt:t=>e.I0t(t)},{name:s+".rate.name",value:e.N0t(),YZt:t=>e.n0t(t)},{name:s+".spray-cone.name",value:eb.Qn(e.B0t()),YZt:t=>e.r0t(eb.Zn(t))},{name:s+".speed.name",value:e.W0t(),YZt:t=>e.a0t(t)},{name:s+".size.name",value:e.j0t(),YZt:t=>e.l0t(t)},{name:s+".opacity.name",value:e.V0t(),YZt:t=>e.u0t(t)},{name:s+".grow-rate.name",value:e.U0t(),YZt:t=>e.c0t(t)},{name:s+".x-randomiser.name",value:e.H0t(),YZt:t=>e.f0t(t)},{name:s+".y-randomiser.name",value:e.z0t(),YZt:t=>e.d0t(t)},{name:s+".initial-speed-randomiser.name",value:e.J0t(),YZt:t=>e.p0t(t)},{name:s+".size-randomiser.name",value:e.q0t(),YZt:t=>e.m0t(t)},{name:s+".grow-rate-randomiser.name",value:e.$0t(),YZt:t=>e.g0t(t)},{name:s+".acceleration.name",value:e.X0t(),YZt:t=>e.y0t(t)},{name:s+".gravity.name",value:e.Y0t(),YZt:t=>e.w0t(t)},{name:s+".angle-randomiser.name",value:e.K0t(),YZt:t=>e.S0t(t)},{name:s+".life-speed-randomiser.name",value:e.Z0t(),YZt:t=>e.v0t(t)},{name:s+".opacity-randomiser.name",value:e.Q0t(),YZt:t=>e.b0t(t)},{name:s+".timeout.name",value:e.s1t(),YZt:t=>e.G0t(t)}]}]}vCt(){return self.m1t}};const Pb=new WeakMap;self.m1t=class extends self.YJ{constructor(){super(),Pb.set(this,self.uH.pH().sq())}set g1t(t){ib(this).I0t(!!t)}get g1t(){return ib(this).i1t()}set rate(t){nb.re(t),Pb.get(this).C0t(t)}get rate(){return ib(this).N0t()}set y1t(t){nb.re(t),ib(this).r0t(t)}get y1t(){return ib(this).B0t()}set w1t(t){nb.re(t),ib(this).a0t(t)}get w1t(){return ib(this).W0t()}set S1t(t){nb.re(t),ib(this).l0t(t)}get S1t(){return ib(this).j0t()}set v1t(t){nb.re(t),ib(this).u0t(t)}get v1t(){return ib(this).V0t()}set b1t(t){nb.re(t),ib(this).f0t(t)}get b1t(){return ib(this).H0t()}set M1t(t){nb.re(t),ib(this).d0t(t)}get M1t(){return ib(this).z0t()}set G1t(t){nb.re(t),ib(this).p0t(t)}get G1t(){return ib(this).J0t()}set x1t(t){nb.re(t),ib(this).m0t(t)}get x1t(){return ib(this).q0t()}set T1t(t){nb.re(t),ib(this).c0t(t)}get T1t(){return ib(this).U0t()}set _1t(t){nb.re(t),ib(this).g0t(t)}get _1t(){return ib(this).$0t()}set acceleration(t){nb.re(t),ib(this).y0t(t)}get acceleration(){return ib(this).X0t()}set I1t(t){nb.re(t),ib(this).w0t(t)}get I1t(){return ib(this).Y0t()}set C1t(t){nb.re(t),ib(this).S0t(t)}get C1t(){return ib(this).K0t()}set P1t(t){nb.re(t),ib(this).v0t(t)}get P1t(){return ib(this).Z0t()}set R1t(t){nb.re(t),ib(this).b0t(t)}get R1t(){return ib(this).Q0t()}set timeout(t){nb.re(t),ib(this).G0t(t)}get timeout(){return ib(this).s1t()}A1t(t){nb.re(t),Pb.get(this).c1t(t)}E1t(t){const s=Pb.get(this);t?s.o0t(s.aW().BW(t)):s.o0t(null)}}}self._s.sW.zQt.QB={i1t(){return this.XQt.i1t()}};{const Rb=self._s;Rb.sW.zQt.yht={I0t(t){this.XQt.I0t(0!==t)},n0t(t){this.C0t(t)},F1t(t){this.o0t(t)},O1t(){this.o0t(null)},r0t(t){this.XQt.r0t(Rb.Zn(t))},a0t(t){this.XQt.a0t(t)},l0t(t){this.XQt.l0t(t)},u0t(t){this.XQt.u0t(t/100)},c0t(t){this.XQt.c0t(t)},D1t(t){this.XQt.f0t(t)},k1t(t){this.XQt.d0t(t)},L1t(t){this.XQt.p0t(t)},N1t(t){this.XQt.m0t(t)},B1t(t){this.XQt.g0t(t)},W1t(t){this.XQt.y0t(t)},w0t(t){this.XQt.w0t(t)},j1t(t){this.XQt.S0t(t)},V1t(t){this.XQt.v0t(t)},U1t(t){this.XQt.b0t(t)},G0t(t){this.XQt.G0t(t)},H1t(t){this.c1t(t)},PQt(t){this.DB().LM(t),this.Nc.VB()}}}{const Ab=self._s;Ab.sW.zQt.wht={z1t(){return this.XQt.p1t()},J1t(){return this.XQt.N0t()},q1t(){return Ab.Qn(this.XQt.B0t())},$1t(){return this.XQt.W0t()},X1t(){return this.XQt.j0t()},Y1t(){return 100*this.XQt.V0t()},K1t(){return this.XQt.U0t()},Z1t(){return this.XQt.H0t()},Q1t(){return this.XQt.z0t()},t2t(){return this.XQt.q0t()},s2t(){return this.XQt.J0t()},i2t(){return this.XQt.$0t()},e2t(){return this.XQt.X0t()},n2t(){return this.XQt.Y0t()},r2t(){return this.XQt.K0t()},h2t(){return this.XQt.Z0t()},o2t(){return this.XQt.Q0t()},a2t(){return this.XQt.s1t()}}}{const Eb=self._s,Fb=[],Ob=new Set(["continuous-spray","one-shot"]),Db=["fade-to-invisible","timeout-expired","particle-stopped"],kb=Eb.Hn(Eb.Rect);self.$Qt=class{constructor(){this.l2t=0,this.u2t=0,this.c2t="continuous-spray",this.f2t=!1,this.d2t=0,this.p2t=!1,this.m2t=0,this.g2t=0,this.y2t=0,this.w2t=0,this.S2t=0,this.v2t=1,this.b2t=0,this.M2t=0,this.G2t=0,this.x2t=0,this.T2t=0,this._2t=0,this.I2t=0,this.C2t=0,this.P2t=0,this.R2t=0,this.A2t=0,this.E2t=0,this.F2t=0,this.kf=0,this.O2t=0,this.D2t=1,this.YQt=null,this.R0t=null,this.k2t=[],this.kDt=new Eb.Rect,this.EM=new Eb.Go,this.jD=globalThis.devicePixelRatio||1}zn(){this.Wf(),Eb.Sh(this.k2t),this.k2t=null,this.YQt=null,this.R0t=null,this.kDt=null,this.EM=null}Wf(){const t=this.k2t;for(let s=0,i=t.length;s<i;++s)t[s].V_t();Eb.En(Fb,t),Eb.Sh(t),Fb.length>1e3&&Eb.wh(Fb,1e3),this.f2t=!1}_0t(){for(let t=0,s=this.l2t;t<s;++t)this.L2t();this.k2t.length&&(this.f2t=!0)}L2t(t=!0){let s=null;return Fb.length?(s=Fb.pop(),s.N2t(this)):s=Eb.Hn(self.B2t,this),this.k2t.push(s),t?s.OFt(this.R0t):s.OFt(),s}u1t(){const t=this.k2t,s=this.R0t;for(let i=0,e=t.length;i<e;++i)t[i].OFt(s)}h1t(){const t=this.k2t,s=this.R0t;for(let i=0,e=t.length;i<e;++i)t[i].W2t(s)}o1t(t){const s=this.k2t;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.a1t();if(n){const s=n.DB();s.XM(e.$M()),s.ZM(e.KM()),s.BR(e.Fu(),e.Fu()),s.vF(e.wF()),s.EV(e.FV()),s.Jz(t.DB().zz()),s.Mz()}}}P0t(t,s=!0){const i=this.k2t;if(t<i.length){const s=i.length-t;for(let t=0;t<s;++t){const t=i.pop();t.V_t(),Fb.push(t)}Fb.length>1e3&&Eb.wh(Fb,1e3)}else if(t>i.length){const e=t-i.length;for(let t=0;t<e;++t)this.L2t(s)}}n1t(){return this.k2t}p1t(){return this.k2t.length}u7(t){this.j2t(t),this.V2t(t),this.U2t()}j2t(t){if("continuous-spray"===this.c2t&&this.f2t){this.O2t+=t*this.l2t;const s=Math.floor(this.O2t);this.O2t-=s;for(let t=0;t<s;++t)this.L2t()}}r1t(t){this.O2t=t}e1t(){return this.O2t}V2t(t){const s=this.kDt;s.set(this.m2t,this.g2t,this.m2t,this.g2t);const i=this.k2t;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n];i[e]=r,r.u7(t),r.lSt()?(++e,s._l(r.Nz())):(r.V_t(),Fb.push(r))}Eb.wh(i,e),Fb.length>1e3&&Eb.wh(Fb,1e3)}U2t(){"one-shot"===this.c2t&&0===this.k2t.length&&this.f2t&&(this.YQt&&this.YQt(),this.f2t=!1)}zG(t,s,i,e){this.jD=globalThis.devicePixelRatio||1,kb.set(s.Nr(),s.Br(),s.Vr(),s.Ur()),t.jF(kb),this.EM.m(t.MF());const n=this.k2t;for(let r=0,h=n.length;r<h;++r){const h=n[r];i.Ml(h.Nz())&&h.zG(t,s,e)}t.VF()}MF(){return this.EM}n0t(t){this.l2t=+t}N0t(){return this.l2t}r0t(t){this.u2t=+t}B0t(){return this.u2t}h0t(t){if(!Ob.has(t))throw new Error("invalid spray type");this.c2t=t}T0t(){return this.c2t}I0t(t){this.f2t=!!t}i1t(){return this.f2t}E0t(t){this.d2t=+t}H2t(){return this.d2t}cXt(t){this.p2t=!!t}z2t(){return this.p2t}F0t(t){this.m2t=+t}J2t(){return this.m2t}O0t(t){this.g2t=+t}q2t(){return this.g2t}D0t(t){this.y2t=+t}$2t(){return this.y2t}a0t(t){this.w2t=+t}W0t(){return this.w2t}l0t(t){this.S2t=+t}j0t(){return this.S2t}k0t(t){this.v2t=+t}X2t(){return this.v2t}u0t(t){this.b2t=+t}V0t(){return this.b2t}c0t(t){this.M2t=+t}U0t(){return this.M2t}f0t(t){this.G2t=+t}H0t(){return this.G2t}d0t(t){this.x2t=+t}z0t(){return this.x2t}p0t(t){this.T2t=+t}J0t(){return this.T2t}m0t(t){this._2t=+t}q0t(){return this._2t}g0t(t){this.I2t=+t}$0t(){return this.I2t}y0t(t){this.C2t=+t}X0t(){return this.C2t}w0t(t){this.P2t=+t}Y0t(){return this.P2t}S0t(t){this.R2t=+t}K0t(){return this.R2t}v0t(t){this.A2t=+t}Z0t(){return this.A2t}b0t(t){this.E2t=+t}Q0t(){return this.E2t}Y2t(t){let s=Db.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.F2t=s}M0t(t){this.Y2t(Db[t])}K2t(){return Db[this.F2t]}t1t(){return this.F2t}G0t(t){this.kf=+t}s1t(){return this.kf}L0t(t){this.D2t=+t}Z2t(){return this.D2t}Nz(){return this.kDt}uj(){return this.jD}}}{let Lb=function(t){return Math.random()*t-t/2};0;const Nb=self._s,Bb=(self.$Qt,new Nb.Cl),Wb=new Nb.Go;let jb=!1;self.B2t=class{constructor(t){this.Q2t=t,this.Nf=!1,this.Pa=0,this.Ra=0,this.QRt=0,this.a0=0,this.t3t=1,this.s3t=0,this.i3t=0,this.qZ=0,this.e3t=0,this.n3t=0,this.r3t=0,this.uu=new Nb.Rect,this.h3t=null,this.o3t=NaN,this.a3t=null,this.l3t=null}N2t(t){this.Q2t=t}OFt(t){const s=this.Q2t;this.Nf=!0,this.Pa=s.J2t()+Lb(s.H0t()),this.Ra=s.q2t()+Lb(s.z0t()),this.QRt=s.W0t()+Lb(s.J0t()),this.a0=s.$2t()+Lb(s.B0t()),this.t3t=s.V0t(),this.s3t=this.t3t,this.qZ=(s.j0t()+Lb(s.q0t()))*s.X2t(),this.e3t=this.qZ/2,this.i3t=s.U0t()+Lb(s.$0t()),this.n3t=0,this.r3t=0,this.u3t(),t?this.h3t||(this.h3t=t(this)):(this.h3t=null,this.a3t=null,this.l3t=null)}W2t(t){t?this.h3t&&!this.h3t.wX()||(this.h3t=t(this,this.o3t)):(this.h3t=null,this.a3t=null,this.l3t=null)}f1t(t){this.a3t=t}d1t(t){this.l3t=t}V_t(){const t=this.l3t;t&&t(this.h3t),this.h3t=null,this.a3t=null,this.l3t=null}toJSON(){let t;return this.h3t&&this.h3t.DB()&&(t=this.h3t.DB().C$().xH()),[this.Pa,this.Ra,this.QRt,this.a0,this.t3t,this.i3t,this.qZ,this.n3t,this.r3t,t]}wa(t){this.Pa=t[0],this.Ra=t[1],this.QRt=t[2],this.a0=t[3],this.t3t=t[4],this.s3t=this.t3t,this.i3t=t[5],this.qZ=t[6],this.n3t=t[7],this.r3t=t[8],this.o3t=t[9],this.e3t=this.qZ/2,this.u3t()}u7(t){const s=this.Q2t,i=this.QRt*t,e=this.a0,n=Math.cos(e)*i,r=Math.sin(e)*i+this.n3t*t;this.Pa+=n,this.Ra+=r;const h=this.i3t*t;this.qZ+=h,this.e3t=this.qZ/2,this.QRt+=s.X0t()*t,this.n3t+=s.Y0t()*t,this.r3t+=t,this.u3t();const o=s.K0t(),a=s.Z0t(),l=s.Q0t();let u=0;0!==o&&(u=Lb(o*t),this.a0+=u),0!==a&&(this.QRt+=Lb(a*t)),0!==l&&(this.t3t=Nb.Yn(this.t3t+Lb(l*t),0,1));const c=this.qZ>=1&&(2===s.t1t()?this.QRt>0:this.r3t<s.s1t()),f=this.a3t;if(f&&c){let t=s.H2t()*this.t3t;0===s.t1t()&&(t*=1-this.r3t/s.s1t());const i=t-this.s3t;this.s3t=t,f(this.h3t,n,r,h,u,i)}this.Nf=c}lSt(){return this.Nf}Nz(){return this.uu}u3t(){const t=this.Pa,s=this.Ra,i=this.e3t;this.uu.set(t-i,s-i,t+i,s+i)}zG(t,s,i){if(this.h3t)return;const e=this.Q2t;let n=e.H2t()*this.t3t;if(0===e.t1t()&&(n*=1-this.r3t/e.s1t()),n<=0)return;const r=this.qZ,h=r*e.Z2t()*e.uj();if(h<1)return;let o=this.Pa,a=this.Ra;e.z2t()&&(o=o+.5|0,a=a+.5|0),t.tv()?t.UF(o,a,r,n):i||h>t._O()||h<t.TO()?(Wb.m(e.MF()),Wb.Yo(n),t.NM(Wb),jb=!0,Bb.Xl(this.uu),t.DF(Bb,s)):(jb&&(t.NM(e.MF()),jb=!1),t.UF(o,a,h,n))}a1t(){return this.h3t}l1t(){return this.o3t}$M(){return this.Pa}KM(){return this.Ra}Fu(){return this.qZ}FV(){return this.a0}wF(){return this.t3t}}}{const Vb=self._s;Vb.sW.c3t=class extends Vb.YIt{constructor(t){super(t)}zn(){super.zn()}}}{let Ub=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};0;const Hb=self._s;Hb.sW.c3t.fEt=class extends Hb.OCt{constructor(t,s){super(t),this.vx="repeat",this.bx="repeat",s&&(this.vx=Ub(s[0]),this.bx=Ub(s[1]))}zn(){super.zn()}SCt(){this.jq().oW(this.Nc)}d4(t){return this.jq().YY(t,{nx:this.Nc.YL(),sx:this.vx,ix:this.bx})}v4(){this.jq().oR()}f3t(){return this.vx}d3t(){return this.bx}}}{const zb=self._s,Jb=self.Ls,qb=0,$b=4,Xb=5,Yb=6,Kb=7,Zb=8,Qb=9,tM=10,sM=11,iM=12,eM=13,nM=14,rM=zb.Hn(zb.Rect),hM=zb.Hn(zb.Cl),oM=zb.Hn(zb.Rect),aM=zb.Hn(zb.Cl);zb.sW.c3t.Instance=class extends zb.dPt{constructor(t,s){super(t),this.p3t=0,this.m3t=0,this.g3t=1,this.y3t=1,this.w3t=0,this.S3t=!1,this.v3t=0,this.b3t=0,this.M3t=0,this.G3t=0,this.x3t=0,this.T3t=null,s&&(this.DB().yU(!!s[qb]),this.p3t=s[$b],this.m3t=s[Xb],this.g3t=s[Yb],this.y3t=s[Kb],this.w3t=zb.Zn(s[Zb]),this.S3t=!!s[Qb],this.v3t=s[tM],this.b3t=s[sM],this.M3t=s[iM],this.G3t=s[eM],this.x3t=s[nM])}zn(){this._3t(),super.zn()}_3t(){this.T3t&&(this.T3t.zn(),this.T3t=null)}I3t(t,s,i){const e=this.bPt(),n=e.Vg(),r=e.Zg(),h=this.p3t/n,o=this.m3t/r,a=this.w3t;oM.set(0,0,t/(n*this.g3t),s/(r*this.y3t)),oM.offset(-h,-o),0===a?i.Xl(oM):i.Yl(oM,-a)}C3t(t,s=!0){if(this.S3t){const s=this.bPt();t.pv(),t.XF(s.Vg()*this.g3t,s.Zg()*this.y3t,this.v3t,this.b3t,this.M3t,this.G3t,this.x3t)}else s&&t.lv()}zG(t){const s=this.bPt(),i=s.xT();if(null===i)return;this.C3t(t),t.GF(i);const e=s.Vg(),n=s.Zg();let r=this.p3t/e,h=this.m3t/n;0!==this.w3t||this.S3t||("repeat"===this.Kxt().f3t()&&(r%=1),"repeat"===this.Kxt().d3t()&&(h%=1));const o=this.DB();oM.set(0,0,o.Vg()/(e*this.g3t),o.Zg()/(n*this.y3t)),oM.offset(-r,-h),o.zJ()?this.vZt(o,t):this.bZt(o,t)}bZt(t,s){let i=t.Wz();this.Nc.ZL()&&(i=t.Ykt(i)),0===this.w3t?s.tb(i,oM):(aM.Yl(oM,-this.w3t),s.DF(i,aM))}vZt(t,s){const i=t.mLt();if(t.yLt()){t.Lz(rM,hM,!1);let s=hM;this.Nc.ZL()&&(s=t.Ykt(s));let e=oM;0!==this.w3t&&(aM.Yl(oM,-this.w3t),e=aM),i.BG(t.JJ(),s,e),t.gLt(!1)}i.zG(s,t.Dz())}bPt(){return this.T3t||this.ppt.jq()}yet(){return!0}xT(){return this.bPt().xT()}P3t(){this.DB().gLt(!0)}R3t(t){this.p3t!==t&&(this.p3t=t,this.Nc.VB(),this.P3t())}A3t(){return this.p3t}E3t(t){this.m3t!==t&&(this.m3t=t,this.Nc.VB(),this.P3t())}F3t(){return this.m3t}O3t(t){this.g3t!==t&&(this.g3t=t,this.Nc.VB(),this.P3t())}D3t(){return this.g3t}k3t(t){this.y3t!==t&&(this.y3t=t,this.Nc.VB(),this.P3t())}L3t(){return this.y3t}N3t(t){this.w3t!==t&&(this.w3t=t,this.Nc.VB(),this.P3t())}B3t(){return this.w3t}W3t(t){t=!!t,this.S3t!==t&&(this.S3t=t,this.Nc.VB())}j3t(){return this.S3t}V3t(t){this.v3t!==t&&(this.v3t=t,this.j3t()&&this.Nc.VB())}U3t(){return this.v3t}H3t(t){this.b3t!==t&&(this.b3t=t,this.j3t()&&this.Nc.VB())}z3t(){return this.b3t}J3t(t){this.M3t!==t&&(this.M3t=t,this.j3t()&&this.Nc.VB())}q3t(){return this.M3t}$3t(t){this.G3t!==t&&(this.G3t=t,this.j3t()&&this.Nc.VB())}X3t(){return this.G3t}Y3t(t){this.x3t!==t&&(this.x3t=t,this.j3t()&&this.Nc.VB())}K3t(){return this.x3t}oG(){const t={};return 0!==this.p3t&&(t.iox=this.p3t),0!==this.m3t&&(t.ioy=this.m3t),1!==this.g3t&&(t.isx=this.g3t),1!==this.y3t&&(t.isy=this.y3t),0!==this.w3t&&(t.ia=this.w3t),this.S3t&&(t.tr=!0),1!==this.v3t&&(t.trx=this.v3t),1!==this.b3t&&(t.try=this.b3t),1!==this.M3t&&(t.tra=this.M3t),.1!==this.G3t&&(t.trbmx=this.G3t),.1!==this.x3t&&(t.trbmy=this.x3t),t}aG(t){this.p3t=t.iox||0,this.m3t=t.ioy||0,this.g3t=t.hasOwnProperty("isx")?t.isx:1,this.y3t=t.hasOwnProperty("isy")?t.isy:1,this.w3t=t.ia||0,this.S3t=!!t.tr,this.v3t=t.hasOwnProperty("trx")?t.trx:1,this.b3t=t.hasOwnProperty("try")?t.try:1,this.M3t=t.hasOwnProperty("tra")?t.tra:1,this.G3t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.x3t=t.hasOwnProperty("trbmy")?t.trbmy:.1}aPt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.A3t(),YZt:t=>this.R3t(t)},{name:t+".image-offset-y.name",value:this.F3t(),YZt:t=>this.E3t(t)},{name:t+".image-scale-x.name",value:100*this.D3t(),YZt:t=>this.O3t(t/100)},{name:t+".image-scale-y.name",value:100*this.L3t(),YZt:t=>this.k3t(t/100)},{name:t+".image-angle.name",value:zb.Qn(this.B3t()),YZt:t=>this.N3t(zb.Zn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.j3t(),YZt:t=>this.W3t(t)},{name:t+".x-random.name",value:100*this.U3t(),YZt:t=>this.V3t(t/100)},{name:t+".y-random.name",value:100*this.z3t(),YZt:t=>this.H3t(t/100)},{name:t+".angle-random.name",value:100*this.q3t(),YZt:t=>this.J3t(t/100)},{name:t+".blend-margin-x.name",value:100*this.X3t(),YZt:t=>this.$3t(t/100)},{name:t+".blend-margin-y.name",value:100*this.K3t(),YZt:t=>this.Y3t(t/100)}]}]}tot(t){switch(t){case $b:return this.A3t();case Xb:return this.F3t();case Yb:return this.D3t();case Kb:return this.L3t();case Zb:return this.B3t();case Qb:return this.j3t();case tM:return this.U3t();case sM:return this.z3t();case iM:return this.q3t();case eM:return this.X3t();case nM:return this.K3t()}}hot(t,s){switch(t){case $b:this.R3t(s);break;case Xb:this.E3t(s);break;case Yb:this.O3t(s);break;case Kb:this.k3t(s);break;case Zb:this.N3t(s);break;case Qb:this.W3t(!!s);break;case tM:this.V3t(s);break;case sM:this.H3t(s);break;case iM:this.J3t(s);break;case eM:this.$3t(s);break;case nM:this.Y3t(s)}}vCt(){return self.Z3t}};const lM=new WeakMap;self.Z3t=class extends self.YJ{constructor(){super(),lM.set(this,self.uH.pH().sq())}set Q3t(t){Jb.re(t),lM.get(this).R3t(t)}get Q3t(){return lM.get(this).A3t()}set t5t(t){Jb.re(t),lM.get(this).E3t(t)}get t5t(){return lM.get(this).F3t()}s5t(t,s){Jb.re(t),Jb.re(s);const i=lM.get(this);i.R3t(t),i.E3t(s)}i5t(){const t=lM.get(this);return[t.A3t(),t.F3t()]}set e5t(t){Jb.re(t),lM.get(this).O3t(t)}get e5t(){return lM.get(this).D3t()}set n5t(t){Jb.re(t),lM.get(this).k3t(t)}get n5t(){return lM.get(this).L3t()}r5t(t,s){Jb.re(t),Jb.re(s);const i=lM.get(this);i.O3t(t),i.k3t(s)}h5t(){const t=lM.get(this);return[t.D3t(),t.L3t()]}set o5t(t){Jb.re(t),lM.get(this).N3t(t)}get o5t(){return lM.get(this).B3t()}set a5t(t){Jb.re(t),lM.get(this).N3t(zb.Zn(t))}get a5t(){return zb.Qn(lM.get(this).B3t())}get imageWidth(){return lM.get(this).bPt().Vg()}get imageHeight(){return lM.get(this).bPt().Zg()}uQt(){const t=lM.get(this).bPt();return[t.Vg(),t.Zg()]}set l5t(t){lM.get(this).W3t(!!t)}get l5t(){return lM.get(this).j3t()}set u5t(t){Jb.re(t),lM.get(this).V3t(t)}get u5t(){return lM.get(this).U3t()}set c5t(t){Jb.re(t),lM.get(this).H3t(t)}get c5t(){return lM.get(this).z3t()}f5t(t,s){Jb.re(t),Jb.re(s);const i=lM.get(this);i.V3t(t),i.H3t(s)}d5t(){const t=lM.get(this);return[t.U3t(),t.z3t()]}set p5t(t){Jb.re(t),lM.get(this).J3t(t)}get p5t(){return lM.get(this).q3t()}set m5t(t){Jb.re(t),lM.get(this).$3t(t)}get m5t(){return lM.get(this).X3t()}set g5t(t){Jb.re(t),lM.get(this).Y3t(t)}get g5t(){return lM.get(this).K3t()}y5t(t,s){Jb.re(t),Jb.re(s);const i=lM.get(this);i.$3t(t),i.Y3t(s)}w5t(){const t=lM.get(this);return[t.X3t(),t.K3t()]}async S5t(t){Jb.Ne(t,Blob);const s=lM.get(this),i=s.aW(),e=zb.Hn(zb.PRt);e.URt(i,t),await e.YY(i.mM(),{nx:i.YL(),sx:s.Kxt().f3t(),ix:s.Kxt().d3t()}),s.Jn()?e.zn():(s._3t(),s.T3t=e,i.VB())}}}self._s.sW.c3t.QB={SQt:()=>!0,vQt:()=>!0,v5t(){return this.j3t()}};{const uM=self._s;uM.sW.c3t.yht={b5t(t){this.R3t(t)},M5t(t){this.E3t(t)},G5t(t){this.O3t(t/100)},x5t(t){this.k3t(t/100)},T5t(t){this.N3t(uM.Zn(t))},_5t(t){this.W3t(t)},I5t(t,s){this.V3t(t/100),this.H3t(s/100)},C5t(t){this.J3t(t/100)},P5t(t,s){this.$3t(t/100),this.Y3t(s/100)},PQt(t){this.DB().LM(t),this.Nc.VB()},async IQt(t,s){if(this.T3t&&this.T3t.GZ()===t)return;const i=this.Nc,e=uM.Hn(uM.PRt);try{if(await e.VRt(i,t,!0),!e.KZ())throw new Error("image failed to load");if(this.Jn())return e.zn(),null;if(!await e.YY(i.mM(),{nx:i.YL(),sx:this.Kxt().f3t(),ix:this.Kxt().d3t()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.qH(uM.sW.c3t.QB.vQt))}this.Jn()?e.zn():(this._3t(),this.T3t=e,i.VB(),await this.KB(uM.sW.c3t.QB.SQt))}}}{const cM=self._s;cM.sW.c3t.wht={WQt(){return this.bPt().Vg()},jQt(){return this.bPt().Zg()},R5t(){return this.p3t},A5t(){return this.m3t},E5t(){return 100*this.g3t},F5t(){return 100*this.y3t},O5t(){return cM.Qn(this.w3t)},D5t(){return 100*this.U3t()},k5t(){return 100*this.z3t()},L5t(){return 100*this.q3t()},N5t(){return 100*this.X3t()},B5t(){return 100*this.K3t()}}}{const fM=self._s;fM.sW.Text=class extends fM.YIt{constructor(t){super(t)}zn(){super.zn()}}}{const dM=self._s;dM.sW.Text.fEt=class extends dM.OCt{constructor(t){super(t)}zn(){super.zn()}SCt(){}d4(t){}v4(){}}}{const pM=self._s,mM=self.Ls,gM=[0,0,0],yM=0,wM=1,SM=2,vM=3,bM=4,MM=5,GM=6,xM=7,TM=8,_M=9,IM=10,CM=11,PM=12,RM=13,AM=15,EM=["left","center","right"],FM=["top","center","bottom"],OM=["ltr","rtl"],DM=["word","cjk","character"],kM=new pM.Rect,LM=new pM.Cl,NM=new pM.Go,BM=pM.Hn(pM.Ca),WM=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);pM.sW.Text.Instance=class extends pM.dPt{constructor(t,s){if(super(t),this.Bc="",this.W5t=!0,this.j5t="Arial",this.V5t=12,this.U5t=0,this.xP=!1,this.TP=!1,this.EM=pM.Hn(pM.Go),this.AP=0,this.EP=0,this.DP="word",this.kP=0,this.H5t="auto",this.z5t=1,this.J5t=null,this.q5t="",this.$5t=!1,this.X5t=!1,this.Y5t=null,this.K5t=-1,this.Z5t=-1,this.Q5t=0,this.t4t=pM.Hn(pM.Lw.qb,this.Nc.mM(),{timeout:5}),this.t4t.lR=()=>this.Nc.VB(),this.s4t=()=>this.i4t(),this.e4t=!1,s){this.Bc=s[yM],this.W5t=!!s[wM],this.j5t=s[SM],this.V5t=s[vM],this.U5t=s[bM],this.xP=!!s[MM],this.TP=!!s[GM],this.AP=s[TM],this.EP=s[_M],this.DP=DM[s[IM]],this.kP=s[CM],this.n4t(this.Nc.ZX(s[PM]));const t=s[xM];this.EM.Po(t[0],t[1],t[2]),this.DB().yU(s[RM]),this.X5t=!!s[AM]}this.r4t(),this.h4t()}zn(){this.n4t(null),this.o4t(),this.Y5t&&(this.Y5t.zn(),this.Y5t=null),this.t4t.zn(),this.t4t=null,super.zn()}r4t(){const t=this.t4t;t.Vc(this.Bc),t.dR(this.W5t),this.t4t.yP()&&this.J5t?this.t4t.Wg(this.aW().BJt(this.J5t)):this.t4t.Wg(null),t.pR("nearest"!==this.Nc.YL()),t.mR(this.j5t),t.SR(this.U5t),t.bR(this.xP),t.GR(this.TP),t.NM(this.EM),t.RR(EM[this.AP]),t.ER(FM[this.EP]),t.OR(this.DP),t.kR(OM[this.kP])}a4t(){const t=this.DB();this.t4t.gR(this.V5t),this.t4t.wR(t.fkt());const s=t.kB();let i;"auto"===this.H5t?i=s.J2(t.Dz()):"fixed"===this.H5t&&(i=this.z5t),t.zJ()&&i!==this.t4t.WR()&&t.gLt(!0),this.t4t.BR(t.Vg(),t.Zg(),i)}n4t(t){t&&(t.S1()||t.zj().constructor!==pM.sW.Nrt)||t!==this.J5t&&(this.J5t&&this.J5t.wf().removeEventListener("animationframeimagechange",this.s4t),this.J5t=t,this.J5t&&this.J5t.wf().addEventListener("animationframeimagechange",this.s4t),this.r4t(),this.$5t=!1,this.Nc.VB())}i4t(){this.Nc.WJt(this.J5t),this.Nc.VB(),this.e4t=!0}h4t(){if(this.X5t){let t=this.Bc;this.W5t&&(t=pM.dn.Og(t)),this.Y5t?this.Y5t.Vc(t):this.Y5t=pM.Hn(pM.Lc,this.Nc,t)}else this.Y5t&&(this.Y5t.zn(),this.Y5t=null)}zG(t){const s=this.DB();this.a4t(),this.e4t&&(this.e4t=!1,this.t4t.yP()&&this.J5t&&this.t4t.Wg(this.aW().BJt(this.J5t)));const i=this.t4t.xT();if(!i)return;const e=s.kB();if(0===s.FV()&&0===e.FV()&&0===s.Dz()&&!s.zJ()&&e.o2()){const n=s.Wz(),[r,h]=e.oH(n.Nr(),n.Br()),[o,a]=e.oH(n.Vr(),n.Ur()),l=r-Math.round(r),u=h-Math.round(h);kM.set(r,h,o,a),kM.offset(-l,-u),LM.Xl(kM);const[c,f]=t.WF(t.rO());t.jb()?this.Nc.TB().rK(t,c,f):(t.zk(!0),LM.wt(c,f)),t.GF(i),t.tb(LM,this.t4t.gA()),t.jb()?e.oK(t):t.zk(!1)}else t.GF(i),s.zJ()?this.vZt(s,t):this.bZt(s,t)}bZt(t,s){let i=t.Wz();this.Nc.ZL()&&(i=this.l4t(i)),s.tb(i,this.t4t.gA())}vZt(t,s){const i=t.mLt();if(t.yLt()){t.Lz(kM,LM,!1);let s=LM;this.Nc.ZL()&&(s=this.l4t(s)),i.BG(t.JJ(),s,this.t4t.gA()),t.gLt(!1)}i.zG(s,t.Dz())}l4t(t){const s=t.Nr()-Math.round(t.Nr()),i=t.Br()-Math.round(t.Br());return 0===s&&0===i?t:(LM.m(t),LM.offset(-s,-i),LM)}MPt(){const t=this.t4t.xT();return t?[t.Vg(),t.Zg()]:[100,100]}GPt(){return this.t4t.gA()}_Pt(){return!1}oG(){const t={t:this.Bc,c:this.EM.toJSON(),fn:this.j5t,ps:this.V5t};return this.W5t&&(t.bbc=this.W5t),0!==this.AP&&(t.ha=this.AP),0!==this.EP&&(t.va=this.EP),"word"!==this.DP&&(t.wr=this.DP),0!==this.U5t&&(t.lho=this.U5t),this.xP&&(t.b=this.xP),this.TP&&(t.i=this.TP),-1!==this.Z5t&&(t.tw={st:this.K5t,en:this.Z5t,l:this.Q5t}),this.J5t&&(t.ioc=this.J5t.I1()),"fixed"===this.H5t&&(t.fs=this.z5t),t}aG(t){if(this.o4t(),this.Bc=t.t,this.EM.wa(t.c),this.j5t=t.fn,this.V5t=t.ps,this.W5t=!!t.hasOwnProperty("bbc")&&t.bbc,this.AP=t.hasOwnProperty("ha")?t.ha:0,this.EP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.DP="boolean"==typeof s?s?"word":"character":s}else this.DP="word";if(this.U5t=t.hasOwnProperty("lho")?t.lho:0,this.xP=!!t.hasOwnProperty("b")&&t.b,this.TP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.K5t=s.st,this.Z5t=s.en,this.Q5t=s.l}if(t.hasOwnProperty("ioc")){const s=this.aW().ZX(t.ioc);s&&this.n4t(s)}else this.n4t(null);t.hasOwnProperty("fs")?(this.H5t="fixed",this.z5t=t.fs):this.H5t="auto",this.r4t(),this.h4t(),this.$5t=!1,-1!==this.Z5t&&this.nPt()}tot(t){switch(t){case yM:return this.NR();case wM:return this.W5t;case SM:return this.u4t();case vM:return this.c4t();case bM:return this.f4t();case MM:return this.d4t();case GM:return this.p4t();case xM:return gM[0]=this.EM.Lo(),gM[1]=this.EM.No(),gM[2]=this.EM.Bo(),gM;case TM:return this.m4t();case _M:return this.g4t();case IM:return this.y4t();case AM:return this.w4t()}}hot(t,s){switch(t){case yM:this.S4t(s);break;case wM:if(this.W5t===!!s)return;this.W5t=!!s,this.r4t();break;case SM:this.v4t(s);break;case vM:this.b4t(s);break;case bM:this.M4t(s);break;case MM:this.G4t(s);break;case GM:this.x4t(s);break;case xM:const t=this.EM,i=s;if(t.Lo()===i[0]&&t.No()===i[1]&&t.Bo()===i[2])return;this.EM.Po(i[0],i[1],i[2]),this.r4t();break;case TM:this.T4t(s);break;case _M:this._4t(s);break;case IM:this.I4t(s)}}lPt(t,s,i,e){0===s&&0===i&&0===e||t!==xM||(this.EM.Ro(s,i,e),this.r4t())}S4t(t){this.Bc!==t&&(this.Bc=t,this.t4t.Vc(t),this.h4t(),this.$5t=!1,this.Nc.VB())}NR(){return this.Bc}C4t(t,s){this.a4t(),this.S4t(t),this.K5t=this.Nc.NN(),this.Z5t=this.K5t+s/this.C$().PH(),this.Q5t=this.t4t.HR(),this.t4t.TR(0),this.nPt()}o4t(){this.K5t=-1,this.Z5t=-1,this.Q5t=0,this.t4t.TR(-1),this.VCt()}P4t(){-1!==this.Z5t&&(this.o4t(),this.qH(pM.sW.Text.QB.R4t),this.Nc.VB())}v4t(t){this.j5t!==t&&(this.j5t=t,this.t4t.mR(t),this.Nc.VB())}u4t(){return this.j5t}G4t(t){t=!!t,this.xP!==t&&(this.xP=t,this.t4t.bR(t),this.Nc.VB())}d4t(){return this.xP}x4t(t){t=!!t,this.TP!==t&&(this.TP=t,this.t4t.GR(t),this.Nc.VB())}p4t(){return this.TP}b4t(t){this.V5t!==t&&(this.V5t=t,this.Nc.VB())}c4t(){return this.V5t}A4t(t){this.EM.zo(t)||(this.EM.ko(t),this.t4t.NM(this.EM),this.Nc.VB())}E4t(){return this.EM}M4t(t){this.U5t!==t&&(this.U5t=t,this.r4t(),this.Nc.VB())}f4t(){return this.U5t}T4t(t){this.AP!==t&&(this.AP=t,this.r4t(),this.Nc.VB())}m4t(){return this.AP}_4t(t){this.EP!==t&&(this.EP=t,this.r4t(),this.Nc.VB())}g4t(){return this.EP}F4t(t){this.I4t(DM[t])}I4t(t){this.DP!==t&&(this.DP=t,this.r4t(),this.Nc.VB())}y4t(){return this.DP}O4t(t){this.kP!==t&&(this.kP=t,this.r4t(),this.Nc.VB())}D4t(){return this.kP}k4t(t){this.X5t=!!t,this.h4t()}w4t(){return this.X5t}L4t(t){this.H5t!==t&&(this.H5t=t,this.Nc.VB())}N4t(){return this.H5t}B4t(t){this.z5t!==t&&(this.z5t=t,"fixed"===this.H5t&&this.Nc.VB())}W4t(){return this.z5t}j4t(){return this.a4t(),this.t4t.jR()}V4t(){return this.a4t(),this.t4t.UR()}U4t(t,s){this.a4t();const i=this.DB();BM.set(t-i.$M(),s-i.KM()),BM.rotate(-i.FV()),BM.offset(i.Vg()*i.Iz(),i.Zg()*i.Rz()),BM.wt(i.Vg(),i.Zg()),BM.scale(this.t4t.Vg(),this.t4t.Zg());const e=this.t4t.JR(BM.Fa(),BM.Da());if(e){const t=e.Hy("tag");if(t)return t.Cg}return""}H4t(t,s,i){const e=this.U4t(s,i);return e&&pM.Ke(t,e)}z4t(t,s){this.a4t(),s=Math.floor(s);const i=this.t4t.$R(t,s);if(!i)return null;const e=this.DB(),n=this.t4t.CR(),r=i.By(),h=i.jy()-(i.Zg()-i.ty())*n,o=i.Vg()*n/this.t4t.Vg()*e.Vg(),a=i.Zg()*n/this.t4t.Zg()*e.Zg();return BM.set(r,h),BM.wt(this.t4t.Vg(),this.t4t.Zg()),BM.scale(e.Vg(),e.Zg()),BM.offset(-e.Vg()*e.Iz(),-e.Zg()*e.Rz()),BM.rotate(e.FV()),BM.offset(e.$M(),e.KM()),{x:BM.Fa(),y:BM.Da(),width:o,height:a}}J4t(t){return this.a4t(),this.t4t.XR(t)}q4t(t){let s=WM.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}$4t(t,s){let i=WM.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async X4t(){if(this.$5t)return this.q5t;const t=new pM.dn(this.Bc,{dg:!0})._g(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.u4t()}';`),this.d4t()&&e.push("font-weight: bold;"),this.p4t()&&e.push("font-style: italic;"),"character"===this.y4t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.J5t?this.aW().BJt(this.J5t):null;if(this.J5t){const i=pM.Hn(pM.Hd),e=[],r=new Map;for(const s of t)if(s.Yg()){const t=s.Yy(n);if(t){const s=t.Fw().jq().XRt();if(r.has(s))continue;r.set(s,null),e.push(i.Bu(async()=>{const t=await s.aQ();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.Yg()){const t=e.Yy(n);if(t){const e=t.Fw(),n=e.jq().XRt();h.push(i.Bu(async()=>{const i=await e.jq().KRt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.Jy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.q4t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.$4t(s,e));if(e.$g()&&(i+=pM.Pm(pM.Im(e.yy().join("")),"\n","<br>")),e.Yg()&&n){const r=e.Yy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.YL()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Xy()}" width="${r.Vg()}" height="${r.Zg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.q4t(t);return i+="</span>",this.q5t=i,this.$5t=!0,this.q5t}u7(){const t=this.Nc.NN();if(t>=this.Z5t)this.o4t(),this.qH(pM.sW.Text.QB.R4t),this.Nc.VB();else{let s=pM.mr(this.K5t,this.Z5t,t,0,this.Q5t);s=Math.floor(s),s!==this.t4t._R()&&(this.t4t.TR(s),this.Nc.VB())}}aPt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.NR(),YZt:t=>this.S4t(t)},{name:t+".properties.font.name",value:this.u4t(),YZt:t=>this.v4t(t)},{name:t+".properties.size.name",value:this.c4t(),YZt:t=>this.b4t(t)},{name:t+".properties.line-height.name",value:this.f4t(),YZt:t=>this.M4t(t)},{name:t+".properties.bold.name",value:this.d4t(),YZt:t=>this.G4t(t)},{name:t+".properties.italic.name",value:this.p4t(),YZt:t=>this.x4t(t)},{name:t+".debugger.text-width",value:this.j4t()},{name:t+".debugger.text-height",value:this.V4t()}]}]}vCt(){return self.Y4t}};const jM=new WeakMap,VM=new Map([["left",0],["center",1],["right",2]]),UM=new Map([["top",0],["center",1],["bottom",2]]),HM=["ltr","rtl"];self.Y4t=class extends self.YJ{constructor(){super(),jM.set(this,self.uH.pH().sq())}get text(){return jM.get(this).NR()}set text(t){mM.le(t);const s=jM.get(this);s.o4t(),s.S4t(t)}K4t(t,s){mM.le(t),mM.re(s);const i=jM.get(this);i.o4t(),i.C4t(t,s)}Z4t(){jM.get(this).P4t()}set lK(t){mM.le(t),jM.get(this).v4t(t)}get lK(){return jM.get(this).u4t()}set cK(t){jM.get(this).G4t(t)}get cK(){return jM.get(this).d4t()}set fK(t){jM.get(this).x4t(t)}get fK(){return jM.get(this).p4t()}set uK(t){mM.re(t),jM.get(this).b4t(t)}get uK(){return jM.get(this).c4t()}set Q4t(t){if(mM.xe(t),t.length<3)throw new Error("expected 3 elements");NM.Po(t[0],t[1],t[2]),jM.get(this).A4t(NM)}get Q4t(){const t=jM.get(this).E4t();return[t.Lo(),t.No(),t.Bo()]}set lineHeight(t){mM.re(t),jM.get(this).M4t(t)}get lineHeight(){return jM.get(this).f4t()}set mK(t){mM.le(t);const s=VM.get(t);if(void 0===s)throw new Error("invalid mode");jM.get(this).T4t(s)}get mK(){return EM[jM.get(this).m4t()]}set verticalAlign(t){mM.le(t);const s=UM.get(t);if(void 0===s)throw new Error("invalid mode");jM.get(this)._4t(s)}get verticalAlign(){return FM[jM.get(this).g4t()]}set gK(t){if(!DM.includes(t))throw new Error("invalid mode");jM.get(this).I4t(t)}get gK(){return jM.get(this).y4t()}set yK(t){mM.le(t);const s=HM.indexOf(t);if(-1===s)throw new Error("invalid text direction");jM.get(this).O4t(s)}get yK(){return HM[jM.get(this).D4t()]}set t6t(t){jM.get(this).k4t(!!t)}get t6t(){return jM.get(this).w4t()}s6t(t){mM.re(t);const s=jM.get(this);s.L4t("fixed"),s.B4t(t)}i6t(){jM.get(this).L4t("auto")}get vK(){return jM.get(this).j4t()}get bK(){return jM.get(this).V4t()}e6t(){const t=jM.get(this);return[t.j4t(),t.V4t()]}n6t(t,s,i){return mM.le(t),mM.re(s),mM.re(i),jM.get(this).H4t(t,s,i)}r6t(t,s){return mM.re(t),mM.re(s),jM.get(this).U4t(t,s)}h6t(t,s=0){return mM.le(t),mM.re(s),jM.get(this).z4t(t,s)}o6t(t){return mM.le(t),jM.get(this).J4t(t)}a6t(t){const s=jM.get(this),i=s.aW().BW(t);s.n4t(i)}l6t(){return jM.get(this).X4t()}}}{const zM=self._s;zM.sW.Text.QB={u6t(t,s){return s?this.Bc===t:zM.Ke(this.Bc,t)},c6t(){return-1!==this.Z5t},R4t:()=>!0,f6t(t,s,i){return this.H4t(t,s,i)}}}{const JM=self._s,qM=JM.Hn(JM.Go);JM.sW.Text.yht={Vc(t){this.o4t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.S4t(t.toString())},d6t(t){this.o4t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.S4t(this.Bc+t)},p6t(t,s){this.o4t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.C4t(t.toString(),s)},m6t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.j5t&&i===this.xP&&e===this.TP||(this.v4t(t),this.G4t(i),this.x4t(e))},gR(t){this.b4t(t)},g6t(t){qM.Qo(t),qM.Yn(),this.A4t(qM)},y6t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},PQt(t){this.DB().LM(t),this.Nc.VB()},w6t(){this.P4t()},SR(t){this.M4t(t)},S6t(t){this.T4t(t)},v6t(t){this._4t(t)},b6t(t){this.F4t(t)},kR(t){this.O4t(t)},M6t(t){this.n4t(t)},G6t(){return this.X4t()},x6t(t){this.k4t(t)},T6t(t,s){this.L4t(["auto","fixed"][t]),this.B4t(s)}}}{const $M=self._s;$M.sW.Text.wht={Text(){return this.Bc},_6t(){return this.W5t?$M.dn.Og(this.Bc):this.Bc},I6t(){return this.j5t},C6t(){return this.V5t},P6t(){return this.j4t()},R6t(){return this.V4t()},A6t(){return this.U5t},E6t(t,s){return this.U4t(t,s)},F6t(t){return this.J4t(t)},O6t(t,s){const i=this.z4t(t,s);return i?i.x:0},D6t(t,s){const i=this.z4t(t,s);return i?i.y:0},k6t(t,s){const i=this.z4t(t,s);return i?i.width:0},L6t(t,s){const i=this.z4t(t,s);return i?i.height:0},N6t(){return this.q5t}}}{const XM=self._s;XM.sW.Keyboard=class extends XM.YIt{constructor(t){super(t)}zn(){super.zn()}}}{let YM=function(){return ZM.Vj().sq()};0;const KM=self._s;self.Ls,KM.sW.Keyboard.fEt=class extends KM.OCt{constructor(t){super(t)}zn(){super.zn()}SCt(){}vCt(){return self.B6t}};let ZM=null;self.B6t=class extends self.nV{constructor(t){super(t),ZM=t,t.aW().vB().keyboard=this}W6t(t){const s=YM();if("string"==typeof t)return s.j6t(t);if("number"==typeof t)return s.V6t(t);throw new TypeError("expected string or number")}}}{const QM=self._s,tG="keyboard";QM.sW.Keyboard.Instance=class extends QM.BCt{constructor(t,s){super(t,tG),this.U6t=new Set,this.H6t=new Set,this.z6t=0,this.J6t="",this.q6t="",this.$6t=!1;const i=this.aW().wf();this.Yf=new QM.qf(QM.jf.Jf(i,"keydown",t=>this.X6t(t.data)),QM.jf.Jf(i,"keyup",t=>this.Y6t(t.data)),QM.jf.Jf(i,"window-blur",()=>this.K6t()),QM.jf.Jf(i,"keyboard-blur",()=>this.K6t())),this.Nc.$B(this.qM())}zn(){super.zn()}async qM(){const t=await this.ZCt("init");this.$6t=t.isKeyboardLockSupported}X6t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.U6t.has(i)||(this.U6t.add(i),this.H6t.add(s),this.J6t=i,this.z6t=s,this.q6t=e,this.qH(QM.sW.Keyboard.QB.Z6t),this.qH(QM.sW.Keyboard.QB.Q6t),this.qH(QM.sW.Keyboard.QB.t8t),this.qH(QM.sW.Keyboard.QB.s8t))}Y6t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.U6t.delete(i),this.H6t.delete(s),this.J6t=i,this.z6t=s,this.q6t=e,this.qH(QM.sW.Keyboard.QB.i8t),this.qH(QM.sW.Keyboard.QB.e8t),this.qH(QM.sW.Keyboard.QB.n8t),this.qH(QM.sW.Keyboard.QB.r8t)}K6t(){for(const t of this.H6t)this.H6t.delete(t),this.z6t=t,this.qH(QM.sW.Keyboard.QB.i8t),this.qH(QM.sW.Keyboard.QB.e8t),this.qH(QM.sW.Keyboard.QB.r8t);this.U6t.clear()}j6t(t){return this.U6t.has(t)}V6t(t){return this.H6t.has(t)}oG(){return{tk:this.z6t,tkk:this.q6t}}aG(t){this.z6t=t.tk,t.hasOwnProperty("tkk")&&(this.q6t=t.tkk)}aPt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.z6t},{name:t+".debugger.last-key-string",value:QM.sW.Keyboard.wht.h8t(this.z6t)},{name:t+".debugger.last-typed-key",value:this.q6t}]}]}}}{const sG=self._s,iG=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];sG.sW.Keyboard.QB={j6t(t){return this.H6t.has(t)},Q6t(t){return this.z6t===t},Z6t:()=>!0,i8t:()=>!0,e8t(t){return this.z6t===t},V6t(t){return t=Math.floor(t),this.H6t.has(t)},s8t(t){return this.z6t===t},r8t(t){return this.z6t===t},t8t(t){const s=iG[t];return this.J6t===s},n8t(t){const s=iG[t];return this.J6t===s},o8t(t){const s=iG[t];return this.U6t.has(s)},a8t(){return this.$6t},l8t:()=>!0,u8t:()=>!0}}{const eG=self._s;eG.sW.Keyboard.yht={async c8t(t){if(!this.$6t)return;let s=[];t&&(s=t.split(",")),(await this.ZCt("lock-keyboard",{keysArr:s})).isOk?this.qH(eG.sW.Keyboard.QB.l8t):this.qH(eG.sW.Keyboard.QB.u8t)},f8t(){this.$6t&&this.ZCt("unlock-keyboard")}}}{let nG=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self._s.sW.Keyboard.wht={d8t(){return this.z6t},h8t:t=>nG(t),p8t(){return this.q6t}}}{const rG=self._s;rG.sW.Touch=class extends rG.YIt{constructor(t){super(t)}zn(){super.zn()}}}{let hG=function(){return lG.Vj().sq()};0;const oG=self._s,aG=self.Ls;oG.sW.Touch.fEt=class extends oG.OCt{constructor(t){super(t)}zn(){super.zn()}SCt(){}vCt(){return self.m8t}};let lG=null;self.m8t=class extends self.nV{constructor(t){super(t),lG=t,t.aW().vB().MB=this}requestPermission(t){aG.le(t);const s=hG();if("orientation"===t)return s.g8t(0);if("motion"===t)return s.g8t(1);throw new Error("invalid type")}}}{const uG=self._s,cG="touch";uG.sW.Touch.Instance=class extends uG.BCt{constructor(t,s){super(t,cG),this.y8t=new Map,this.w8t=!1,this.S8t=!1,this.v8t=0,this.b8t=0,this.M8t=0,this.G8t=0,this.x8t=0,this.T8t=0,this._8t=0,this.I8t=0,this.C8t=0,this.P8t=0,this.R8t=0,this.A8t=0,this.E8t=0,this.F8t=0,this.O8t=0,this.D8t=0,this.k8t=0,this.L8t=[],s&&(this.w8t=s[0]),this.XCt("permission-result",t=>this.N8t(t));const i=this.aW().wf();this.Yf=new uG.qf(uG.jf.Jf(i,"pointerdown",t=>this.B8t(t.data)),uG.jf.Jf(i,"pointermove",t=>this.W8t(t.data)),uG.jf.Jf(i,"pointerup",t=>this.j8t(t.data,!1)),uG.jf.Jf(i,"pointercancel",t=>this.j8t(t.data,!0)),uG.jf.Jf(i,"deviceorientation",t=>this.V8t(t.data)),uG.jf.Jf(i,"deviceorientationabsolute",t=>this.U8t(t.data)),uG.jf.Jf(i,"devicemotion",t=>this.H8t(t.data)),uG.jf.Jf(i,"tick2",t=>this.i8()))}zn(){this.y8t.clear(),super.zn()}B8t(t){if("mouse"===t.pointerType){if(!this.w8t)return;this.S8t=!0}const s=t.pointerId;if(this.y8t.has(s))return;const i=t.pageX-this.Nc.QW(),e=t.pageY-this.Nc.sj(),n=performance.now(),r=this.y8t.size;this.R8t=r,this.A8t=s;const h=uG.Hn(uG.sW.Touch.z8t);h.OFt(n,i,e,s,r),this.y8t.set(s,h),this.qH(uG.sW.Touch.QB.J8t),this.qH(uG.sW.Touch.QB.q8t),this.F8t=i,this.O8t=e,this.k8t=0,this.qH(uG.sW.Touch.QB.$8t)}W8t(t){if("mouse"===t.pointerType&&!this.S8t)return;const s=this.y8t.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.$O()<2)return;const e=t.pageX-this.Nc.QW(),n=t.pageY-this.Nc.sj();s.CQ(i,e,n,t.width,t.height,t.pressure)}j8t(t,s){if("mouse"===t.pointerType){if(!this.S8t)return;this.S8t=!1}const i=performance.now(),e=t.pointerId,n=this.y8t.get(e);if(n){if(this.R8t=n.X8t(),this.A8t=n.E$(),!s){const s=t.pageX-this.Nc.QW(),i=t.pageY-this.Nc.sj();this.F8t=s,this.O8t=i,this.k8t=1,this.qH(uG.sW.Touch.QB.$8t)}if(this.qH(uG.sW.Touch.QB.Y8t),this.qH(uG.sW.Touch.QB.K8t),!s){const t=n.Z8t(i);"single-tap"===t?(this.qH(uG.sW.Touch.QB.Q8t),this.F8t=n.$M(),this.O8t=n.KM(),this.qH(uG.sW.Touch.QB.t7t)):"double-tap"===t&&(this.qH(uG.sW.Touch.QB.s7t),this.F8t=n.$M(),this.O8t=n.KM(),this.qH(uG.sW.Touch.QB.i7t))}n.zn(),this.y8t.delete(e)}}g8t(t){return this.QCt("request-permission",{type:t}),new Promise((s,i)=>{this.L8t.push({type:t,resolve:s,reject:i})})}N8t(t){const s=t.result,i=t.type;this.E8t=i;const e=this.L8t.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.L8t=this.L8t.filter(t=>t.type!==i),s?(this.qH(uG.sW.Touch.QB.e7t),0===i?this.Nc.mqt():this.Nc.gqt()):this.qH(uG.sW.Touch.QB.n7t)}V8t(t){"number"==typeof t.webkitCompassHeading?this.v8t=t.webkitCompassHeading:t.absolute&&(this.v8t=t.alpha),this.b8t=t.alpha,this.M8t=t.beta,this.G8t=t.gamma}U8t(t){this.v8t=t.alpha}H8t(t){const s=t.acceleration;s&&(this.x8t=s.x,this.T8t=s.y,this._8t=s.z);const i=t.accelerationIncludingGravity;i&&(this.I8t=i.x,this.C8t=i.y,this.P8t=i.z)}i8(){const t=performance.now();let s=0;for(const i of this.y8t.values())i.$O()<=t-50&&i.r7t(t),i.h7t(t)&&(this.R8t=i.X8t(),this.A8t=i.E$(),this.D8t=s,this.qH(uG.sW.Touch.QB.o7t),this.F8t=i.$M(),this.O8t=i.KM(),this.qH(uG.sW.Touch.QB.a7t),this.D8t=0),++s}l7t(t){t=Math.floor(t);for(const s of this.y8t.values()){if(0===t)return s;--t}return null}u7t(t,s){return t>=0&&s>=0&&t<this.Nc.Dzt()&&s<this.Nc.kzt()}aPt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.y8t.values()].map(t=>({name:"$"+t.E$(),value:t.$M()+", "+t.KM()}))}]}}}{const fG=self._s;fG.sW.Touch.QB={q8t:()=>!0,K8t:()=>!0,c7t(){return this.y8t.size>0},$8t(t,s){return!!t&&s===this.k8t&&!!this.u7t(this.F8t,this.O8t)&&this.Nc.RL()._Nt(t,[[this.F8t,this.O8t]],!1)},f7t(t){if(!t)return!1;const s=this.Nc.Ogt().sxt(),i=[...this.y8t.values()].filter(t=>this.u7t(t.$M(),t.KM())).map(t=>[t.$M(),t.KM()]);return fG.xor(this.Nc.RL()._Nt(t,i,s),s)},d7t(t,s,i){const e=this.l7t(t);return!!e&&fG.compare(e.xq(),s,i)},p7t:()=>!0,m7t:()=>!0,g7t(t,s,i){this.Nc.mqt();let e=0;return e=0===t?this.b8t:1===t?this.M8t:this.G8t,fG.compare(e,s,i)},y7t(t,s,i){this.Nc.gqt();let e=0;return e=0===t?this.I8t:1===t?this.C8t:2===t?this.P8t:3===t?this.x8t:4===t?this.T8t:this._8t,fG.compare(e,s,i)},J8t(t){return(t=Math.floor(t))===this.R8t},Y8t(t){return(t=Math.floor(t))===this.R8t},w7t(t){return t=Math.floor(t),this.y8t.size>=t+1},o7t:()=>!0,Q8t:()=>!0,s7t:()=>!0,a7t(t){return!!t&&!!this.u7t(this.F8t,this.O8t)&&this.Nc.RL()._Nt(t,[[this.F8t,this.O8t]],!1)},t7t(t){return!!t&&!!this.u7t(this.F8t,this.O8t)&&this.Nc.RL()._Nt(t,[[this.F8t,this.O8t]],!1)},i7t(t){return!!t&&!!this.u7t(this.F8t,this.O8t)&&this.Nc.RL()._Nt(t,[[this.F8t,this.O8t]],!1)},e7t(t){return this.E8t===t},n7t(t){return this.E8t===t}}}self._s.sW.Touch.yht={S7t(t){this.g8t(t)}};{const dG=self._s;dG.sW.Touch.wht={v7t(){return this.y8t.size},aIt(t){const s=this.l7t(this.D8t);return s?s.b7t(this.Nc.EB(),t,!0):0},lIt(t){const s=this.l7t(this.D8t);return s?s.b7t(this.Nc.EB(),t,!1):0},M7t(t,s){const i=this.l7t(t);return i?i.b7t(this.Nc.EB(),s,!0):0},G7t(t,s){const i=this.l7t(t);return i?i.b7t(this.Nc.EB(),s,!1):0},x7t(t,s){const i=this.y8t.get(t);return i?i.b7t(this.Nc.EB(),s,!0):0},T7t(t,s){const i=this.y8t.get(t);return i?i.b7t(this.Nc.EB(),s,!1):0},_7t(){const t=this.l7t(0);return t?t.$M():0},I7t(){const t=this.l7t(0);return t?t.KM():0},C7t(t){const s=this.l7t(t);return s?s.$M():0},P7t(t){const s=this.l7t(t);return s?s.KM():0},R7t(t){const s=this.y8t.get(t);return s?s.$M():0},A7t(t){const s=this.y8t.get(t);return s?s.KM():0},E7t(t){const s=this.l7t(t);return s?s.xq():0},F7t(t){const s=this.y8t.get(t);return s?s.xq():0},O7t(t){const s=this.l7t(t);return s?dG.Qn(s.FV()):0},D7t(t){const s=this.y8t.get(t);return s?dG.Qn(s.FV()):0},k7t(){return this.Nc.mqt(),this.v8t},L7t(){return this.Nc.mqt(),this.b8t},N7t(){return this.Nc.mqt(),this.M8t},B7t(){return this.Nc.mqt(),this.G8t},W7t(){return this.Nc.gqt(),this.I8t},j7t(){return this.Nc.gqt(),this.C8t},V7t(){return this.Nc.gqt(),this.P8t},U7t(){return this.Nc.gqt(),this.x8t},H7t(){return this.Nc.gqt(),this.T8t},z7t(){return this.Nc.gqt(),this._8t},J7t(){return this.R8t},q7t(){return this.A8t},$7t(t){const s=this.y8t.get(t);return s?s.Vg():0},X7t(t){const s=this.y8t.get(t);return s?s.Zg():0},Y7t(t){const s=this.y8t.get(t);return s?s.K7t():0}}}{const pG=self._s;let mG=-1e3,gG=-1e3,yG=-1e4;pG.sW.Touch.z8t=class extends pG.Vn{constructor(){super(),this.Z7t=0,this.ZI=0,this.QUt=0,this.HD=0,this.Q7t=0,this.t9t=0,this.s9t=0,this.Pa=0,this.Ra=0,this.i9t=0,this.e9t=0,this.Py=0,this.Ry=0,this.n9t=0,this.r9t=!1,this.h9t=!1}zn(){}OFt(t,s,i,e,n){this.Z7t=e,this.ZI=n,this.HD=t,this.Q7t=t,this.QUt=t,this.t9t=s,this.s9t=i,this.Pa=s,this.Ra=i,this.i9t=s,this.e9t=i}CQ(t,s,i,e,n,r){this.Q7t=this.HD,this.HD=t,this.i9t=this.Pa,this.e9t=this.Ra,this.Pa=s,this.Ra=i,this.Py=e,this.Ry=n,this.n9t=r,!this.h9t&&pG.ir(this.t9t,this.s9t,this.Pa,this.Ra)>=15&&(this.h9t=!0)}E$(){return this.Z7t}X8t(){return this.ZI}$O(){return this.HD}r7t(t){this.Q7t=t}$M(){return this.Pa}KM(){return this.Ra}xq(){const t=pG.ir(this.Pa,this.Ra,this.i9t,this.e9t),s=(this.HD-this.Q7t)/1e3;return s>0?t/s:0}FV(){return pG.nr(this.i9t,this.e9t,this.Pa,this.Ra)}Vg(){return this.Py}Zg(){return this.Ry}K7t(){return this.n9t}h7t(t){return!this.r9t&&t-this.QUt>=500&&!this.h9t&&pG.ir(this.t9t,this.s9t,this.Pa,this.Ra)<15&&(this.r9t=!0,!0)}Z8t(t){return this.r9t?"":t-this.QUt<=333&&!this.h9t&&pG.ir(this.t9t,this.s9t,this.Pa,this.Ra)<15?t-yG<=666&&pG.ir(mG,gG,this.Pa,this.Ra)<25?(mG=-1e3,gG=-1e3,yG=-1e4,"double-tap"):(mG=this.Pa,gG=this.Ra,yG=t,"single-tap"):""}b7t(t,s,i){if(void 0===s)return t.NB(0).Y3(this.Pa,this.Ra)[i?0:1];{const e=t.kB(s);return e?e.sH(this.Pa,this.Ra)[i?0:1]:0}}}}{const wG=self._s;wG.sW.o9t=class extends wG.YIt{constructor(t){super(t)}zn(){super.zn()}}}{const SG=self._s;SG.sW.o9t.fEt=class extends SG.OCt{constructor(t){super(t)}zn(){super.zn()}SCt(){}}}{const vG=self._s,bG="localstorage";vG.sW.o9t.Instance=class extends vG.BCt{constructor(t,s){super(t,bG),this.a9t="",this.BI="",this.l9t=[],this.u9t="",this.c9t=!1,this.f9t=0,this.d9t=0,this.p9t=!1,s&&(this.p9t=s[0]);const i=this.Nc.fj();this.cj=null,this.p9t?this.cj=i.Ti({_i:!0}):this.cj=i,this.m9t=new Map,this.g9t=!1,this.Nc.$B(this.qM())}async qM(){const t=await Promise.race([this.ZCt("init"),vG.dh(3e3)]);t&&(this.c9t=t.isPersistent)}zn(){super.zn()}async y9t(t){this.u9t=this.w9t(t),await this.KB(vG.sW.o9t.QB.S9t)}w9t(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}aPt(){return this.g9t||this.v9t(),[{title:"plugins.localstorage.name",properties:[...this.m9t.entries()].map(t=>({name:"$"+t[0],value:t[1],YZt:s=>this.cj.setItem(t[0],s)}))}]}async v9t(){this.g9t=!0;try{const t=await this.cj.keys();t.sort((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0});const s=await Promise.all(t.map(t=>this.cj.getItem(t)));this.m9t.clear();for(let i=0,e=t.length;i<e;++i)this.m9t.set(t[i],s[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.g9t=!1}}}}{const MG=self._s;MG.sW.o9t.QB={b9t(t){return this.a9t===t},M9t:()=>!0,G9t(t){return this.a9t===t},x9t:()=>!0,T9t(t){return this.a9t===t},_9t:()=>!0,I9t:()=>!0,C9t:()=>!0,S9t:()=>!0,P9t(t){return this.a9t===t},R9t(t){return this.a9t===t},A9t(t,s){return MG.compare(this.a9t,t,s)},E9t(t,s){return MG.compare(this.BI,t,s)},F9t(){return this.d9t>0},O9t(){return this.f9t>0},D9t:()=>!0,k9t:()=>!0,L9t(){return this.c9t}}}{let GG=function(t){return"string"==typeof t||"number"==typeof t};0;const xG=self._s;xG.sW.o9t.yht={async N9t(t,s){this.d9t++;try{const i=await this.cj.setItem(t,s);await this.$Ct(async()=>{this.a9t=t,this.BI=i,await this.KB(xG.sW.o9t.QB.M9t),await this.KB(xG.sW.o9t.QB.b9t)})}catch(t){await this.y9t(t)}finally{this.d9t--,0===this.d9t&&await this.KB(xG.sW.o9t.QB.D9t)}},async B9t(t,s){if(!s)return;const i=s.HTt(this.fi);if(!i)return;const e=i.sq();if(!e)return;const n=e.W9t();this.d9t++;try{await this.cj.setItem(t,n),await this.$Ct(async()=>{this.a9t=t,this.BI="",await this.KB(xG.sW.o9t.QB.M9t),await this.KB(xG.sW.o9t.QB.b9t)})}catch(t){await this.y9t(t)}finally{this.d9t--,0===this.d9t&&await this.KB(xG.sW.o9t.QB.D9t)}},async j9t(t){this.f9t++;try{const s=await this.cj.getItem(t);await this.$Ct(async()=>{this.a9t=t,this.BI=GG(s)?s:"",await this.KB(xG.sW.o9t.QB.x9t),await this.KB(xG.sW.o9t.QB.G9t)})}catch(t){await this.y9t(t)}finally{this.f9t--,0===this.f9t&&await this.KB(xG.sW.o9t.QB.k9t)}},async V9t(t,s){if(!s)return;const i=s.HTt(this.fi);if(!i)return;const e=i.sq();this.f9t++;try{let s=await this.cj.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.$Ct(async()=>{this.BI="",this.a9t=t,e.U9t(s),await this.KB(xG.sW.o9t.QB.x9t),await this.KB(xG.sW.o9t.QB.G9t)})}catch(t){await this.y9t(t)}finally{this.f9t--,0===this.f9t&&await this.KB(xG.sW.o9t.QB.k9t)}},async H9t(t){try{const s=await this.cj.getItem(t);await this.$Ct(async()=>{this.a9t=t,null==s?(this.BI="",await this.KB(xG.sW.o9t.QB.R9t)):(this.BI=GG(s)?s:"",await this.KB(xG.sW.o9t.QB.P9t))})}catch(t){await this.y9t(t)}},async Oc(t){try{await this.cj.removeItem(t),await this.$Ct(async()=>{this.a9t=t,this.BI="",await this.KB(xG.sW.o9t.QB._9t),await this.KB(xG.sW.o9t.QB.T9t)})}catch(t){await this.y9t(t)}},async z9t(){try{await this.cj.clear(),await this.$Ct(async()=>{this.a9t="",this.BI="",xG.Sh(this.l9t),await this.KB(xG.sW.o9t.QB.I9t)})}catch(t){await this.y9t(t)}},async J9t(){try{const t=await this.cj.keys();await this.$Ct(async()=>{this.l9t=t,await this.KB(xG.sW.o9t.QB.C9t)})}catch(t){await this.y9t(t)}},async q9t(){const t=await this.ZCt("request-persistent");t.isOk&&(this.c9t=t.isPersistent)},$9t(t){if(!this.p9t)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.cj.xi(new Map(s.items))}}}self._s.sW.o9t.wht={X9t(){return this.BI},Y9t(){return this.a9t},K9t(){return this.l9t.length},Z9t(t){return(t=Math.floor(t))<0||t>=this.l9t.length?"":this.l9t[t]},Q9t(){return this.u9t},tts(){return this.p9t?JSON.stringify({"is-c3-storage":!0,items:[...this.cj.Gi()]}):""}};{const TG=self._s,_G=[];TG.sW.Audio=class extends TG.YIt{constructor(t){super(t)}sts(t){_G.push(t)}static async its(){await Promise.all(_G),TG.Sh(_G)}zn(){super.zn()}}}{let IG=function(){return AG.Vj().sq()},CG=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};0;const PG=self._s,RG=self.Ls;PG.sW.Audio.fEt=class extends PG.OCt{constructor(t){super(t)}zn(){super.zn()}SCt(){}vCt(){return self.ets}};let AG=null;self.ets=class extends self.nV{constructor(t){super(t),AG=t}get nts(){return CG().GetAudioContextExtern()}get rts(){return CG().GetDestinationNodeExtern()}get hts(){return IG().ots()}set hts(t){IG().ats(t)}get lts(){return IG().uts()}set lts(t){RG.re(t),IG().cts(t)}fts(){IG().dts()}}}{const EG=self._s,FG="audio",OG=["interactive","balanced","playback"];EG.sW.Audio.Instance=class extends EG.BCt{constructor(t,s){super(t,FG),this.pts=0,this.mts=0,this.gts=[],this.yts=!0,this.wts=0,this.Sts=0,this.vts=!1,this.bts=1,this.Mts=1,this.Gts=[this.Nc.K1()/2,this.Nc.Z1()/2,600],this.xts=[0,0,-1],this.Tts=[0,1,0],this._ts=600,this.Its=1e4,this.Cts=1,this.Pts=null,this.Rts=-1,this.Ats=1,this.Ets=!1,this.Fts=0,this.Ots="suspended",this.Dts=0,this.kts=new Map,this.Lts=0,this.Nts=0,this.Bts=new Map,this.Wts=new Map;let i="interactive";s&&(this.wts=s[0],this.Sts=s[1],this.vts=s[2],i=OG[s[3]],this.yts=s[4],this.bts=s[5],this.Mts=s[6],this.Gts[2]=s[7],this._ts=s[8],this.Its=s[9],this.Cts=s[10]),this.jts=[],this.Vts=[],this.Uts=[],this.YCt([["state",t=>this.Hts(t)],["audiocontext-state",t=>this.zts(t)],["fxstate",t=>this.Jts(t)],["trigger",t=>this.qts(t)],["buffer-metadata",t=>this.$ts(t)]]);const e=this.aW().wf();this.Yf=new EG.qf(EG.jf.Jf(e,"instancedestroy",t=>this.Xts(t.fq)),EG.jf.Jf(e,"afterload",()=>this.f8()),EG.jf.Jf(e,"suspend",()=>this.Yts()),EG.jf.Jf(e,"resume",()=>this.Kts()));const n=this.Nc.JW(),r="Safari"===EG.Ks.ti,h=this.Nc.OJt()||"macos-wkwebview"===n,o=this.Nc.IL().hZ(),a="playable-ad-single-file"===n,l="cordova"===n&&"Android"===EG.Ks.Zs,u=r||h||o||a||l;this.Nc.$B(this.ZCt("create-audio-context",{preloadList:this.Nc.IL().jZ().map(t=>({originalUrl:t.VZ,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.wts,latencyHint:i,panningModel:this.bts,distanceModel:this.Mts,refDistance:this._ts,maxDistance:this.Its,rolloffFactor:this.Cts,listenerPos:this.Gts,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.Fts=t.sampleRate,this.Ots=t.audioContextState,this.Dts=t.outputLatency})),this.nPt()}zn(){this.Pts=null,super.zn()}Zts(t){return this.yts?t.split(" ").filter(t=>!!t):t?[t]:[]}Qts(t,s){for(const i of s){let s=!1;for(const e of t)if(EG.Ke(e,i)){s=!0;break}if(!s)return!1}return!0}tss(t,s){return this.Qts(t,this.Zts(s))}sts(t){this.zj().sts(t)}Xts(t){this.Pts===t&&(this.Pts=null)}sss(t){return Math.pow(10,t/20)}iss(t){const s=this.sss(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}ess(t){return Math.log(t)/Math.log(10)*20}nss(t){return this.ess(Math.max(Math.min(t,1),0))}rss(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.pts:this.mts,this.pts=0,this.mts=0,{hss:t,oss:s}}Yts(){this.vts||this.KCt("set-suspended",{isSuspended:!0})}Kts(){this.vts||this.KCt("set-suspended",{isSuspended:!1})}Hts(t){const s=t.tickCount;this.Dts=t.outputLatency;const i=this.jts.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.jts=t.audioInstances,this.Uts=t.analysers,i.length>0&&EG.En(this.jts,i)}$ts(t){this.Bts.set(t.originalUrl,{duration:t.duration})}zts(t){this.Ots=t.audioContextState}Iht(){return this.Nc.hjt()?"running":this.Ots}Jts(t){this.Vts=t.fxstate}ass(t){const s=this.Zts(t);for(const t of this.jts)if(this.Qts(t.tags,s))return t;return null}lss(t){const s=this.Zts(t);return this.jts.some(t=>this.Qts(t.tags,s)&&t.isPlaying)}uss(t,s,i,e,n){if(this.lss(s))return null;const r=this.Bts.get(t),h={tags:this.Zts(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.jts.push(h),h}css(t){const s=this.Zts(t);for(const t of this.jts)this.Qts(t.tags,s)&&(t.isPlaying=!1)}async qts(t){const s=t.type;this.gts=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.jts)if(t.aiid===i){t.isPlaying=!1;break}await this.KB(EG.sW.Audio.QB.fss)}else"fade-ended"===s&&await this.KB(EG.sW.Audio.QB.dss)}pss(t){return this.tss(this.gts,t)}u7(){const t={timeScale:this.Nc.WN(),gameTime:this.Nc.PJt(),instPans:this.mss(),tickCount:this.Nc.RJt()};if(this.Pts){const s=this.Pts.DB();this.Gts[0]=s.$M(),this.Gts[1]=s.KM(),t.listenerPos=this.Gts,t.listenerOrientation=[...this.xts,...this.Tts]}this.KCt("tick",t)}gss(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}mss(){return this.jts.filter(t=>-1!==t.uid).map(t=>this.Nc.PB(t.uid)).filter(t=>t).map(t=>{const s=t.DB(),i=s.kB().FV(),[e,n]=this.gss(s.$M(),s.KM(),-i,this.Gts[0],this.Gts[1]);return{uid:t.xH(),x:e,y:n,z:s.Dz(),angle:s.FV()-i}})}yss(t,s){for(const i of this.Uts)if(i.index===s&&EG.Ke(i.tag,t))return i;return null}wss(t){for(const s of this.Zts(t)){const t=s.toLowerCase();this.kts.set(t,(this.kts.get(t)||0)+1)}}ots(){return this.Ets}ats(t){t=!!t,this.Ets!==t&&(this.Ets=t,this.KCt("set-silent",{isSilent:t}))}uts(){return this.Ats}cts(t){this.Ats!==t&&(this.Ats=t,this.KCt("set-master-volume",{vol:t}))}dts(){this.KCt("stop-all");for(const t of this.jts)t.isPlaying=!1}Sss(t){return!(t.hasOwnProperty("placeholder")||3===this.Sts||t.isMusic&&1===this.Sts||!t.isMusic&&2===this.Sts)}oG(){return{isSilent:this.Ets,masterVolume:this.Ats,listenerZ:this.Gts[2],listenerForwardVec:this.xts,listenerUpVec:this.Tts,listenerUid:this.Pts?this.Pts.xH():-1,remoteUrls:[...this.Wts.entries()],playing:this.jts.filter(t=>this.Sss(t)),effects:this.Vts,analysers:this.Uts}}aG(t){if(this.Ets=t.isSilent,this.Ats=t.masterVolume,this.Gts[2]=t.listenerZ,this.Pts=null,this.Rts=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.xts=t.listenerForwardVec:this.xts=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.Tts=t.listenerUpVec:this.Tts=[0,1,0],this.Wts.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.Wts.set(s,i);this.jts=t.playing;for(const t of this.jts)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.Vts=t.effects,this.Uts=t.analysers}f8(){if(-1!==this.Rts&&(this.Pts=this.Nc.PB(this.Rts),this.Rts=-1,this.Pts)){const t=this.Pts.DB();this.Gts[0]=t.$M(),this.Gts[1]=t.KM()}for(const t of this.jts){const s=this.Nc.IL().WZ(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.Vts))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.IL().WZ(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.KCt("load-state",{saveLoadMode:this.Sts,timeScale:this.Nc.WN(),gameTime:this.Nc.PJt(),listenerPos:this.Gts,listenerOrientation:[...this.xts,...this.Tts],isSilent:this.Ets,masterVolume:this.Ats,playing:this.jts.filter(t=>null!==t.bufferUrl),effects:this.Vts})}aPt(){const t=[];for(const[s,i]of Object.entries(this.Vts))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.jts.length},...this.jts.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.sW.Audio.QB={fss(t){return this.pss(t)},dss(t){return this.pss(t)},vss(){return this.Nts===this.Lts},bss:()=>!0,Mss(){return this.ots()},Gss(){for(const t of this.jts)if(t.isPlaying)return!0;return!1},xss(t){return this.lss(t)}};{const DG=self._s,kG=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];DG.sW.Audio.yht={Play(t,s,i,e,n){const r=DG.sW.Audio.yht.Tss.call(this,t,s,i,e,n);return this.sts(r),r},Cht(t,s,i,e){DG.sW.Audio.yht.Tss.call(this,t,0,s,0,i,e)},async Tss(t,s,i,e,n,r){if(this.Ets)return;const h=t[1],o=this.Nc.IL().WZ(t[0]);if(!o)return;const{hss:a,oss:l}=this.rss(),u=this.uss(t[0],n,h,0!==s,this.iss(i));try{await this.ZCt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.Zts(n),isLooping:0!==s,vol:this.iss(i),stereoPan:DG.Yn(e/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.RJt())}},async _ss(t,s,i,e,n,r,h,o,a,l,u){if(this.Ets)return;const c=t[1],f=this.Nc.IL().WZ(t[0]);if(!f)return;const{hss:d,oss:p}=this.rss(),m=this.uss(t[0],u,c,0!==s,this.iss(i));try{await this.ZCt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.Zts(u),isLooping:0!==s,vol:this.iss(i),pos:0,off:d,trueClock:p,panning:{x:e,y:n,z:r,angle:DG.Zn(h),innerAngle:DG.Zn(o),outerAngle:DG.Zn(a),outerGain:this.iss(l)}})}finally{m&&(m.placeholder=this.Nc.RJt())}},async Iss(t,s,i,e,n,r,h,o){if(this.Ets)return;if(!e)return;const a=e.HTt();if(!a||!a.DB())return;const l=a.DB(),u=l.kB().FV(),[c,f]=this.gss(l.$M(),l.KM(),-u,this.Gts[0],this.Gts[1]),d=t[1],p=this.Nc.IL().WZ(t[0]);if(!p)return;const{hss:m,oss:g}=this.rss(),y=this.uss(t[0],o,d,0!==s,this.iss(i));try{await this.ZCt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Zts(o),isLooping:0!==s,vol:this.iss(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.Dz(),angle:l.FV()-u,innerAngle:DG.Zn(n),outerAngle:DG.Zn(r),outerGain:this.iss(h),uid:a.xH()}})}finally{y&&(y.placeholder=this.Nc.RJt())}},async Css(t,s,i,e,n,r){if(this.Ets)return;const h=1===t,o=this.Nc.IL().WZ(s)||this.Wts.get(s.toLowerCase());if(!o)return;const{hss:a,oss:l}=this.rss(),u=this.uss(s,r,h,0!==i,this.iss(e));try{await this.ZCt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.Zts(r),isLooping:0!==i,vol:this.iss(e),stereoPan:DG.Yn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.RJt())}},async Pss(t,s,i,e,n,r,h,o,a,l,u,c){if(this.Ets)return;const f=1===t,d=this.Nc.IL().WZ(s)||this.Wts.get(s.toLowerCase());if(!d)return;const{hss:p,oss:m}=this.rss(),g=this.uss(s,c,f,0!==i,this.iss(e));try{await this.ZCt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.Zts(c),isLooping:0!==i,vol:this.iss(e),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:DG.Zn(o),innerAngle:DG.Zn(a),outerAngle:DG.Zn(l),outerGain:this.iss(u)}})}finally{g&&(g.placeholder=this.Nc.RJt())}},async Rss(t,s,i,e,n,r,h,o,a){if(this.Ets)return;if(this.Ets)return;if(!n)return;const l=n.HTt();if(!l||!l.DB())return;const u=l.DB(),c=u.kB().FV(),[f,d]=this.gss(u.$M(),u.KM(),-c,this.Gts[0],this.Gts[1]),p=1===t,m=this.Nc.IL().WZ(s)||this.Wts.get(s.toLowerCase());if(!m)return;const{hss:g,oss:y}=this.rss(),w=this.uss(s,a,p,0!==i,this.iss(e));try{await this.ZCt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.Zts(a),isLooping:0!==i,vol:this.iss(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.Dz(),angle:u.FV()-c,innerAngle:DG.Zn(r),outerAngle:DG.Zn(h),outerGain:this.iss(o),uid:l.xH()}})}finally{w&&(w.placeholder=this.Nc.RJt())}},Ass(t,s){this.KCt("set-looping",{tags:this.Zts(t),isLooping:0===s})},Ess(t,s){this.KCt("set-muted",{tags:this.Zts(t),isMuted:0===s})},Tht(t,s){this.KCt("set-volume",{tags:this.Zts(t),vol:this.iss(s)})},Fss(t,s,i,e){this.KCt("fade-volume",{tags:this.Zts(t),vol:this.iss(s),duration:i,stopOnEnd:0===e})},Oss(t,s){this.KCt("set-stereo-pan",{tags:this.Zts(t),p:DG.Yn(s/100,-1,1)})},async Dss(t){const s=t[1],i=this.Nc.IL().WZ(t[0]);i&&(this.Lts++,await this.ZCt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.Nts++)},async kss(t,s){const i=1===t,e=this.Nc.IL().WZ(s)||this.Wts.get(s.toLowerCase());e&&(this.Lts++,await this.ZCt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.Nts++)},p$(t,s){this.KCt("set-playback-rate",{tags:this.Zts(t),rate:Math.max(s,0)})},n$(t){this.css(t),this.KCt("stop",{tags:this.Zts(t)})},Lss(){this.dts()},Nss(t,s){this.KCt("set-paused",{tags:this.Zts(t),paused:0===s})},Bss(t,s){this.KCt("seek",{tags:this.Zts(t),pos:s})},Wss(t){2===t&&(t=this.ots()?1:0),this.ats(0===t)},jss(t){const s=this.iss(t);this.cts(s)},Vss(t,s,i,e,n,r,h){const o=kG[s];this.wss(t),this.KCt("add-effect",{type:"filter",tags:this.Zts(t),params:[o,i,e,n,r,DG.Yn(h/100,0,1)]})},Uss(t,s,i,e){this.wss(t),this.KCt("add-effect",{type:"delay",tags:this.Zts(t),params:[s,this.iss(i),DG.Yn(e/100,0,1)]})},Hss(t,s,i,e,n,r){this.wss(t),this.KCt("add-effect",{type:"flanger",tags:this.Zts(t),params:[s/1e3,i/1e3,e,n/100,DG.Yn(r/100,0,1)]})},zss(t,s,i,e,n,r,h){this.wss(t),this.KCt("add-effect",{type:"phaser",tags:this.Zts(t),params:[s,i,e,n,r,DG.Yn(h/100,0,1)]})},Jss(t,s,i,e){const n=this.Nc.IL().WZ(s[0]);n&&(this.wss(t),this.KCt("add-effect",{type:"convolution",tags:this.Zts(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,DG.Yn(e/100,0,1)]}))},qss(t,s){this.wss(t),this.KCt("add-effect",{type:"gain",tags:this.Zts(t),params:[this.iss(s)]})},$ss(t,s){this.wss(t),this.KCt("add-effect",{type:"stereopan",tags:this.Zts(t),params:[DG.Yn(s/100,-1,1)]})},Xss(t){this.wss(t),this.KCt("add-effect",{type:"gain",tags:this.Zts(t),params:[0]})},Yss(t,s,i){this.wss(t),this.KCt("add-effect",{type:"tremolo",tags:this.Zts(t),params:[s,DG.Yn(i/100,0,1)]})},Kss(t,s,i){this.wss(t),this.KCt("add-effect",{type:"ringmod",tags:this.Zts(t),params:[s,DG.Yn(i/100,0,1)]})},Zss(t,s,i,e,n,r){this.wss(t),this.KCt("add-effect",{type:"distortion",tags:this.Zts(t),params:[this.sss(s),this.sss(i),e,this.sss(n),DG.Yn(r/100,0,1)]})},Qss(t,s,i,e,n,r){this.wss(t),this.KCt("add-effect",{type:"compressor",tags:this.Zts(t),params:[s,i,e,n/1e3,r/1e3]})},tis(t,s,i){this.wss(t),this.KCt("add-effect",{type:"analyser",tags:this.Zts(t),params:[s,i]})},sis(t){const s=this.Zts(t);for(const t of s)this.kts.set(t.toLowerCase(),0);this.KCt("remove-effects",{tags:s}),this.Vts={}},Mq(t,s,i,e,n,r){this.KCt("set-effect-param",{tags:this.Zts(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},iis(t){if(!t)return;const s=t.HTt();s&&s.DB()&&(this.Pts=s)},eis(t){this.Gts[2]=t},nis(t,s,i,e,n,r){this.xts[0]=t,this.xts[1]=s,this.xts[2]=-i,this.Tts[0]=e,this.Tts[1]=n,this.Tts[2]=-r},ris(t){this.pts=Math.max(t,0),this.mts=Math.max(t-performance.now()/1e3,0)},his(t){const s=t[1],i=this.Nc.IL().WZ(t[0]);i&&this.KCt("unload",{url:i.url,type:i.type,isMusic:s})},ois(t,s){const i=1===t,e=this.Nc.IL().WZ(s)||this.Wts.get(s.toLowerCase());e&&this.KCt("unload",{url:e.url,type:e.type,isMusic:i})},ais(){this.KCt("unload-all")},lis(t,s,i){this.Wts.set(i.toLowerCase(),{url:t,type:s})}}}{const LG=self._s;LG.sW.Audio.wht={uis(t){const s=this.ass(t);return s?s.duration:0},bht(t){const s=this.ass(t);return s?s.playbackTime:0},_ht(t){const s=this.ass(t);return s?s.playbackRate:0},Mht(t){const s=this.ass(t);return s?this.nss(s.volume):0},cis(){return this.nss(this.uts())},fis(t){return this.kts.get(t.toLowerCase())||0},dis(t,s){const i=this.yss(t,Math.floor(s));return i?i.binCount:0},pis(t,s,i){const e=this.yss(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},mis(t,s){const i=this.yss(t,Math.floor(s));return i?i.peak:0},gis(t,s){const i=this.yss(t,Math.floor(s));return i?i.rms:0},yis(){return this.Fts},wis:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,Sis(){return this.Dts},vis(t,s){return 0==(t=LG.Yn(+t,0,100)/100)?-1/0:t<.1?this.nss(LG._t(0,this.iss(s),10*t)):LG._t(s,0,(t-.1)/.9)}}}{const NG=self._s;NG.gut.Ks=class extends NG.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const BG=self._s;BG.gut.Ks.fEt=class extends BG.sRt{constructor(t){super(t)}zn(){super.zn()}SCt(){}}}{let WG=function(t,s,i,e,n){const r=s*n,h=i*n;return jG.Yn(t*n+.5*e*n*n,r,h)};0;const jG=self._s,VG=self.Ls,UG=self.hq,HG=0,zG=1,JG=2,qG=3,$G=4,XG=5,YG=6,KG=7,ZG=8,QG=9,tx=.05;jG.gut.Ks.Instance=class extends jG.eRt{constructor(t,s){super(t),this.bis=null,this.Mis=!1,this.Gis=!1,this.xis=!1,this.Tis=!1,this._is=!1,this.Iis=!1,this.Cis=!1,this.Pis=!1,this.Ris=!1,this.Ais=!1,this.Eis=null,this.Fis=-1,this.Ois=0,this.Dis=0,this.kis=!1,this.Lis=!1,this.Nis=this.Nc.RL().FNt(this.fi),this.Bis=-1,this.Wis="stopped",this.jis=-1,this.qQt=!0,this.Vis=0,this.Uis=0,this.His=0,this.zis=0,this.Jis=0,this.qis=0,this.To=1500,this.$is=1500,this.Xis=jG.Zn(90),this.Yis=330,this.Kis=1500,this.Zis=1500,this.Qis=650,this.tes=1e3,this.ses=!1,this.ies=0,this.ees=0,this.nes=!0,this.res=0,this.Ebt=!0,s&&(this.Yis=s[HG],this.Kis=s[zG],this.Zis=s[JG],this.Qis=s[qG],this.To=s[$G],this.tes=s[XG],this.ses=!!s[YG],this.ies=s[KG]/1e3,this.nes=!!s[ZG],this.Ebt=!!s[QG]);const i=this.Nc.wf();this.Yf=new jG.qf(jG.jf.Jf(i,"instancedestroy",t=>this.Xts(t.fq)),jG.jf.Jf(i,"afterload",t=>this.f8())),this.nes&&this.hes(),this.Ebt&&this.aRt(),this.oes()}zn(){this.bis&&(this.bis.zn(),this.bis=null),this.Eis=null,this.Nis=null,super.zn()}hes(){if(this.bis)return;const t=this.Nc.wf();this.bis=new jG.qf(jG.jf.Jf(t,"keydown",t=>this.X6t(t.data)),jG.jf.Jf(t,"keyup",t=>this.Y6t(t.data)),jG.jf.Jf(t,"window-blur",()=>this.K6t()),jG.jf.Jf(t,"keyboard-blur",()=>this.K6t()))}aes(){this.bis&&(this.bis.zn(),this.bis=null)}Xts(t){this.Eis===t&&(this.Eis=null),this.Nis===t&&(this.Nis=null)}X6t(t){switch(t.key){case"ArrowLeft":this.Mis=!0;break;case"ArrowRight":this.Gis=!0;break;case"ArrowUp":this.xis=!0}}Y6t(t){switch(t.key){case"ArrowLeft":this.Mis=!1;break;case"ArrowRight":this.Gis=!1;break;case"ArrowUp":this.xis=!1,this.Tis=!1}}K6t(){this.Mis=!1,this.Gis=!1,this.xis=!1,this.Tis=!1}oG(){return{ii:this.Cis,lfx:this.Ois,lfy:this.Dis,lfo:this.Eis?this.Eis.xH():-1,am:this.Wis,en:this.Ebt,fallt:this.jis,ft:this.qQt,dx:this.Vis,dy:this.Uis,ms:this.Yis,acc:this.Kis,dec:this.Zis,js:this.Qis,g:this.To,g1:this.$is,mf:this.tes,wof:this.Lis,woj:this.Nis?this.Nis.xH():-1,ga:this.Xis,edj:this.ses,cdj:this.Iis,dj:this._is,sus:this.ies,dc:this.nes,cc:this.res}}aG(t){this.Cis=t.ii,this.Ois=t.lfx,this.Dis=t.lfy,this.Fis=t.lfo,this.Wis=t.am;const s=t.en;this.jis=t.fallt||-1,this.qQt=t.ft,this.Vis=t.dx,this.Uis=t.dy,this.Yis=t.ms,this.Kis=t.acc,this.Zis=t.dec,this.Qis=t.js,this.To=t.g,this.$is=t.g1,this.tes=t.mf,this.Lis=t.wof,this.Bis=t.woj,this.Xis=t.ga,this.ses=t.edj,this.Iis=t.cdj,this._is=t.dj,this.ies=t.sus,this.nes=t.dc,this.res=t.cc||0,this.Mis=!1,this.Gis=!1,this.xis=!1,this.Tis=!1,this.Pis=!1,this.Ris=!1,this.Ais=!1,this.ees=0,this.nes?this.hes():this.aes(),this.P_t(s),this.oes()}f8(){-1===this.Fis?this.Eis=null:this.Eis=this.Nc.PB(this.Fis),-1===this.Bis?this.Nis=null:this.Nis=this.Nc.PB(this.Bis)}les(t){if(this.Eis=t,t){const s=t.DB();this.Ois=s.$M(),this.Dis=s.KM()}}ues(){return this.Nc.ON()>this.jis+tx}oes(){this.His=Math.cos(this.Xis),this.zis=Math.sin(this.Xis),this.Jis=Math.cos(this.Xis-Math.PI/2),this.qis=Math.sin(this.Xis-Math.PI/2),this.His=jG.Gr(this.His,6),this.zis=jG.Gr(this.zis,6),this.Jis=jG.Gr(this.Jis,6),this.qis=jG.Gr(this.qis,6),this.$is=this.To,this.To<0&&(this.His*=-1,this.zis*=-1,this.To=Math.abs(this.To))}ces(){return this.To<0?-1:1}fes(){const t=this.fi.DB(),s=this.Nc.RL(),i=this.fi,e=this.Eis,n=t.$M(),r=t.KM();if(t.Tz(this.His,this.zis),t.Mz(),!e||!s.RW(i,e)||e.cH().lFt()&&!s.qkt(e,i)||e.cH().uFt()&&!e.XFt()){let e=s.FW(i),h=null;if(!e&&this.ues()&&(h=s.FNt(i,!0)),t.Gz(n,r),t.Mz(),e)return s.RW(i,e)?null:(this.kis=!1,e);if(h&&h.length){let t=0;for(let e=0,n=h.length;e<n;++e)h[t]=h[e],s.RW(i,h[e])||++t;if(t>=1)return this.kis=!0,h[0]}return null}return t.Gz(n,r),t.Mz(),e}oRt(){if(!this.Ebt)return;const t=this.Nc.RN(this.fi);this.xis||this.Ais||(this.Tis=!1);let s=this.Mis||this.Pis,i=this.Gis||this.Ris,e=this.xis||this.Ais,n=e&&!this.Tis;this.Pis=!1,this.Ris=!1,this.Ais=!1,this.Cis&&(s=!1,i=!1,e=!1,n=!1),e||(this.ees=0),this.des();const[r,h,o]=this.pes();let a=this.fes();const l=a&&!this.Lis;let u=!1;if([u,a]=this.mes(a),u)return;this.ges(a,o,r,e),n=this.yes(a,n,e),a||this.wes(n,e,t),this.Lis=!!a;const c=this.Ses(s,i);let f=!1,d=0;if(0!==this.Vis&&([f,a]=this.ves(t,c,a,n)),0!==this.Uis){const[s,i]=this.bes(t,a);f=f||s,d=i}!f&&l&&this.Uis<0&&d>0&&(this.Uis=0,f=!0),this.Mes(s,i,c,t),a&&!n||f||(this.Uis=Math.min(this.Uis+this.To*t,this.tes)),this.Ges(a,f,n),this.Nis=this.Nc.RL().FNt(this.fi)}des(){if(!this.qQt)return;const t=this.fi,s=this.Nc.RL();(s.FW(t)||s.FNt(t))&&s.DNt(t,-this.His,-this.zis,4,!0),this.qQt=!1}pes(){const t=this.Eis,s=t?t.DB():null;let i=0,e=0,n=!1;if(t&&0===this.Uis&&(s.KM()!==this.Dis||s.$M()!==this.Ois)){const t=this.fi,r=t.DB(),h=this.Nc.RL(),o=s.$M(),a=s.KM();i=o-this.Ois,e=a-this.Dis,r.Tz(i,e),r.Mz(),this.Ois=o,this.Dis=a,n=!0;const l=h.FW(t);l&&(h.yNt(t,l),h.DNt(t,-i,-e,2.5*jG.tr(i,e)))}return[i,e,n]}mes(t){let s=!1;const i=this.fi,e=i.DB(),n=this.Nc.RL(),r=n.FW(i);if(!r)return[!1,t];const h=Math.abs(e.Vg()),o=Math.abs(e.Zg());return n.DNt(i,-this.His,-this.zis,o/8)?(n.yNt(i,r),t=r,this.les(r),this.kis=!1,this.Uis=0):n.LNt(i,this.Jis,this.qis,h/2)||n.LNt(i,this.His,this.zis,o/2)||n.NNt(i,Math.max(h,o)/2)?n.yNt(i,r):s=!0,[s,t]}ges(t,s,i,e){const n=this.fi,r=this.Nc.RL();if(t){const e=this.His,h=this.zis,o=this.Jis,a=this.qis;if(this._is=!1,this.Iis=!1,this.Uis>0&&(this.Lis||(r.kNt(n,-e,-h,t,16),this.Lis=!0),this.Uis=0),this.Eis!==t)this.les(t),r.yNt(n,t);else if(s){const t=r.FW(n);t&&(r.yNt(n,t),0!==i&&(i>0?r.DNt(n,-o,-a):r.DNt(n,o,a)),r.DNt(n,-e,-h))}}else e||(this.Iis=!0)}yes(t,s,i){if(t&&s||!t&&this.ses&&i&&this.Iis&&!this._is){const i=this.fi,e=i.DB(),n=this.Nc.RL(),r=e.$M(),h=e.KM();e.Tz(-this.His,-this.zis),e.Mz(),n.FW(i)?s=!1:(this.ees=this.ies,this.qH(jG.gut.Ks.QB.xes),this.Wis="jumping",this.Uis=-this.Qis,s=!0,t?this.Tis=!0:this._is=!0),e.Gz(r,h),e.Mz()}return s}wes(t,s,i){s&&this.ees>0?(this.Uis=-this.Qis,this.ees-=i):this.Eis=null,t&&(this.Tis=!0)}Ses(t,s){let i=0;const e=this.Kis,n=this.Zis;return t&&!s&&(i=this.Vis>0?-(e+n):-e),s&&!t&&(i=this.Vis<0?e+n:e),i}Mes(t,s,i,e){const n=this.Zis;t===s&&(this.Vis<0?this.Vis=Math.min(this.Vis+n*e,0):this.Vis>0&&(this.Vis=Math.max(this.Vis-n*e,0))),this.Vis=jG.Yn(this.Vis+i*e,-this.Yis,this.Yis);const r=this.Nc.RL(),h=this.Vis<0?this.Tes(0,1,1):null;if(h)this.Vis=0,r.yNt(this.fi,h);else{const t=this.Vis>0?this.Tes(1,1,1):null;t&&(this.Vis=0,r.yNt(this.fi,t))}}ves(t,s,i,e){const n=this.fi,r=n.DB(),h=this.Nc.RL(),o=this.His,a=this.zis,l=this.Jis,u=this.qis,c=this.Yis;let f=!1;const d=new Set(h.FNt(n,!0));let p=r.$M(),m=r.KM();const g=WG(this.Vis,-c,c,s,t)*l,y=WG(this.Vis,-c,c,s,t)*u;r.Tz(l*(this.Vis>1?1:-1)-o,u*(this.Vis>1?1:-1)-a),r.Mz();let w=!1;const S=h.FW(n);r.Gz(p+g,m+y),r.Mz();let v=h.FW(n);if(!v&&i&&this.kis&&(v=h.FNt(n),d.has(v)?v=null:w=!0),v){let s=Math.abs(this.Vis*t)+2;S||!h.DNt(n,-o,-a,s,w,v)?(h.yNt(n,v),s=Math.max(Math.abs(this.Vis*t*2.5),Math.floor(r.Vg())),h.DNt(n,l*(this.Vis<0?1:-1),u*(this.Vis<0?1:-1),s,!1)?!i||w||this.kis||(p=r.$M(),m=r.KM(),r.Tz(o,a),h.FW(n)&&h.DNt(n,-o,-a,3,!1)||(r.Gz(p,m),r.Mz())):(r.Gz(p,m),r.Mz()),w||(this.Vis=0)):!S&&!e&&Math.abs(this.Uis)<Math.abs(this.Qis/4)&&(this.Uis=0,i||(f=!0))}else{const s=this.fes();if(i&&!s){const s=Math.ceil(Math.abs(this.Vis*t))+2;p=r.$M(),m=r.KM(),r.Tz(o*s,a*s),r.Mz();const e=h.FNt(n);let l=!1;e&&!d.has(e)&&h.DNt(n,-o,-a,s+2,!0,e)&&(i=e,this.les(e),this.kis=!0,l=!0),l||(h.FW(n)?h.DNt(n,-o,-a,s+2,!1):(r.Gz(p,m),r.Mz()))}else s&&(!i&&this.kis&&(this.les(s),this.Uis=0,f=!0),0===this.Uis&&h.kNt(n,-o,-a,s,16))}return[f,i]}bes(t,s){const i=this.fi,e=i.DB(),n=this.Nc.RL(),r=this.His,h=this.zis;let o=!1,a=e.$M(),l=e.KM();const u=WG(this.Uis,-1/0,this.tes,this.To,t);e.Tz(u*r,u*h);const c=e.$M(),f=e.KM();e.Mz();let d=n.FW(i),p=!1;if(!d&&this.Uis>0&&!s){const t=this.ues()?n.FNt(i,!0):null;if(t&&t.length){if(this.Nis){e.Gz(a,l),e.Mz();let s=0;for(let e=0,r=t.length;e<r;++e)t[s]=t[e],n.RW(i,t[e])||++s;jG.wh(t,s),e.Gz(c,f),e.Mz()}t.length>=1&&(d=t[0])}p=!!d}if(d){n.yNt(i,d),this.ees=0;let s=1.1;p&&!this.Nis&&(s=2);const u=Math.max(Math.abs(this.Uis*t*s),2);n.DNt(i,r*(this.Uis<0?1:-1),h*(this.Uis<0?1:-1),u,p,d)?(this.les(d),this.kis=p,this.Uis>0&&(o=!0),(this.Uis>0||0===this.res)&&(this.Uis=0),this.Uis<0&&1===this.res&&n.kNt(i,r,h,d,32)):(e.Gz(a,l),e.Mz(),this.Lis=!0,p||(this.Uis=0))}return[o,u]}Ges(t,s,i){"falling"!==this.Wis&&this.Uis>0&&!t&&(this.qH(jG.gut.Ks.QB._es),this.Wis="falling"),(t||s)&&this.Uis>=0&&("falling"===this.Wis||s||i&&0===this.Uis?(this.qH(jG.gut.Ks.QB.Ies),0===this.Vis&&0===this.Uis?this.Wis="stopped":this.Wis="moving"):("stopped"!==this.Wis&&0===this.Vis&&0===this.Uis&&(this.qH(jG.gut.Ks.QB.Ces),this.Wis="stopped"),"moving"===this.Wis||0===this.Vis&&0===this.Uis||i||(this.qH(jG.gut.Ks.QB.Pes),this.Wis="moving")))}Res(){return 0!==this.Aes()||0!==this.Ees()}Fes(){if(0!==this.Uis)return!1;const t=this.fi,s=this.DB(),i=this.Nc.RL(),e=s.$M(),n=s.KM();s.Tz(this.His,this.zis),s.Mz();const r=i.FW(t);let h=null;if(!r&&this.ues()&&(h=i.FNt(t,!0)),s.Gz(e,n),s.Mz(),r)return!i.RW(t,r);if(h&&h.length){let s=0;for(let e=0,n=h.length;e<n;++e)h[s]=h[e],i.RW(t,h[e])||s++;if(s>=1)return!0}return!1}Oes(t,s=2,i=3){return!!this.Tes(t,s,i)}Tes(t,s=2,i=3){const e=this.fi,n=this.DB(),r=this.Nc.RL(),h=n.$M(),o=n.KM();if(0===t?n.Tz(-this.Jis*s,-this.qis*s):n.Tz(this.Jis*s,this.qis*s),n.Mz(),!r.FW(e))return n.Gz(h,o),n.Mz(),null;n.Tz(-this.His*i,-this.zis*i),n.Mz();const a=r.FW(e);return n.Gz(h,o),n.Mz(),a}Des(){const t=this.DB(),s=t.$M(),i=t.KM();t.Tz(this.His,this.zis),t.Mz();const e=this.Nc.RL().FNt(this.fi,!1);t.Gz(s,i),t.Mz(),e&&(this.jis=this.Nc.ON(),this.Eis=null)}kes(t){this._is=!t}Les(){return Math.hypot(this.Vis,this.Uis)}Nes(){return Math.atan2(this.Uis,this.Vis)}Bes(){return this.Uis<0}Wes(){return this.Uis>0}jes(t){this.Yis=Math.max(t,0)}Ves(){return this.Yis}Ues(t){this.Kis=Math.max(t,0)}Hes(){return this.Kis}zes(t){this.Zis=Math.max(t,0)}Jes(){return this.Zis}qes(t){this.Qis=Math.max(t,0)}$es(){return this.Qis}Xes(t){this.tes=Math.max(t,0)}Yes(){return this.tes}Kes(t){if(this.$is===t)return;this.To=t,this.oes();const s=this.Nc.RL(),i=this.DB();s.FW(this.fi)&&(s.DNt(this.fi,this.His,this.zis,10),i.Tz(2*this.His,2*this.zis),i.Mz()),this.Eis=null}Zes(){return this.To}Qes(t){t=jG.Kn(t),this.Xis!==t&&(this.Xis=t,this.oes(),this.Eis=null)}tns(){return this.Xis}sns(t){this.ses=!!t}ins(){return this.ses}ens(t){this.ies=t}nns(){return this.ies}rns(t){this.res=t}hns(){return this.res}ons(t){this.Vis=t}Aes(){return this.Vis}ans(t){this.Uis=t}Ees(){return this.Uis}lns(t){if(this.Ebt)switch(t){case 0:this.Pis=!0;break;case 1:this.Ris=!0;break;case 2:this.Ais=!0}}uns(t){t=!!t,this.nes!==t&&(this.nes=t,this.nes?this.hes():(this.aes(),this.K6t()))}cns(){return this.nes}fns(t){this.Cis=!!t}pns(){return this.Cis}P_t(t){t=!!t,this.Ebt!==t&&(this.Ebt=t,this.Ebt?this.aRt():(this.nRt(),this.Eis=null,this.Pis=!1,this.Ris=!1,this.Ais=!1))}A_t(){return this.Ebt}tot(t){switch(t){case HG:return this.Ves();case zG:return this.Hes();case JG:return this.Jes();case qG:return this.$es();case $G:return this.Zes();case XG:return this.Yes();case YG:return this.ins();case KG:return 1e3*this.nns();case ZG:return this.cns();case QG:return this.A_t()}}hot(t,s){switch(t){case HG:this.jes(s);break;case zG:this.Ues(s);break;case JG:this.zes(s);break;case qG:this.qes(s);break;case $G:this.Kes(s);break;case XG:this.Xes(s);break;case YG:this.sns(!!s);break;case KG:this.ens(s/1e3);break;case ZG:this.uns(!!s);break;case QG:this.P_t(!!s)}}aPt(){const t="behaviors.platform";return[{title:"$"+this.cq().Pc(),properties:[{name:t+".debugger.vector-x",value:this.Aes(),YZt:t=>this.ons(t)},{name:t+".debugger.vector-y",value:this.Ees(),YZt:t=>this.ans(t)},{name:t+".properties.max-speed.name",value:this.Ves(),YZt:t=>this.jes(t)},{name:t+".properties.acceleration.name",value:this.Hes(),YZt:t=>this.Ues(t)},{name:t+".properties.deceleration.name",value:this.Jes(),YZt:t=>this.zes(t)},{name:t+".properties.jump-strength.name",value:this.$es(),YZt:t=>this.qes(t)},{name:t+".properties.gravity.name",value:this.Zes(),YZt:t=>this.Kes(t)},{name:t+".debugger.gravity-angle",value:jG.Qn(this.tns()),YZt:t=>this.Qes(jG.Zn(t))},{name:t+".properties.max-fall-speed.name",value:this.Yes(),YZt:t=>this.Xes(t)},{name:t+".properties.double-jump.name",value:this.ins(),YZt:t=>this.sns(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.nns(),YZt:t=>this.ens(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.Wis]},{name:t+".properties.enabled.name",value:this.A_t(),YZt:t=>this.P_t(t)}]}]}vCt(){return self.mns}};const sx=new WeakMap,ix=new Map([["left",0],["right",1],["jump",2]]);self.mns=class extends UG{constructor(){super(),sx.set(this,UG.pH().sq())}gns(){sx.get(this).Des()}yns(t){sx.get(this).kes(!!t)}wns(t){VG.le(t);const s=ix.get(t);if("number"!=typeof s)throw new Error("invalid control");sx.get(this).lns(s)}get speed(){return sx.get(this).Les()}get Sns(){return sx.get(this).Ves()}set Sns(t){VG.re(t),sx.get(this).jes(t)}get acceleration(){return sx.get(this).Hes()}set acceleration(t){VG.re(t),sx.get(this).Ues(t)}get vns(){return sx.get(this).Jes()}set vns(t){VG.re(t),sx.get(this).zes(t)}get bns(){return sx.get(this).$es()}set bns(t){VG.re(t),sx.get(this).qes(t)}get Mns(){return sx.get(this).Yes()}set Mns(t){VG.re(t),sx.get(this).Xes(t)}get I1t(){return sx.get(this).Zes()}set I1t(t){VG.re(t),sx.get(this).Kes(t)}get Gns(){return sx.get(this).tns()}set Gns(t){VG.re(t),sx.get(this).Qes(t)}get xns(){return sx.get(this).ins()}set xns(t){sx.get(this).sns(!!t)}get Tns(){return sx.get(this).nns()}set Tns(t){VG.re(t),sx.get(this).ens(t)}get _ns(){return 0===sx.get(this).hns()?"stop":"preserve-momentum"}set _ns(t){VG.le(t);const s=sx.get(this);if("stop"===t)s.rns(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.rns(1)}}get Ins(){return sx.get(this).Fes()}Cns(t){VG.le(t);const s=sx.get(this);if("left"===t)return s.Oes(0);if("right"===t)return s.Oes(1);throw new Error("invalid side")}get Pns(){return sx.get(this).Res()}get Rns(){return sx.get(this).Bes()}get Ans(){return sx.get(this).Wes()}get Ens(){return sx.get(this).Aes()}set Ens(t){VG.re(t),sx.get(this).ons(t)}get Fns(){return sx.get(this).Ees()}set Fns(t){VG.re(t),sx.get(this).ans(t)}Ons(t,s){VG.re(t),VG.re(s);const i=sx.get(this);i.ons(t),i.ans(s)}Dns(){const t=sx.get(this);return[t.Aes(),t.Ees()]}get kns(){return sx.get(this).cns()}set kns(t){sx.get(this).uns(!!t)}get Lns(){return sx.get(this).pns()}set Lns(t){sx.get(this).fns(!!t)}get isEnabled(){return sx.get(this).A_t()}set isEnabled(t){sx.get(this).P_t(!!t)}}}{const ex=self._s;ex.gut.Ks.QB={Nns(){return this.Res()},Bns(t,s){return ex.compare(this.Les(),t,s)},Wns(){return this.Fes()},jns(t){return this.Oes(t)},Vns(){return this.Bes()},Uns(){return this.Wes()},Hns(){return this.ins()},xes:()=>!0,_es:()=>!0,Ces:()=>!0,Pes:()=>!0,Ies:()=>!0,_u(){return this.A_t()}}}{const nx=self._s;nx.gut.Ks.yht={zns(t){this.jes(t)},y0t(t){this.Ues(t)},Jns(t){this.zes(t)},qns(t){this.qes(t)},$ns(t){this.Xes(t)},w0t(t){this.Kes(t)},Xns(t){this.lns(t)},Yns(t){this.fns(!!t)},Kns(t){this.ons(t)},Zns(t){this.ans(t)},Qns(t){this.Qes(nx.Zn(t))},IIt(t){this.P_t(0!==t)},trs(){this.Des()},srs(t){this.sns(0!==t)},irs(t){this.ens(t/1e3)},ers(t){this.rns(t)},nrs(t){this.uns(t)},rrs(t){this.kes(t)}}}{const rx=self._s;rx.gut.Ks.wht={hrs(){return this.Les()},ors(){return this.Ves()},ars(){return this.Hes()},lrs(){return this.Jes()},urs(){return this.$es()},n2t(){return this.Zes()},crs(){return rx.Qn(this.tns())},frs(){return this.Yes()},drs(){return rx.Qn(this.Nes())},prs(){return this.Aes()},mrs(){return this.Ees()},grs(){return 1e3*this.nns()}}}{const hx=self._s;hx.gut.mut=class extends hx.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const ox=self._s;ox.gut.mut.fEt=class extends ox.sRt{constructor(t){super(t)}zn(){super.zn()}SCt(){}}}{const ax=self._s,lx=ax.gut.mut,ux=0;lx.Instance=class extends ax.eRt{constructor(t,s){super(t),this.yrs=!1,this.fu=!0,s&&(this.yrs=!1,this.fu=!!s[ux]),this.wrs=new Map,this.Srs=[],this.vrs=new Map,this.brs=null,this.Mrs=null,this.Grs=null,this.xrs=null,this.Trs="",this._rs=[],this.c8=t=>this.f8(),this.aW().wf().addEventListener("afterload",this.c8)}zn(){this.aW().wf().removeEventListener("afterload",this.c8),this.c8=null,this.brs&&(this.Irs(this.brs),this.brs=null),this.Crs(),this.Prs=null,this.Rrs(),this.Srs=null,this.Ars(),this.vrs=null,this._rs=null,super.zn()}vut(t){this._rs.push(t)}but(){this._rs.pop()}Ers(){return this._rs[this._rs.length-1]}IIt(t){this.fu=!!t,t?this.vrs&&this.vrs.size&&this.hPt():this.UCt();for(const s of this.Frs())t?this.Ors(s)&&s.r$():((s.IsPlaying()||s.Mst())&&this.Drs(s),s.n$());t&&this.Rrs()}_u(){return this.fu}Drs(t){this.Srs.push(t)}Ors(t){return this.Srs.includes(t)}Rrs(){ax.Sh(this.Srs)}krs(){return this.brs}Uit(){const t=this.pq();return!!t&&!t.wX()}Lrs(t,s,i=!1){const e=s?this.Nrs(s,i):this.Frs(i);if(e&&e.length)for(const s of e)if(s.h$(t))return s}Brs(t,s){for(const i of this.wrs.values())for(const e of i)if(!e.i$()&&e.h$(t)&&s(e))return!0;for(const i of this.vrs.values())for(const e of i)if(!e.i$()&&e.h$(t)&&s(e))return!0;return!1}Wrs(t){for(const s of this.wrs.values())for(const i of s)if(!i.i$()&&t(i))return!0;for(const s of this.vrs.values())for(const i of s)if(!i.i$()&&t(i))return!0;return!1}jrs(t,s){return this.Lrs(t,s,!0)}*Vrs(t,s,i=!1){const e=s?this.Nrs(s,i):this.Frs(i);if(e&&e.length)for(const s of e)s.h$(t)&&(yield s)}*Urs(t,s){yield*this.Vrs(t,s,!0)}Nrs(t,s){if(s){let s=this.wrs.get(t),i=this.vrs.get(t);return s||(s=[]),i||(i=[]),s.concat(i).filter(t=>t).filter(t=>!t.i$())}{let s=this.wrs.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.i$())}}Frs(t){if(t){const t=[...this.wrs.values()].flat(),s=[...this.vrs.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.i$())}return[...this.wrs.values()].flat().filter(t=>t).filter(t=>!t.i$())}Hrs(){return this.Frs(!0)}oG(t="full"){return{s:!1,e:!!this.fu,at:this.zrs(),dt:this.Jrs(),wt:this.qrs(),ft:this.$rs()}}aG(t,s="full"){t&&(this.Mrs=t.at,this.Grs=t.dt,this.xrs=t.wt,this.Trs=t.ft,this.yrs=!1,this.fu=!!t.e,"state"===s&&this.f8())}f8(){const t=this.aW().Vtt();if(this.Xrs(this.Mrs,this.wrs,t),this.Grs){ax.Sh(this.Srs);for(const s of this.Grs)this.Yrs(this.Srs,s,t)}this.Xrs(this.xrs,this.vrs,t),this.brs=this.Krs(this.Trs,t),this.fu?this.vrs&&this.vrs.size&&this.hPt():this.UCt()}Xrs(t,s,i){if(t)for(const e in t){let n=s.get(e);n?ax.Sh(n):n=[];const r=t[e];for(const t of r)if(this.Yrs(n,t.name,i))this.Zrs(t.name,t,i);else{const s=ax.$ot.xut({runtime:this.aW(),json:t});ax.$ot.aet(s,this.pq().xH()),s.sut(t=>this.Qrs(t)),s.Qlt(this),i.H8(s),this.Yrs(n,s,i)}s.set(e,n)}}Krs(t,s){return s.j8(t)}Yrs(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.Krs(s,i);if(e)return!!t.push(e)}return!1}Zrs(t,s,i){if("string"==typeof t){const e=this.Krs(t,i);e&&(e.e5(s),ax.$ot.aet(e,this.pq().xH()),ax.$ot.Qlt(e,this))}else t.e5(s),ax.$ot.aet(t,this.pq().xH()),ax.$ot.Qlt(t,this)}zrs(){const t={};for(const[s,i]of this.wrs)t[s]=i.filter(t=>!t.i$()).map(t=>t.i5());return t}Jrs(){return this.Srs.filter(t=>!t.i$()).map(t=>t.Pc())}qrs(){const t={};for(const[s,i]of this.vrs)t[s]=i.map(t=>t.i5());return t}$rs(){return this.brs?this.brs.Pc():""}ePt(){this.Ars()}ths(t){const s=lx.ihs.shs(t.ret,t.Fut,t.Out,t.Eut,t.Put,this.pq()),i=lx.nhs.ehs(t.ret);lx.nhs.rhs(i)||this.hhs(t.ret);const e=ax.$ot.xut({runtime:this.aW(),id:i,tags:t.tags,time:t.time,fq:this.pq(),Iut:!!t.Iut,loop:!!t.loop,Cut:!!t.Cut,Iq:t.Iq,_ut:t._ut,Tut:s});return e.sut(t=>this.Qrs(t)),e.Qlt(this),this.ohs(e,t.ret),e}ahs(t){const s=t.E$();if(this.wrs.has(s)){const i=this.wrs.get(s);if(i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}}T$(t,s=!1){this.ahs(t),t.i$()||this.lhs(t)||(t.n$(s),this.uhs(t))}hhs(t,s=!1){if(ax.Qi(t)){const i=lx.nhs.ehs(t);if(!this.wrs.has(i))return;const e=this.wrs.get(i),n=this.krs();for(const t of e)t!==n&&(t.i$()||this.lhs(t)||(t.n$(s),t.zn()));ax.Sh(e)}else{const t=this.krs();for(const i of this.Frs())i!==t&&(i.i$()||this.lhs(i)||(i.n$(s),i.zn()));for(const t of this.wrs.keys())ax.Sh(this.wrs.get(t)),this.wrs.delete(t);this.wrs.clear()}}Irs(t){this.T$(t,!0)}Crs(){this.hhs(NaN,!0)}tot(t){if(t===ux)return this.fu}hot(t,s){t===ux&&(this.fu=!!s)}chs(t){const s=t.C$().Ert();for(const t of s){const s=t.cq();if(s.FEt()===this.constructor)return s}}qH(t,s,i,e){return this.Nc?super.qH(t):s.qH(t,i,e)}Qrs(t){let s,i;if(this.brs=t,lx.QB.fhs(t),this.aW())s=this.fi,i=this.Nc,this.qH(lx.QB.dhs),this.qH(lx.QB.phs),this.T$(t);else{if(s=t.C$(),!s)return;if(s&&s.wX())return;i=s.aW();const e=this.chs(t);this.qH(lx.QB.dhs,i,s,e),this.qH(lx.QB.phs,i,s,e),t.n$()}this.brs=null,lx.QB.fhs(null),t.R$()&&i.yH(s)}ohs(t,s){const i=lx.nhs.ehs(s);this.wrs.has(i)||this.wrs.set(i,[]),this.wrs.get(i).push(t)}uhs(t){const s=t.E$();this.vrs.has(s)||this.vrs.set(s,[]),this.vrs.get(s).push(t),this.oPt()||this.hPt()}lhs(t){const s=t.E$();return!!this.vrs.has(s)&&this.vrs.get(s).includes(t)}Ars(){if(this.vrs.size){for(const t of this.vrs.values()){for(const s of t)s.i$()||s.zn();ax.Sh(t)}this.vrs.clear(),this.oPt()&&this.UCt()}}aPt(){return[{title:"$"+this.cq().Pc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this._u(),YZt:t=>this.IIt(t)}]}]}vCt(){return self.mhs}}}{const cx=self._s;let fx=null;cx.gut.mut.QB={dut:()=>!0,yut(t){const s=this.Ers();return!!s&&s.h$(t)},wut(t){const s=this.Ers();return!!s&&(s.ist()===t||2===t)},Sut(t,s){const i=this.Ers();return!!i&&(i.ist()===s||2===s)&&i.h$(t)},fhs(t){fx=t},dhs:t=>fx.h$(t),phs:()=>!0,IsPlaying(t){return this.Brs(t,cx.$ot.IsPlaying)},Gss(){return this.Wrs(cx.$ot.IsPlaying)},v$(t){return this.Brs(t,cx.$ot.v$)},ghs(){return this.Wrs(cx.$ot.v$)},Eq(t,s){return 0===s?this.Brs(t,cx.$ot.Mut):1===s&&this.Brs(t,cx.$ot.Gut)},yhs(t){return 0===t?this.Wrs(cx.$ot.Mut):1===t&&this.Wrs(cx.$ot.Gut)}}}{const dx=self._s,px=self.Vu,mx=dx.gut.mut;mx.yht={IIt(t){this.IIt(!!t)},async whs(...t){if(!this._u()||!this.Uit())return;const s=this.ths(mx.vhs.Shs(this,...t));s.Play()&&await s.y$()},async bhs(...t){if(!this._u()||!this.Uit())return;const s=this.ths(mx.vhs.Mhs(this,...t));s.Play()&&await s.y$()},async Ghs(...t){if(!this._u()||!this.Uit())return;const s=this.ths(mx.vhs.xhs(this,...t));s.Play()&&await s.y$()},Ths(t){if(this._u()&&this.Uit())for(const s of this.Vrs(t))s.n$()},_hs(){if(this._u()&&this.Uit())for(const t of this.Frs())t.n$()},Ihs(t){if(this._u()&&this.Uit())for(const s of this.Vrs(t))s.r$()},Chs(){if(this._u()&&this.Uit())for(const t of this.Frs())t.r$()},Phs(t){if(this._u()&&this.Uit())for(const s of this.Vrs(t))this.T$(s)},Rhs(){if(this._u()&&this.Uit())for(const t of this.Frs())this.T$(t)},Ahs(t,s,i){if(!this._u()||!this.Uit())return;const e=dx.gut.mut.nhs.Ehs(s);for(const s of this.Vrs(t))s.hut([e]),s.out(i,e)},Fhs(t,s,i,e){if(!this._u()||!this.Uit())return;const n=dx.gut.mut.nhs.Ohs(s);for(const s of this.Vrs(t))s.hut(n),s.out(i,n[0]),s.out(e,n[1])},Dhs(t,s){if(this._u()&&this.Uit())for(const i of this.Vrs(t,"value"))i.nut(s,"value")},khs(t,s){if(this._u()&&this.Uit())for(const i of this.Vrs(t,"value"))i.hut(["value"]),i.out(s,"value")},Lhs(t,s){if(!this._u()||!this.Uit())return;const i=px.oc(s);for(const s of this.Vrs(t))s.I$(i)},Nhs(t){if(!this._u()||!this.Uit())return;const s=px.oc(t);for(const t of this.Frs())t.I$(s)},Bhs(t,s){if(this._u()&&this.Uit())for(const i of this.Vrs(t))i.o$(s)},Whs(t){if(this._u()&&this.Uit())for(const s of this.Frs())s.o$(t)},jhs(t,s){if(this._u()&&this.Uit())for(const i of this.Vrs(t))i.p$(s)},Vhs(t){if(this._u()&&this.Uit())for(const s of this.Frs())s.p$(t)},Uhs(t,s){if(this._u()&&this.Uit())for(const i of this.Vrs(t))i.A$(!!s)},Hhs(t){if(this._u()&&this.Uit())for(const s of this.Frs())s.A$(!!t)}}}self._s.gut.mut.wht={zhs(t){const s=this.jrs(t);return s?s.$O():0},Jhs(t){const s=this.jrs(t);return s?s.$O()/s.l$():0},_ht(t){const s=this.jrs(t);return s?s.m$():0},qhs(t){const s=this.jrs(t,"value");return s?s.O$("value").F$():0},k_t(){let t=this.krs();return t?t.hst():(t=this.Ers(),t?t.hst():"")}};{const gx=self._s,yx=self.Vu,wx=["position","size","scale"],Sx=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],vx=["value"],bx=[].concat(wx).concat(Sx).concat(vx),Mx={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},Gx=Object.assign({},bx.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),Mx);gx.gut.mut.nhs=class{constructor(){}static $hs(){return[...yx.Yu()]}static oc(t){return[...yx.Yu()][t]}static ehs(t){return bx[t]}static Xhs(t){return bx.indexOf(t)}static Yhs(t){return wx[t]}static Ehs(t){return Sx[t]}static Khs(t){return vx[t]}static Zhs(t){return Mx[t]}static Ohs(t){return gx.ae(t)?Gx[t]:Gx[bx[t]]}static Qhs(t){return!!Mx[t]}static tos(t){return"offsetColor"===t}static sos(t){return"offsetAngle"===t}static ios(t){return"offsetOpacity"===t}static rhs(t){return"value"===t}}}{const xx=self._s,Tx=xx.gut.mut,_x=new Map;Tx.ihs=class{constructor(){}static shs(t,s,i,e,n,r){0===_x.size&&this.eos();const h=Tx.ros.nos(t);let o=_x.get(h);return xx.Qi(t)&&(t=Tx.nhs.ehs(t)),this.hos(o,t,s,i,e,n,r)}static oos(t,s){return xx.gut.mut.shs(t).aos(s)}static eos(){const t=Tx.ros,s=Tx.los;this.uos(t.fos,this.dos,s.pos),this.uos(t.COLOR,this.mos,s.gos),this.uos(t.yos,this.wos,s.Sos),this.uos(t.vos,this.bos,s.pos),this.uos(t.Mos,this.Gos,s.pos)}static uos(t,s,i){_x.set(t,this.xos(t,s,i))}static xos(t,s,i){return{name:t,Tos:s,aos:i}}static hos(t,s,i,e,n,r,h){return t.Tos(s,t.aos(i),t.aos(e),n,r,h)}static dos(t,s,i,e,n,r){return Tx.nhs.Zhs(t).map((t,r)=>({Rut:"world-instance",ret:t,type:"float",valueType:"numeric",Fut:s[r],Out:i[r],Eut:Tx.nhs.oc(e),Put:n}))}static mos(t,s,i,e,n,r){return xx.sW.Text&&r.zj()instanceof xx.sW.Text?{Rut:"plugin",Aut:[7],ret:"color",type:"color",valueType:"color",Fut:s,Out:i,Eut:Tx.nhs.oc(e),Put:n}:{Rut:"world-instance",ret:t,type:"color",valueType:"color",Fut:s,Out:i,Eut:Tx.nhs.oc(e),Put:n}}static wos(t,s,i,e,n,r){return{Rut:"world-instance",ret:t,type:"angle",valueType:"angle",Fut:s,Out:i,Eut:Tx.nhs.oc(e),Put:n}}static Gos(t,s,i,e,n,r){return{Rut:"world-instance",ret:t,type:"float",valueType:"numeric",Fut:s,Out:i,Eut:Tx.nhs.oc(e),Put:n}}static bos(t,s,i,e,n,r){return{Rut:"value",ret:t,type:"float",valueType:"numeric",Fut:s,Out:i,Eut:Tx.nhs.oc(e),Put:n}}}}{const Ix=self._s,Cx=Ix.gut.mut,Px={Put:"absolute"},Rx=Object.assign({},Px,{tags:"",ret:"",time:0,Eut:0,Iut:0,loop:!1,Cut:!1,Iq:1}),Ax=Object.assign({},Rx,{_ut:"current-state",Fut:0,Out:0}),Ex=Object.assign({},Rx,{_ut:"current-state",Fut:[0,0],Out:[0,0]}),Fx=Object.assign({},Rx,{_ut:"current-state",Fut:[0,0,0],Out:[0,0,0]}),Ox=Object.assign({},Ax,{_ut:"start-value"});Cx.vhs=class{constructor(){}static _os(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.Eut=e,t.Iut=n,t.loop=r,t.Cut=h,t.Iq=o}static Shs(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:Cx.nhs.Ehs(i),c=Cx.nhs.tos(u)?Fx:Ax;return this._os(c,s,n,r,h,o,a,l),Cx.nhs.tos(u)?(Fx.Out[0]=Ix.Pr(e),Fx.Out[1]=Ix.Rr(e),Fx.Out[2]=Ix.Ar(e),Fx.ret=Cx.nhs.Xhs(u)):Cx.nhs.ios(u)?Ax.Out=e/100:Ax.Out=e,c.ret=Cx.nhs.Xhs(u),c}static Mhs(t,s,i,e,n,r,h,o,a,l,u){this._os(Ex,s,r,h,o,a,l,u);const c="string"==typeof i?i:Cx.nhs.Yhs(i);return Ex.Out[0]=e,Ex.Out[1]=n,Ex.ret=Cx.nhs.Xhs(c),Ex}static xhs(t,s,i,e,n,r,h,o,a,l){return this._os(Ox,s,n,r,h,o,a,l),Ox.Fut=i,Ox.Out=e,Ox.ret=Cx.nhs.Xhs("value"),Ox}}}{const Dx=self._s,kx=Dx.gut.mut,Lx=[];kx.ros=class{constructor(){}static nos(t){if(0===Lx.length){const t=Lx;t.push({JA:kx.nhs.Qhs,result:this.fos}),t.push({JA:kx.nhs.tos,result:this.COLOR}),t.push({JA:kx.nhs.sos,result:this.yos}),t.push({JA:kx.nhs.rhs,result:this.vos}),t.push({JA:()=>!0,result:this.Mos})}Dx.Qi(t)&&(t=Dx.gut.mut.nhs.ehs(t));for(const s of Lx)if(s.JA(t))return s.result}static get fos(){return"pair"}static get COLOR(){return"color"}static get yos(){return"angle"}static get vos(){return"value"}static get Mos(){return"other"}}}{const Nx=self._s;Nx.gut.mut.los=class{constructor(){}static Sos(t){const s=Nx.Zn(parseFloat(t));return Nx.Kn(s)}static gos(t){return t.slice(0)}static pos(t){return t}}}{let Bx=function(t){Vx.le(t);const s=Hx.zu(t);let i;if(i=s?Hx.ac(s,null):Hx.ac(t,null),-1===i)throw new Error(`invalid ease name '${t}'`);return i},Wx=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};0;const jx=self._s,Vx=self.Ls,Ux=self.hq,Hx=self.Vu,zx=jx.gut.mut,Jx=new WeakMap,qx=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),$x={tags:"",Ios:!1,loop:!1,Cut:!1,Iq:1,Fut:0},Xx={x$:Bx};self.mhs=class extends Ux{constructor(){super(),Jx.set(this,Ux.pH().sq())}Cos(t,s,i,e,n){const r=Jx.get(this);if(!r._u()||!r.Uit())return null;const h=qx.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?Vx.te(s):(Vx.xe(s),"two"===h.type?(Vx.te(s[0]),Vx.te(s[1])):"color"===h.type&&(Vx.te(s[0]),Vx.te(s[1]),Vx.te(s[2]))),"angle"===t?s=jx.Qn(s):"opacity"===t?s*=100:"color"===t&&(s=jx.Cr(s[0],s[1],s[2]));const o=Bx(e);let a;if(Vx.re(i),n=Object.assign({},$x,n),"value"===h.type&&Vx.te(n.Fut),Wx(n.tags,!0),"one"===h.type||"color"===h.type?a=r.ths(zx.vhs.Shs(r,n.tags,h.name,s,i,o,!!n.Ios,!!n.loop,!!n.Cut,n.Iq)):"two"===h.type?a=r.ths(zx.vhs.Mhs(r,n.tags,h.name,s[0],s[1],i,o,!!n.Ios,!!n.loop,!!n.Cut,n.Iq)):"value"===h.type&&(a=r.ths(zx.vhs.xhs(r,n.tags,n.Fut,s,i,o,!!n.Ios,!!n.loop,!!n.Cut,n.Iq))),a.Qlt(r.rRt().sq()),!a.Play())throw new Error("failed to start tween");return a.Dut(r,Xx)}*Pos(){const t=Jx.get(this);for(const s of t.Frs())yield s.Dut(t,Xx)}*Ros(t){Wx(t);const s=Jx.get(this);for(const i of s.Vrs(t))yield i.Dut(s,Xx)}get isEnabled(){return Jx.get(this)._u()}set isEnabled(t){Jx.get(this).IIt(t)}}}{const Yx=self._s;Yx.gut.Aos=class extends Yx.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const Kx=self._s;Kx.gut.Aos.fEt=class extends Kx.sRt{constructor(t){super(t)}zn(){super.zn()}SCt(){}}}{const Zx=self._s,Qx=self.Ls,tT=self.hq,sT=0,iT=1,eT=2,nT=3,rT=4,hT=5,oT=6,aT=7,lT=8,uT=0,cT=1,fT=2,dT=3,pT=4,mT=5,gT=6,yT=7,wT=8,ST=9,vT=0,bT=1,MT=2,GT=3,xT=4,TT=2*Math.PI,_T=Math.PI/2,IT=3*Math.PI/2,CT=[0,1,8,3,4,2,5,6,9,7];Zx.gut.Aos.Instance=class extends Zx.eRt{constructor(t,s){super(t),this.Eos=0,this.Fos=0,this.Oos=0,this.Dos=0,this.kos=0,this.Ebt=!0,this.Los=0,this.Nos=0,this.Bos=0,this.Wos=0,this.jos=0,this.Vos=0,this.eMt=0,this.Uos=0,this.Hos=0,this.zos=0,this.Jos=0,s&&(this.Fos=CT[s[sT]],this.Oos=s[iT],this.Wos=this.Nc.lB()*s[nT],this.Los=s[eT],this.Dos=s[eT],this.Dos+=this.Wos,this.Nos=s[rT],0!==this.Dos&&(this.jos=this.Nc.lB()*s[hT],this.Eos=s[rT]/this.Dos*TT,this.Eos+=this.jos/this.Dos*TT),this.Vos=this.Nc.lB()*s[aT],this.Bos=s[oT],this.kos=s[oT],this.kos+=this.Vos,this.Ebt=!!s[lT]),this.Fos===mT&&(this.kos=Zx.Zn(this.kos)),this.OFt(),this.Ebt&&this.nPt()}zn(){super.zn()}oG(){return{i:this.Eos,e:this.Ebt,mv:this.Fos,w:this.Oos,p:this.Dos,mag:this.kos,iv:this.eMt,iv2:this.Uos,r:this.Jos,lkv:this.Hos,lkv2:this.zos}}aG(t){this.Eos=t.i,this.P_t(t.e),this.Fos=t.mv,this.Oos=t.w,this.Dos=t.p,this.kos=t.mag,this.eMt=t.iv,this.Uos=t.iv2,this.Jos=t.r,this.Hos=t.lkv,this.zos=t.lkv2}OFt(){const t=this.fi.DB();switch(this.Fos){case uT:this.eMt=t.$M();break;case cT:this.eMt=t.KM();break;case fT:this.eMt=t.Vg(),this.Jos=t.Zg()/t.Vg();break;case dT:this.eMt=t.Vg();break;case pT:this.eMt=t.Zg();break;case mT:this.eMt=t.FV();break;case gT:this.eMt=t.wF();break;case yT:this.eMt=0;break;case wT:this.eMt=t.$M(),this.Uos=t.KM();break;case ST:this.eMt=t.QM()}this.Hos=this.eMt,this.zos=this.Uos}qos(t){switch(t%=TT,this.Oos){case vT:return Math.sin(t);case bT:return t<=_T?t/_T:t<=IT?1-2*(t-_T)/Math.PI:(t-IT)/_T-1;case MT:return 2*t/TT-1;case GT:return-2*t/TT+1;case xT:return t<Math.PI?-1:1}return 0}u7(){const t=this.Nc.RN(this.fi);this.Ebt&&0!==t&&(0===this.Dos?this.Eos=0:this.Eos=(this.Eos+t/this.Dos*TT)%TT,this.$os())}$os(){const t=this.fi.DB();switch(this.Fos){case uT:t.$M()!==this.Hos&&(this.eMt+=t.$M()-this.Hos),t.XM(this.eMt+this.qos(this.Eos)*this.kos),this.Hos=t.$M();break;case cT:t.KM()!==this.Hos&&(this.eMt+=t.KM()-this.Hos),t.ZM(this.eMt+this.qos(this.Eos)*this.kos),this.Hos=t.KM();break;case fT:t.Xg(this.eMt+this.qos(this.Eos)*this.kos),t.Ug(t.Vg()*this.Jos);break;case dT:t.Xg(this.eMt+this.qos(this.Eos)*this.kos);break;case pT:t.Ug(this.eMt+this.qos(this.Eos)*this.kos);break;case mT:t.FV()!==this.Hos&&(this.eMt=Zx.Kn(this.eMt+(t.FV()-this.Hos))),t.EV(this.eMt+this.qos(this.Eos)*this.kos),this.Hos=t.FV();break;case gT:t.vF(this.eMt+this.qos(this.Eos)*this.kos/100);break;case wT:t.$M()!==this.Hos&&(this.eMt+=t.$M()-this.Hos),t.KM()!==this.zos&&(this.Uos+=t.KM()-this.zos),t.XM(this.eMt+Math.cos(t.FV())*this.qos(this.Eos)*this.kos),t.ZM(this.Uos+Math.sin(t.FV())*this.qos(this.Eos)*this.kos),this.Hos=t.$M(),this.zos=t.KM();break;case ST:t.tG(this.eMt+this.qos(this.Eos)*this.kos)}t.Mz()}Xos(t,s){}Yos(t){this.Dos=t}Kos(){return this.Dos}Zos(t){this.kos=t}Qos(t){5===this.Fos&&(t=Zx.Zn(t)),this.Zos(t)}tas(){return this.kos}sas(){let t=this.tas();return 5===this.Fos&&(t=Zx.Qn(t)),t}ias(t){5===this.Fos&&5!==t&&(this.kos=Zx.Qn(this.kos)),this.Fos=t,this.OFt()}eas(){return this.Fos}nas(t){this.Oos=t}ras(){return this.Oos}oas(t){this.Eos=Zx.Yn(t,0,2*Math.PI),this.$os()}aas(){return this.Eos}P_t(t){this.Ebt=!!t,this.Ebt?this.nPt():this.VCt()}A_t(){return this.Ebt}tot(t){switch(t){case sT:return this.Fos;case iT:return this.Oos;case eT:return this.Los;case oT:return this.Bos;case lT:return this.Ebt}}hot(t,s){switch(t){case sT:this.Fos=CT[s],this.OFt();break;case iT:this.Oos=s;break;case eT:this.Los=s,this.Dos=this.Los+this.Wos,this.Ebt||(0!==this.Dos?(this.Eos=this.Nos/this.Dos*TT,this.Eos+=this.jos/this.Dos*TT):this.Eos=0);break;case oT:this.Bos=s,this.kos=this.Bos+this.Vos,this.Fos===mT&&(this.kos=Zx.Zn(this.kos));break;case lT:this.Ebt=!!s}}aPt(){const t="behaviors.sin";return[{title:"$"+this.cq().Pc(),properties:[{name:t+".properties.enabled.name",value:this.A_t(),YZt:t=>this.P_t(t)},{name:t+".properties.period.name",value:this.Kos(),YZt:t=>this.Yos(t)},{name:t+".properties.magnitude.name",value:this.sas(),YZt:t=>this.Qos(t)},{name:t+".debugger.value",value:this.qos(this.aas())*this.sas()}]}]}vCt(){return self.las}};const PT=new WeakMap,RT=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],AT=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.las=class extends tT{constructor(){super(),PT.set(this,tT.pH().sq())}set uas(t){Qx.re(t),PT.get(this).Yos(t)}get uas(){return PT.get(this).Kos()}set cas(t){Qx.re(t),PT.get(this).Zos(t)}get cas(){return PT.get(this).tas()}set fas(t){PT.get(this).oas(t)}get fas(){return PT.get(this).aas()}set das(t){Qx.le(t);const s=RT.indexOf(t);if(-1===s)throw new Error("invalid movement");PT.get(this).ias(s)}get das(){return RT[PT.get(this).eas()]}set pas(t){Qx.le(t);const s=AT.indexOf(t);if(-1===s)throw new Error("invalid wave");PT.get(this).nas(s)}get pas(){return AT[PT.get(this).ras()]}get value(){const t=PT.get(this);return t.qos(t.aas())*t.tas()}mas(){PT.get(this).OFt()}set isEnabled(t){PT.get(this).P_t(!!t)}get isEnabled(){return PT.get(this).A_t()}}}{const ET=self._s;ET.gut.Aos.QB={_u(){return this.A_t()},gas(t){return this.eas()===t},yas(t,s){return ET.compare(this.Kos(),t,s)},was(t,s){return ET.compare(this.sas(),t,s)},Sas(t){return this.ras()===t}}}self._s.gut.Aos.yht={IIt(t){this.P_t(0!==t)},vas(t){this.Yos(t)},bas(t){this.Qos(t)},Mas(t){this.ias(t)},Gas(t){this.Oos=t},xas(t){const s=2*Math.PI;this.oas(t*s%s)},Tas(){this.OFt()}},self._s.gut.Aos.wht={_as(){return this.aas()/(2*Math.PI)},Ias(){return this.Kos()},Cas(){return this.sas()},qhs(){return this.qos(this.aas())*this.sas()}};{const FT=self._s;FT.gut.Pas=class extends FT.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const OT=self._s;OT.gut.Pas.fEt=class extends OT.sRt{constructor(t){super(t)}zn(){super.zn()}SCt(){}}}{const DT=self._s,kT=self.Ls,LT=self.hq,NT=0,BT=1,WT=2,jT=3,VT=4,UT=5,HT=6;DT.gut.Pas.Instance=class extends DT.eRt{constructor(t,s){super(t);const i=this.DB();this.QRt=0,this.Kis=0,this.To=0,this.Ras=!1,this.Aas=!1,this.Eas=!1,this.Ebt=!0,this.Vis=0,this.Uis=0,this.i9t=i.$M(),this.e9t=i.KM(),this.Fas=i.FV(),this.Oas=0,this.Das=Math.min(Math.abs(i.Vg()),Math.abs(i.Zg())/2),this.kas=!1,s&&(this.QRt=s[NT],this.Kis=s[BT],this.To=s[WT],this.Ras=!!s[jT],this.Aas=!!s[VT],this.Eas=!!s[UT],this.Ebt=!!s[HT]);const e=i.FV();this.Vis=Math.cos(e)*this.QRt,this.Uis=Math.sin(e)*this.QRt,this.Ebt&&(this.nPt(),this.Ras&&this.aRt())}zn(){super.zn()}oG(){const t={dx:this.Vis,dy:this.Uis,lx:this.i9t,ly:this.e9t,lka:this.Fas,t:this.Oas};return 0!==this.Kis&&(t.acc=this.Kis),0!==this.To&&(t.g=this.To),this.Eas&&(t.st=this.Eas),this.Ebt||(t.e=this.Ebt),this.Ras&&(t.bos=this.Ras),this.Aas&&(t.sa=this.Aas),t}aG(t){this.Vis=t.dx,this.Uis=t.dy,this.i9t=t.lx,this.e9t=t.ly,this.Fas=t.lka,this.Oas=t.t,this.Kis=t.hasOwnProperty("acc")?t.acc:0,this.To=t.hasOwnProperty("g")?t.g:0,this.Eas=!!t.hasOwnProperty("st")&&t.st,this.Ras=!!t.hasOwnProperty("bos")&&t.bos,this.Aas=!!t.hasOwnProperty("sa")&&t.sa,this.P_t(!t.hasOwnProperty("e")||t.e)}u7(){if(!this.Ebt)return;const t=this.Nc.RN(this.fi),s=this.fi.DB();if(s.FV()!==this.Fas){const t=s.FV();if(this.Aas){const s=DT.ir(0,0,this.Vis,this.Uis);this.Vis=Math.cos(t)*s,this.Uis=Math.sin(t)*s}this.Fas=t}let i=0,e=0;if(0!==this.Kis){let n=DT.ir(0,0,this.Vis,this.Uis),r=0;r=0===this.Vis&&0===this.Uis?s.FV():DT.nr(0,0,this.Vis,this.Uis),n+=this.Kis*t,i=Math.cos(r)*this.Kis,e=Math.sin(r)*this.Kis,n<0&&(n=0,i=0,e=0),this.Vis=Math.cos(r)*n,this.Uis=Math.sin(r)*n}if(0!==this.To&&(this.Uis+=this.To*t,e+=this.To),this.i9t=s.$M(),this.e9t=s.KM(),0!==this.Vis||0!==this.Uis){const n=this.Vis*t+.5*i*t*t,r=this.Uis*t+.5*e*t*t,h=DT.ir(0,0,n,r);if(this.Las(n,r,h),this.Oas+=h,this.Aas&&(0!==n||0!==r)){const t=DT.nr(0,0,n,r);s.EV(t),this.Fas=s.FV()}s.Mz()}}Las(t,s,i){const e=this.DB();if(!this.Eas||i<=this.Das)return e.Tz(t,s),e.Mz(),void(this.Eas&&this.qH(DT.gut.Pas.QB.Nas));this.kas=!1;const n=e.$M(),r=e.KM(),h=n+t,o=r+s,a=DT.nr(0,0,t,s),l=Math.cos(a)*this.Das,u=Math.sin(a)*this.Das,c=Math.floor(i/this.Das);for(let t=1;t<=c;++t)if(e.Gz(n+l*t,r+u*t),e.Mz(),this.qH(DT.gut.Pas.QB.Nas),this.fi.wX()||this.kas)return;e.Gz(h,o),e.Mz(),this.qH(DT.gut.Pas.QB.Nas)}oRt(){if(!this.Ebt||!this.Ras||0===this.Vis&&0===this.Uis)return;const t=this.Nc.RN(this.fi),s=this.fi.DB(),i=this.Nc.RL(),e=i.FW(this.fi);if(e){i.yNt(this.fi,e);const n=DT.ir(0,0,this.Vis,this.Uis),r=i.BNt(this.fi,this.i9t,this.e9t);this.Vis=Math.cos(r)*n,this.Uis=Math.sin(r)*n,s.Tz(this.Vis*t,this.Uis*t),s.Mz(),this.Aas&&(s.EV(r),this.Fas=s.FV(),s.Mz()),i.DNt(this.fi,this.Vis/n,this.Uis/n,Math.max(2.5*n*t,30))||i.NNt(this.fi,100)}}tot(t){switch(t){case NT:return this.Les();case BT:return this.Hes();case WT:return this.Zes();case VT:return this.Aas;case UT:return this.Eas;case HT:return this.A_t()}}hot(t,s){switch(t){case NT:this.Bas(s);break;case BT:this.Kis=s;break;case WT:this.To=s;break;case VT:this.Aas=!!s;break;case UT:this.Eas=!!s;break;case HT:this.P_t(!!s)}}Bas(t){const s=DT.nr(0,0,this.Vis,this.Uis);this.Vis=Math.cos(s)*t,this.Uis=Math.sin(s)*t}Les(){return DT.Gr(DT.ir(0,0,this.Vis,this.Uis),6)}Ues(t){this.Kis=t}Hes(){return this.Kis}Kes(t){this.To=t}Zes(){return this.To}Was(t){const s=DT.ir(0,0,this.Vis,this.Uis);this.Vis=Math.cos(t)*s,this.Uis=Math.sin(t)*s}jas(){return DT.nr(0,0,this.Vis,this.Uis)}Vas(t){t=!!t,this.Ras!==t&&(this.Ras=t,this.Ebt&&(this.Ras?this.aRt():this.nRt()))}Uas(){return this.Ras}Has(t){this.Oas=t}zas(){return this.Oas}P_t(t){this.Ebt=!!t,this.Ebt?(this.nPt(),this.Ras&&this.aRt()):(this.VCt(),this.nRt())}A_t(){return this.Ebt}aPt(){const t="behaviors.bullet";return[{title:"$"+this.cq().Pc(),properties:[{name:t+".debugger.vector-x",value:this.Vis,YZt:t=>this.Vis=t},{name:t+".debugger.vector-y",value:this.Uis,YZt:t=>this.Uis=t},{name:t+".properties.speed.name",value:this.Les(),YZt:t=>this.Bas(t)},{name:t+".debugger.angle-of-motion",value:DT.Qn(this.jas())},{name:t+".properties.gravity.name",value:this.Zes(),YZt:t=>this.Kes(t)},{name:t+".properties.acceleration.name",value:this.Hes(),YZt:t=>this.Ues(t)},{name:t+".debugger.distance-travelled",value:this.zas()},{name:t+".properties.enabled.name",value:this.A_t(),YZt:t=>this.P_t(t)}]}]}vCt(){return self.Jas}};const zT=new WeakMap;self.Jas=class extends LT{constructor(){super(),zT.set(this,LT.pH().sq())}get speed(){return zT.get(this).Les()}set speed(t){kT.re(t),zT.get(this).Bas(t)}get acceleration(){return zT.get(this).Hes()}set acceleration(t){kT.re(t),zT.get(this).Ues(t)}get I1t(){return zT.get(this).Zes()}set I1t(t){kT.re(t),zT.get(this).Kes(t)}get qas(){return zT.get(this).jas()}set qas(t){kT.re(t),zT.get(this).Was(t)}get $as(){return zT.get(this).Uas()}set $as(t){zT.get(this).Vas(!!t)}get Xas(){return zT.get(this).zas()}set Xas(t){kT.re(t),zT.get(this).Has(t)}get isEnabled(){return zT.get(this).A_t()}set isEnabled(t){zT.get(this).P_t(t)}}}{const JT=self._s;JT.gut.Pas.QB={Bns(t,s){const i=Math.hypot(this.Vis,this.Uis);return JT.compare(i,t,s)},Yas(t,s){return JT.compare(this.zas(),t,s)},Nas:()=>!0,_u(){return this.A_t()}}}{const qT=self._s;qT.gut.Pas.yht={Kas(t){this.Bas(t)},y0t(t){this.Ues(t)},w0t(t){this.Kes(t)},Zas(t){this.Was(qT.Zn(t))},hk(t){if(!t)return;const s=t.HTt(this.fi);if(!s)return;const i=this.fi.DB(),e=this.Nc.RL(),n=this.Nc.RN(this.fi),r=qT.ir(0,0,this.Vis,this.Uis),h=e.BNt(this.fi,this.i9t,this.e9t,s);this.Vis=Math.cos(h)*r,this.Uis=Math.sin(h)*r,i.Tz(this.Vis*n,this.Uis*n),i.Mz(),this.Aas&&(i.EV(h),this.Fas=i.FV(),i.Mz()),0!==r&&(this.Ras?e.DNt(this.fi,this.Vis/r,this.Uis/r,Math.max(2.5*r*n,30))||e.NNt(this.fi,100):e.ONt(this.fi,this.Vis/r,this.Uis/r,Math.max(2.5*r*n,30),s))},Qas(t){this.Vas(t)},tls(t){this.Has(t)},IIt(t){this.P_t(t)},sls(){this.kas=!0}}}{const $T=self._s;$T.gut.Pas.wht={hrs(){return this.Les()},ars(){return this.Hes()},ils(){return $T.Qn(this.jas())},els(){return this.zas()},n2t(){return this.Zes()}}}{const XT=self._s;XT.gut.bRt=class extends XT.YPt{constructor(t){super(t)}zn(){super.zn()}}}{const YT=self._s;YT.gut.bRt.fEt=class extends YT.sRt{constructor(t){super(t)}zn(){super.zn()}SCt(){}}}{const KT=self._s,ZT=self.Ls,QT=self.hq,t_=0,s_=1,i_=new Set;KT.gut.bRt.Instance=class extends KT.eRt{constructor(t,s){super(t),this.IIt(!0),s&&(this.IIt(s[t_]),this.nst(s[s_]))}zn(){super.zn()}IIt(t){this.fi.$Ft(!!t)}_u(){return this.fi.qFt()}nst(t){const s=this.fi.oxt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}g$(){return this.fi.oxt().get("solidTags")||i_}nls(){return[...this.g$()].join(" ")}oG(){return{e:this._u()}}aG(t){this.IIt(t.e)}tot(t){if(t===t_)return this._u()}hot(t,s){t===t_&&this.IIt(s)}aPt(){return[{title:"$"+this.cq().Pc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this._u(),YZt:t=>this.IIt(t)},{name:"behaviors.solid.properties.tags.name",value:this.nls(),YZt:t=>this.nst(t)}]}]}vCt(){return self.rls}};const e_=new WeakMap;self.rls=class extends QT{constructor(){super(),e_.set(this,QT.pH().sq())}set isEnabled(t){e_.get(this).IIt(!!t)}get isEnabled(){return e_.get(this)._u()}set tags(t){ZT.le(t),e_.get(this).nst(t)}get tags(){return e_.get(this).nls()}}}self._s.gut.bRt.QB={_u(){return this._u()}},self._s.gut.bRt.yht={IIt(t){this.IIt(t)},nst(t){this.nst(t)}},self._s.gut.bRt.wht={};{let n_=function(t,s){return"number"==typeof t&&"number"==typeof s},r_=function(t,s){return n_(t,s)?t+s:t},h_=function(t,s){return n_(t,s)?t-s:t},o_=function(t,s){return n_(t,s)?t*s:t},a_=function(t,s){return n_(t,s)?t/s:t},l_=function(t,s){return n_(t,s)?t%s:t},u_=function(t,s){return n_(t,s)?Math.pow(t,s):t},c_=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},f_=function(t,s){return n_(t,s)?t||s?1:0:t};0;const d_=self._s;self.JMt=[()=>"Start",()=>180,t=>{const s=t.iGt(0).zMt();return()=>s.Int()},()=>"gameover",()=>"BG",()=>"AjustarHSL",()=>0,()=>100,()=>"save",()=>"music",t=>{const s=t.iGt(0).MMt();return()=>s()},()=>4,t=>{const s=t.iGt(0).zMt();return()=>c_("Best: ",s.Int())},()=>"Player",()=>"down",()=>150,()=>300,t=>{const s=t.iGt(0),i=t.iGt(1),e=t.iGt(2),n=t.iGt(3);return()=>100-d_.ir(s.CMt(),i.CMt(),e.CMt(),n.CMt())/3},()=>"hit",()=>"start",()=>"run",()=>"idle",()=>.5,()=>"main",()=>1,()=>"",()=>5,()=>6,()=>518,()=>"Commands",()=>"jump",()=>.75,()=>2,()=>7,()=>"wait",()=>-1920,()=>"Enemies",t=>{const s=t.iGt(0).MMt();return()=>s(0,1)},()=>2300,()=>800,t=>{const s=t.iGt(0).MMt();return()=>s("pumpkin","trunk")},()=>"ghost",t=>{const s=t.iGt(0).zMt();return()=>1.7*s.Int()},()=>1.7,()=>600,t=>{const s=t.iGt(0).MMt();return()=>s("bat","eye")},t=>{const s=t.iGt(0).zMt(),i=t.iGt(1);return()=>s.Int()*i.OMt()},t=>{const s=t.iGt(0).zMt(),i=t.iGt(1);return()=>s.Int()*i.EMt()},t=>{const s=t.iGt(0);return()=>s.CMt()},()=>-600,()=>"Candys",()=>2e3,t=>{const s=t.iGt(0).MMt();return()=>s(800,400)},t=>{const s=t.iGt(0).MMt(),i=t.iGt(1).MMt(),e=t.iGt(2);return()=>s(i(0,e.CMt()))},()=>3,()=>"Game_State",()=>700,()=>900,()=>10,()=>15,()=>90,()=>16,()=>110,()=>"Buttons",()=>.8,()=>.1,()=>"ON",()=>"OFF",()=>"Sound",()=>-10,()=>-20]}var _t=self._s;self.hzt=function(){return[_t.sW.Nrt,_t.gut.Ks,_t.sW.zQt,_t.sW.c3t,_t.sW.Text,_t.gut.mut,_t.gut.Aos,_t.gut.Pas,_t.gut.bRt,_t.sW.Keyboard,_t.sW.Touch,_t.sW.o9t,_t.sW.Audio,_t.sW.tW.QB.wwt,_t.sW.tW.QB.z4,_t.gut.Pas.yht.Zas,_t.gut.Pas.yht.Kas,_t.sW.tW.yht.vXt,_t.sW.tW.yht.kXt,_t.sW.o9t.yht.H9t,_t.sW.Audio.QB.xss,_t.sW.o9t.QB.P9t,_t.sW.o9t.yht.j9t,_t.sW.o9t.QB.G9t,_t.sW.tW.yht.H$t,_t.sW.o9t.wht.X9t,_t.sW.Text.QB.E_t,_t.sW.Text.yht.Vc,_t.sW.tW.QB.l$t,_t.sW.Nrt.yht.fTt,_t.sW.Nrt.QB.dQt,_t.sW.Nrt.yht.Ug,_t.sW.tW.QB.ivt,_t.sW.Nrt.yht.vF,_t.sW.Nrt.wht.aIt,_t.sW.Nrt.wht.lIt,_t.sW.Nrt.yht.KZt,_t.gut.Ks.QB.Wns,_t.sW.tW.QB.w$t,_t.sW.tW.yht.dh,_t.sW.tW.QB.u$t,_t.sW.Nrt.yht.bQt,_t.sW.Nrt.yht.V_t,_t.sW.Nrt.QB.E_t,_t.gut.mut.yht.whs,_t.gut.Ks.yht.Xns,_t.sW.Touch.QB.$8t,_t.sW.c3t.QB.E_t,_t.sW.Keyboard.QB.Q6t,_t.sW.Touch.QB.K8t,_t.sW.Keyboard.QB.Z6t,_t.sW.c3t.QB.rTt,_t.sW.c3t.yht.XM,_t.sW.tW.wht.vMt,_t.sW.tW.yht.K$t,_t.sW.Nrt.yht.z_t,_t.sW.tW.QB.Ud,_t.sW.Nrt.QB.s_t,_t.sW.Nrt.wht.FQt,_t.sW.tW.yht.J$t,_t.sW.Nrt.yht.ZZt,_t.sW.Nrt.QB.rTt,_t.sW.tW.wht.nYt,_t.sW.tW.wht.random,_t.sW.Nrt.wht.EQt,_t.sW.tW.yht.z$t,_t.sW.o9t.yht.N9t,_t.sW.tW.QB.c$t,_t.gut.mut.yht.bhs,_t.sW.tW.yht.gXt,_t.sW.tW.yht.SXt,_t.sW.Audio.yht.Wss,_t.sW.Audio.yht.Play,_t.sW.Audio.yht.n$]},self.Czt=[{hls:0},{ols:0},{als:0},{lls:0},{uls:0},{cls:0},{fls:0},{n:0},{dls:0},{pls:0},{mls:0},{gls:0},{yls:0},{wls:0},{Sls:0},{vls:0},{bls:0},{Mls:0},{Gls:0},{xls:0},{Tls:0},{_ls:0},{Ils:0},{Cls:0},{Pls:0},{Rls:0},{Als:0},{Els:0},{Fls:0},{Ols:0},{Dls:0},{kls:0},{Lls:0},{Nls:0},{Bls:0},{Wls:0},{jls:0},{speed:0},{Vls:0},{Uls:0},{Hls:0},{zls:0},{Jls:0},{select:0},{animation:0},{alt:0},{qls:0},{$ls:0}],self.Xls={hls:class extends self.iQt{},als:class extends self.iQt{},lls:class extends self.iQt{},uls:class extends self.m1t{},fls:class extends self.Z3t{},dls:class extends self.Y4t{},pls:class extends self.iQt{},mls:class extends self.iQt{},yls:class extends self.iQt{},wls:class extends self.Z3t{},vls:class extends self.iQt{},bls:class extends self.iQt{},Mls:class extends self.Z3t{},Gls:class extends self.Z3t{},xls:class extends self.Z3t{},Tls:class extends self.Z3t{},_ls:class extends self.Z3t{},Ils:class extends self.Z3t{},Cls:class extends self.iQt{},Rls:class extends self.iQt{},Els:class extends self.Z3t{},Fls:class extends self.iQt{},Ols:class extends self.iQt{},Dls:class extends self.iQt{},kls:class extends self.uH{},Lls:class extends self.uH{},Nls:class extends self.uH{},Bls:class extends self.uH{},Wls:class extends self.Z3t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/